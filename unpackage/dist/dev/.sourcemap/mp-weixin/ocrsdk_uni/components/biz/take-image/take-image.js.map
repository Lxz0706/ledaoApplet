{"version":3,"sources":["webpack:///D:/ledaoApplet/ocrsdk_uni/components/biz/take-image/take-image.vue?ef14","webpack:///D:/ledaoApplet/ocrsdk_uni/components/biz/take-image/take-image.vue?4e5f","webpack:///D:/ledaoApplet/ocrsdk_uni/components/biz/take-image/take-image.vue?df4c","webpack:///D:/ledaoApplet/ocrsdk_uni/components/biz/take-image/take-image.vue?7eef","uni-app:///ocrsdk_uni/components/biz/take-image/take-image.vue","webpack:///D:/ledaoApplet/ocrsdk_uni/components/biz/take-image/take-image.vue?c71c","webpack:///D:/ledaoApplet/ocrsdk_uni/components/biz/take-image/take-image.vue?4674"],"names":[],"mappings":"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","file":"ocrsdk_uni/components/biz/take-image/take-image.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./take-image.vue?vue&type=template&id=1fecd9be&\"\nvar renderjs\nimport script from \"./take-image.vue?vue&type=script&lang=js&\"\nexport * from \"./take-image.vue?vue&type=script&lang=js&\"\nimport style0 from \"./take-image.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"ocrsdk_uni/components/biz/take-image/take-image.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./take-image.vue?vue&type=template&id=1fecd9be&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./take-image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./take-image.vue?vue&type=script&lang=js&\"","<template>\r\n<view class=\"ocr-photograph-panel\">\n  <camera class=\"ocr-photograph-camera\" :flash=\"isTorchOn ? 'torch' : 'off'\">\n    <cover-view class=\"ocr-photograph-selection-box\">\n      <cover-view :class=\"'ocr-photograph-selection-area vertical ocr-photograph-selection-area-' + theme\">\n        <cover-view :class=\"'ocr-photograph-bar ocr-photograph-bar-' + theme\" v-if=\"isAutoMode\" :animation=\"barMove\" @transitionend=\"reAnimation\"></cover-view>\n        <cover-view v-if=\"category==='ID_CARD' && side==='FRONT' || category==='ID_CARD_FRONT'\" style=\"margin-top:30rpx;margin-left:320rpx;\">\n          <cover-image src=\"https://beta.gtimg.com/GodIdent/huiyan/img/ico-head.png\" style=\"width:140px;height:157px;\"></cover-image>\n        </cover-view>\n        <cover-view v-if=\"category==='ID_CARD' && side==='BACK' || category==='ID_CARD_BACK'\" style=\"margin-top:20rpx;margin-left:10rpx;\">\n          <cover-image src=\"https://beta.gtimg.com/GodIdent/huiyan/img/ico-guohui.png\" style=\"width:76px;height:79px;\"></cover-image>\n        </cover-view>\n      </cover-view>\n\n      <cover-view class=\"ocr-photograph-tips\">\n        <cover-image class=\"icon\" src=\"https://ocr-static-1254418846.file.myqcloud.com/mpsdk/images/warning.png\"></cover-image>\n        <cover-view class=\"text\">证件请避免折角、遮挡和反光</cover-view>\n      </cover-view>\n\n      <cover-view class=\"ocr-photograph-btns\">\n        <cover-image v-if=\"!disableAlbum\" class=\"ocr-photograph-pictuer-btn\" src=\"https://ocr-static-1254418846.file.myqcloud.com/mpsdk/images/chooseImg.png\" @tap=\"chooseImage\"></cover-image>\n        <cover-image v-if=\"!isAutoMode\" :class=\"'ocr-photograph-take-btn ocr-photograph-take-btn-' + theme\" :src=\"theme==='native' ? 'https://ocr-static-1254418846.file.myqcloud.com/mpsdk/images/takePicNative.png' : 'https://ocr-static-1254418846.file.myqcloud.com/mpsdk/images/takePicPrimary.png'\" @tap=\"takeImage\">\n        </cover-image>\n        <cover-image class=\"ocr-photograph-flash-btn\" :src=\"isTorchOn ? 'https://ocr-static-1254418846.file.myqcloud.com/mpsdk/images/flashOn.png' : 'https://ocr-static-1254418846.file.myqcloud.com/mpsdk/images/flashOff.png'\" @tap=\"toggleTorch\"></cover-image>\n      </cover-view>\n    </cover-view>\n  </camera>\n</view>\r\n</template>\r\n\r\n<script>\r\nconst {\n  isStable\n} = require(\"./utils.js\");\r\nconst compareVersion = require(\"../../../utils/compareVersion.js\");\r\n\r\nexport default {\n  data() {\n    return {\n      isAutoMode: false,\n      maxTry: 3,\n      autoCount: 0,\n      isGyroscopeOn: false,\n      isTorchOn: false,\n      disableAlbum: false,\n      barMove: \"\",\n      theme: \"\",\n      category: \"\"\n    };\n  },\n\n  components: {},\n  props: {\n    side: {\n      type: String\n    }\n  },\n\n  beforeMount() {\n    const {\n      theme,\n      cameraConfig,\n      ocrType\n    } = wx.clientInfo;\n    const currentVersion = wx.getSystemInfoSync().SDKVersion;\n    const supportAutoMode = compareVersion(currentVersion, '2.12.2') >= 0;\n    const isAutoMode = !!(supportAutoMode && cameraConfig && cameraConfig.autoMode);\n    const maxTry = cameraConfig && cameraConfig.maxTry ? cameraConfig.maxTry : 3;\n    const disableAlbum = !!(cameraConfig && cameraConfig.disableAlbum);\n    this.setData({\n      theme,\n      isAutoMode,\n      maxTry,\n      disableAlbum,\n      category: ocrType\n    });\n    setTimeout(() => {\n      this.startAuto();\n\n      if (isAutoMode) {\n        this.barDown = true;\n        this.barAnimation = wx.createAnimation({\n          duration: 1500,\n          delay: 0,\n          timingFunction: 'linear'\n        });\n        this.reAnimation();\n      }\n\n      ;\n    }, 2000);\n  },\n\n  destroyed() {\n    this.setData({\n      isTorchOn: false\n    });\n    this.endAuto();\n  },\n\n  methods: {\n    /* 自动识别模式下的动画效果 */\n    reAnimation() {\n      const curBarDown = this.barDown;\n\n      if (curBarDown) {\n        this.barAnimation.translateY('390rpx').step();\n        this.barDown = !curBarDown;\n      } else {\n        this.barAnimation.translateY(0).step();\n        this.barDown = !curBarDown;\n      }\n\n      this.setData({\n        barMove: this.barAnimation.export()\n      });\n    },\n\n    /* 打开陀螺仪，开始自动识别 */\n    startAuto() {\n      const {\n        isAutoMode,\n        maxTry,\n        autoCount\n      } = this;\n\n      if (!isAutoMode) {\n        return;\n      }\n\n      ;\n\n      if (autoCount >= maxTry) {\n        const self = this;\n        wx.showModal({\n          title: '提示',\n          content: '未能识别到，是否切换到拍照模式？',\n          confirmText: '切换模式',\n\n          success(res) {\n            if (res.confirm) {\n              self.setData({\n                isAutoMode: false\n              });\n            } else if (res.cancel) {\n              self.restartAuto();\n            }\n          }\n\n        });\n        return;\n      }\n\n      ;\n      wx.startGyroscope({\n        success: () => {\n          this.setData({\n            isGyroscopeOn: true\n          });\n        }\n      });\n      wx.onGyroscopeChange(res => {\n        this.autoTake(res);\n      });\n    },\n\n    /* 自动拍摄 */\n    async autoTake(res) {\n      const {\n        autoCount\n      } = this;\n\n      if (isStable(res)) {\n        this.endAuto();\n        this.setData({\n          autoCount: autoCount + 1\n        }, () => {\n          this.takeImage();\n        });\n      }\n\n      ;\n    },\n\n    /* 关闭陀螺仪 */\n    endAuto() {\n      const {\n        isGyroscopeOn\n      } = this;\n\n      if (isGyroscopeOn) {\n        wx.offGyroscopeChange();\n        wx.stopGyroscope({\n          success: () => {\n            this.setData({\n              isGyroscopeOn: false\n            });\n          }\n        });\n      }\n    },\n\n    /* 重启自动模式 */\n    restartAuto() {\n      this.setData({\n        autoCount: 0\n      });\n      setTimeout(() => {\n        this.startAuto();\n      }, 2000);\n    },\n\n    /* 从相册选择照片 */\n    chooseImage() {\n      this.endAuto();\n      this.setData({\n        isAutoMode: false\n      });\n      const {\n        side\n      } = this;\n      wx.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album'],\n        success: res => {\n          const detail = {\n            filePath: res.tempFilePaths[0],\n            side\n          };\n          this.$emit('onImageReady', {\n            detail: detail\n          });\n        }\n      });\n    },\n\n    /* 拍摄照片 */\n    takeImage() {\n      const {\n        side\n      } = this;\n      const {\n        isAutoMode\n      } = this;\n      const ctx = wx.createCameraContext();\n      ctx.takePhoto({\n        quality: 'normal',\n        success: res => {\n          /* 通知页面图片已准备好 */\n          const detail = {\n            filePath: res.tempImagePath,\n            side,\n            isAuto: isAutoMode\n          };\n          this.$emit('onImageReady', {\n            detail: detail\n          });\n        }\n      });\n    },\n\n    /* 手电筒开关 */\n    toggleTorch() {\n      if (wx.canIUse('camera.flash.torch')) {\n        const {\n          isTorchOn\n        } = this;\n        this.setData({\n          isTorchOn: !isTorchOn\n        });\n      } else {\n        wx.showToast({\n          title: '该版本暂时不支持手电筒功能',\n          icon: 'none',\n          duration: 3000\n        });\n      }\n    }\n\n  }\n};\r\n</script>\r\n<style>\r\n@import \"./take-image.css\";\r\n</style>","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./take-image.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./take-image.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1631879975333\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
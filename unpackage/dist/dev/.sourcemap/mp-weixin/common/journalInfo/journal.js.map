{"version":3,"sources":["uni-app:///main.js","webpack:///D:/project/ledaoApplet/common/journalInfo/journal.vue?a09e","webpack:///D:/project/ledaoApplet/common/journalInfo/journal.vue?8c1a","webpack:///D:/project/ledaoApplet/common/journalInfo/journal.vue?9391","webpack:///D:/project/ledaoApplet/common/journalInfo/journal.vue?7f04","uni-app:///common/journalInfo/journal.vue","webpack:///D:/project/ledaoApplet/common/journalInfo/journal.vue?5ff5","webpack:///D:/project/ledaoApplet/common/journalInfo/journal.vue?bee0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniForms","uniFormsItem","uniEasyinput","uniIcons","uniDateformat","uniFab","uniPopup","uniDrawer","uniRow","uniCol","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","_isMounted","e0","$event","showAdd","isChat","showProRight","recyclableRender","staticRenderFns","_withStripped","name","data","formData","workDetail","chatDetail","proId","projectName","userName","id","rules","required","errorMessage","userList","chooseUserVals","isManager","chooseProVal","projectList","stepOption","fileList","isShowTitle","dateTimeDis","chatDetailA","setFocus","indexV","Reply","loginName","detailsList","journalId","journalCommentId","projectNameSearch","showChatAll","proIds","createBy","replyName","replyBy","holder","journalTimeList","journalTimeMsg","projectType","startTime","enTime","watch","onLoad","mounted","_this","methods","init","getChatDetailList","commentTime","uni","setTimeout","title","icon","duration","url","success","page","jonClick","fabClick","getProList","mask","position","submit","submitJournal","getCurrentPages","pop","submitIsChat","huifuClick","send","closeProDrawer","inputFocus","choosePro","that","searchPro","getJournalTime","str","st","checkAuditTime"],"mappings":"qJAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,2IACIC,EADJ,QAUIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,iCACZ,aAAAF,E,0CCxBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,SAAU,WACR,OAAO,wHAITC,aAAc,WACZ,OAAO,kIAITC,aAAc,WACZ,OAAO,gGAITC,SAAU,WACR,OAAO,wHAITC,cAAe,WACb,OAAO,uIAITC,OAAQ,WACN,OAAO,8EAITC,SAAU,WACR,OAAO,oFAITC,UAAW,WACT,OAAO,uFAITC,OAAQ,WACN,OAAO,8EAITC,OAAQ,WACN,OAAO,+EAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,GACdL,EAAIM,aACPN,EAAIO,GAAK,SAAUC,IAChBR,EAAIS,SAA2B,GAAdT,EAAIU,QAAgBV,EAAIW,kBAI5CC,GAAmB,EACnBC,EAAkB,GACtBd,EAAOe,eAAgB,G,iCCnFvB,yHAAiqB,eAAG,G,6uBC+GpqB,MAKA,CACAC,eACAC,gBACA,OAEAC,UACAC,cACAC,cACAC,SACAC,eACAC,YACAC,OAGAC,OACAN,YACAM,QACAC,YACAC,qBAGAL,aACAG,QACAC,YACAC,sBAIAC,YACAC,kBACAlB,SACAmB,aACAC,gBACAC,eACAC,cACAC,YACAC,eACAC,eACAC,eACAC,YACAC,UACAC,SACAC,aACAC,eACAC,aACAC,oBACAC,qBACAC,eACApC,WACAqC,UACAC,YACAC,aACAC,WACAC,UACAC,mBACAC,kBACAC,eACAC,aACAC,YAGAC,OACAN,kBACA,oCAIAO,mBACA,WACA,yBACA,gBACA,oBAEA,qBACA,yBACA,6CAGAC,mBACA,sBACA,WACAC,UAGAC,SACAC,gBAAA,0IACA,aACA,sBAEAF,IACA9D,0CAAA,0CALA,IAQAiE,6BAAA,oIACA,sDACApB,+CACAtB,eACA2C,4CACA,CACA,mDACA,uCACA,kBACA,2DACAC,oCACAC,uBACAD,aACAE,eACAC,aACAC,eAEAH,uBACAD,aACAK,wBACAC,mBACA,8BACA,GACAC,gBAGA,OACA,OAEA,qBACA,yBACA,yBACA,iBACA,uCAGA,0CApCA,IAuCAC,oBAAA,WACA,4CACA,+BACA,sBACA,2BACA,2CACA,4BACA,qBACA,0BACA,CACA,mDACA,uCACA,kBACA,2DACAR,oCACAC,uBACAD,aACAE,eACAC,aACAC,eAEAH,uBACAD,aACAK,wBACAC,mBACA,8BACA,GACAC,gBAGA,OACA,MAEA,WACA,0BAKAE,oBACAT,cACAK,sBAIAK,sBACA,WACAV,eACAE,eACAS,UAEA,kDACAtD,oCACA,CACA,mDACA,uCACA,kBACA,2DACA2C,oCACAC,uBACAD,aACAE,eACAC,aACAC,eAEAH,uBACAD,aACAK,wBACAC,mBACA,8BACA,GACAC,gBAGA,OACA,OAEA,YACA,gBACAZ,sBAEAA,iBACAA,iBACAK,aACAG,aACAS,kBACAV,kBAIAF,qBAKAa,kBACA,WACAZ,uBACAN,oBACA,MAEAmB,yBAAA,oIACA,0CACA,6CACA,YACA,CACA,mDACA,uCACA,kBACA,2CACA,kBACAb,uBACAD,aACAE,eACAC,aACAC,eAEAH,uBACAD,aACAK,wBACAC,mBACA,MACAS,kBACAC,MACA,GACAT,gBAGA,OACA,UAEA,aACA,aACAN,uBACAD,aACAE,aACAC,eACAC,iBAEA,SACA,CACAvE,mBACA,YACAoE,uBACAD,aACAE,QACAC,YACAQ,QACAP,iBAEA,YAIA,mBACAvE,wBACA,0CAvDA,IA0DAoF,wBAAA,WACA,+DACAjB,aACAE,iBACAE,aACAD,cAGA,6CACA,yCACA,+CACA,eACA,iCACA,WACA,2CACA,0BACA,CACA,mDACA,uCACA,kBACA,wCACA,kBACAF,uBACAD,aACAE,eACAC,eAEAF,uBACAD,aACAK,wBACAC,mBACA,MACAS,kBACAC,MACA,GACAT,gBAGA,OACA,MAEA,YACA,0BACA,uBAEA1E,+BAGA,wBAIAqF,6BACA,gCACA,iBACA,cACA,wBACA,eACA,iBACA,qBAGAC,gBACA,eACAnB,aACAE,iBACAE,aACAD,cAGA,gBAGA,cACA,0BAGAxD,wBACA,kBACA,gCAGAyE,0BACA,iCAGAC,sBACA,kCACArB,aACAE,uCACAC,eAIAmB,sBACA,WACAC,iDACAnE,mBACA,CACA,mDACA,uCACA,kBACA,wCACA,kBACA6C,uBACAD,aACAE,eACAC,aACAC,eAEAH,uBACAD,aACAK,wBACAC,mBACA,8BACA,GACAC,gBAGA,OACA,KAEA,gBACAP,aACAE,yBACAI,oBACA,WACAzE,sBACA,mBACA0F,6BAEAA,iCACAlE,YAEAkE,gCACArE,WACAqE,qCACAA,2BACAA,8BACA,aAMAA,qCACAA,6BACAA,qCACAA,kCAMAC,qBACA,mBAEAC,0BACA,WACA,0DACA,mDACA,uCACA,kBACA9B,yBACA,SACA,oBACA+B,wBACA/B,kCAEA,SACA,0BACAgC,uBAEA,wCACAhC,+CACAA,4CACAA,sGACAK,oBAGA4B,6BACA/F,oCAEA,eAIA,GAFA,kFAEA,uBACA,wBACA,cAEA,MACA,iBACA,IAEA,KAIA,c,6DC9lBA,yHAAwwC,eAAG,G,uDCA3wC,yHAAs8B,eAAG,G","file":"common/journalInfo/journal.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './common/journalInfo/journal.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./journal.vue?vue&type=template&id=63a98d17&scoped=true&\"\nvar renderjs\nimport script from \"./journal.vue?vue&type=script&lang=js&\"\nexport * from \"./journal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./journal.vue?vue&type=style&index=0&id=63a98d17&lang=scss&scoped=true&\"\nimport style1 from \"./journal.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63a98d17\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"common/journalInfo/journal.vue\"\nexport default component.exports","export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=template&id=63a98d17&scoped=true&\"","var components\ntry {\n  components = {\n    uniForms: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniDateformat: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    },\n    uniFab: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-fab/components/uni-fab/uni-fab\" */ \"@/uni_modules/uni-fab/components/uni-fab/uni-fab.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniDrawer: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-drawer/components/uni-drawer/uni-drawer\" */ \"@/uni_modules/uni-drawer/components/uni-drawer/uni-drawer.vue\"\n      )\n    },\n    uniRow: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-row/components/uni-row/uni-row\" */ \"@/uni_modules/uni-row/components/uni-row/uni-row.vue\"\n      )\n    },\n    uniCol: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-row/components/uni-col/uni-col\" */ \"@/uni_modules/uni-row/components/uni-col/uni-col.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      !_vm.showAdd && !(_vm.isChat == 1) && _vm.showProRight()\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<template>\r\n\t\t\t<view class=\"flow-container\">\r\n\t\t\t\t<uni-forms ref=\"form\" :modelValue=\"formData\" :rules=\"rules\" label-width=\"100\">\r\n\t\t\t\t\t<uni-forms-item required label=\"项目名称\" name=\"projectName\">\r\n\t\t\t\t\t\t<view class=\"choose_css\" @click=\"!showAdd && !(isChat == 1) && showProRight()\">\r\n\t\t\t\t\t\t\t<view class=\"isNotShow\">\r\n\t\t\t\t\t\t\t\t<uni-easyinput v-show=\"false\" v-model=\"formData.projectName\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<block v-if=\"formData.projectName == ''\">请选择</block>\r\n\t\t\t\t\t\t\t<block v-else>{{formData.projectName}}</block>\r\n\t\t\t\t\t\t\t<uni-icons type=\"forward\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</uni-forms-item>\r\n\t\t\t\t\t<uni-forms-item required label=\"日志填写\" name=\"workDetail\">\r\n\t\t\t\t\t\t<view class=\"work-input\" @click=\"inputFocus\">\r\n\t\t\t\t\t\t\t<uni-easyinput maxlength=\"-1\" :autoHeight=\"true\" v-model=\"formData.workDetail\"\r\n\t\t\t\t\t\t\t\t:disabled=\"dateTimeDis || showAdd || isChat == 1\" placeholder=\"请填写日志...\"\r\n\t\t\t\t\t\t\t\ttype=\"textarea\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</uni-forms-item>\r\n\t\t\t\t\t<view class=\"chatAll\" v-if=\"isChat == 1 && showChatAll\">\r\n\t\t\t\t\t\t<view class=\"chatDetailAll\" v-for=\"(item,index) in chatDetailA\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view v-if=\"item.remarks1 == 0\"\r\n\t\t\t\t\t\t\t\t@click=\"huifuClick(index,item.id,item.createBy,item.userName)\">\r\n\t\t\t\t\t\t\t\t<view class=\"list-title\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #3B9DEC;\">{{item.userName}}</view>\r\n\t\t\t\t\t\t\t\t\t<uni-dateformat class=\"right\" :date=\"item.createTimeComment\"\r\n\t\t\t\t\t\t\t\t\t\tformat=\"yyyy/MM/dd hh:mm\" :threshold=\"[60000, 3600000]\"></uni-dateformat>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"list-title\">\r\n\t\t\t\t\t\t\t\t\t{{item.chatDetail}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-else @click=\"huifuClick(index,item.id,item.createBy,item.userName)\">\r\n\t\t\t\t\t\t\t\t<view class=\"list-title\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"text-align: left;color: #3B9DEC;\">{{item.userName}}</view>\r\n\t\t\t\t\t\t\t\t\t<uni-dateformat class=\"right\" :date=\"item.createTimeComment\"\r\n\t\t\t\t\t\t\t\t\t\tformat=\"yyyy/MM/dd hh:mm\" :threshold=\"[60000, 3600000]\"></uni-dateformat>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"list-title\" v-if=\"item.replyName !=null\">\r\n\t\t\t\t\t\t\t\t\t回复 {{item.replyName}} ：{{item.chatDetail}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"list-title\" v-else>\r\n\t\t\t\t\t\t\t\t\t回复 ：{{item.chatDetail}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"hr\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t<uni-forms-item label=\"评论填写\" v-if=\"isChat == 1\" name=\"chatDetail\">\r\n\t\t\t\t\t\t<uni-easyinput ref=\"chatDetail\" v-model=\"formData.chatDetail\" placeholder=\"请填写评论...\"\r\n\t\t\t\t\t\t\ttype=\"textarea\" />\r\n\t\t\t\t\t</uni-forms-item>\r\n\t\t\t\t</uni-forms>\r\n\t\t\t\t<view class=\"footer\">\r\n\t\t\t\t\t<button v-if=\"isChat == 1\" type=\"primary\" @click=\"submitIsChat()\">提交</button>\r\n\t\t\t\t\t<button v-else type=\"primary\" :disabled=\"showAdd\" @click=\"submit()\">提交</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fab-but\" v-if=\"showAdd\">\r\n\t\t\t\t\t<uni-fab :popMenu=\"false\" :pattern=\"pattern\" horizontal=\"right\" vertical=\"bottom\"\r\n\t\t\t\t\t\t@fabClick=\"fabClick\"></uni-fab>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<uni-popup ref=\"popup\" type=\"bottom\">\r\n\t\t\t\t<view class=\"pop\">\r\n\t\t\t\t\t<input type=\"text\" :focus=\"setFocus\" v-model=\"Reply\" :placeholder=\"holder\">\r\n\t\t\t\t\t<button type=\"default\" @click=\"send\">回复</button>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-popup>\r\n\t\t\t<uni-drawer ref=\"showProRight\" mode=\"right\" :mask-click=\"false\" :width=\"350\">\r\n\t\t\t\t<scroll-view style=\"height: 100%;\" scroll-y=\"true\">\r\n\t\t\t\t\t<uni-row class=\"demo-uni-row\" style=\"margin-top: 20rpx; margin-bottom: 20rpx;\">\r\n\t\t\t\t\t\t<uni-col :span=\"8\">\r\n\t\t\t\t\t\t\t<view class=\"menu_text\" @click=\"closeProDrawer\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"back\" size=\"30\">返回</uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"16\">\r\n\t\t\t\t\t\t\t<view class=\"menu_text\">选择项目</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t\t<uni-row class=\"demo-uni-row\">\r\n\t\t\t\t\t\t<uni-col :span=\"8\">\r\n\t\t\t\t\t\t\t<view style=\"padding-left: 30rpx\">项目名称</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"8\">\r\n\t\t\t\t\t\t\t<uni-easyinput v-model=\"projectNameSearch\" type=\"text\" />\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"8\">\r\n\t\t\t\t\t\t\t<button @click=\"searchPro\" size=\"mini\" type=\"primary\">搜索</button>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t\t<uni-row class=\"demo-uni-row\" v-for=\"(item,index) in projectList\" :key=\"index\"\r\n\t\t\t\t\t\t@click.native=\"choosePro(item)\">\r\n\t\t\t\t\t\t<uni-col :span=\"20\">\r\n\t\t\t\t\t\t\t<view class=\"content\">{{item.projectName}}</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"4\" v-if=\"item.isWrite == 'y' ? true : false\">\r\n\t\t\t\t\t\t\t<icon type=\"success_no_circle\" size=\"26\" />\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</uni-drawer>\r\n\t\t</template>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * author        chenjie\r\n\t * time          2021-9-1 2:29:52 ?F10: PM?\r\n\t * description   日志填写\r\n\t */\r\n\texport default {\r\n\t\tname: 'journal',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 简单信息表单数据\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tworkDetail: '',\r\n\t\t\t\t\tchatDetail: '',\r\n\t\t\t\t\tproId: '',\r\n\t\t\t\t\tprojectName: '',\r\n\t\t\t\t\tuserName: [],\r\n\t\t\t\t\tid: ''\r\n\t\t\t\t\t// shared: ''\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\tworkDetail: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '必填'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprojectName: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '必填'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tuserList: [],\r\n\t\t\t\tchooseUserVals: '',\r\n\t\t\t\tisChat: 0,\r\n\t\t\t\tisManager: false,\r\n\t\t\t\tchooseProVal: {},\r\n\t\t\t\tprojectList: [],\r\n\t\t\t\tstepOption: [],\r\n\t\t\t\tfileList: [],\r\n\t\t\t\tisShowTitle: false,\r\n\t\t\t\tdateTimeDis: false,\r\n\t\t\t\tchatDetailA: [],\r\n\t\t\t\tsetFocus: false,\r\n\t\t\t\tindexV: '',\r\n\t\t\t\tReply: '',\r\n\t\t\t\tloginName: '',\r\n\t\t\t\tdetailsList: [],\r\n\t\t\t\tjournalId: '',\r\n\t\t\t\tjournalCommentId: '',\r\n\t\t\t\tprojectNameSearch: '',\r\n\t\t\t\tshowChatAll: false,\r\n\t\t\t\tshowAdd: false,\r\n\t\t\t\tproIds: '',\r\n\t\t\t\tcreateBy: '',\r\n\t\t\t\treplyName: '',\r\n\t\t\t\treplyBy: '',\r\n\t\t\t\tholder: '',\r\n\t\t\t\tjournalTimeList: [],\r\n\t\t\t\tjournalTimeMsg: '',\r\n\t\t\t\tprojectType: '',\r\n\t\t\t\tstartTime: '',\r\n\t\t\t\tenTime: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tholder: function() {\r\n\t\t\t\tthis.holder = '回复  ' + this.replyName;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonLoad: function(options) {\r\n\t\t\tif (options.item) {\r\n\t\t\t\tconst val = JSON.parse(options.item)\r\n\t\t\t\tthis.formData = val\r\n\t\t\t\tthis.proIds = val.proId\r\n\t\t\t}\r\n\t\t\tthis.isChat = options.isChat;\r\n\t\t\tthis.createBy = options.createBy;\r\n\t\t\tthis.loginName = uni.getStorageSync('userName');\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getJournalTime();\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.init();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tif (this.isChat == 1) {\r\n\t\t\t\t\tthis.getChatDetailList()\r\n\t\t\t\t}\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tconsole.log(_this.startTime + \"=====\" + _this.enTime);\r\n\t\t\t},\r\n\t\t\t// 获取评论列表\r\n\t\t\tasync getChatDetailList() {\r\n\t\t\t\tthis.$request(\"/system/comment/listCommentDtail\", \"POST\", {\r\n\t\t\t\t\tjournalId: this.formData.id == null ? '' : this.formData.id, // 评论id，无评论则为空\r\n\t\t\t\t\tproId: this.proIds,\r\n\t\t\t\t\tcommentTime: uni.getStorageSync('datePeople')\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res == 'login' || (res.code == 500 && res.msg.includes(\"Authentication\"))) {\r\n\t\t\t\t\t\tuni.setStorageSync('loginSuccess', false)\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '登录已失效！',\r\n\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/home/index\",\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\tlet page = getCurrentPages().pop()\r\n\t\t\t\t\t\t\t\t\t\tif (!page) return\r\n\t\t\t\t\t\t\t\t\t\tpage.onLoad()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.chatDetailA = res.data\r\n\t\t\t\t\t\tthis.formData.chatDetail = ''\r\n\t\t\t\t\t\tif (this.chatDetailA.length > 0) {\r\n\t\t\t\t\t\t\tthis.showChatAll = true\r\n\t\t\t\t\t\t\tthis.formData.id = res.data[0].journalId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 回复\r\n\t\t\tjonClick() {\r\n\t\t\t\tthis.$request(\"/system/comment/add\", \"POST\", {\r\n\t\t\t\t\t\"parentId\": this.journalCommentId,\r\n\t\t\t\t\t\"chatDetail\": this.Reply,\r\n\t\t\t\t\t\"journalId\": this.formData.id,\r\n\t\t\t\t\t\"commentTime\": uni.getStorageSync('datePeople'),\r\n\t\t\t\t\t\"temporaryName\": this.createBy,\r\n\t\t\t\t\t\"replyBy\": this.replyBy,\r\n\t\t\t\t\t\"replyName\": this.replyName\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res == 'login' || (res.code == 500 && res.msg.includes(\"Authentication\"))) {\r\n\t\t\t\t\t\tuni.setStorageSync('loginSuccess', false)\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '登录已失效！',\r\n\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/home/index\",\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\tlet page = getCurrentPages().pop()\r\n\t\t\t\t\t\t\t\t\t\tif (!page) return\r\n\t\t\t\t\t\t\t\t\t\tpage.onLoad()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tthis.getChatDetailList()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfabClick() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: './journalone'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tgetProList() {\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tthis.$request(\"/system/project/listProTh\", \"POST\", {\r\n\t\t\t\t\tprojectName: this.projectNameSearch\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res == 'login' || (res.code == 500 && res.msg.includes(\"Authentication\"))) {\r\n\t\t\t\t\t\tuni.setStorageSync('loginSuccess', false)\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '登录已失效！',\r\n\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/home/index\",\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\tlet page = getCurrentPages().pop()\r\n\t\t\t\t\t\t\t\t\t\tif (!page) return\r\n\t\t\t\t\t\t\t\t\t\tpage.onLoad()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tif (res.data.length > 0) {\r\n\t\t\t\t\t\t\t\t_this.projectList = res.data\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_this.projectList = []\r\n\t\t\t\t\t\t\t\t_this.isShowTitle = true\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\t\tposition: 'bottom',\r\n\t\t\t\t\t\t\t\t\ttitle: '没有更多了'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsubmit() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t_this.submitJournal();\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\tasync submitJournal() {\r\n\t\t\t\tthis.$refs.form.validate().then(res => {\r\n\t\t\t\t\tthis.$request(\"/system/journal/add\", \"POST\", {\r\n\t\t\t\t\t\t...this.formData\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (res == 'login' || (res.code == 500 && res.msg.includes(\r\n\t\t\t\t\t\t\t\t\"Authentication\"))) {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '登录已失效！',\r\n\t\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\turl: \"/pages/home/index\",\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tlet page =\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetCurrentPages()\r\n\t\t\t\t\t\t\t\t\t\t\t\t.pop()\r\n\t\t\t\t\t\t\t\t\t\t\tif (!page) return\r\n\t\t\t\t\t\t\t\t\t\t\tpage.onLoad()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\t\tthis.showAdd = true\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提交成功',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(res.msg);\r\n\t\t\t\t\t\t\t\tvar msg = res.msg;\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: msg,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log('err', err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 评论填写确定按钮  remarks1为0\r\n\t\t\tsubmitIsChat() {\r\n\t\t\t\tif (this.formData.chatDetail == '' || this.formData.chatDetail == undefined) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '评论内容不能为空',\r\n\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$refs.form.validate().then(res => {\r\n\t\t\t\t\t\tthis.$request(\"/system/comment/add\", \"POST\", {\r\n\t\t\t\t\t\t\t\"journalId\": this.formData.id == null ? '' : this.formData.id,\r\n\t\t\t\t\t\t\t\"proId\": this.proIds,\r\n\t\t\t\t\t\t\t\"workDetail\": this.formData.chatDetail,\r\n\t\t\t\t\t\t\t\"remarks1\": 0,\r\n\t\t\t\t\t\t\t\"commentTime\": uni.getStorageSync('datePeople'),\r\n\t\t\t\t\t\t\t\"temporaryName\": this.createBy\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tif (res == 'login' || (res.code == 500 && res.msg.includes(\r\n\t\t\t\t\t\t\t\t\t\"Authentication\"))) {\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '登录已失效！',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\t\turl: \"/pages/home/index\",\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet page =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgetCurrentPages()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.pop()\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!page) return\r\n\t\t\t\t\t\t\t\t\t\t\t\tpage.onLoad()\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\t\t\tthis.$refs.chatDetail.val = ''\r\n\t\t\t\t\t\t\t\t\tthis.getChatDetailList()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log('IsChat', res)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).catch(err => {})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\thuifuClick(i, id, createBy, userName) {\r\n\t\t\t\tthis.$refs.popup.open('bottom')\r\n\t\t\t\tthis.setFocus = true\r\n\t\t\t\tthis.indexV = i\r\n\t\t\t\tthis.journalCommentId = id\r\n\t\t\t\tthis.replyBy = createBy\r\n\t\t\t\tthis.replyName = userName\r\n\t\t\t\tthis.holder = '回复：' + userName\r\n\t\t\t},\r\n\r\n\t\t\tsend() {\r\n\t\t\t\tif (this.Reply == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '回复内容不能为空',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.jonClick()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.Reply = ''\r\n\t\t\t\tthis.$refs.popup.close()\r\n\t\t\t},\r\n\r\n\t\t\tshowProRight() {\r\n\t\t\t\tthis.getProList();\r\n\t\t\t\tthis.$refs.showProRight.open();\r\n\t\t\t},\r\n\r\n\t\t\tcloseProDrawer() {\r\n\t\t\t\tthis.$refs.showProRight.close();\r\n\t\t\t},\r\n\r\n\t\t\tinputFocus() {\r\n\t\t\t\tif (this.dateTimeDis && this.isChat == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.journalTimeMsg + \"，请在规定时间内填写\",\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchoosePro(e) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tthat.$request(\"/system/journal/listByProId\", \"POST\", {\r\n\t\t\t\t\tproId: e.projectId\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t}).then(resProId => {\r\n\t\t\t\t\tif (resProId == 'login' || (resProId.code == 500 && resProId.msg.includes(\r\n\t\t\t\t\t\t\t\"Authentication\"))) {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '登录已失效！',\r\n\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/home/index\",\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\tlet page = getCurrentPages().pop()\r\n\t\t\t\t\t\t\t\t\t\tif (!page) return\r\n\t\t\t\t\t\t\t\t\t\tpage.onLoad()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (resProId.rows.length > 0) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '该项目日志已存在，是否继续编辑？',\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击确定');\r\n\t\t\t\t\t\t\t\t\t\tif (resProId.rows[0].proId == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.formData.projectName = '无项目'\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.formData.projectName = resProId.rows[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t.projectName\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthat.formData.workDetail = resProId.rows[0]\r\n\t\t\t\t\t\t\t\t\t\t\t.workDetail\r\n\t\t\t\t\t\t\t\t\t\tthat.formData.proId = resProId.rows[0].projectId;\r\n\t\t\t\t\t\t\t\t\t\tthat.formData.id = resProId.rows[0].id\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.showProRight.close();\r\n\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.formData.projectName = e.projectName;\r\n\t\t\t\t\t\t\tthat.formData.proId = e.projectId;\r\n\t\t\t\t\t\t\tthat.formData.projectType = e.projectType;\r\n\t\t\t\t\t\t\tthat.$refs.showProRight.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsearchPro() {\r\n\t\t\t\tthis.getProList()\r\n\t\t\t},\r\n\t\t\tgetJournalTime() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tthis.$request(\"/system/journal/getJournalTime\", \"POST\", {}, {\r\n\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t\t\"cookie\": uni.getStorageSync('setCookie')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t_this.journalTimeList = res.data;\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tfor (var i in res.data) {\r\n\t\t\t\t\t\tstr = res.data[i].configValue;\r\n\t\t\t\t\t\t_this.journalTimeMsg = res.data[0].remark;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar st = \"\";\r\n\t\t\t\t\tfor (var j in str.split(',')) {\r\n\t\t\t\t\t\tst += str.split(\",\")[j] + \",\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar s = st.substring(0, st.lastIndexOf(\",\"));\r\n\t\t\t\t\t_this.startTime = s.split(\",\")[0].replace(/-/gi, '/');\r\n\t\t\t\t\t_this.enTime = s.split(\",\")[1].replace(/-/gi, '/');\r\n\t\t\t\t\t_this.dateTimeDis = _this.checkAuditTime(s.split(\",\")[0].replace(/-/gi, '/'), s.split(\",\")[1].replace(/-/gi, '/'));\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcheckAuditTime(startTime, endTime) {\r\n\t\t\t\tconsole.log(startTime + \"=====-----------\" + endTime);\r\n\t\t\t\t// 获取当前时间\r\n\t\t\t\tconst date = new Date();\r\n\t\t\t\t// 获取当前时间的年月日\r\n\t\t\t\tconst dataStr = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} `\r\n\t\t\t\t// 获取开始时间、结束时间、现在时间的时间戳\r\n\t\t\t\tlet startDate = new Date(startTime).getTime();\r\n\t\t\t\tlet endDate = new Date(endTime).getTime();\r\n\t\t\t\tlet nowDate = date.getTime();\r\n\t\t\t\t//开始时间不大于结束时间\r\n\t\t\t\tconst s = startDate < endDate;\r\n\t\t\t\tif (nowDate > startDate && nowDate < endDate) {\r\n\t\t\t\t\treturn s ? false : true\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn s ? true : false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.footer {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tmargin: 40rpx 0;\r\n\r\n\t\tbutton {\r\n\t\t\twidth: 300rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.choose_css {\r\n\t\tjustify-content: flex-end;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.menu_text {\r\n\t\tpadding-left: 30rpx;\r\n\t\tfont-weight: 900\r\n\t}\r\n\r\n\t.content {\r\n\t\tpadding-left: 30rpx;\r\n\t\tpadding-top: 20rpx;\r\n\t\tpadding-right: 30rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n\r\n\t.flow-container {\r\n\t\tpadding: 30rpx\r\n\t}\r\n\r\n\t.menu_text_close {\r\n\t\tpadding-left: 30rpx;\r\n\t\tfont-weight: 900;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\ttext-align: right;\r\n\t\tfloat: right;\r\n\t\tpadding-right: 30rpx;\r\n\t}\r\n\r\n\t.chatAll {\r\n\t\tbackground-color: #F5F5F5;\r\n\t\tmax-height: 420rpx;\r\n\t\toverflow: auto;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 44rpx;\r\n\r\n\t\t.chatDetailAll {\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t}\r\n\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.date {\r\n\t\ttext-align: right;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.hr {\r\n\t\theight: 1px;\r\n\t\tbackground-color: #fff;\r\n\t\tmargin: 10rpx 0;\r\n\t}\r\n\r\n\t.huifu {\r\n\t\ttext-align: right;\r\n\t\tcolor: #3B9DEC;\r\n\t\tmargin: 30rpx 20rpx;\r\n\t}\r\n\r\n\t.list-title {\r\n\r\n\t\tpadding: 10px;\r\n\r\n\t\tdisplay: flex;\r\n\r\n\t\tjustify-content: space-between;\r\n\r\n\t}\r\n\r\n\t.right {\r\n\t\tcolor: #3B9DEC;\r\n\t\t;\r\n\t}\r\n\r\n\t.isNotShow {\r\n\t\tdisplay: none;\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t@import url(\"@/css/index.css\");\r\n\r\n\t.pop {\r\n\t\twidth: 750rpx;\r\n\t\theight: 100rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.pop button {\r\n\t\tfont-size: 24rpx;\r\n\t\theight: 60rpx;\r\n\t\tmargin-left: 10rpx;\r\n\t\twidth: 120rpx;\r\n\t}\r\n\r\n\t.pop input {\r\n\t\twidth: 600rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder: 1rpx solid #999999;\r\n\t\tpadding: 0 10rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=style&index=0&id=63a98d17&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=style&index=0&id=63a98d17&lang=scss&scoped=true&\"","import mod from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./journal.vue?vue&type=style&index=1&lang=css&\""],"sourceRoot":""}
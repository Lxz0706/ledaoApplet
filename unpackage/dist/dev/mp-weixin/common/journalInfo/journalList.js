(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/journalInfo/journalList"],{206:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(207));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},207:function(e,t,n){"use strict";n.r(t);var i=n(208),o=n(210);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n(212),n(214);var r,u=n(32),c=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,"b4dc6956",null,!1,i["components"],r);c.options.__file="common/journalInfo/journalList.vue",t["default"]=c.exports},208:function(e,t,n){"use strict";n.r(t);var i=n(209);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},209:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return i}));try{i={uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,714))},uniList:function(){return n.e("uni_modules/uni-list/components/uni-list/uni-list").then(n.bind(null,721))},uniSwipeAction:function(){return n.e("uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action").then(n.bind(null,800))},uniSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,805))},uniListItem:function(){return n.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(n.bind(null,728))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement;e._self._c},a=!1,r=[];o._withStripped=!0},210:function(e,t,n){"use strict";n.r(t);var i=n(211),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},211:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"info",data:function(){return{journalList:[],index:0,searchData:{datetimerange:[]},branch:[{id:1,name:""}],deptNameInput:"",userNameInput:"",createBy:"",projectName:"",options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],showTitle:!1,nowDate:"",dateTimeDis:!1,journalDelete:!1}},onLoad:function(t){var n=e.getStorageSync("loginName"),i=new Date,o="-",a=i.getFullYear(),r=i.getMonth()+1,u=i.getDate();r>=1&&r<=9&&(r="0"+r),u>=0&&u<=9&&(u="0"+u);var c=a+o+r+o+u;this.date=t.date,this.createBy=t.createBy,n==this.createBy&&c==this.date&&(this.journalDelete=!0),e.setStorageSync("datePeople",this.date)},mounted:function(){this.getJournalList(),this.getJournalTime()},onShow:function(){},methods:{getDate:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours();n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),this.nowDate=t+"-"+n+"-"+i,this.nowDate==this.date?(this.checkAuditTime(),this.dateTimeDis=!(o>=18&&o<24)):this.dateTimeDis=!1},getJournalList:function(){var t=this;this.searchData.datetimerange.length>0&&this.searchData.datetimerange[0].replace(/-/g,""),this.searchData.datetimerange.length>0&&this.searchData.datetimerange[1].replace(/-/g,"");e.showLoading({title:"加载中..."}),this.$request("/system/journal/list","POST",{createBy:this.createBy,createTimeFormat:this.date,projectName:this.projectName},{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("setCookie")}).then((function(n){"login"==n||500==n.code&&n.msg.includes("Authentication")?setTimeout((function(){e.showToast({title:"登录已失效！",icon:"error",duration:3e3}),setTimeout((function(){e.switchTab({url:"/pages/home/index",success:function(){var e=getCurrentPages().pop();e&&e.onLoad()}})}),3e3)}),1e3):(t.journalList=n.rows,t.journalList.length>0?t.journalList.map((function(e){null==e.createTime&&(e.createTime=""),null==e.workDetail&&(e.workDetail="无进展"),null==e.projectName&&(e.projectName="无项目"),null==e.journalTime&&(e.journalTime="")})):t.showTitle=!0,setTimeout((function(){e.hideLoading()}),4e3))}))},bindClick:function(t){var n=this;this.$request("/system/journal/remove","POST",{ids:t},{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("setCookie")}).then((function(t){"login"==t||500==t.code&&t.msg.includes("Authentication")?setTimeout((function(){e.showToast({title:"登录已失效！",icon:"error",duration:3e3}),setTimeout((function(){e.switchTab({url:"/pages/home/index",success:function(){var e=getCurrentPages().pop();e&&e.onLoad()}})}),3e3)}),1e3):0==t.code&&(e.showToast({title:"删除成功"}),n.getJournalList())}))},onClick:function(t,n){var i=JSON.stringify(n);e.navigateTo({url:"/common/journalInfo/journal?isChat=1&item="+i+"&createBy="+this.createBy})},getJournalTime:function(){var t=this;this.$request("/system/journal/getJournalTime","POST",{},{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("setCookie")}).then((function(n){t.journalTimeList=n.data;var i="";for(var o in n.data)i=n.data[o].configValue,t.journalTimeMsg=n.data[0].remark;var a="";for(var r in i.split(","))a+=i.split(",")[r]+",";var u=a.substring(0,a.lastIndexOf(",")),c=new Date,s=c.getFullYear(),l=c.getMonth()+1,d=c.getDate();c.getHours();l>=1&&l<=9&&(l="0"+l),d>=0&&d<=9&&(d="0"+d),t.nowDate=s+"-"+l+"-"+d,t.nowDate==t.date?t.dateTimeDis=t.checkAuditTime(u.split(",")[0].replace(/-/gi,"/"),u.split(",")[1].replace(/-/gi,"/")):t.dateTimeDis=!1,e.hideLoading()}))},checkAuditTime:function(e,t){var n=new Date,i=("".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(n.getDate()," "),new Date(e).getTime()),o=new Date(t).getTime(),a=n.getTime(),r=i<o;return a>i&&a<o?!r:!!r}}};t.default=n}).call(this,n(2)["default"])},212:function(e,t,n){"use strict";n.r(t);var i=n(213),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},213:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var i=n(215),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},215:function(e,t,n){}},[[206,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/common/journalInfo/journalList.js.map
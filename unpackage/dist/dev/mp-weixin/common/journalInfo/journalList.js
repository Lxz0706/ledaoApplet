(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/journalInfo/journalList"],{182:function(e,t,n){"use strict";(function(e){n(5);i(n(4));var t=i(n(183));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},183:function(e,t,n){"use strict";n.r(t);var i=n(184),o=n(186);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(188),n(190);var a,u=n(11),s=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,"b4dc6956",null,!1,i["components"],a);s.options.__file="common/journalInfo/journalList.vue",t["default"]=s.exports},184:function(e,t,n){"use strict";n.r(t);var i=n(185);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},185:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));try{i={uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,285))},uniList:function(){return n.e("uni_modules/uni-list/components/uni-list/uni-list").then(n.bind(null,292))},uniSwipeAction:function(){return n.e("uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action").then(n.bind(null,366))},uniSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,371))},uniListItem:function(){return n.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(n.bind(null,299))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},186:function(e,t,n){"use strict";n.r(t);var i=n(187),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},187:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"info",data:function(){return{journalList:[],index:0,searchData:{datetimerange:[]},branch:[{id:1,name:""}],deptNameInput:"",userNameInput:"",createBy:"",projectName:"",options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],showTitle:!1,nowDate:"",dateTimeDis:!1,journalDelete:!1}},onLoad:function(t){var n=e.getStorageSync("loginName"),i=new Date,o="-",r=i.getFullYear(),a=i.getMonth()+1,u=i.getDate();a>=1&&a<=9&&(a="0"+a),u>=0&&u<=9&&(u="0"+u);var s=r+o+a+o+u;this.date=t.date,this.createBy=t.createBy,n==this.createBy&&s==this.date&&(this.journalDelete=!0),e.setStorageSync("datePeople",this.date)},mounted:function(){this.getJournalList(),this.getDate()},onShow:function(){this.getJournalList()},methods:{getDate:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours();n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),this.nowDate=t+"-"+n+"-"+i,this.nowDate==this.date?this.dateTimeDis=!(o>=18&&o<24):this.dateTimeDis=!1},getJournalList:function(){var t=this;this.searchData.datetimerange.length>0&&this.searchData.datetimerange[0].replace(/-/g,""),this.searchData.datetimerange.length>0&&this.searchData.datetimerange[1].replace(/-/g,"");e.showLoading({title:"加载中..."}),this.$request("/system/journal/list","POST",{createBy:this.createBy,createTimeFormat:this.date,projectName:this.projectName},{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("setCookie")}).then((function(n){"login"==n||500==n.code&&n.msg.includes("Authentication")?setTimeout((function(){e.showToast({title:"登录已失效！",icon:"error",duration:3e3}),setTimeout((function(){e.switchTab({url:"/pages/home/index",success:function(){var e=getCurrentPages().pop();e&&e.onLoad()}})}),3e3)}),1e3):(t.journalList=n.rows,t.journalList.length>0?t.journalList.map((function(e){null==e.createTime&&(e.createTime=""),null==e.workDetail&&(e.workDetail="无进展"),null==e.projectName&&(e.projectName="无项目")})):t.showTitle=!0,setTimeout((function(){e.hideLoading()}),4e3))}))},bindClick:function(t){var n=this;this.$request("/system/journal/remove","POST",{ids:t},{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("setCookie")}).then((function(t){"login"==t||500==t.code&&t.msg.includes("Authentication")?setTimeout((function(){e.showToast({title:"登录已失效！",icon:"error",duration:3e3}),setTimeout((function(){e.switchTab({url:"/pages/home/index",success:function(){var e=getCurrentPages().pop();e&&e.onLoad()}})}),3e3)}),1e3):0==t.code&&(e.showToast({title:"删除成功"}),n.getJournalList())}))},onClick:function(t,n){var i=JSON.stringify(n);e.navigateTo({url:"/common/journalInfo/journal?isChat=1&item="+i+"&createBy="+this.createBy})}}};t.default=n}).call(this,n(1)["default"])},188:function(e,t,n){"use strict";n.r(t);var i=n(189),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},189:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var i=n(191),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},191:function(e,t,n){}},[[182,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/common/journalInfo/journalList.js.map
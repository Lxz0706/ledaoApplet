(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/vendor"],[,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["qy","env","error","version","lanDebug","cloud","serviceMarket","router","worklet","__webpack_require_UNI_MP_PLUGIN__"],i=["lanDebug","router","worklet"],o="undefined"!==typeof globalThis?globalThis:function(){return this}(),a=["w","x"].join(""),s=o[a],u=s.getLaunchOptionsSync?s.getLaunchOptionsSync():null;function c(e){return(!u||1154!==u.scene||!i.includes(e))&&(r.indexOf(e)>-1||"function"===typeof s[e])}function l(){var e={};for(var t in s)c(t)&&(e[t]=s[t]);return e}o[a]=l();var d=o[a];t.default=d},function(e,t,n){"use strict";(function(e,r){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.createApp=Un,t.createComponent=Jn,t.createPage=Yn,t.createPlugin=$n,t.createSubpackageApp=Kn,t.default=void 0;var o,a=i(n(5)),s=i(n(11)),u=i(n(15)),c=i(n(18)),l=i(n(13)),d=n(22),h=i(n(25));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function v(e){return decodeURIComponent(o(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function g(){var t,n=e.getStorageSync("uni_id_token")||"",r=n.split(".");if(!n||3!==r.length)return{uid:null,role:[],permission:[],tokenExpired:0};try{t=JSON.parse(v(r[1]))}catch(i){throw new Error("获取当前用户信息出错，详细错误信息为："+i.message)}return t.tokenExpired=1e3*t.exp,delete t.exp,delete t.iat,t}function _(e){e.prototype.uniIDHasRole=function(e){var t=g(),n=t.role;return n.indexOf(e)>-1},e.prototype.uniIDHasPermission=function(e){var t=g(),n=t.permission;return this.uniIDHasRole("admin")||n.indexOf(e)>-1},e.prototype.uniIDTokenValid=function(){var e=g(),t=e.tokenExpired;return t>Date.now()}}o="function"!==typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!y.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,i="",o=0;o<e.length;)t=m.indexOf(e.charAt(o++))<<18|m.indexOf(e.charAt(o++))<<12|(n=m.indexOf(e.charAt(o++)))<<6|(r=m.indexOf(e.charAt(o++))),i+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i}:atob;var b=Object.prototype.toString,x=Object.prototype.hasOwnProperty;function M(e){return"function"===typeof e}function C(e){return"string"===typeof e}function w(e){return null!==e&&"object"===(0,l.default)(e)}function S(e){return"[object Object]"===b.call(e)}function T(e,t){return x.call(e,t)}function N(){}function E(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var A=/-(\w)/g,R=E((function(e){return e.replace(A,(function(e,t){return t?t.toUpperCase():""}))}));function P(e){var t={};return S(e)&&Object.keys(e).sort().forEach((function(n){t[n]=e[n]})),Object.keys(t)?t:e}var L=["invoke","success","fail","complete","returnValue"],O={},k={};function I(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?D(n):n}function D(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function U(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function B(e,t){Object.keys(t).forEach((function(n){-1!==L.indexOf(n)&&M(t[n])&&(e[n]=I(e[n],t[n]))}))}function F(e,t){e&&t&&Object.keys(t).forEach((function(n){-1!==L.indexOf(n)&&M(t[n])&&U(e[n],t[n])}))}function G(e,t){"string"===typeof e&&S(t)?B(k[e]||(k[e]={}),t):S(e)&&B(O,e)}function j(e,t){"string"===typeof e?S(t)?F(k[e],t):delete k[e]:S(e)&&F(O,e)}function z(e,t){return function(n){return e(n,t)||n}}function V(e){return!!e&&("object"===(0,l.default)(e)||"function"===typeof e)&&"function"===typeof e.then}function H(e,t,n){for(var r=!1,i=0;i<e.length;i++){var o=e[i];if(r)r=Promise.resolve(z(o,n));else{var a=o(t,n);if(V(a)&&(r=Promise.resolve(a)),!1===a)return{then:function(){}}}}return r||{then:function(e){return e(t)}}}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["success","fail","complete"].forEach((function(n){if(Array.isArray(e[n])){var r=t[n];t[n]=function(i){H(e[n],i,t).then((function(e){return M(r)&&r(e)||e}))}}})),t}function q(e,t){var n=[];Array.isArray(O.returnValue)&&n.push.apply(n,(0,c.default)(O.returnValue));var r=k[e];return r&&Array.isArray(r.returnValue)&&n.push.apply(n,(0,c.default)(r.returnValue)),n.forEach((function(e){t=e(t)||t})),t}function X(e){var t=Object.create(null);Object.keys(O).forEach((function(e){"returnValue"!==e&&(t[e]=O[e].slice())}));var n=k[e];return n&&Object.keys(n).forEach((function(e){"returnValue"!==e&&(t[e]=(t[e]||[]).concat(n[e]))})),t}function Y(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=X(e);if(a&&Object.keys(a).length){if(Array.isArray(a.invoke)){var s=H(a.invoke,n);return s.then((function(n){return t.apply(void 0,[W(X(e),n)].concat(i))}))}return t.apply(void 0,[W(a,n)].concat(i))}return t.apply(void 0,[n].concat(i))}var J={returnValue:function(e){return V(e)?new Promise((function(t,n){e.then((function(e){e[0]?n(e[0]):t(e[1])}))})):e}},K=/^\$|Window$|WindowStyle$|sendHostEvent|sendNativeEvent|restoreGlobal|requireGlobal|getCurrentSubNVue|getMenuButtonBoundingClientRect|^report|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64|getLocale|setLocale|invokePushCallback|getWindowInfo|getDeviceInfo|getAppBaseInfo|getSystemSetting|getAppAuthorizeSetting|initUTS|requireUTS|registerUTS/,$=/^create|Manager$/,Z=["createBLEConnection"],Q=["createBLEConnection","createPushMessage"],ee=/^on|^off/;function te(e){return $.test(e)&&-1===Z.indexOf(e)}function ne(e){return K.test(e)&&-1===Q.indexOf(e)}function re(e){return ee.test(e)&&"onPush"!==e}function ie(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e]}))}function oe(e){return!(te(e)||ne(e)||re(e))}function ae(e,t){return oe(e)&&M(t)?function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return M(n.success)||M(n.fail)||M(n.complete)?q(e,Y.apply(void 0,[e,t,n].concat(i))):q(e,ie(new Promise((function(r,o){Y.apply(void 0,[e,t,Object.assign({},n,{success:r,fail:o})].concat(i))}))))}:t}Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))});var se=1e-4,ue=750,ce=!1,le=0,de=0;function he(){var t=e.getSystemInfoSync(),n=t.platform,r=t.pixelRatio,i=t.windowWidth;le=i,de=r,ce="ios"===n}function fe(e,t){if(0===le&&he(),e=Number(e),0===e)return 0;var n=e/ue*(t||le);return n<0&&(n=-n),n=Math.floor(n+se),0===n&&(n=1!==de&&ce?.5:1),e<0?-n:n}var pe,me="zh-Hans",ye="zh-Hant",ve="en",ge="fr",_e="es",be={};function xe(){if(Se()){var e=Object.keys(__uniConfig.locales);e.length&&e.forEach((function(e){var t=be[e],n=__uniConfig.locales[e];t?Object.assign(t,n):be[e]=n}))}}pe=Ee(e.getSystemInfoSync().language)||ve,xe();var Me=(0,d.initVueI18n)(pe,{}),Ce=Me.t;Me.mixin={beforeCreate:function(){var e=this,t=Me.i18n.watchLocale((function(){e.$forceUpdate()}));this.$once("hook:beforeDestroy",(function(){t()}))},methods:{$$t:function(e,t){return Ce(e,t)}}},Me.setLocale,Me.getLocale;function we(e,t,n){var r=e.observable({locale:n||Me.getLocale()}),i=[];t.$watchLocale=function(e){i.push(e)},Object.defineProperty(t,"$locale",{get:function(){return r.locale},set:function(e){r.locale=e,i.forEach((function(t){return t(e)}))}})}function Se(){return"undefined"!==typeof __uniConfig&&__uniConfig.locales&&!!Object.keys(__uniConfig.locales).length}function Te(e,t){return!!t.find((function(t){return-1!==e.indexOf(t)}))}function Ne(e,t){return t.find((function(t){return 0===e.indexOf(t)}))}function Ee(e,t){if(e){if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),"chinese"===e)return me;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?me:e.indexOf("-hant")>-1||Te(e,["-tw","-hk","-mo","-cht"])?ye:me;var n=Ne(e,[ve,ge,_e]);return n||void 0}}function Ae(){if(M(getApp)){var t=getApp({allowDefault:!0});if(t&&t.$vm)return t.$vm.$locale}return Ee(e.getSystemInfoSync().language)||ve}function Re(e){var t=!!M(getApp)&&getApp();if(!t)return!1;var n=t.$vm.$locale;return n!==e&&(t.$vm.$locale=e,Pe.forEach((function(t){return t({locale:e})})),!0)}var Pe=[];function Le(e){-1===Pe.indexOf(e)&&Pe.push(e)}"undefined"!==typeof r&&(r.getLocale=Ae);var Oe={promiseInterceptor:J},ke=Object.freeze({__proto__:null,upx2px:fe,getLocale:Ae,setLocale:Re,onLocaleChange:Le,addInterceptor:G,removeInterceptor:j,interceptors:Oe});function Ie(e){var t=getCurrentPages(),n=t.length;while(n--){var r=t[n];if(r.$page&&r.$page.fullPath===e)return n}return-1}var De,Ue={name:function(e){return"back"===e.exists&&e.delta?"navigateBack":"redirectTo"},args:function(e){if("back"===e.exists&&e.url){var t=Ie(e.url);if(-1!==t){var n=getCurrentPages().length-1-t;n>0&&(e.delta=n)}}}},Be={args:function(e){var t=parseInt(e.current);if(!isNaN(t)){var n=e.urls;if(Array.isArray(n)){var r=n.length;if(r)return t<0?t=0:t>=r&&(t=r-1),t>0?(e.current=n[t],e.urls=n.filter((function(e,r){return!(r<t)||e!==n[t]}))):e.current=n[0],{indicator:!1,loop:!1}}}}},Fe="__DC_STAT_UUID";function Ge(t){De=De||e.getStorageSync(Fe),De||(De=Date.now()+""+Math.floor(1e7*Math.random()),e.setStorage({key:Fe,data:De})),t.deviceId=De}function je(e){if(e.safeArea){var t=e.safeArea;e.safeAreaInsets={top:t.top,left:t.left,right:e.windowWidth-t.right,bottom:e.screenHeight-t.bottom}}}function ze(e){var t=e.brand,n=void 0===t?"":t,r=e.model,i=void 0===r?"":r,o=e.system,a=void 0===o?"":o,s=e.language,u=void 0===s?"":s,c=e.theme,l=e.version,d=(e.platform,e.fontSizeSetting),h=e.SDKVersion,f=e.pixelRatio,p=e.deviceOrientation,m={},y="",v="";y=a.split(" ")[0]||"",v=a.split(" ")[1]||"";var g=l,_=Ve(e,i),b=He(n),x=qe(e),M=p,C=f,w=h,S=u.replace(/_/g,"-"),T={appId:"__UNI__8551D91",appName:"ledaoApplet",appVersion:"1.0.0",appVersionCode:"100",appLanguage:We(S),uniCompileVersion:"3.8.7",uniRuntimeVersion:"3.8.7",uniPlatform:"mp-weixin",deviceBrand:b,deviceModel:i,deviceType:_,devicePixelRatio:C,deviceOrientation:M,osName:y.toLocaleLowerCase(),osVersion:v,hostTheme:c,hostVersion:g,hostLanguage:S,hostName:x,hostSDKVersion:w,hostFontSizeSetting:d,windowTop:0,windowBottom:0,osLanguage:void 0,osTheme:void 0,ua:void 0,hostPackageName:void 0,browserName:void 0,browserVersion:void 0};Object.assign(e,T,m)}function Ve(e,t){for(var n=e.deviceType||"phone",r={ipad:"pad",windows:"pc",mac:"pc"},i=Object.keys(r),o=t.toLocaleLowerCase(),a=0;a<i.length;a++){var s=i[a];if(-1!==o.indexOf(s)){n=r[s];break}}return n}function He(e){var t=e;return t&&(t=e.toLocaleLowerCase()),t}function We(e){return Ae?Ae():e}function qe(e){var t="WeChat",n=e.hostName||t;return e.environment?n=e.environment:e.host&&e.host.env&&(n=e.host.env),n}var Xe={returnValue:function(e){Ge(e),je(e),ze(e)}},Ye={args:function(e){"object"===(0,l.default)(e)&&(e.alertText=e.title)}},Je={returnValue:function(e){var t=e,n=t.version,r=t.language,i=t.SDKVersion,o=t.theme,a=qe(e),s=r.replace("_","-");e=P(Object.assign(e,{appId:"__UNI__8551D91",appName:"ledaoApplet",appVersion:"1.0.0",appVersionCode:"100",appLanguage:We(s),hostVersion:n,hostLanguage:s,hostName:a,hostSDKVersion:i,hostTheme:o}))}},Ke={returnValue:function(e){var t=e,n=t.brand,r=t.model,i=Ve(e,r),o=He(n);Ge(e),e=P(Object.assign(e,{deviceType:i,deviceBrand:o,deviceModel:r}))}},$e={returnValue:function(e){je(e),e=P(Object.assign(e,{windowTop:0,windowBottom:0}))}},Ze={returnValue:function(e){var t=e.locationReducedAccuracy;e.locationAccuracy="unsupported",!0===t?e.locationAccuracy="reduced":!1===t&&(e.locationAccuracy="full")}},Qe={args:function(e){e.compressedHeight&&!e.compressHeight&&(e.compressHeight=e.compressedHeight),e.compressedWidth&&!e.compressWidth&&(e.compressWidth=e.compressedWidth)}},et={redirectTo:Ue,previewImage:Be,getSystemInfo:Xe,getSystemInfoSync:Xe,showActionSheet:Ye,getAppBaseInfo:Je,getDeviceInfo:Ke,getWindowInfo:$e,getAppAuthorizeSetting:Ze,compressImage:Qe},tt=["vibrate","preloadPage","unPreloadPage","loadSubPackage"],nt=[],rt=["success","fail","cancel","complete"];function it(e,t,n){return function(r){return t(at(e,r,n))}}function ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(S(t)){var o=!0===i?t:{};for(var a in M(n)&&(n=n(t,o)||{}),t)if(T(n,a)){var s=n[a];M(s)&&(s=s(t[a],t,o)),s?C(s)?o[s]=t[a]:S(s)&&(o[s.name?s.name:a]=s.value):console.warn("The '".concat(e,"' method of platform '微信小程序' does not support option '").concat(a,"'"))}else-1!==rt.indexOf(a)?M(t[a])&&(o[a]=it(e,t[a],r)):i||(o[a]=t[a]);return o}return M(t)&&(t=it(e,t,r)),t}function at(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return M(et.returnValue)&&(t=et.returnValue(e,t)),ot(e,t,n,{},r)}function st(t,n){if(T(et,t)){var r=et[t];return r?function(n,i){var o=r;M(r)&&(o=r(n)),n=ot(t,n,o.args,o.returnValue);var a=[n];"undefined"!==typeof i&&a.push(i),M(o.name)?t=o.name(n):C(o.name)&&(t=o.name);var s=e[t].apply(e,a);return ne(t)?at(t,s,o.returnValue,te(t)):s}:function(){console.error("Platform '微信小程序' does not support '".concat(t,"'."))}}return n}var ut=Object.create(null),ct=["onTabBarMidButtonTap","subscribePush","unsubscribePush","onPush","offPush","share"];function lt(e){return function(t){var n=t.fail,r=t.complete,i={errMsg:"".concat(e,":fail method '").concat(e,"' not supported")};M(n)&&n(i),M(r)&&r(i)}}ct.forEach((function(e){ut[e]=lt(e)}));var dt={oauth:["weixin"],share:["weixin"],payment:["wxpay"],push:["weixin"]};function ht(e){var t=e.service,n=e.success,r=e.fail,i=e.complete,o=!1;dt[t]?(o={errMsg:"getProvider:ok",service:t,provider:dt[t]},M(n)&&n(o)):(o={errMsg:"getProvider:fail service not found"},M(r)&&r(o)),M(i)&&i(o)}var ft=Object.freeze({__proto__:null,getProvider:ht}),pt=function(){var e;return function(){return e||(e=new h.default),e}}();function mt(e,t,n){return e[t].apply(e,n)}function yt(){return mt(pt(),"$on",Array.prototype.slice.call(arguments))}function vt(){return mt(pt(),"$off",Array.prototype.slice.call(arguments))}function gt(){return mt(pt(),"$once",Array.prototype.slice.call(arguments))}function _t(){return mt(pt(),"$emit",Array.prototype.slice.call(arguments))}var bt,xt,Mt,Ct=Object.freeze({__proto__:null,$on:yt,$off:vt,$once:gt,$emit:_t});function wt(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}function St(e){var t={};for(var n in e){var r=e[n];M(r)&&(t[n]=wt(r),delete e[n])}return t}function Tt(e){try{return JSON.parse(e)}catch(t){}return e}function Nt(e){if("enabled"===e.type)Mt=!0;else if("clientId"===e.type)bt=e.cid,xt=e.errMsg,At(bt,e.errMsg);else if("pushMsg"===e.type)for(var t={type:"receive",data:Tt(e.message)},n=0;n<Pt.length;n++){var r=Pt[n];if(r(t),t.stopped)break}else"click"===e.type&&Pt.forEach((function(t){t({type:"click",data:Tt(e.message)})}))}var Et=[];function At(e,t){Et.forEach((function(n){n(e,t)})),Et.length=0}function Rt(e){S(e)||(e={});var t=St(e),n=t.success,r=t.fail,i=t.complete,o=M(n),a=M(r),s=M(i);Promise.resolve().then((function(){"undefined"===typeof Mt&&(Mt=!1,bt="",xt="uniPush is not enabled"),Et.push((function(e,t){var u;e?(u={errMsg:"getPushClientId:ok",cid:e},o&&n(u)):(u={errMsg:"getPushClientId:fail"+(t?" "+t:"")},a&&r(u)),s&&i(u)})),"undefined"!==typeof bt&&At(bt,xt)}))}var Pt=[],Lt=function(e){-1===Pt.indexOf(e)&&Pt.push(e)},Ot=function(e){if(e){var t=Pt.indexOf(e);t>-1&&Pt.splice(t,1)}else Pt.length=0},kt=e.getAppBaseInfo&&e.getAppBaseInfo();kt||(kt=e.getSystemInfoSync());var It=kt?kt.host:null,Dt=It&&"SAAASDK"===It.env?e.miniapp.shareVideoMessage:e.shareVideoMessage,Ut=Object.freeze({__proto__:null,shareVideoMessage:Dt,getPushClientId:Rt,onPushMessage:Lt,offPushMessage:Ot,invokePushCallback:Nt}),Bt=["__route__","__wxExparserNodeId__","__wxWebviewId__"];function Ft(e,t){for(var n,r=e.$children,i=r.length-1;i>=0;i--){var o=r[i];if(o.$scope._$vueId===t)return o}for(var a=r.length-1;a>=0;a--)if(n=Ft(r[a],t),n)return n}function Gt(e){return Behavior(e)}function jt(){return!!this.route}function zt(e){this.triggerEvent("__l",e)}function Vt(e,t,n){var r=e.selectAllComponents(t)||[];r.forEach((function(e){var r=e.dataset.ref;n[r]=e.$vm||Yt(e),"scoped"===e.dataset.vueGeneric&&e.selectAllComponents(".scoped-ref").forEach((function(e){Vt(e,t,n)}))}))}function Ht(e,t){var n=(0,u.default)(Set,(0,c.default)(Object.keys(e))),r=Object.keys(t);return r.forEach((function(r){var i=e[r],o=t[r];Array.isArray(i)&&Array.isArray(o)&&i.length===o.length&&o.every((function(e){return i.includes(e)}))||(e[r]=o,n.delete(r))})),n.forEach((function(t){delete e[t]})),e}function Wt(e){var t=e.$scope,n={};Object.defineProperty(e,"$refs",{get:function(){var e={};Vt(t,".vue-ref",e);var r=t.selectAllComponents(".vue-ref-in-for")||[];return r.forEach((function(t){var n=t.dataset.ref;e[n]||(e[n]=[]),e[n].push(t.$vm||Yt(t))})),Ht(n,e)}})}function qt(e){var t,n=e.detail||e.value,r=n.vuePid,i=n.vueOptions;r&&(t=Ft(this.$vm,r)),t||(t=this.$vm),i.parent=t}function Xt(e){var t="__v_isMPComponent";return Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:!0}),e}function Yt(e){var t="__ob__",n="__v_skip";return w(e)&&Object.isExtensible(e)&&Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:(0,s.default)({},n,!0)}),e}var Jt=/_(.*)_worklet_factory_/;function Kt(e,t){t&&Object.keys(t).forEach((function(n){var r=n.match(Jt);if(r){var i=r[1];e[n]=t[n],e[i]=t[i]}}))}var $t=Page,Zt=Component,Qt=/:/g,en=E((function(e){return R(e.replace(Qt,"-"))}));function tn(e){var t=e.triggerEvent,n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.$vm||this.dataset&&this.dataset.comType)e=en(e);else{var o=en(e);o!==e&&t.apply(this,[o].concat(r))}return t.apply(this,[e].concat(r))};try{e.triggerEvent=n}catch(r){e._triggerEvent=n}}function nn(e,t,n){var r=t[e];t[e]=function(){if(Xt(this),tn(this),r){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,t)}}}$t.__$wrappered||($t.__$wrappered=!0,Page=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nn("onLoad",e),$t(e)},Page.after=$t.after,Component=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nn("created",e),Zt(e)});var rn=["onPullDownRefresh","onReachBottom","onAddToFavorites","onShareTimeline","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function on(e,t){var n=e.$mp[e.mpType];t.forEach((function(t){T(n,t)&&(e[t]=n[t])}))}function an(e,t){if(!t)return!0;if(h.default.options&&Array.isArray(h.default.options[e]))return!0;if(t=t.default||t,M(t))return!!M(t.extendOptions[e])||!!(t.super&&t.super.options&&Array.isArray(t.super.options[e]));if(M(t[e])||Array.isArray(t[e]))return!0;var n=t.mixins;return Array.isArray(n)?!!n.find((function(t){return an(e,t)})):void 0}function sn(e,t,n){t.forEach((function(t){an(t,n)&&(e[t]=function(e){return this.$vm&&this.$vm.__call_hook(t,e)})}))}function un(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];cn(t).forEach((function(t){return ln(e,t,n)}))}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&Object.keys(e).forEach((function(n){0===n.indexOf("on")&&M(e[n])&&t.push(n)})),t}function ln(e,t,n){-1!==n.indexOf(t)||T(e,t)||(e[t]=function(e){return this.$vm&&this.$vm.__call_hook(t,e)})}function dn(e,t){var n;return t=t.default||t,n=M(t)?t:e.extend(t),t=n.options,[n,t]}function hn(e,t){if(Array.isArray(t)&&t.length){var n=Object.create(null);t.forEach((function(e){n[e]=!0})),e.$scopedSlots=e.$slots=n}}function fn(e,t){e=(e||"").split(",");var n=e.length;1===n?t._$vueId=e[0]:2===n&&(t._$vueId=e[0],t._$vuePid=e[1])}function pn(e,t){var n=e.data||{},r=e.methods||{};if("function"===typeof n)try{n=n.call(t)}catch(i){Object({NODE_ENV:"development",VUE_APP_DARK_MODE:"false",VUE_APP_NAME:"ledaoApplet",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG&&console.warn("根据 Vue 的 data 函数初始化小程序 data 失败，请尽量确保 data 函数中不访问 vm 对象，否则可能影响首次数据渲染速度。",n)}else try{n=JSON.parse(JSON.stringify(n))}catch(i){}return S(n)||(n={}),Object.keys(r).forEach((function(e){-1!==t.__lifecycle_hooks__.indexOf(e)||T(n,e)||(n[e]=r[e])})),n}var mn=[String,Number,Boolean,Object,Array,null];function yn(e){return function(t,n){this.$vm&&(this.$vm[e]=t)}}function vn(e,t){var n=e.behaviors,r=e.extends,i=e.mixins,o=e.props;o||(e.props=o=[]);var a=[];return Array.isArray(n)&&n.forEach((function(e){a.push(e.replace("uni://","wx".concat("://"))),"uni://form-field"===e&&(Array.isArray(o)?(o.push("name"),o.push("value")):(o.name={type:String,default:""},o.value={type:[String,Number,Boolean,Array,Object,Date],default:""}))})),S(r)&&r.props&&a.push(t({properties:_n(r.props,!0)})),Array.isArray(i)&&i.forEach((function(e){S(e)&&e.props&&a.push(t({properties:_n(e.props,!0)}))})),a}function gn(e,t,n,r){return Array.isArray(t)&&1===t.length?t[0]:t}function _n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3?arguments[3]:void 0,r={};return t||(r.vueId={type:String,value:""},n.virtualHost&&(r.virtualHostStyle={type:null,value:""},r.virtualHostClass={type:null,value:""}),r.scopedSlotsCompiler={type:String,value:""},r.vueSlots={type:null,value:[],observer:function(e,t){var n=Object.create(null);e.forEach((function(e){n[e]=!0})),this.setData({$slots:n})}}),Array.isArray(e)?e.forEach((function(e){r[e]={type:null,observer:yn(e)}})):S(e)&&Object.keys(e).forEach((function(t){var n=e[t];if(S(n)){var i=n.default;M(i)&&(i=i()),n.type=gn(t,n.type),r[t]={type:-1!==mn.indexOf(n.type)?n.type:null,value:i,observer:yn(t)}}else{var o=gn(t,n);r[t]={type:-1!==mn.indexOf(o)?o:null,observer:yn(t)}}})),r}function bn(e){try{e.mp=JSON.parse(JSON.stringify(e))}catch(t){}return e.stopPropagation=N,e.preventDefault=N,e.target=e.target||{},T(e,"detail")||(e.detail={}),T(e,"markerId")&&(e.detail="object"===(0,l.default)(e.detail)?e.detail:{},e.detail.markerId=e.markerId),S(e.detail)&&(e.target=Object.assign({},e.target,e.detail)),e}function xn(e,t){var n=e;return t.forEach((function(t){var r=t[0],i=t[2];if(r||"undefined"!==typeof i){var o,a=t[1],s=t[3];Number.isInteger(r)?o=r:r?"string"===typeof r&&r&&(o=0===r.indexOf("#s#")?r.substr(3):e.__get_value(r,n)):o=n,Number.isInteger(o)?n=i:a?Array.isArray(o)?n=o.find((function(t){return e.__get_value(a,t)===i})):S(o)?n=Object.keys(o).find((function(t){return e.__get_value(a,o[t])===i})):console.error("v-for 暂不支持循环数据：",o):n=o[i],s&&(n=e.__get_value(s,n))}})),n}function Mn(e,t,n,r){var i={};return Array.isArray(t)&&t.length&&t.forEach((function(t,o){"string"===typeof t?t?"$event"===t?i["$"+o]=n:"arguments"===t?i["$"+o]=n.detail&&n.detail.__args__||r:0===t.indexOf("$event.")?i["$"+o]=e.__get_value(t.replace("$event.",""),n):i["$"+o]=e.__get_value(t):i["$"+o]=e:i["$"+o]=xn(e,t)})),i}function Cn(e){for(var t={},n=1;n<e.length;n++){var r=e[n];t[r[0]]=r[1]}return t}function wn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=!1,s=S(t.detail)&&t.detail.__args__||[t.detail];if(i&&(a=t.currentTarget&&t.currentTarget.dataset&&"wx"===t.currentTarget.dataset.comType,!n.length))return a?[t]:s;var u=Mn(e,r,t,s),c=[];return n.forEach((function(e){"$event"===e?"__set_model"!==o||i?i&&!a?c.push(s[0]):c.push(t):c.push(t.target.value):Array.isArray(e)&&"o"===e[0]?c.push(Cn(e)):"string"===typeof e&&T(u,e)?c.push(u[e]):c.push(e)})),c}var Sn="~",Tn="^";function Nn(e,t){return e===t||"regionchange"===t&&("begin"===e||"end"===e)}function En(e){var t=e.$parent;while(t&&t.$parent&&(t.$options.generic||t.$parent.$options.generic||t.$scope._$vuePid))t=t.$parent;return t&&t.$parent}function An(e){var t=this;e=bn(e);var n=(e.currentTarget||e.target).dataset;if(!n)return console.warn("事件信息不存在");var r=n.eventOpts||n["event-opts"];if(!r)return console.warn("事件信息不存在");var i=e.type,o=[];return r.forEach((function(n){var r=n[0],a=n[1],s=r.charAt(0)===Tn;r=s?r.slice(1):r;var u=r.charAt(0)===Sn;r=u?r.slice(1):r,a&&Nn(i,r)&&a.forEach((function(n){var r=n[0];if(r){var i=t.$vm;if(i.$options.generic&&(i=En(i)||i),"$emit"===r)return void i.$emit.apply(i,wn(t.$vm,e,n[1],n[2],s,r));var a=i[r];if(!M(a)){var c="page"===t.$vm.mpType?"Page":"Component",l=t.route||t.is;throw new Error("".concat(c,' "').concat(l,'" does not have a method "').concat(r,'"'))}if(u){if(a.once)return;a.once=!0}var d=wn(t.$vm,e,n[1],n[2],s,r);d=Array.isArray(d)?d:[],/=\s*\S+\.eventParams\s*\|\|\s*\S+\[['"]event-params['"]\]/.test(a.toString())&&(d=d.concat([,,,,,,,,,,e])),o.push(a.apply(i,d))}}))})),"input"===i&&1===o.length&&"undefined"!==typeof o[0]?o[0]:void 0}var Rn={};function Pn(e){var t=Rn[e];return delete Rn[e],t}var Ln=["onShow","onHide","onError","onPageNotFound","onThemeChange","onUnhandledRejection"];function On(){h.default.prototype.getOpenerEventChannel=function(){return this.$scope.getOpenerEventChannel()};var e=h.default.prototype.__call_hook;h.default.prototype.__call_hook=function(t,n){return"onLoad"===t&&n&&n.__id__&&(this.__eventChannel__=Pn(n.__id__),delete n.__id__),e.call(this,t,n)}}function kn(){var e={},t={};function n(e){var t=this.$options.propsData.vueId;if(t){var n=t.split(",")[0];e(n)}}h.default.prototype.$hasSSP=function(n){var r=e[n];return r||(t[n]=this,this.$on("hook:destroyed",(function(){delete t[n]}))),r},h.default.prototype.$getSSP=function(t,n,r){var i=e[t];if(i){var o=i[n]||[];return r?o:o[0]}},h.default.prototype.$setSSP=function(t,r){var i=0;return n.call(this,(function(n){var o=e[n],a=o[t]=o[t]||[];a.push(r),i=a.length-1})),i},h.default.prototype.$initSSP=function(){n.call(this,(function(t){e[t]={}}))},h.default.prototype.$callSSP=function(){n.call(this,(function(e){t[e]&&t[e].$forceUpdate()}))},h.default.mixin({destroyed:function(){var n=this.$options.propsData,r=n&&n.vueId;r&&(delete e[r],delete t[r])}})}function In(t,n){var r=n.mocks,i=n.initRefs;On(),kn(),t.$options.store&&(h.default.prototype.$store=t.$options.store),_(h.default),h.default.prototype.mpHost="mp-weixin",h.default.mixin({beforeCreate:function(){if(this.$options.mpType){if(this.mpType=this.$options.mpType,this.$mp=(0,s.default)({data:{}},this.mpType,this.$options.mpInstance),this.$scope=this.$options.mpInstance,delete this.$options.mpType,delete this.$options.mpInstance,"page"===this.mpType&&"function"===typeof getApp){var e=getApp();e.$vm&&e.$vm.$i18n&&(this._i18n=e.$vm.$i18n)}"app"!==this.mpType&&(i(this),on(this,r))}}});var o={onLaunch:function(n){this.$vm||(e.canIUse&&!e.canIUse("nextTick")&&console.error("当前微信基础库版本过低，请将 微信开发者工具-详情-项目设置-调试基础库版本 更换为`2.3.0`以上"),this.$vm=t,this.$vm.$mp={app:this},this.$vm.$scope=this,this.$vm.globalData=this.globalData,this.$vm._isMounted=!0,this.$vm.__call_hook("mounted",n),this.$vm.__call_hook("onLaunch",n))}};o.globalData=t.$options.globalData||{};var a=t.$options.methods;return a&&Object.keys(a).forEach((function(e){o[e]=a[e]})),we(h.default,t,Ee(e.getSystemInfoSync().language)||ve),sn(o,Ln),un(o,t.$options),o}function Dn(e){return In(e,{mocks:Bt,initRefs:Wt})}function Un(e){return App(Dn(e)),e}var Bn=/[!'()*]/g,Fn=function(e){return"%"+e.charCodeAt(0).toString(16)},Gn=/%2C/g,jn=function(e){return encodeURIComponent(e).replace(Bn,Fn).replace(Gn,",")};function zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jn,n=e?Object.keys(e).map((function(n){var r=e[n];if(void 0===r)return"";if(null===r)return t(n);if(Array.isArray(r)){var i=[];return r.forEach((function(e){void 0!==e&&(null===e?i.push(t(n)):i.push(t(n)+"="+t(e)))})),i.join("&")}return t(n)+"="+t(r)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?".concat(n):""}function Vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPage,r=t.initRelation,i=arguments.length>2?arguments[2]:void 0,o=dn(h.default,e),s=(0,a.default)(o,2),u=s[0],c=s[1],l=p({multipleSlots:!0,addGlobalClass:!0},c.options||{});c["mp-weixin"]&&c["mp-weixin"].options&&Object.assign(l,c["mp-weixin"].options);var d={options:l,data:pn(c,h.default.prototype),behaviors:vn(c,Gt),properties:_n(c.props,!1,c.__file,l),lifetimes:{attached:function(){var e=this.properties,t={mpType:n.call(this)?"page":"component",mpInstance:this,propsData:e};fn(e.vueId,this),r.call(this,{vuePid:this._$vuePid,vueOptions:t}),this.$vm=new u(t),hn(this.$vm,e.vueSlots),this.$vm.$mount()},ready:function(){this.$vm&&(this.$vm._isMounted=!0,this.$vm.__call_hook("mounted"),this.$vm.__call_hook("onReady"))},detached:function(){this.$vm&&this.$vm.$destroy()}},pageLifetimes:{show:function(e){this.$vm&&this.$vm.__call_hook("onPageShow",e)},hide:function(){this.$vm&&this.$vm.__call_hook("onPageHide")},resize:function(e){this.$vm&&this.$vm.__call_hook("onPageResize",e)}},methods:{__l:qt,__e:An}};return c.externalClasses&&(d.externalClasses=c.externalClasses),Array.isArray(c.wxsCallMethods)&&c.wxsCallMethods.forEach((function(e){d.methods[e]=function(t){return this.$vm[e](t)}})),i?[d,c,u]:n?d:[d,u]}function Hn(e,t){return Vn(e,{isPage:jt,initRelation:zt},t)}var Wn=["onShow","onHide","onUnload"];function qn(e){var t=Hn(e,!0),n=(0,a.default)(t,2),r=n[0],i=n[1];return sn(r.methods,Wn,i),r.methods.onLoad=function(e){this.options=e;var t=Object.assign({},e);delete t.__id__,this.$page={fullPath:"/"+(this.route||this.is)+zn(t)},this.$vm.$mp.query=e,this.$vm.__call_hook("onLoad",e)},un(r.methods,e,["onReady"]),Kt(r.methods,i.methods),r}function Xn(e){return qn(e)}function Yn(e){return Component(Xn(e))}function Jn(e){return Component(Hn(e))}function Kn(t){var n=Dn(t),r=getApp({allowDefault:!0});t.$scope=r;var i=r.globalData;if(i&&Object.keys(n.globalData).forEach((function(e){T(i,e)||(i[e]=n.globalData[e])})),Object.keys(n).forEach((function(e){T(r,e)||(r[e]=n[e])})),M(n.onShow)&&e.onAppShow&&e.onAppShow((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.__call_hook("onShow",n)})),M(n.onHide)&&e.onAppHide&&e.onAppHide((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.__call_hook("onHide",n)})),M(n.onLaunch)){var o=e.getLaunchOptionsSync&&e.getLaunchOptionsSync();t.__call_hook("onLaunch",o)}return t}function $n(t){var n=Dn(t);if(M(n.onShow)&&e.onAppShow&&e.onAppShow((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.__call_hook("onShow",n)})),M(n.onHide)&&e.onAppHide&&e.onAppHide((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.__call_hook("onHide",n)})),M(n.onLaunch)){var r=e.getLaunchOptionsSync&&e.getLaunchOptionsSync();t.__call_hook("onLaunch",r)}return t}Wn.push.apply(Wn,rn),tt.forEach((function(e){et[e]=!1})),nt.forEach((function(t){var n=et[t]&&et[t].name?et[t].name:t;e.canIUse(n)||(et[t]=!1)}));var Zn={};"undefined"!==typeof Proxy?Zn=new Proxy({},{get:function(t,n){return T(t,n)?t[n]:ke[n]?ke[n]:Ut[n]?ae(n,Ut[n]):ft[n]?ae(n,ft[n]):ut[n]?ae(n,ut[n]):Ct[n]?Ct[n]:ae(n,st(n,e[n]))},set:function(e,t,n){return e[t]=n,!0}}):(Object.keys(ke).forEach((function(e){Zn[e]=ke[e]})),Object.keys(ut).forEach((function(e){Zn[e]=ae(e,ut[e])})),Object.keys(ft).forEach((function(e){Zn[e]=ae(e,ft[e])})),Object.keys(Ct).forEach((function(e){Zn[e]=Ct[e]})),Object.keys(Ut).forEach((function(e){Zn[e]=ae(e,Ut[e])})),Object.keys(e).forEach((function(t){(T(e,t)||T(et,t))&&(Zn[t]=ae(t,st(t,e[t])))}))),e.createApp=Un,e.createPage=Yn,e.createComponent=Jn,e.createSubpackageApp=Kn,e.createPlugin=$n;var Qn=Zn,er=Qn;t.default=er}).call(this,n(1)["default"],n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(6),i=n(7),o=n(8),a=n(10);function s(e,t){return r(e)||i(e,t)||o(e,t)||a()}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e){if(Array.isArray(e))return e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(9);function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(12);function i(e,t,n){return t=r(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(13)["default"],i=n(14);function o(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(13)["default"];function i(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(16),i=n(17);function o(t,n,a){return i()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports["default"]=e.exports):(e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=Function.bind.apply(e,i),a=new o;return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports["default"]=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(19),i=n(20),o=n(8),a=n(21);function s(e){return r(e)||i(e)||o(e)||a()}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(9);function i(e){if(Array.isArray(e))return r(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";(function(e,r){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LOCALE_ZH_HANT=t.LOCALE_ZH_HANS=t.LOCALE_FR=t.LOCALE_ES=t.LOCALE_EN=t.I18n=t.Formatter=void 0,t.compileI18nJsonStr=I,t.hasI18nJson=O,t.initVueI18n=R,t.isI18nStr=D,t.isString=void 0,t.normalizeLocale=T,t.parseI18nJson=k,t.resolveLocale=j;var o=i(n(5)),a=i(n(23)),s=i(n(24)),u=i(n(13)),c=function(e){return null!==e&&"object"===(0,u.default)(e)},l=["{","}"],d=function(){function e(){(0,a.default)(this,e),this._caches=Object.create(null)}return(0,s.default)(e,[{key:"interpolate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;if(!t)return[e];var r=this._caches[e];return r||(r=p(e,n),this._caches[e]=r),m(r,t)}}]),e}();t.Formatter=d;var h=/^(?:\d)+/,f=/^(?:\w)+/;function p(e,t){var n=(0,o.default)(t,2),r=n[0],i=n[1],a=[],s=0,u="";while(s<e.length){var c=e[s++];if(c===r){u&&a.push({type:"text",value:u}),u="";var l="";c=e[s++];while(void 0!==c&&c!==i)l+=c,c=e[s++];var d=c===i,p=h.test(l)?"list":d&&f.test(l)?"named":"unknown";a.push({value:l,type:p})}else u+=c}return u&&a.push({type:"text",value:u}),a}function m(e,t){var n=[],r=0,i=Array.isArray(t)?"list":c(t)?"named":"unknown";if("unknown"===i)return n;while(r<e.length){var o=e[r];switch(o.type){case"text":n.push(o.value);break;case"list":n.push(t[parseInt(o.value,10)]);break;case"named":"named"===i?n.push(t[o.value]):console.warn("Type of token '".concat(o.type,"' and format of value '").concat(i,"' don't match!"));break;case"unknown":console.warn("Detect 'unknown' type of token!");break}r++}return n}var y="zh-Hans";t.LOCALE_ZH_HANS=y;var v="zh-Hant";t.LOCALE_ZH_HANT=v;var g="en";t.LOCALE_EN=g;var _="fr";t.LOCALE_FR=_;var b="es";t.LOCALE_ES=b;var x=Object.prototype.hasOwnProperty,M=function(e,t){return x.call(e,t)},C=new d;function w(e,t){return!!t.find((function(t){return-1!==e.indexOf(t)}))}function S(e,t){return t.find((function(t){return 0===e.indexOf(t)}))}function T(e,t){if(e){if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),"chinese"===e)return y;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?y:e.indexOf("-hant")>-1||w(e,["-tw","-hk","-mo","-cht"])?v:y;var n=[g,_,b];t&&Object.keys(t).length>0&&(n=Object.keys(t));var r=S(e,n);return r||void 0}}var N=function(){function e(t){var n=t.locale,r=t.fallbackLocale,i=t.messages,o=t.watcher,s=t.formater;(0,a.default)(this,e),this.locale=g,this.fallbackLocale=g,this.message={},this.messages={},this.watchers=[],r&&(this.fallbackLocale=r),this.formater=s||C,this.messages=i||{},this.setLocale(n||g),o&&this.watchLocale(o)}return(0,s.default)(e,[{key:"setLocale",value:function(e){var t=this,n=this.locale;this.locale=T(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],n!==this.locale&&this.watchers.forEach((function(e){e(t.locale,n)}))}},{key:"getLocale",value:function(){return this.locale}},{key:"watchLocale",value:function(e){var t=this,n=this.watchers.push(e)-1;return function(){t.watchers.splice(n,1)}}},{key:"add",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.messages[e];r?n?Object.assign(r,t):Object.keys(t).forEach((function(e){M(r,e)||(r[e]=t[e])})):this.messages[e]=t}},{key:"f",value:function(e,t,n){return this.formater.interpolate(e,t,n).join("")}},{key:"t",value:function(e,t,n){var r=this.message;return"string"===typeof t?(t=T(t,this.messages),t&&(r=this.messages[t])):n=t,M(r,e)?this.formater.interpolate(r[e],n).join(""):(console.warn("Cannot translate the value of keypath ".concat(e,". Use the value of keypath as default.")),e)}}]),e}();function E(e,t){e.$watchLocale?e.$watchLocale((function(e){t.setLocale(e)})):e.$watch((function(){return e.$locale}),(function(e){t.setLocale(e)}))}function A(){return"undefined"!==typeof e&&e.getLocale?e.getLocale():"undefined"!==typeof r&&r.getLocale?r.getLocale():g}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"!==typeof e){var i=[t,e];e=i[0],t=i[1]}"string"!==typeof e&&(e=A()),"string"!==typeof n&&(n="undefined"!==typeof __uniConfig&&__uniConfig.fallbackLocale||g);var o=new N({locale:e,fallbackLocale:n,messages:t,watcher:r}),a=function(e,t){if("function"!==typeof getApp)a=function(e,t){return o.t(e,t)};else{var n=!1;a=function(e,t){var r=getApp().$vm;return r&&(r.$locale,n||(n=!0,E(r,o))),o.t(e,t)}}return a(e,t)};return{i18n:o,f:function(e,t,n){return o.f(e,t,n)},t:function(e,t){return a(e,t)},add:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return o.add(e,t,n)},watch:function(e){return o.watchLocale(e)},getLocale:function(){return o.getLocale()},setLocale:function(e){return o.setLocale(e)}}}t.I18n=N;var P,L=function(e){return"string"===typeof e};function O(e,t){return P||(P=new d),G(e,(function(e,n){var r=e[n];return L(r)?!!D(r,t)||void 0:O(r,t)}))}function k(e,t,n){return P||(P=new d),G(e,(function(e,r){var i=e[r];L(i)?D(i,n)&&(e[r]=U(i,t,n)):k(i,t,n)})),e}function I(e,t){var n=t.locale,r=t.locales,i=t.delimiters;if(!D(e,i))return e;P||(P=new d);var o=[];Object.keys(r).forEach((function(e){e!==n&&o.push({locale:e,values:r[e]})})),o.unshift({locale:n,values:r[n]});try{return JSON.stringify(F(JSON.parse(e),o,i),null,2)}catch(a){}return e}function D(e,t){return e.indexOf(t[0])>-1}function U(e,t,n){return P.interpolate(e,t,n).join("")}function B(e,t,n,r){var i=e[t];if(L(i)){if(D(i,r)&&(e[t]=U(i,n[0].values,r),n.length>1)){var o=e[t+"Locales"]={};n.forEach((function(e){o[e.locale]=U(i,e.values,r)}))}}else F(i,n,r)}function F(e,t,n){return G(e,(function(e,r){B(e,r,t,n)})),e}function G(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t(e,n))return!0}else if(c(e))for(var r in e)if(t(e,r))return!0;return!1}function j(e){return function(t){return t?(t=T(t)||t,z(t).find((function(t){return e.indexOf(t)>-1}))):t}}function z(e){var t=[],n=e.split("-");while(n.length)t.push(n.join("-")),n.pop();return t}t.isString=L}).call(this,n(2)["default"],n(3))},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(12);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function o(e){return!0===e}function a(e){return!1===e}function s(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return null!==e&&"object"===typeof e}var c=Object.prototype.toString;function l(e){return c.call(e).slice(8,-1)}function d(e){return"[object Object]"===c.call(e)}function h(e){return"[object RegExp]"===c.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return i(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function m(e){return null==e?"":Array.isArray(e)||d(e)&&e.toString===c?JSON.stringify(e,null,2):String(e)}function y(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var g=v("slot,component",!0),_=v("key,ref,slot,slot-scope,is");function b(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var x=Object.prototype.hasOwnProperty;function M(e,t){return x.call(e,t)}function C(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var w=/-(\w)/g,S=C((function(e){return e.replace(w,(function(e,t){return t?t.toUpperCase():""}))})),T=C((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),N=/\B([A-Z])/g,E=C((function(e){return e.replace(N,"-$1").toLowerCase()}));function A(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function R(e,t){return e.bind(t)}var P=Function.prototype.bind?R:A;function L(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function O(e,t){for(var n in t)e[n]=t[n];return e}function k(e){for(var t={},n=0;n<e.length;n++)e[n]&&O(t,e[n]);return t}function I(e,t,n){}var D=function(e,t,n){return!1},U=function(e){return e};function B(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return B(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return B(e[n],t[n])}))}catch(c){return!1}}function F(e,t){for(var n=0;n<e.length;n++)if(B(e[n],t))return n;return-1}function G(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var j=["component","directive","filter"],z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:I,parsePlatformTagName:U,mustUseProp:D,async:!0,_lifecycleHooks:z},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function q(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var X=new RegExp("[^"+H.source+".$_\\d]");function Y(e){if(!X.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var J,K="__proto__"in{},$="undefined"!==typeof window,Z="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Q=Z&&WXEnvironment.platform.toLowerCase(),ee=$&&window.navigator.userAgent.toLowerCase(),te=ee&&/msie|trident/.test(ee),ne=(ee&&ee.indexOf("msie 9.0"),ee&&ee.indexOf("edge/")>0),re=(ee&&ee.indexOf("android"),ee&&/iphone|ipad|ipod|ios/.test(ee)||"ios"===Q),ie=(ee&&/chrome\/\d+/.test(ee),ee&&/phantomjs/.test(ee),ee&&ee.match(/firefox\/(\d+)/),{}.watch);if($)try{var oe={};Object.defineProperty(oe,"passive",{get:function(){}}),window.addEventListener("test-passive",null,oe)}catch(Fi){}var ae=function(){return void 0===J&&(J=!$&&!Z&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),J},se=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ue(e){return"function"===typeof e&&/native code/.test(e.toString())}var ce,le="undefined"!==typeof Symbol&&ue(Symbol)&&"undefined"!==typeof Reflect&&ue(Reflect.ownKeys);ce="undefined"!==typeof Set&&ue(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var de=I,he=I,fe=I,pe=I,me="undefined"!==typeof console,ye=/(?:^|[-_])(\w)/g,ve=function(e){return e.replace(ye,(function(e){return e.toUpperCase()})).replace(/[-_]/g,"")};de=function(e,t){var n=t?fe(t):"";V.warnHandler?V.warnHandler.call(null,e,t,n):me&&!V.silent&&console.error("[Vue warn]: "+e+n)},he=function(e,t){me&&!V.silent&&console.warn("[Vue tip]: "+e+(t?fe(t):""))},pe=function(e,t){if(e.$root===e)return e.$options&&e.$options.__file?""+e.$options.__file:"<Root>";var n="function"===typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e,r=n.name||n._componentTag,i=n.__file;if(!r&&i){var o=i.match(/([^/\\]+)\.vue$/);r=o&&o[1]}return(r?"<"+ve(r)+">":"<Anonymous>")+(i&&!1!==t?" at "+i:"")};var ge=function(e,t){var n="";while(t)t%2===1&&(n+=e),t>1&&(e+=e),t>>=1;return n};fe=function(e){if(e._isVue&&e.$parent){var t=[],n=0;while(e&&"PageBody"!==e.$options.name){if(t.length>0){var r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}!e.$options.isReserved&&t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map((function(e,t){return""+(0===t?"---\x3e ":ge(" ",5+2*t))+(Array.isArray(e)?pe(e[0])+"... ("+e[1]+" recursive calls)":pe(e))})).join("\n")}return"\n\n(found in "+pe(e)+")"};var _e=0,be=function(){this.id=_e++,this.subs=[]};function xe(e){be.SharedObject.targetStack.push(e),be.SharedObject.target=e,be.target=e}function Me(){be.SharedObject.targetStack.pop(),be.SharedObject.target=be.SharedObject.targetStack[be.SharedObject.targetStack.length-1],be.target=be.SharedObject.target}be.prototype.addSub=function(e){this.subs.push(e)},be.prototype.removeSub=function(e){b(this.subs,e)},be.prototype.depend=function(){be.SharedObject.target&&be.SharedObject.target.addDep(this)},be.prototype.notify=function(){var e=this.subs.slice();V.async||e.sort((function(e,t){return e.id-t.id}));for(var t=0,n=e.length;t<n;t++)e[t].update()},be.SharedObject={},be.SharedObject.target=null,be.SharedObject.targetStack=[];var Ce=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},we={child:{configurable:!0}};we.child.get=function(){return this.componentInstance},Object.defineProperties(Ce.prototype,we);var Se=function(e){void 0===e&&(e="");var t=new Ce;return t.text=e,t.isComment=!0,t};function Te(e){return new Ce(void 0,void 0,void 0,String(e))}function Ne(e){var t=new Ce(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ee=Array.prototype,Ae=Object.create(Ee),Re=["push","pop","shift","unshift","splice","sort","reverse"];Re.forEach((function(e){var t=Ee[e];q(Ae,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Pe=Object.getOwnPropertyNames(Ae),Le=!0;function Oe(e){Le=e}var ke=function(e){this.value=e,this.dep=new be,this.vmCount=0,q(e,"__ob__",this),Array.isArray(e)?(K?e.push!==e.__proto__.push?De(e,Ae,Pe):Ie(e,Ae):De(e,Ae,Pe),this.observeArray(e)):this.walk(e)};function Ie(e,t){e.__proto__=t}function De(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];q(e,o,t[o])}}function Ue(e,t){var n;if(u(e)&&!(e instanceof Ce))return M(e,"__ob__")&&e.__ob__ instanceof ke?n=e.__ob__:!Le||ae()||!Array.isArray(e)&&!d(e)||!Object.isExtensible(e)||e._isVue||e.__v_isMPComponent||(n=new ke(e)),t&&n&&n.vmCount++,n}function Be(e,t,n,r,i){var o=new be,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=e[t]);var c=!i&&Ue(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return be.SharedObject.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(t)&&je(t))),t},set:function(t){var a=s?s.call(e):n;t===a||t!==t&&a!==a||(r&&r(),s&&!u||(u?u.call(e,t):n=t,c=!i&&Ue(t),o.notify()))}})}}function Fe(e,t,n){if((r(e)||s(e))&&de("Cannot set reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e._isVue||i&&i.vmCount?(de("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):i?(Be(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}function Ge(e,t){if((r(e)||s(e))&&de("Cannot delete reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&f(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount?de("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):M(e,t)&&(delete e[t],n&&n.dep.notify())}}function je(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&je(t)}ke.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Be(e,t[n])},ke.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ue(e[t])};var ze=V.optionMergeStrategies;function Ve(e,t){if(!t)return e;for(var n,r,i,o=le?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=e[n],i=t[n],M(e,n)?r!==i&&d(r)&&d(i)&&Ve(r,i):Fe(e,n,i));return e}function He(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?Ve(r,i):i}:t?e?function(){return Ve("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function We(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?qe(n):n}function qe(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Xe(e,t,n,r){var i=Object.create(e||null);return t?(et(r,t,n),O(i,t)):i}ze.el=ze.propsData=function(e,t,n,r){return n||de('option "'+r+'" can only be used during instance creation with the `new` keyword.'),Ye(e,t)},ze.data=function(e,t,n){return n?He(e,t,n):t&&"function"!==typeof t?(de('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):He(e,t)},z.forEach((function(e){ze[e]=We})),j.forEach((function(e){ze[e+"s"]=Xe})),ze.watch=function(e,t,n,r){if(e===ie&&(e=void 0),t===ie&&(t=void 0),!t)return Object.create(e||null);if(et(r,t,n),!e)return t;var i={};for(var o in O(i,e),t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},ze.props=ze.methods=ze.inject=ze.computed=function(e,t,n,r){if(t&&et(r,t,n),!e)return t;var i=Object.create(null);return O(i,e),t&&O(i,t),i},ze.provide=He;var Ye=function(e,t){return void 0===t?e:t};function Je(e){for(var t in e.components)Ke(t)}function Ke(e){new RegExp("^[a-zA-Z][\\-\\.0-9_"+H.source+"]*$").test(e)||de('Invalid component name: "'+e+'". Component names should conform to valid custom element name in html5 specification.'),(g(e)||V.isReservedTag(e))&&de("Do not use built-in or reserved HTML elements as component id: "+e)}function $e(e,t){var n=e.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i?(o=S(i),a[o]={type:null}):de("props must be strings when using array syntax.")}else if(d(n))for(var s in n)i=n[s],o=S(s),a[o]=d(i)?i:{type:i};else de('Invalid value for option "props": expected an Array or an Object, but got '+l(n)+".",t);e.props=a}}function Ze(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(d(n))for(var o in n){var a=n[o];r[o]=d(a)?O({from:o},a):{from:a}}else de('Invalid value for option "inject": expected an Array or an Object, but got '+l(n)+".",t)}}function Qe(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function et(e,t,n){d(t)||de('Invalid value for option "'+e+'": expected an Object, but got '+l(t)+".",n)}function tt(e,t,n){if(Je(t),"function"===typeof t&&(t=t.options),$e(t,n),Ze(t,n),Qe(t),!t._base&&(t.extends&&(e=tt(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=tt(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)M(e,o)||s(o);function s(r){var i=ze[r]||Ye;a[r]=i(e[r],t[r],n,r)}return a}function nt(e,t,n,r){if("string"===typeof n){var i=e[t];if(M(i,n))return i[n];var o=S(n);if(M(i,o))return i[o];var a=T(o);if(M(i,a))return i[a];var s=i[n]||i[o]||i[a];return r&&!s&&de("Failed to resolve "+t.slice(0,-1)+": "+n,e),s}}function rt(e,t,n,r){var i=t[e],o=!M(n,e),a=n[e],s=lt(Boolean,i.type);if(s>-1)if(o&&!M(i,"default"))a=!1;else if(""===a||a===E(e)){var u=lt(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=it(r,i,e);var c=Le;Oe(!0),Ue(a),Oe(c)}return ot(i,e,a,r,o),a}function it(e,t,n){if(M(t,"default")){var r=t.default;return u(r)&&de('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==ut(t.type)?r.call(e):r}}function ot(e,t,n,r,i){if(e.required&&i)de('Missing required prop: "'+t+'"',r);else if(null!=n||e.required){var o=e.type,a=!o||!0===o,s=[];if(o){Array.isArray(o)||(o=[o]);for(var u=0;u<o.length&&!a;u++){var c=st(n,o[u]);s.push(c.expectedType||""),a=c.valid}}if(a){var l=e.validator;l&&(l(n)||de('Invalid prop: custom validator check failed for prop "'+t+'".',r))}else de(dt(t,n,s),r)}}var at=/^(String|Number|Boolean|Function|Symbol)$/;function st(e,t){var n,r=ut(t);if(at.test(r)){var i=typeof e;n=i===r.toLowerCase(),n||"object"!==i||(n=e instanceof t)}else n="Object"===r?d(e):"Array"===r?Array.isArray(e):e instanceof t;return{valid:n,expectedType:r}}function ut(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function ct(e,t){return ut(e)===ut(t)}function lt(e,t){if(!Array.isArray(t))return ct(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(ct(t[n],e))return n;return-1}function dt(e,t,n){var r='Invalid prop: type check failed for prop "'+e+'". Expected '+n.map(T).join(", "),i=n[0],o=l(t),a=ht(t,i),s=ht(t,o);return 1===n.length&&ft(i)&&!pt(i,o)&&(r+=" with value "+a),r+=", got "+o+" ",ft(o)&&(r+="with value "+s+"."),r}function ht(e,t){return"String"===t?'"'+e+'"':"Number"===t?""+Number(e):""+e}function ft(e){var t=["string","number","boolean"];return t.some((function(t){return e.toLowerCase()===t}))}function pt(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return e.some((function(e){return"boolean"===e.toLowerCase()}))}function mt(e,t,n){xe();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,e,t,n);if(a)return}catch(Fi){vt(Fi,r,"errorCaptured hook")}}}vt(e,t,n)}finally{Me()}}function yt(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(e){return mt(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(Fi){mt(Fi,r,i)}return o}function vt(e,t,n){if(V.errorHandler)try{return V.errorHandler.call(null,e,t,n)}catch(Fi){Fi!==e&&gt(Fi,null,"config.errorHandler")}gt(e,t,n)}function gt(e,t,n){if(de("Error in "+n+': "'+e.toString()+'"',t),!$&&!Z||"undefined"===typeof console)throw e;console.error(e)}var _t,bt,xt=[],Mt=!1;function Ct(){Mt=!1;var e=xt.slice(0);xt.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ue(Promise)){var wt=Promise.resolve();_t=function(){wt.then(Ct),re&&setTimeout(I)}}else if(te||"undefined"===typeof MutationObserver||!ue(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())_t="undefined"!==typeof setImmediate&&ue(setImmediate)?function(){setImmediate(Ct)}:function(){setTimeout(Ct,0)};else{var St=1,Tt=new MutationObserver(Ct),Nt=document.createTextNode(String(St));Tt.observe(Nt,{characterData:!0}),_t=function(){St=(St+1)%2,Nt.data=String(St)}}function Et(e,t){var n;if(xt.push((function(){if(e)try{e.call(t)}catch(Fi){mt(Fi,t,"nextTick")}else n&&n(t)})),Mt||(Mt=!0,_t()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var At=v("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),Rt=function(e,t){de('Property or method "'+t+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',e)},Pt=function(e,t){de('Property "'+t+'" must be accessed with "$data.'+t+'" because properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://vuejs.org/v2/api/#data',e)},Lt="undefined"!==typeof Proxy&&ue(Proxy);if(Lt){var Ot=v("stop,prevent,self,ctrl,shift,alt,meta,exact");V.keyCodes=new Proxy(V.keyCodes,{set:function(e,t,n){return Ot(t)?(de("Avoid overwriting built-in modifier in config.keyCodes: ."+t),!1):(e[t]=n,!0)}})}var kt={has:function(e,t){var n=t in e,r=At(t)||"string"===typeof t&&"_"===t.charAt(0)&&!(t in e.$data);return n||r||(t in e.$data?Pt(e,t):Rt(e,t)),n||!r}},It={get:function(e,t){return"string"!==typeof t||t in e||(t in e.$data?Pt(e,t):Rt(e,t)),e[t]}};bt=function(e){if(Lt){var t=e.$options,n=t.render&&t.render._withStripped?It:kt;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e};var Dt,Ut,Bt=new ce;function Ft(e){Gt(e,Bt),Bt.clear()}function Gt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!u(e)||Object.isFrozen(e)||e instanceof Ce)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)Gt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)Gt(e[r[n]],t)}}}var jt=$&&window.performance;jt&&jt.mark&&jt.measure&&jt.clearMarks&&jt.clearMeasures&&(Dt=function(e){return jt.mark(e)},Ut=function(e,t,n){jt.measure(e,t,n),jt.clearMarks(t),jt.clearMarks(n)});var zt=C((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function Vt(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return yt(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)yt(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function Ht(e,t,n,i,a,s){var u,c,l,d;for(u in e)c=e[u],l=t[u],d=zt(u),r(c)?de('Invalid handler for event "'+d.name+'": got '+String(c),s):r(l)?(r(c.fns)&&(c=e[u]=Vt(c,s)),o(d.once)&&(c=e[u]=a(d.name,c,d.capture)),n(d.name,c,d.capture,d.passive,d.params)):c!==l&&(l.fns=c,e[u]=l);for(u in t)r(e[u])&&(d=zt(u),i(d.name,t[u],d.capture))}function Wt(e,t,n,o){var a=t.options.mpOptions&&t.options.mpOptions.properties;if(r(a))return n;var s=t.options.mpOptions.externalClasses||[],u=e.attrs,c=e.props;if(i(u)||i(c))for(var l in a){var d=E(l),h=Xt(n,c,l,d,!0)||Xt(n,u,l,d,!1);h&&n[l]&&-1!==s.indexOf(d)&&o[S(n[l])]&&(n[l]=o[S(n[l])])}return n}function qt(e,t,n,o){var a=t.options.props;if(r(a))return Wt(e,t,{},o);var s={},u=e.attrs,c=e.props;if(i(u)||i(c))for(var l in a){var d=E(l),h=l.toLowerCase();l!==h&&u&&M(u,h)&&he('Prop "'+h+'" is passed to component '+pe(n||t)+', but the declared prop name is "'+l+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+d+'" instead of "'+l+'".'),Xt(s,c,l,d,!0)||Xt(s,u,l,d,!1)}return Wt(e,t,s,o)}function Xt(e,t,n,r,o){if(i(t)){if(M(t,n))return e[n]=t[n],o||delete t[n],!0;if(M(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function Yt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Jt(e){return s(e)?[Te(e)]:Array.isArray(e)?$t(e):void 0}function Kt(e){return i(e)&&i(e.text)&&a(e.isComment)}function $t(e,t){var n,a,u,c,l=[];for(n=0;n<e.length;n++)a=e[n],r(a)||"boolean"===typeof a||(u=l.length-1,c=l[u],Array.isArray(a)?a.length>0&&(a=$t(a,(t||"")+"_"+n),Kt(a[0])&&Kt(c)&&(l[u]=Te(c.text+a[0].text),a.shift()),l.push.apply(l,a)):s(a)?Kt(c)?l[u]=Te(c.text+a):""!==a&&l.push(Te(a)):Kt(a)&&Kt(c)?l[u]=Te(c.text+a.text):(o(e._isVList)&&i(a.tag)&&r(a.key)&&i(t)&&(a.key="__vlist"+t+"_"+n+"__"),l.push(a)));return l}function Zt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Qt(e){var t=en(e.$options.inject,e);t&&(Oe(!1),Object.keys(t).forEach((function(n){Be(e,n,t[n],(function(){de('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',e)}))})),Oe(!0))}function en(e,t){if(e){for(var n=Object.create(null),r=le?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=e[o].from,s=t;while(s){if(s._provided&&M(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var u=e[o].default;n[o]="function"===typeof u?u.call(t):u}else de('Injection "'+o+'" not found',t)}}return n}}function tn(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)o.asyncMeta&&o.asyncMeta.data&&"page"===o.asyncMeta.data.slot?(n["page"]||(n["page"]=[])).push(o):(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(nn)&&delete n[c];return n}function nn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function rn(e,t,r){var i,o=Object.keys(t).length>0,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},e)e[u]&&"$"!==u[0]&&(i[u]=on(t,u,e[u]))}else i={};for(var c in t)c in i||(i[c]=an(t,c));return e&&Object.isExtensible(e)&&(e._normalized=i),q(i,"$stable",a),q(i,"$key",s),q(i,"$hasNormal",o),i}function on(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:Jt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function an(e,t){return function(){return e[t]}}function sn(e,t){var n,r,o,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r,r,r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r,r,r);else if(u(e))if(le&&e[Symbol.iterator]){n=[];var c=e[Symbol.iterator](),l=c.next();while(!l.done)n.push(t(l.value,n.length,r,r++)),l=c.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=t(e[s],s,r,r);return i(n)||(n=[]),n._isVList=!0,n}function un(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(u(r)||de("slot v-bind without argument expects an Object",this),n=O(O({},r),n)),i=o(n,this,n._i)||t):i=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function cn(e){return nt(this.$options,"filters",e,!0)||U}function ln(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function dn(e,t,n,r,i){var o=V.keyCodes[t]||n;return i&&r&&!V.keyCodes[t]?ln(i,r):o?ln(o,e):r?E(r)!==t:void 0}function hn(e,t,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=k(n));var a=function(a){if("class"===a||"style"===a||_(a))o=e;else{var s=e.attrs&&e.attrs.type;o=r||V.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=S(a),c=E(a);if(!(u in o)&&!(c in o)&&(o[a]=n[a],i)){var l=e.on||(e.on={});l["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else de("v-bind without argument expects an Object or Array value",this);return e}function fn(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),mn(r,"__static__"+e,!1)),r}function pn(e,t,n){return mn(e,"__once__"+t+(n?"_"+n:""),!0),e}function mn(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&yn(e[r],t+"_"+r,n);else yn(e,t,n)}function yn(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function vn(e,t){if(t)if(d(t)){var n=e.on=e.on?O({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else de("v-on without argument expects an Object value",this);return e}function gn(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?gn(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function _n(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r?e[t[n]]=t[n+1]:""!==r&&null!==r&&de("Invalid value for dynamic directive argument (expected string or null): "+r,this)}return e}function bn(e,t){return"string"===typeof e?t+e:e}function xn(e){e._o=pn,e._n=y,e._s=m,e._l=sn,e._t=un,e._q=B,e._i=F,e._m=fn,e._f=cn,e._k=dn,e._b=hn,e._v=Te,e._e=Se,e._u=gn,e._g=vn,e._d=_n,e._p=bn}function Mn(e,t,r,i,a){var s,u=this,c=a.options;M(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=o(c._compiled),d=!l;this.data=e,this.props=t,this.children=r,this.parent=i,this.listeners=e.on||n,this.injections=en(c.inject,i),this.slots=function(){return u.$slots||rn(e.scopedSlots,u.$slots=tn(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return rn(e.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=rn(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,n,r){var o=In(s,e,t,n,r,d);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return In(s,e,t,n,r,d)}}function Cn(e,t,r,o,a){var s=e.options,u={},c=s.props;if(i(c))for(var l in c)u[l]=rt(l,c,t||n);else i(r.attrs)&&Sn(u,r.attrs),i(r.props)&&Sn(u,r.props);var d=new Mn(r,u,a,o,e),h=s.render.call(null,d._c,d);if(h instanceof Ce)return wn(h,r,d.parent,s,d);if(Array.isArray(h)){for(var f=Jt(h)||[],p=new Array(f.length),m=0;m<f.length;m++)p[m]=wn(f[m],r,d.parent,s,d);return p}}function wn(e,t,n,r,i){var o=Ne(e);return o.fnContext=n,o.fnOptions=r,(o.devtoolsMeta=o.devtoolsMeta||{}).renderContext=i,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function Sn(e,t){for(var n in t)e[S(n)]=t[n]}xn(Mn.prototype);var Tn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Tn.prepatch(n,n)}else{var r=e.componentInstance=An(e,er);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;or(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(cr(n,"onServiceCreated"),cr(n,"onServiceAttached"),n._isMounted=!0,cr(n,"mounted")),e.data.keepAlive&&(t._isMounted?Cr(n):sr(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?ur(t,!0):t.$destroy())}},Nn=Object.keys(Tn);function En(e,t,n,a,s){if(!r(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"===typeof e){var l;if(r(e.cid)&&(l=e,e=Wn(l,c),void 0===e))return Hn(l,t,n,a,s);t=t||{},qr(e),i(t.model)&&Ln(e.options,t);var d=qt(t,e,s,n);if(o(e.options.functional))return Cn(e,d,t,n,a);var h=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var f=t.slot;t={},f&&(t.slot=f)}Rn(t);var p=e.options.name||s,m=new Ce("vue-component-"+e.cid+(p?"-"+p:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:h,tag:s,children:a},l);return m}de("Invalid Component definition: "+String(e),n)}}function An(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function Rn(e){for(var t=e.hook||(e.hook={}),n=0;n<Nn.length;n++){var r=Nn[n],i=t[r],o=Tn[r];i===o||i&&i._merged||(t[r]=i?Pn(o,i):o)}}function Pn(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function Ln(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),a=o[r],s=t.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var On=1,kn=2;function In(e,t,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=kn),Dn(e,t,n,r,i)}function Dn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return de("Avoid using observed data object as vnode data: "+JSON.stringify(n)+"\nAlways create fresh vnode data objects in each render!",e),Se();if(i(n)&&i(n.is)&&(t=n.is),!t)return Se();var a,u,c;(i(n)&&i(n.key)&&!s(n.key)&&de("Avoid using non-primitive value as key, use string/number value instead.",e),Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===kn?r=Jt(r):o===On&&(r=Yt(r)),"string"===typeof t)?(u=e.$vnode&&e.$vnode.ns||V.getTagNamespace(t),V.isReservedTag(t)?(i(n)&&i(n.nativeOn)&&de("The .native modifier for v-on is only valid on components but it was used on <"+t+">.",e),a=new Ce(V.parsePlatformTagName(t),n,r,void 0,void 0,e)):a=n&&n.pre||!i(c=nt(e.$options,"components",t))?new Ce(t,n,r,void 0,void 0,e):En(c,n,e,r,t)):a=En(t,n,e,r);return Array.isArray(a)?a:i(a)?(i(u)&&Un(a,u),i(n)&&Bn(n),a):Se()}function Un(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var a=0,s=e.children.length;a<s;a++){var u=e.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&Un(u,t,n)}}function Bn(e){u(e.style)&&Ft(e.style),u(e.class)&&Ft(e.class)}function Fn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,i=r&&r.context;e.$slots=tn(t._renderChildren,i),e.$scopedSlots=n,e._c=function(t,n,r,i){return In(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return In(e,t,n,r,i,!0)};var o=r&&r.data;Be(e,"$attrs",o&&o.attrs||n,(function(){!tr&&de("$attrs is readonly.",e)}),!0),Be(e,"$listeners",t._parentListeners||n,(function(){!tr&&de("$listeners is readonly.",e)}),!0)}var Gn,jn=null;function zn(e){xn(e.prototype),e.prototype.$nextTick=function(e){return Et(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=rn(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{jn=t,e=r.call(t._renderProxy,t.$createElement)}catch(Fi){if(mt(Fi,t,"render"),t.$options.renderError)try{e=t.$options.renderError.call(t._renderProxy,t.$createElement,Fi)}catch(Fi){mt(Fi,t,"renderError"),e=t._vnode}else e=t._vnode}finally{jn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof Ce||(Array.isArray(e)&&de("Multiple root nodes returned from render function. Render function should return a single root node.",t),e=Se()),e.parent=i,e}}function Vn(e,t){return(e.__esModule||le&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function Hn(e,t,n,r,i){var o=Se();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function Wn(e,t){if(o(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=jn;if(n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var a=e.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return b(a,n)}));var d=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},h=G((function(n){e.resolved=Vn(n,t),s?a.length=0:d(!0)})),f=G((function(t){de("Failed to resolve async component: "+String(e)+(t?"\nReason: "+t:"")),i(e.errorComp)&&(e.error=!0,d(!0))})),m=e(h,f);return u(m)&&(p(m)?r(e.resolved)&&m.then(h,f):p(m.component)&&(m.component.then(h,f),i(m.error)&&(e.errorComp=Vn(m.error,t)),i(m.loading)&&(e.loadingComp=Vn(m.loading,t),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,d(!1))}),m.delay||200)),i(m.timeout)&&(l=setTimeout((function(){l=null,r(e.resolved)&&f("timeout ("+m.timeout+"ms)")}),m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function qn(e){return e.isComment&&e.asyncFactory}function Xn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||qn(n)))return n}}function Yn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Zn(e,t)}function Jn(e,t){Gn.$on(e,t)}function Kn(e,t){Gn.$off(e,t)}function $n(e,t){var n=Gn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Zn(e,t,n){Gn=e,Ht(t,n||{},Jn,Kn,$n,e),Gn=void 0}function Qn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(o=a[s],o===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=e.toLowerCase();n!==e&&t._events[n]&&he('Event "'+n+'" is emitted in component '+pe(t)+' but the handler is registered for "'+e+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+E(e)+'" instead of "'+e+'".');var r=t._events[e];if(r){r=r.length>1?L(r):r;for(var i=L(arguments,1),o='event handler for "'+e+'"',a=0,s=r.length;a<s;a++)yt(r[a],t,i,t,o)}return t}}var er=null,tr=!1;function nr(e){var t=er;return er=e,function(){er=t}}function rr(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function ir(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=nr(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){cr(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||b(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),cr(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function or(e,t,r,i,o){tr=!0;var a=i.data.scopedSlots,s=e.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),c=!!(o||e.$options._renderChildren||u);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Oe(!1);for(var l=e._props,d=e.$options._propKeys||[],h=0;h<d.length;h++){var f=d[h],p=e.$options.props;l[f]=rt(f,p,t,e)}Oe(!0),e.$options.propsData=t}e._$updateProperties&&e._$updateProperties(e),r=r||n;var m=e.$options._parentListeners;e.$options._parentListeners=r,Zn(e,r,m),c&&(e.$slots=tn(o,i.context),e.$forceUpdate()),tr=!1}function ar(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function sr(e,t){if(t){if(e._directInactive=!1,ar(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)sr(e.$children[n]);cr(e,"activated")}}function ur(e,t){if((!t||(e._directInactive=!0,!ar(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)ur(e.$children[n]);cr(e,"deactivated")}}function cr(e,t){xe();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)yt(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),Me()}var lr=100,dr=[],hr=[],fr={},pr={},mr=!1,yr=!1,vr=0;function gr(){vr=dr.length=hr.length=0,fr={},pr={},mr=yr=!1}var _r=Date.now;if($&&!te){var br=window.performance;br&&"function"===typeof br.now&&_r()>document.createEvent("Event").timeStamp&&(_r=function(){return br.now()})}function xr(){var e,t;for(_r(),yr=!0,dr.sort((function(e,t){return e.id-t.id})),vr=0;vr<dr.length;vr++)if(e=dr[vr],e.before&&e.before(),t=e.id,fr[t]=null,e.run(),null!=fr[t]&&(pr[t]=(pr[t]||0)+1,pr[t]>lr)){de("You may have an infinite update loop "+(e.user?'in watcher with expression "'+e.expression+'"':"in a component render function."),e.vm);break}var n=hr.slice(),r=dr.slice();gr(),wr(n),Mr(r),se&&V.devtools&&se.emit("flush")}function Mr(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&cr(r,"updated")}}function Cr(e){e._inactive=!1,hr.push(e)}function wr(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,sr(e[t],!0)}function Sr(e){var t=e.id;if(null==fr[t]){if(fr[t]=!0,yr){var n=dr.length-1;while(n>vr&&dr[n].id>e.id)n--;dr.splice(n+1,0,e)}else dr.push(e);if(!mr){if(mr=!0,!V.async)return void xr();Et(xr)}}}var Tr=0,Nr=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Tr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ce,this.newDepIds=new ce,this.expression=t.toString(),"function"===typeof t?this.getter=t:(this.getter=Y(t),this.getter||(this.getter=I,de('Failed watching path: "'+t+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',e))),this.value=this.lazy?void 0:this.get()};Nr.prototype.get=function(){var e;xe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Fi){if(!this.user)throw Fi;mt(Fi,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Ft(e),Me(),this.cleanupDeps()}return e},Nr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Nr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Sr(this)},Nr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(Fi){mt(Fi,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},Nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Nr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},Nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||b(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var Er={enumerable:!0,configurable:!0,get:I,set:I};function Ar(e,t,n){Er.get=function(){return this[t][n]},Er.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Er)}function Rr(e){e._watchers=[];var t=e.$options;t.props&&Pr(e,t.props),t.methods&&Fr(e,t.methods),t.data?Lr(e):Ue(e._data={},!0),t.computed&&Ir(e,t.computed),t.watch&&t.watch!==ie&&Gr(e,t.watch)}function Pr(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||Oe(!1);var a=function(a){i.push(a);var s=rt(a,t,n,e),u=E(a);(_(u)||V.isReservedAttr(u))&&de('"'+u+'" is a reserved attribute and cannot be used as component prop.',e),Be(r,a,s,(function(){if(!o&&!tr){if("mp-baidu"===e.mpHost||"mp-kuaishou"===e.mpHost||"mp-xhs"===e.mpHost)return;if("value"===a&&Array.isArray(e.$options.behaviors)&&-1!==e.$options.behaviors.indexOf("uni://form-field"))return;if(e._getFormData)return;var t=e.$parent;while(t){if(t.__next_tick_pending)return;t=t.$parent}de("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+a+'"',e)}})),a in e||Ar(e,"_props",a)};for(var s in t)a(s);Oe(!0)}function Lr(e){var t=e.$options.data;t=e._data="function"===typeof t?Or(t,e):t||{},d(t)||(t={},de("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));var n=Object.keys(t),r=e.$options.props,i=e.$options.methods,o=n.length;while(o--){var a=n[o];i&&M(i,a)&&de('Method "'+a+'" has already been defined as a data property.',e),r&&M(r,a)?de('The data property "'+a+'" is already declared as a prop. Use prop default value instead.',e):W(a)||Ar(e,"_data",a)}Ue(t,!0)}function Or(e,t){xe();try{return e.call(t,t)}catch(Fi){return mt(Fi,t,"data()"),{}}finally{Me()}}var kr={lazy:!0};function Ir(e,t){var n=e._computedWatchers=Object.create(null),r=ae();for(var i in t){var o=t[i],a="function"===typeof o?o:o.get;null==a&&de('Getter is missing for computed property "'+i+'".',e),r||(n[i]=new Nr(e,a||I,I,kr)),i in e?i in e.$data?de('The computed property "'+i+'" is already defined in data.',e):e.$options.props&&i in e.$options.props&&de('The computed property "'+i+'" is already defined as a prop.',e):Dr(e,i,o)}}function Dr(e,t,n){var r=!ae();"function"===typeof n?(Er.get=r?Ur(t):Br(n),Er.set=I):(Er.get=n.get?r&&!1!==n.cache?Ur(t):Br(n.get):I,Er.set=n.set||I),Er.set===I&&(Er.set=function(){de('Computed property "'+t+'" was assigned to but it has no setter.',this)}),Object.defineProperty(e,t,Er)}function Ur(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),be.SharedObject.target&&t.depend(),t.value}}function Br(e){return function(){return e.call(this,this)}}function Fr(e,t){var n=e.$options.props;for(var r in t)"function"!==typeof t[r]&&de('Method "'+r+'" has type "'+typeof t[r]+'" in the component definition. Did you reference the function correctly?',e),n&&M(n,r)&&de('Method "'+r+'" has already been defined as a prop.',e),r in e&&W(r)&&de('Method "'+r+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),e[r]="function"!==typeof t[r]?I:P(t[r],e)}function Gr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)jr(e,n,r[i]);else jr(e,n,r)}}function jr(e,t,n,r){return d(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function zr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};t.set=function(){de("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){de("$props is readonly.",this)},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Fe,e.prototype.$delete=Ge,e.prototype.$watch=function(e,t,n){var r=this;if(d(t))return jr(r,e,t,n);n=n||{},n.user=!0;var i=new Nr(r,e,t,n);if(n.immediate)try{t.call(r,i.value)}catch(o){mt(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var Vr=0;function Hr(e){e.prototype._init=function(e){var t,n,r=this;r._uid=Vr++,V.performance&&Dt&&(t="vue-perf-start:"+r._uid,n="vue-perf-end:"+r._uid,Dt(t)),r._isVue=!0,e&&e._isComponent?Wr(r,e):r.$options=tt(qr(r.constructor),e||{},r),bt(r),r._self=r,rr(r),Yn(r),Fn(r),cr(r,"beforeCreate"),!r._$fallback&&Qt(r),Rr(r),!r._$fallback&&Zt(r),!r._$fallback&&cr(r,"created"),V.performance&&Dt&&(r._name=pe(r,!1),Dt(n),Ut("vue "+r._name+" init",t,n)),r.$options.el&&r.$mount(r.$options.el)}}function Wr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function qr(e){var t=e.options;if(e.super){var n=qr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=Xr(e);i&&O(e.extendOptions,i),t=e.options=tt(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Xr(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function Yr(e){this instanceof Yr||de("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function Jr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=L(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Kr(e){e.mixin=function(e){return this.options=tt(this.options,e),this}}function $r(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;o&&Ke(o);var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=tt(n.options,e),a["super"]=n,a.options.props&&Zr(a),a.options.computed&&Qr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,j.forEach((function(e){a[e]=n[e]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=O({},a.options),i[r]=a,a}}function Zr(e){var t=e.options.props;for(var n in t)Ar(e.prototype,"_props",n)}function Qr(e){var t=e.options.computed;for(var n in t)Dr(e.prototype,n,t[n])}function ei(e){j.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&Ke(e),"component"===t&&d(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function ti(e){return e&&(e.Ctor.options.name||e.tag)}function ni(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!h(e)&&e.test(t)}function ri(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=ti(a.componentOptions);s&&!t(s)&&ii(n,o,r,i)}}}function ii(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,b(n,t)}Hr(Yr),zr(Yr),Qn(Yr),ir(Yr),zn(Yr);var oi=[String,RegExp,Array],ai={name:"keep-alive",abstract:!0,props:{include:oi,exclude:oi,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)ii(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){ri(e,(function(e){return ni(t,e)}))})),this.$watch("exclude",(function(t){ri(e,(function(e){return!ni(t,e)}))}))},render:function(){var e=this.$slots.default,t=Xn(e),n=t&&t.componentOptions;if(n){var r=ti(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!ni(o,r))||a&&r&&ni(a,r))return t;var s=this,u=s.cache,c=s.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;u[l]?(t.componentInstance=u[l].componentInstance,b(c,l),c.push(l)):(u[l]=t,c.push(l),this.max&&c.length>parseInt(this.max)&&ii(u,c[0],c,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},si={KeepAlive:ai};function ui(e){var t={get:function(){return V},set:function(){de("Do not replace the Vue.config object, set individual fields instead.")}};Object.defineProperty(e,"config",t),e.util={warn:de,extend:O,mergeOptions:tt,defineReactive:Be},e.set=Fe,e.delete=Ge,e.nextTick=Et,e.observable=function(e){return Ue(e),e},e.options=Object.create(null),j.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,O(e.options.components,si),Jr(e),Kr(e),$r(e),ei(e)}ui(Yr),Object.defineProperty(Yr.prototype,"$isServer",{get:ae}),Object.defineProperty(Yr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Yr,"FunctionalRenderContext",{value:Mn}),Yr.version="2.6.11";var ci="[object Array]",li="[object Object]",di="[object Null]",hi="[object Undefined]";function fi(e,t){var n={};return pi(e,t),yi(e,t,"",n),n}function pi(e,t){if(e!==t){var n=gi(e),r=gi(t);if(n==li&&r==li){if(Object.keys(e).length>=Object.keys(t).length)for(var i in t){var o=e[i];void 0===o?e[i]=null:pi(o,t[i])}}else n==ci&&r==ci&&e.length>=t.length&&t.forEach((function(t,n){pi(e[n],t)}))}}function mi(e,t){return e!==di&&e!==hi||t!==di&&t!==hi}function yi(e,t,n,r){if(e!==t){var i=gi(e),o=gi(t);if(i==li)if(o!=li||Object.keys(e).length<Object.keys(t).length)vi(r,n,e);else{var a=function(i){var o=e[i],a=t[i],s=gi(o),u=gi(a);if(s!=ci&&s!=li)o!==t[i]&&mi(s,u)&&vi(r,(""==n?"":n+".")+i,o);else if(s==ci)u!=ci||o.length<a.length?vi(r,(""==n?"":n+".")+i,o):o.forEach((function(e,t){yi(e,a[t],(""==n?"":n+".")+i+"["+t+"]",r)}));else if(s==li)if(u!=li||Object.keys(o).length<Object.keys(a).length)vi(r,(""==n?"":n+".")+i,o);else for(var c in o)yi(o[c],a[c],(""==n?"":n+".")+i+"."+c,r)};for(var s in e)a(s)}else i==ci?o!=ci||e.length<t.length?vi(r,n,e):e.forEach((function(e,i){yi(e,t[i],n+"["+i+"]",r)})):vi(r,n,e)}}function vi(e,t,n){e[t]=n}function gi(e){return Object.prototype.toString.call(e)}function _i(e){if(e.__next_tick_callbacks&&e.__next_tick_callbacks.length){if(Object({NODE_ENV:"development",VUE_APP_DARK_MODE:"false",VUE_APP_NAME:"ledaoApplet",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG){var t=e.$scope;console.log("["+ +new Date+"]["+(t.is||t.route)+"]["+e._uid+"]:flushCallbacks["+e.__next_tick_callbacks.length+"]")}var n=e.__next_tick_callbacks.slice(0);e.__next_tick_callbacks.length=0;for(var r=0;r<n.length;r++)n[r]()}}function bi(e){return dr.find((function(t){return e._watcher===t}))}function xi(e,t){if(!e.__next_tick_pending&&!bi(e)){if(Object({NODE_ENV:"development",VUE_APP_DARK_MODE:"false",VUE_APP_NAME:"ledaoApplet",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG){var n=e.$scope;console.log("["+ +new Date+"]["+(n.is||n.route)+"]["+e._uid+"]:nextVueTick")}return Et(t,e)}if(Object({NODE_ENV:"development",VUE_APP_DARK_MODE:"false",VUE_APP_NAME:"ledaoApplet",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG){var r=e.$scope;console.log("["+ +new Date+"]["+(r.is||r.route)+"]["+e._uid+"]:nextMPTick")}var i;if(e.__next_tick_callbacks||(e.__next_tick_callbacks=[]),e.__next_tick_callbacks.push((function(){if(t)try{t.call(e)}catch(Fi){mt(Fi,e,"nextTick")}else i&&i(e)})),!t&&"undefined"!==typeof Promise)return new Promise((function(e){i=e}))}function Mi(e,t){return t&&(t._isVue||t.__v_isMPComponent)?{}:t}function Ci(e){var t=Object.create(null),n=[].concat(Object.keys(e._data||{}),Object.keys(e._computedWatchers||{}));n.reduce((function(t,n){return t[n]=e[n],t}),t);var r=e.__composition_api_state__||e.__secret_vfa_state__,i=r&&r.rawBindings;return i&&Object.keys(i).forEach((function(n){t[n]=e[n]})),Object.assign(t,e.$mp.data||{}),Array.isArray(e.$options.behaviors)&&-1!==e.$options.behaviors.indexOf("uni://form-field")&&(t["name"]=e.name,t["value"]=e.value),JSON.parse(JSON.stringify(t,Mi))}var wi=function(e,t){var n=this;if(null!==t&&("page"===this.mpType||"component"===this.mpType)){var r=this.$scope,i=Object.create(null);try{i=Ci(this)}catch(s){console.error(s)}i.__webviewId__=r.data.__webviewId__;var o=Object.create(null);Object.keys(i).forEach((function(e){o[e]=r.data[e]}));var a=!1===this.$shouldDiffData?i:fi(i,o);Object.keys(a).length?(Object({NODE_ENV:"development",VUE_APP_DARK_MODE:"false",VUE_APP_NAME:"ledaoApplet",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG&&console.log("["+ +new Date+"]["+(r.is||r.route)+"]["+this._uid+"]差量更新",JSON.stringify(a)),this.__next_tick_pending=!0,r.setData(a,(function(){n.__next_tick_pending=!1,_i(n)}))):_i(this)}};function Si(){}function Ti(e,t,n){if(!e.mpType)return e;"app"===e.mpType&&(e.$options.render=Si),e.$options.render||(e.$options.render=Si,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||t?de("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):de("Failed to mount component: template or render function not defined.",e)),!e._$fallback&&cr(e,"beforeMount");var r=function(){e._update(e._render(),n)};return new Nr(e,r,I,{before:function(){e._isMounted&&!e._isDestroyed&&cr(e,"beforeUpdate")}},!0),n=!1,e}function Ni(e,t){return i(e)||i(t)?Ei(e,Ai(t)):""}function Ei(e,t){return e?t?e+" "+t:e:t||""}function Ai(e){return Array.isArray(e)?Ri(e):u(e)?Pi(e):"string"===typeof e?e:""}function Ri(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=Ai(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Pi(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var Li=C((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function Oi(e){return Array.isArray(e)?k(e):"string"===typeof e?Li(e):e}var ki=["createSelectorQuery","createIntersectionObserver","selectAllComponents","selectComponent"];function Ii(e,t){var n=t.split("."),r=n[0];return 0===r.indexOf("__$n")&&(r=parseInt(r.replace("__$n",""))),1===n.length?e[r]:Ii(e[r],n.slice(1).join("."))}function Di(e){e.config.errorHandler=function(t,n,r){e.util.warn("Error in "+r+': "'+t.toString()+'"',n),console.error(t);var i="function"===typeof getApp&&getApp();i&&i.onError&&i.onError(t)};var t=e.prototype.$emit;e.prototype.$emit=function(e){if(this.$scope&&e){var n=this.$scope["_triggerEvent"]||this.$scope["triggerEvent"];if(n)try{n.call(this.$scope,e,{__args__:L(arguments,1)})}catch(r){}}return t.apply(this,arguments)},e.prototype.$nextTick=function(e){return xi(this,e)},ki.forEach((function(t){e.prototype[t]=function(e){return this.$scope&&this.$scope[t]?this.$scope[t](e):"undefined"!==typeof my?"createSelectorQuery"===t?my.createSelectorQuery(e):"createIntersectionObserver"===t?my.createIntersectionObserver(e):void 0:void 0}})),e.prototype.__init_provide=Zt,e.prototype.__init_injections=Qt,e.prototype.__call_hook=function(e,t){var n=this;xe();var r,i=n.$options[e],o=e+" hook";if(i)for(var a=0,s=i.length;a<s;a++)r=yt(i[a],n,t?[t]:null,n,o);return n._hasHookEvent&&n.$emit("hook:"+e,t),Me(),r},e.prototype.__set_model=function(t,n,r,i){Array.isArray(i)&&(-1!==i.indexOf("trim")&&(r=r.trim()),-1!==i.indexOf("number")&&(r=this._n(r))),t||(t=this),e.set(t,n,r)},e.prototype.__set_sync=function(t,n,r){t||(t=this),e.set(t,n,r)},e.prototype.__get_orig=function(e){return d(e)&&e["$orig"]||e},e.prototype.__get_value=function(e,t){return Ii(t||this,e)},e.prototype.__get_class=function(e,t){return Ni(t,e)},e.prototype.__get_style=function(e,t){if(!e&&!t)return"";var n=Oi(e),r=t?O(t,n):n;return Object.keys(r).map((function(e){return E(e)+":"+r[e]})).join(";")},e.prototype.__map=function(e,t){var n,r,i,o,a;if(Array.isArray(e)){for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);return n}if(u(e)){for(o=Object.keys(e),n=Object.create(null),r=0,i=o.length;r<i;r++)a=o[r],n[a]=t(e[a],a,r);return n}if("number"===typeof e){for(n=new Array(e),r=0,i=e;r<i;r++)n[r]=t(r,r);return n}return[]}}var Ui=["onLaunch","onShow","onHide","onUniNViewMessage","onPageNotFound","onThemeChange","onError","onUnhandledRejection","onInit","onLoad","onReady","onUnload","onPullDownRefresh","onReachBottom","onTabItemTap","onAddToFavorites","onShareTimeline","onShareAppMessage","onResize","onPageScroll","onNavigationBarButtonTap","onBackPress","onNavigationBarSearchInputChanged","onNavigationBarSearchInputConfirmed","onNavigationBarSearchInputClicked","onUploadDouyinVideo","onNFCReadMessage","onPageShow","onPageHide","onPageResize"];function Bi(e){var t=e.extend;e.extend=function(e){e=e||{};var n=e.methods;return n&&Object.keys(n).forEach((function(t){-1!==Ui.indexOf(t)&&(e[t]=n[t],delete n[t])})),t.call(this,e)};var n=e.config.optionMergeStrategies,r=n.created;Ui.forEach((function(e){n[e]=r})),e.prototype.__lifecycle_hooks__=Ui}Yr.prototype.__patch__=wi,Yr.prototype.$mount=function(e,t){return Ti(this,e,t)},Bi(Yr),Di(Yr),t["default"]=Yr}.call(this,n(3))},function(e,t){},,,,,,function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s,u,c){var l,d="function"===typeof e?e.options:e;if(u){d.components||(d.components={});var h=Object.prototype.hasOwnProperty;for(var f in u)h.call(u,f)&&!h.call(d.components,f)&&(d.components[f]=u[f])}if(c&&("function"===typeof c.beforeCreate&&(c.beforeCreate=[c.beforeCreate]),(c.beforeCreate||(c.beforeCreate=[])).unshift((function(){this[c.__module]=this})),(d.mixins||(d.mixins=[])).push(c)),t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),r&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=l):i&&(l=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(d.functional){d._injectStyles=l;var p=d.render;d.render=function(e,t){return l.call(t),p(e,t)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:d}}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),o="http://192.168.2.210:8001",a=e.getStorageSync("setCookie"),s=function(t,n,r,s){return new Promise((function(u,c){e.request({url:o+t,method:n||"GET",data:r||{},header:s||{"content-type":"application/x-www-form-urlencoded",cookie:a}}).then((function(t){setTimeout((function(){e.hideLoading()}),200);var n=(0,i.default)(t,2),r=(n[0],n[1]);u(r.data)})).catch((function(e){var t=(0,i.default)(e,2),n=t[0];t[1];c(n)}))}))},u=s;t.default=u}).call(this,n(2)["default"])},function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),o="http://192.168.2.210:8001",a=e.getStorageSync("setCookie"),s=function(t,n,r,s){return new Promise((function(u,c){e.request({url:o+t,method:n||"GET",data:r||{},header:s||{"content-type":"application/x-www-form-urlencoded",cookie:a}}).then((function(t){setTimeout((function(){e.hideLoading()}),200);var n=(0,i.default)(t,2),r=(n[0],n[1]);u(r)})).catch((function(e){var t=(0,i.default)(e,2),n=t[0];t[1];c(n)}))}))},u=s;t.default=u}).call(this,n(2)["default"])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(190)();e.exports=r},function(e,t,n){var r=n(13)["default"];function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(P){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),s=new E(r||[]);return a(o,"_invoke",{value:w(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var p={};function m(){}function y(){}function v(){}var g={};d(g,u,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(A([])));b&&b!==n&&o.call(b,u)&&(g=b);var x=v.prototype=m.prototype=Object.create(g);function M(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,s,u){var c=f(e[i],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function w(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return y.prototype=v,a(x,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=d(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},M(C.prototype),d(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(x),d(x,l,"Generator"),d(x,u,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={WebGLArrayRenderTarget:!0,WebGL3DRenderTarget:!0,WebGLMultipleRenderTargets:!0,WebGLCubeRenderTarget:!0,WebGLRenderTarget:!0,WebGLRenderer:!0,WebGL1Renderer:!0,ShaderLib:!0,UniformsLib:!0,UniformsUtils:!0,ShaderChunk:!0,FogExp2:!0,Fog:!0,Scene:!0,Sprite:!0,LOD:!0,SkinnedMesh:!0,Skeleton:!0,Bone:!0,Mesh:!0,InstancedMesh:!0,LineSegments:!0,LineLoop:!0,Line:!0,Points:!0,Group:!0,VideoTexture:!0,FramebufferTexture:!0,Source:!0,DataTexture:!0,DataArrayTexture:!0,Data3DTexture:!0,CompressedTexture:!0,CompressedArrayTexture:!0,CompressedCubeTexture:!0,CubeTexture:!0,CanvasTexture:!0,DepthTexture:!0,Texture:!0,AnimationLoader:!0,CompressedTextureLoader:!0,CubeTextureLoader:!0,DataTextureLoader:!0,TextureLoader:!0,ObjectLoader:!0,MaterialLoader:!0,BufferGeometryLoader:!0,DefaultLoadingManager:!0,LoadingManager:!0,ImageLoader:!0,ImageBitmapLoader:!0,FileLoader:!0,Loader:!0,LoaderUtils:!0,Cache:!0,AudioLoader:!0,SpotLight:!0,PointLight:!0,RectAreaLight:!0,HemisphereLight:!0,HemisphereLightProbe:!0,DirectionalLight:!0,AmbientLight:!0,AmbientLightProbe:!0,Light:!0,LightProbe:!0,StereoCamera:!0,PerspectiveCamera:!0,OrthographicCamera:!0,CubeCamera:!0,ArrayCamera:!0,Camera:!0,AudioListener:!0,PositionalAudio:!0,AudioContext:!0,AudioAnalyser:!0,Audio:!0,VectorKeyframeTrack:!0,StringKeyframeTrack:!0,QuaternionKeyframeTrack:!0,NumberKeyframeTrack:!0,ColorKeyframeTrack:!0,BooleanKeyframeTrack:!0,PropertyMixer:!0,PropertyBinding:!0,KeyframeTrack:!0,AnimationUtils:!0,AnimationObjectGroup:!0,AnimationMixer:!0,AnimationClip:!0,AnimationAction:!0,RenderTarget:!0,Uniform:!0,UniformsGroup:!0,InstancedBufferGeometry:!0,BufferGeometry:!0,InterleavedBufferAttribute:!0,InstancedInterleavedBuffer:!0,InterleavedBuffer:!0,InstancedBufferAttribute:!0,GLBufferAttribute:!0,Object3D:!0,Raycaster:!0,Layers:!0,EventDispatcher:!0,Clock:!0,QuaternionLinearInterpolant:!0,LinearInterpolant:!0,DiscreteInterpolant:!0,CubicInterpolant:!0,Interpolant:!0,Triangle:!0,MathUtils:!0,Spherical:!0,Cylindrical:!0,Plane:!0,Frustum:!0,Sphere:!0,Ray:!0,Matrix4:!0,Matrix3:!0,Box3:!0,Box2:!0,Line3:!0,Euler:!0,Vector4:!0,Vector3:!0,Vector2:!0,Quaternion:!0,Color:!0,ColorManagement:!0,SphericalHarmonics3:!0,SpotLightHelper:!0,SkeletonHelper:!0,PointLightHelper:!0,HemisphereLightHelper:!0,GridHelper:!0,PolarGridHelper:!0,DirectionalLightHelper:!0,CameraHelper:!0,BoxHelper:!0,Box3Helper:!0,PlaneHelper:!0,ArrowHelper:!0,AxesHelper:!0,Shape:!0,Path:!0,ShapePath:!0,CurvePath:!0,Curve:!0,DataUtils:!0,ImageUtils:!0,ShapeUtils:!0,PMREMGenerator:!0,WebGLUtils:!0};Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return pe.AmbientLight}}),Object.defineProperty(t,"AmbientLightProbe",{enumerable:!0,get:function(){return me.AmbientLightProbe}}),Object.defineProperty(t,"AnimationAction",{enumerable:!0,get:function(){return ze.AnimationAction}}),Object.defineProperty(t,"AnimationClip",{enumerable:!0,get:function(){return je.AnimationClip}}),Object.defineProperty(t,"AnimationLoader",{enumerable:!0,get:function(){return q.AnimationLoader}}),Object.defineProperty(t,"AnimationMixer",{enumerable:!0,get:function(){return Ge.AnimationMixer}}),Object.defineProperty(t,"AnimationObjectGroup",{enumerable:!0,get:function(){return Fe.AnimationObjectGroup}}),Object.defineProperty(t,"AnimationUtils",{enumerable:!0,get:function(){return Be.AnimationUtils}}),Object.defineProperty(t,"ArrayCamera",{enumerable:!0,get:function(){return Me.ArrayCamera}}),Object.defineProperty(t,"ArrowHelper",{enumerable:!0,get:function(){return zt.ArrowHelper}}),Object.defineProperty(t,"Audio",{enumerable:!0,get:function(){return Ee.Audio}}),Object.defineProperty(t,"AudioAnalyser",{enumerable:!0,get:function(){return Ne.AudioAnalyser}}),Object.defineProperty(t,"AudioContext",{enumerable:!0,get:function(){return Te.AudioContext}}),Object.defineProperty(t,"AudioListener",{enumerable:!0,get:function(){return we.AudioListener}}),Object.defineProperty(t,"AudioLoader",{enumerable:!0,get:function(){return se.AudioLoader}}),Object.defineProperty(t,"AxesHelper",{enumerable:!0,get:function(){return Vt.AxesHelper}}),Object.defineProperty(t,"Bone",{enumerable:!0,get:function(){return C.Bone}}),Object.defineProperty(t,"BooleanKeyframeTrack",{enumerable:!0,get:function(){return ke.BooleanKeyframeTrack}}),Object.defineProperty(t,"Box2",{enumerable:!0,get:function(){return xt.Box2}}),Object.defineProperty(t,"Box3",{enumerable:!0,get:function(){return bt.Box3}}),Object.defineProperty(t,"Box3Helper",{enumerable:!0,get:function(){return Gt.Box3Helper}}),Object.defineProperty(t,"BoxHelper",{enumerable:!0,get:function(){return Ft.BoxHelper}}),Object.defineProperty(t,"BufferGeometry",{enumerable:!0,get:function(){return Xe.BufferGeometry}}),Object.defineProperty(t,"BufferGeometryLoader",{enumerable:!0,get:function(){return Q.BufferGeometryLoader}}),Object.defineProperty(t,"Cache",{enumerable:!0,get:function(){return ae.Cache}}),Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return Ce.Camera}}),Object.defineProperty(t,"CameraHelper",{enumerable:!0,get:function(){return Bt.CameraHelper}}),Object.defineProperty(t,"CanvasTexture",{enumerable:!0,get:function(){return j.CanvasTexture}}),Object.defineProperty(t,"Clock",{enumerable:!0,get:function(){return it.Clock}}),Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return Et.Color}}),Object.defineProperty(t,"ColorKeyframeTrack",{enumerable:!0,get:function(){return Oe.ColorKeyframeTrack}}),Object.defineProperty(t,"ColorManagement",{enumerable:!0,get:function(){return At.ColorManagement}}),Object.defineProperty(t,"CompressedArrayTexture",{enumerable:!0,get:function(){return B.CompressedArrayTexture}}),Object.defineProperty(t,"CompressedCubeTexture",{enumerable:!0,get:function(){return F.CompressedCubeTexture}}),Object.defineProperty(t,"CompressedTexture",{enumerable:!0,get:function(){return U.CompressedTexture}}),Object.defineProperty(t,"CompressedTextureLoader",{enumerable:!0,get:function(){return X.CompressedTextureLoader}}),Object.defineProperty(t,"CubeCamera",{enumerable:!0,get:function(){return xe.CubeCamera}}),Object.defineProperty(t,"CubeTexture",{enumerable:!0,get:function(){return G.CubeTexture}}),Object.defineProperty(t,"CubeTextureLoader",{enumerable:!0,get:function(){return Y.CubeTextureLoader}}),Object.defineProperty(t,"CubicInterpolant",{enumerable:!0,get:function(){return ut.CubicInterpolant}}),Object.defineProperty(t,"Curve",{enumerable:!0,get:function(){return Jt.Curve}}),Object.defineProperty(t,"CurvePath",{enumerable:!0,get:function(){return Yt.CurvePath}}),Object.defineProperty(t,"Cylindrical",{enumerable:!0,get:function(){return ft.Cylindrical}}),Object.defineProperty(t,"Data3DTexture",{enumerable:!0,get:function(){return D.Data3DTexture}}),Object.defineProperty(t,"DataArrayTexture",{enumerable:!0,get:function(){return I.DataArrayTexture}}),Object.defineProperty(t,"DataTexture",{enumerable:!0,get:function(){return k.DataTexture}}),Object.defineProperty(t,"DataTextureLoader",{enumerable:!0,get:function(){return J.DataTextureLoader}}),Object.defineProperty(t,"DataUtils",{enumerable:!0,get:function(){return Kt.DataUtils}}),Object.defineProperty(t,"DefaultLoadingManager",{enumerable:!0,get:function(){return ee.DefaultLoadingManager}}),Object.defineProperty(t,"DepthTexture",{enumerable:!0,get:function(){return z.DepthTexture}}),Object.defineProperty(t,"DirectionalLight",{enumerable:!0,get:function(){return fe.DirectionalLight}}),Object.defineProperty(t,"DirectionalLightHelper",{enumerable:!0,get:function(){return Ut.DirectionalLightHelper}}),Object.defineProperty(t,"DiscreteInterpolant",{enumerable:!0,get:function(){return st.DiscreteInterpolant}}),Object.defineProperty(t,"Euler",{enumerable:!0,get:function(){return Ct.Euler}}),Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return rt.EventDispatcher}}),Object.defineProperty(t,"FileLoader",{enumerable:!0,get:function(){return re.FileLoader}}),Object.defineProperty(t,"Fog",{enumerable:!0,get:function(){return v.Fog}}),Object.defineProperty(t,"FogExp2",{enumerable:!0,get:function(){return y.FogExp2}}),Object.defineProperty(t,"FramebufferTexture",{enumerable:!0,get:function(){return L.FramebufferTexture}}),Object.defineProperty(t,"Frustum",{enumerable:!0,get:function(){return mt.Frustum}}),Object.defineProperty(t,"GLBufferAttribute",{enumerable:!0,get:function(){return Ze.GLBufferAttribute}}),Object.defineProperty(t,"GridHelper",{enumerable:!0,get:function(){return It.GridHelper}}),Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return R.Group}}),Object.defineProperty(t,"HemisphereLight",{enumerable:!0,get:function(){return de.HemisphereLight}}),Object.defineProperty(t,"HemisphereLightHelper",{enumerable:!0,get:function(){return kt.HemisphereLightHelper}}),Object.defineProperty(t,"HemisphereLightProbe",{enumerable:!0,get:function(){return he.HemisphereLightProbe}}),Object.defineProperty(t,"ImageBitmapLoader",{enumerable:!0,get:function(){return ne.ImageBitmapLoader}}),Object.defineProperty(t,"ImageLoader",{enumerable:!0,get:function(){return te.ImageLoader}}),Object.defineProperty(t,"ImageUtils",{enumerable:!0,get:function(){return $t.ImageUtils}}),Object.defineProperty(t,"InstancedBufferAttribute",{enumerable:!0,get:function(){return $e.InstancedBufferAttribute}}),Object.defineProperty(t,"InstancedBufferGeometry",{enumerable:!0,get:function(){return qe.InstancedBufferGeometry}}),Object.defineProperty(t,"InstancedInterleavedBuffer",{enumerable:!0,get:function(){return Je.InstancedInterleavedBuffer}}),Object.defineProperty(t,"InstancedMesh",{enumerable:!0,get:function(){return S.InstancedMesh}}),Object.defineProperty(t,"InterleavedBuffer",{enumerable:!0,get:function(){return Ke.InterleavedBuffer}}),Object.defineProperty(t,"InterleavedBufferAttribute",{enumerable:!0,get:function(){return Ye.InterleavedBufferAttribute}}),Object.defineProperty(t,"Interpolant",{enumerable:!0,get:function(){return ct.Interpolant}}),Object.defineProperty(t,"KeyframeTrack",{enumerable:!0,get:function(){return Ue.KeyframeTrack}}),Object.defineProperty(t,"LOD",{enumerable:!0,get:function(){return b.LOD}}),Object.defineProperty(t,"Layers",{enumerable:!0,get:function(){return nt.Layers}}),Object.defineProperty(t,"Light",{enumerable:!0,get:function(){return ye.Light}}),Object.defineProperty(t,"LightProbe",{enumerable:!0,get:function(){return ve.LightProbe}}),Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return E.Line}}),Object.defineProperty(t,"Line3",{enumerable:!0,get:function(){return Mt.Line3}}),Object.defineProperty(t,"LineLoop",{enumerable:!0,get:function(){return N.LineLoop}}),Object.defineProperty(t,"LineSegments",{enumerable:!0,get:function(){return T.LineSegments}}),Object.defineProperty(t,"LinearInterpolant",{enumerable:!0,get:function(){return at.LinearInterpolant}}),Object.defineProperty(t,"Loader",{enumerable:!0,get:function(){return ie.Loader}}),Object.defineProperty(t,"LoaderUtils",{enumerable:!0,get:function(){return oe.LoaderUtils}}),Object.defineProperty(t,"LoadingManager",{enumerable:!0,get:function(){return ee.LoadingManager}}),Object.defineProperty(t,"MaterialLoader",{enumerable:!0,get:function(){return Z.MaterialLoader}}),Object.defineProperty(t,"MathUtils",{enumerable:!0,get:function(){return dt.MathUtils}}),Object.defineProperty(t,"Matrix3",{enumerable:!0,get:function(){return _t.Matrix3}}),Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function(){return gt.Matrix4}}),Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return w.Mesh}}),Object.defineProperty(t,"NumberKeyframeTrack",{enumerable:!0,get:function(){return Le.NumberKeyframeTrack}}),Object.defineProperty(t,"Object3D",{enumerable:!0,get:function(){return et.Object3D}}),Object.defineProperty(t,"ObjectLoader",{enumerable:!0,get:function(){return $.ObjectLoader}}),Object.defineProperty(t,"OrthographicCamera",{enumerable:!0,get:function(){return be.OrthographicCamera}}),Object.defineProperty(t,"PMREMGenerator",{enumerable:!0,get:function(){return Qt.PMREMGenerator}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return qt.Path}}),Object.defineProperty(t,"PerspectiveCamera",{enumerable:!0,get:function(){return _e.PerspectiveCamera}}),Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return pt.Plane}}),Object.defineProperty(t,"PlaneHelper",{enumerable:!0,get:function(){return jt.PlaneHelper}}),Object.defineProperty(t,"PointLight",{enumerable:!0,get:function(){return ce.PointLight}}),Object.defineProperty(t,"PointLightHelper",{enumerable:!0,get:function(){return Ot.PointLightHelper}}),Object.defineProperty(t,"Points",{enumerable:!0,get:function(){return A.Points}}),Object.defineProperty(t,"PolarGridHelper",{enumerable:!0,get:function(){return Dt.PolarGridHelper}}),Object.defineProperty(t,"PositionalAudio",{enumerable:!0,get:function(){return Se.PositionalAudio}}),Object.defineProperty(t,"PropertyBinding",{enumerable:!0,get:function(){return De.PropertyBinding}}),Object.defineProperty(t,"PropertyMixer",{enumerable:!0,get:function(){return Ie.PropertyMixer}}),Object.defineProperty(t,"Quaternion",{enumerable:!0,get:function(){return Nt.Quaternion}}),Object.defineProperty(t,"QuaternionKeyframeTrack",{enumerable:!0,get:function(){return Pe.QuaternionKeyframeTrack}}),Object.defineProperty(t,"QuaternionLinearInterpolant",{enumerable:!0,get:function(){return ot.QuaternionLinearInterpolant}}),Object.defineProperty(t,"Ray",{enumerable:!0,get:function(){return vt.Ray}}),Object.defineProperty(t,"Raycaster",{enumerable:!0,get:function(){return tt.Raycaster}}),Object.defineProperty(t,"RectAreaLight",{enumerable:!0,get:function(){return le.RectAreaLight}}),Object.defineProperty(t,"RenderTarget",{enumerable:!0,get:function(){return Ve.RenderTarget}}),Object.defineProperty(t,"Scene",{enumerable:!0,get:function(){return g.Scene}}),Object.defineProperty(t,"ShaderChunk",{enumerable:!0,get:function(){return m.ShaderChunk}}),Object.defineProperty(t,"ShaderLib",{enumerable:!0,get:function(){return h.ShaderLib}}),Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return Wt.Shape}}),Object.defineProperty(t,"ShapePath",{enumerable:!0,get:function(){return Xt.ShapePath}}),Object.defineProperty(t,"ShapeUtils",{enumerable:!0,get:function(){return Zt.ShapeUtils}}),Object.defineProperty(t,"Skeleton",{enumerable:!0,get:function(){return M.Skeleton}}),Object.defineProperty(t,"SkeletonHelper",{enumerable:!0,get:function(){return Lt.SkeletonHelper}}),Object.defineProperty(t,"SkinnedMesh",{enumerable:!0,get:function(){return x.SkinnedMesh}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return O.Source}}),Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return yt.Sphere}}),Object.defineProperty(t,"Spherical",{enumerable:!0,get:function(){return ht.Spherical}}),Object.defineProperty(t,"SphericalHarmonics3",{enumerable:!0,get:function(){return Rt.SphericalHarmonics3}}),Object.defineProperty(t,"SpotLight",{enumerable:!0,get:function(){return ue.SpotLight}}),Object.defineProperty(t,"SpotLightHelper",{enumerable:!0,get:function(){return Pt.SpotLightHelper}}),Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return _.Sprite}}),Object.defineProperty(t,"StereoCamera",{enumerable:!0,get:function(){return ge.StereoCamera}}),Object.defineProperty(t,"StringKeyframeTrack",{enumerable:!0,get:function(){return Re.StringKeyframeTrack}}),Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return V.Texture}}),Object.defineProperty(t,"TextureLoader",{enumerable:!0,get:function(){return K.TextureLoader}}),Object.defineProperty(t,"Triangle",{enumerable:!0,get:function(){return lt.Triangle}}),Object.defineProperty(t,"Uniform",{enumerable:!0,get:function(){return He.Uniform}}),Object.defineProperty(t,"UniformsGroup",{enumerable:!0,get:function(){return We.UniformsGroup}}),Object.defineProperty(t,"UniformsLib",{enumerable:!0,get:function(){return f.UniformsLib}}),Object.defineProperty(t,"UniformsUtils",{enumerable:!0,get:function(){return p.UniformsUtils}}),Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return Tt.Vector2}}),Object.defineProperty(t,"Vector3",{enumerable:!0,get:function(){return St.Vector3}}),Object.defineProperty(t,"Vector4",{enumerable:!0,get:function(){return wt.Vector4}}),Object.defineProperty(t,"VectorKeyframeTrack",{enumerable:!0,get:function(){return Ae.VectorKeyframeTrack}}),Object.defineProperty(t,"VideoTexture",{enumerable:!0,get:function(){return P.VideoTexture}}),Object.defineProperty(t,"WebGL1Renderer",{enumerable:!0,get:function(){return d.WebGL1Renderer}}),Object.defineProperty(t,"WebGL3DRenderTarget",{enumerable:!0,get:function(){return a.WebGL3DRenderTarget}}),Object.defineProperty(t,"WebGLArrayRenderTarget",{enumerable:!0,get:function(){return o.WebGLArrayRenderTarget}}),Object.defineProperty(t,"WebGLCubeRenderTarget",{enumerable:!0,get:function(){return u.WebGLCubeRenderTarget}}),Object.defineProperty(t,"WebGLMultipleRenderTargets",{enumerable:!0,get:function(){return s.WebGLMultipleRenderTargets}}),Object.defineProperty(t,"WebGLRenderTarget",{enumerable:!0,get:function(){return c.WebGLRenderTarget}}),Object.defineProperty(t,"WebGLRenderer",{enumerable:!0,get:function(){return l.WebGLRenderer}}),Object.defineProperty(t,"WebGLUtils",{enumerable:!0,get:function(){return en.WebGLUtils}});var i=n(223);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(224),a=n(242),s=n(244),u=n(245),c=n(229),l=n(274),d=n(443),h=n(281),f=n(405),p=n(267),m=n(282),y=n(444),v=n(445),g=n(446),_=n(447),b=n(451),x=n(452),M=n(453),C=n(454),w=n(246),S=n(456),T=n(458),N=n(461),E=n(459),A=n(462),R=n(439),P=n(464),L=n(465),O=n(236),k=n(455),I=n(241),D=n(243),U=n(466),B=n(467),F=n(468),G=n(273),j=n(469),z=n(440),V=n(232),H=n(470);Object.keys(H).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===H[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return H[e]}}))}));var W=n(508);Object.keys(W).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===W[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return W[e]}}))}));var q=n(519),X=n(540),Y=n(541),J=n(543),K=n(544),$=n(545),Z=n(559),Q=n(561),ee=n(539),te=n(542),ne=n(563),re=n(534),ie=n(538),oe=n(560),ae=n(537),se=n(564),ue=n(548),ce=n(551),le=n(556),de=n(546),he=n(566),fe=n(553),pe=n(555),me=n(567),ye=n(547),ve=n(557),ge=n(568),_e=n(271),be=n(413),xe=n(270),Me=n(437),Ce=n(272),we=n(569),Se=n(571),Te=n(565),Ne=n(573),Ee=n(572),Ae=n(533),Re=n(532),Pe=n(530),Le=n(529),Oe=n(528),ke=n(527),Ie=n(574),De=n(575),Ue=n(522),Be=n(521),Fe=n(576),Ge=n(577),je=n(520),ze=n(578),Ve=n(230),He=n(579),We=n(580),qe=n(562),Xe=n(262),Ye=n(449),Je=n(581),Ke=n(448),$e=n(457),Ze=n(582),Qe=n(263);Object.keys(Qe).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===Qe[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return Qe[e]}}))}));var et=n(255),tt=n(583),nt=n(257),rt=n(231),it=n(570),ot=n(531),at=n(525),st=n(526),ut=n(523),ct=n(524),lt=n(258),dt=n(233),ht=n(584),ft=n(585),pt=n(276),mt=n(275),yt=n(251),vt=n(253),gt=n(254),_t=n(235),bt=n(252),xt=n(586),Mt=n(587),Ct=n(256),wt=n(240),St=n(249),Tt=n(234),Nt=n(250),Et=n(261),At=n(239),Rt=n(558),Pt=n(588),Lt=n(589),Ot=n(590),kt=n(591),It=n(592),Dt=n(593),Ut=n(594),Bt=n(595),Ft=n(596),Gt=n(597),jt=n(598),zt=n(599),Vt=n(600),Ht=n(475);Object.keys(Ht).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===Ht[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ht[e]}}))}));var Wt=n(495),qt=n(472),Xt=n(601),Yt=n(473),Jt=n(474),Kt=n(264),$t=n(237),Zt=n(496),Qt=n(412),en=n(435),tn=n(602);Object.keys(tn).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===tn[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return tn[e]}}))})),"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i.REVISION}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i.REVISION)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotEqualDepth=t.NotEqualCompare=t.NormalBlending=t.NormalAnimationBlendMode=t.NoToneMapping=t.NoColorSpace=t.NoBlending=t.NeverStencilFunc=t.NeverDepth=t.NeverCompare=t.NearestMipmapNearestFilter=t.NearestMipmapLinearFilter=t.NearestMipMapNearestFilter=t.NearestMipMapLinearFilter=t.NearestFilter=t.MultiplyOperation=t.MultiplyBlending=t.MixOperation=t.MirroredRepeatWrapping=t.MinEquation=t.MaxEquation=t.MOUSE=t.LuminanceFormat=t.LuminanceAlphaFormat=t.LoopRepeat=t.LoopPingPong=t.LoopOnce=t.LinearToneMapping=t.LinearSRGBColorSpace=t.LinearMipmapNearestFilter=t.LinearMipmapLinearFilter=t.LinearMipMapNearestFilter=t.LinearMipMapLinearFilter=t.LinearFilter=t.LinearEncoding=t.LessStencilFunc=t.LessEqualStencilFunc=t.LessEqualDepth=t.LessEqualCompare=t.LessDepth=t.LessCompare=t.KeepStencilOp=t.InvertStencilOp=t.InterpolateSmooth=t.InterpolateLinear=t.InterpolateDiscrete=t.IntType=t.IncrementWrapStencilOp=t.IncrementStencilOp=t.HalfFloatType=t.GreaterStencilFunc=t.GreaterEqualStencilFunc=t.GreaterEqualDepth=t.GreaterEqualCompare=t.GreaterDepth=t.GreaterCompare=t.GLSL3=t.GLSL1=t.FrontSide=t.FloatType=t.EquirectangularRefractionMapping=t.EquirectangularReflectionMapping=t.EqualStencilFunc=t.EqualDepth=t.EqualCompare=t.DynamicReadUsage=t.DynamicDrawUsage=t.DynamicCopyUsage=t.DstColorFactor=t.DstAlphaFactor=t.DoubleSide=t.DisplayP3ColorSpace=t.DepthStencilFormat=t.DepthFormat=t.DecrementWrapStencilOp=t.DecrementStencilOp=t.CustomToneMapping=t.CustomBlending=t.CullFaceNone=t.CullFaceFrontBack=t.CullFaceFront=t.CullFaceBack=t.CubeUVReflectionMapping=t.CubeRefractionMapping=t.CubeReflectionMapping=t.ClampToEdgeWrapping=t.CineonToneMapping=t.ByteType=t.BasicShadowMap=t.BasicDepthPacking=t.BackSide=t.AlwaysStencilFunc=t.AlwaysDepth=t.AlwaysCompare=t.AlphaFormat=t.AdditiveBlending=t.AdditiveAnimationBlendMode=t.AddOperation=t.AddEquation=t.ACESFilmicToneMapping=void 0,t.sRGBEncoding=t._SRGBAFormat=t.ZeroStencilOp=t.ZeroSlopeEnding=t.ZeroFactor=t.ZeroCurvatureEnding=t.WrapAroundEnding=t.WebGPUCoordinateSystem=t.WebGLCoordinateSystem=t.VSMShadowMap=t.UnsignedShortType=t.UnsignedShort5551Type=t.UnsignedShort4444Type=t.UnsignedIntType=t.UnsignedInt248Type=t.UnsignedByteType=t.UVMapping=t.TwoPassDoubleSide=t.TrianglesDrawMode=t.TriangleStripDrawMode=t.TriangleFanDrawMode=t.TangentSpaceNormalMap=t.TOUCH=t.SubtractiveBlending=t.SubtractEquation=t.StreamReadUsage=t.StreamDrawUsage=t.StreamCopyUsage=t.StaticReadUsage=t.StaticDrawUsage=t.StaticCopyUsage=t.SrcColorFactor=t.SrcAlphaSaturateFactor=t.SrcAlphaFactor=t.ShortType=t.SRGBColorSpace=t.SIGNED_RED_RGTC1_Format=t.SIGNED_RED_GREEN_RGTC2_Format=t.ReverseSubtractEquation=t.ReplaceStencilOp=t.RepeatWrapping=t.ReinhardToneMapping=t.RedIntegerFormat=t.RedFormat=t.RGIntegerFormat=t.RGFormat=t.RGB_S3TC_DXT1_Format=t.RGB_PVRTC_4BPPV1_Format=t.RGB_PVRTC_2BPPV1_Format=t.RGB_ETC2_Format=t.RGB_ETC1_Format=t.RGBA_S3TC_DXT5_Format=t.RGBA_S3TC_DXT3_Format=t.RGBA_S3TC_DXT1_Format=t.RGBA_PVRTC_4BPPV1_Format=t.RGBA_PVRTC_2BPPV1_Format=t.RGBA_ETC2_EAC_Format=t.RGBA_BPTC_Format=t.RGBA_ASTC_8x8_Format=t.RGBA_ASTC_8x6_Format=t.RGBA_ASTC_8x5_Format=t.RGBA_ASTC_6x6_Format=t.RGBA_ASTC_6x5_Format=t.RGBA_ASTC_5x5_Format=t.RGBA_ASTC_5x4_Format=t.RGBA_ASTC_4x4_Format=t.RGBA_ASTC_12x12_Format=t.RGBA_ASTC_12x10_Format=t.RGBA_ASTC_10x8_Format=t.RGBA_ASTC_10x6_Format=t.RGBA_ASTC_10x5_Format=t.RGBA_ASTC_10x10_Format=t.RGBAIntegerFormat=t.RGBAFormat=t.RGBADepthPacking=t.REVISION=t.RED_RGTC1_Format=t.RED_GREEN_RGTC2_Format=t.PCFSoftShadowMap=t.PCFShadowMap=t.OneMinusSrcColorFactor=t.OneMinusSrcAlphaFactor=t.OneMinusDstColorFactor=t.OneMinusDstAlphaFactor=t.OneFactor=t.ObjectSpaceNormalMap=t.NotEqualStencilFunc=void 0;var r="155";t.REVISION=r;var i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};t.MOUSE=i;var o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};t.TOUCH=o;var a=0;t.CullFaceNone=a;var s=1;t.CullFaceBack=s;var u=2;t.CullFaceFront=u;var c=3;t.CullFaceFrontBack=c;var l=0;t.BasicShadowMap=l;var d=1;t.PCFShadowMap=d;var h=2;t.PCFSoftShadowMap=h;var f=3;t.VSMShadowMap=f;var p=0;t.FrontSide=p;var m=1;t.BackSide=m;var y=2;t.DoubleSide=y;var v=2;t.TwoPassDoubleSide=v;var g=0;t.NoBlending=g;var _=1;t.NormalBlending=_;var b=2;t.AdditiveBlending=b;var x=3;t.SubtractiveBlending=x;var M=4;t.MultiplyBlending=M;var C=5;t.CustomBlending=C;var w=100;t.AddEquation=w;var S=101;t.SubtractEquation=S;var T=102;t.ReverseSubtractEquation=T;var N=103;t.MinEquation=N;var E=104;t.MaxEquation=E;var A=200;t.ZeroFactor=A;var R=201;t.OneFactor=R;var P=202;t.SrcColorFactor=P;var L=203;t.OneMinusSrcColorFactor=L;var O=204;t.SrcAlphaFactor=O;var k=205;t.OneMinusSrcAlphaFactor=k;var I=206;t.DstAlphaFactor=I;var D=207;t.OneMinusDstAlphaFactor=D;var U=208;t.DstColorFactor=U;var B=209;t.OneMinusDstColorFactor=B;var F=210;t.SrcAlphaSaturateFactor=F;var G=0;t.NeverDepth=G;var j=1;t.AlwaysDepth=j;var z=2;t.LessDepth=z;var V=3;t.LessEqualDepth=V;var H=4;t.EqualDepth=H;var W=5;t.GreaterEqualDepth=W;var q=6;t.GreaterDepth=q;var X=7;t.NotEqualDepth=X;var Y=0;t.MultiplyOperation=Y;var J=1;t.MixOperation=J;var K=2;t.AddOperation=K;var $=0;t.NoToneMapping=$;var Z=1;t.LinearToneMapping=Z;var Q=2;t.ReinhardToneMapping=Q;var ee=3;t.CineonToneMapping=ee;var te=4;t.ACESFilmicToneMapping=te;var ne=5;t.CustomToneMapping=ne;var re=300;t.UVMapping=re;var ie=301;t.CubeReflectionMapping=ie;var oe=302;t.CubeRefractionMapping=oe;var ae=303;t.EquirectangularReflectionMapping=ae;var se=304;t.EquirectangularRefractionMapping=se;var ue=306;t.CubeUVReflectionMapping=ue;var ce=1e3;t.RepeatWrapping=ce;var le=1001;t.ClampToEdgeWrapping=le;var de=1002;t.MirroredRepeatWrapping=de;var he=1003;t.NearestFilter=he;var fe=1004;t.NearestMipmapNearestFilter=fe;var pe=1004;t.NearestMipMapNearestFilter=pe;var me=1005;t.NearestMipmapLinearFilter=me;var ye=1005;t.NearestMipMapLinearFilter=ye;var ve=1006;t.LinearFilter=ve;var ge=1007;t.LinearMipmapNearestFilter=ge;var _e=1007;t.LinearMipMapNearestFilter=_e;var be=1008;t.LinearMipmapLinearFilter=be;var xe=1008;t.LinearMipMapLinearFilter=xe;var Me=1009;t.UnsignedByteType=Me;var Ce=1010;t.ByteType=Ce;var we=1011;t.ShortType=we;var Se=1012;t.UnsignedShortType=Se;var Te=1013;t.IntType=Te;var Ne=1014;t.UnsignedIntType=Ne;var Ee=1015;t.FloatType=Ee;var Ae=1016;t.HalfFloatType=Ae;var Re=1017;t.UnsignedShort4444Type=Re;var Pe=1018;t.UnsignedShort5551Type=Pe;var Le=1020;t.UnsignedInt248Type=Le;var Oe=1021;t.AlphaFormat=Oe;var ke=1023;t.RGBAFormat=ke;var Ie=1024;t.LuminanceFormat=Ie;var De=1025;t.LuminanceAlphaFormat=De;var Ue=1026;t.DepthFormat=Ue;var Be=1027;t.DepthStencilFormat=Be;var Fe=1028;t.RedFormat=Fe;var Ge=1029;t.RedIntegerFormat=Ge;var je=1030;t.RGFormat=je;var ze=1031;t.RGIntegerFormat=ze;var Ve=1033;t.RGBAIntegerFormat=Ve;var He=33776;t.RGB_S3TC_DXT1_Format=He;var We=33777;t.RGBA_S3TC_DXT1_Format=We;var qe=33778;t.RGBA_S3TC_DXT3_Format=qe;var Xe=33779;t.RGBA_S3TC_DXT5_Format=Xe;var Ye=35840;t.RGB_PVRTC_4BPPV1_Format=Ye;var Je=35841;t.RGB_PVRTC_2BPPV1_Format=Je;var Ke=35842;t.RGBA_PVRTC_4BPPV1_Format=Ke;var $e=35843;t.RGBA_PVRTC_2BPPV1_Format=$e;var Ze=36196;t.RGB_ETC1_Format=Ze;var Qe=37492;t.RGB_ETC2_Format=Qe;var et=37496;t.RGBA_ETC2_EAC_Format=et;var tt=37808;t.RGBA_ASTC_4x4_Format=tt;var nt=37809;t.RGBA_ASTC_5x4_Format=nt;var rt=37810;t.RGBA_ASTC_5x5_Format=rt;var it=37811;t.RGBA_ASTC_6x5_Format=it;var ot=37812;t.RGBA_ASTC_6x6_Format=ot;var at=37813;t.RGBA_ASTC_8x5_Format=at;var st=37814;t.RGBA_ASTC_8x6_Format=st;var ut=37815;t.RGBA_ASTC_8x8_Format=ut;var ct=37816;t.RGBA_ASTC_10x5_Format=ct;var lt=37817;t.RGBA_ASTC_10x6_Format=lt;var dt=37818;t.RGBA_ASTC_10x8_Format=dt;var ht=37819;t.RGBA_ASTC_10x10_Format=ht;var ft=37820;t.RGBA_ASTC_12x10_Format=ft;var pt=37821;t.RGBA_ASTC_12x12_Format=pt;var mt=36492;t.RGBA_BPTC_Format=mt;var yt=36283;t.RED_RGTC1_Format=yt;var vt=36284;t.SIGNED_RED_RGTC1_Format=vt;var gt=36285;t.RED_GREEN_RGTC2_Format=gt;var _t=36286;t.SIGNED_RED_GREEN_RGTC2_Format=_t;var bt=2200;t.LoopOnce=bt;var xt=2201;t.LoopRepeat=xt;var Mt=2202;t.LoopPingPong=Mt;var Ct=2300;t.InterpolateDiscrete=Ct;var wt=2301;t.InterpolateLinear=wt;var St=2302;t.InterpolateSmooth=St;var Tt=2400;t.ZeroCurvatureEnding=Tt;var Nt=2401;t.ZeroSlopeEnding=Nt;var Et=2402;t.WrapAroundEnding=Et;var At=2500;t.NormalAnimationBlendMode=At;var Rt=2501;t.AdditiveAnimationBlendMode=Rt;var Pt=0;t.TrianglesDrawMode=Pt;var Lt=1;t.TriangleStripDrawMode=Lt;var Ot=2;t.TriangleFanDrawMode=Ot;var kt=3e3;t.LinearEncoding=kt;var It=3001;t.sRGBEncoding=It;var Dt=3200;t.BasicDepthPacking=Dt;var Ut=3201;t.RGBADepthPacking=Ut;var Bt=0;t.TangentSpaceNormalMap=Bt;var Ft=1;t.ObjectSpaceNormalMap=Ft;var Gt="";t.NoColorSpace=Gt;var jt="srgb";t.SRGBColorSpace=jt;var zt="srgb-linear";t.LinearSRGBColorSpace=zt;var Vt="display-p3";t.DisplayP3ColorSpace=Vt;var Ht=0;t.ZeroStencilOp=Ht;var Wt=7680;t.KeepStencilOp=Wt;var qt=7681;t.ReplaceStencilOp=qt;var Xt=7682;t.IncrementStencilOp=Xt;var Yt=7683;t.DecrementStencilOp=Yt;var Jt=34055;t.IncrementWrapStencilOp=Jt;var Kt=34056;t.DecrementWrapStencilOp=Kt;var $t=5386;t.InvertStencilOp=$t;var Zt=512;t.NeverStencilFunc=Zt;var Qt=513;t.LessStencilFunc=Qt;var en=514;t.EqualStencilFunc=en;var tn=515;t.LessEqualStencilFunc=tn;var nn=516;t.GreaterStencilFunc=nn;var rn=517;t.NotEqualStencilFunc=rn;var on=518;t.GreaterEqualStencilFunc=on;var an=519;t.AlwaysStencilFunc=an;var sn=512;t.NeverCompare=sn;var un=513;t.LessCompare=un;var cn=514;t.EqualCompare=cn;var ln=515;t.LessEqualCompare=ln;var dn=516;t.GreaterCompare=dn;var hn=517;t.NotEqualCompare=hn;var fn=518;t.GreaterEqualCompare=fn;var pn=519;t.AlwaysCompare=pn;var mn=35044;t.StaticDrawUsage=mn;var yn=35048;t.DynamicDrawUsage=yn;var vn=35040;t.StreamDrawUsage=vn;var gn=35045;t.StaticReadUsage=gn;var _n=35049;t.DynamicReadUsage=_n;var bn=35041;t.StreamReadUsage=bn;var xn=35046;t.StaticCopyUsage=xn;var Mn=35050;t.DynamicCopyUsage=Mn;var Cn=35042;t.StreamCopyUsage=Cn;var wn="100";t.GLSL1=wn;var Sn="300 es";t.GLSL3=Sn;var Tn=1035;t._SRGBAFormat=Tn;var Nn=2e3;t.WebGLCoordinateSystem=Nn;var En=2001;t.WebGPUCoordinateSystem=En},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLArrayRenderTarget=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(229),l=n(241);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(this,n),e=t.call(this,r,i),e.isWebGLArrayRenderTarget=!0,e.depth=a,e.texture=new l.DataArrayTexture(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return(0,i.default)(n)}(c.WebGLRenderTarget);t.WebGLArrayRenderTarget=f},function(e,t,n){var r=n(16);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(13)["default"],i=n(227);function o(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderTarget=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(230);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.default)(this,n),e=t.call(this,r,i,a),e.isWebGLRenderTarget=!0,e}return(0,i.default)(n)}(c.RenderTarget);t.WebGLRenderTarget=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.RenderTarget=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(231),l=n(232),d=n(223),h=n(240),f=n(236),p=n(238);function m(e){var t=y();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){(0,a.default)(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(this,n),e=t.call(this),e.isRenderTarget=!0,e.width=r,e.height=o,e.depth=1,e.scissor=new h.Vector4(0,0,r,o),e.scissorTest=!1,e.viewport=new h.Vector4(0,0,r,o);var s={width:r,height:o,depth:1};return void 0!==a.encoding&&((0,p.warnOnce)("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),a.colorSpace=a.encoding===d.sRGBEncoding?d.SRGBColorSpace:d.NoColorSpace),e.texture=new l.Texture(s,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:d.LinearFilter,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return(0,o.default)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new f.Source(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(c.EventDispatcher);t.RenderTarget=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,e);e.target=null}}}}]),e}();t.EventDispatcher=a},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Texture=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(227)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(231),h=n(223),f=_(n(233)),p=n(234),m=n(235),y=n(236),v=n(238);function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function b(e){var t=x();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var M=0,C=function(e){(0,u.default)(n,e);var t=b(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.ClampToEdgeWrapping,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.ClampToEdgeWrapping,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.LinearFilter,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.LinearMipmapLinearFilter,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.RGBAFormat,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:h.UnsignedByteType,_=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,b=arguments.length>9&&void 0!==arguments[9]?arguments[9]:h.NoColorSpace;return(0,o.default)(this,n),e=t.call(this),e.isTexture=!0,Object.defineProperty((0,s.default)(e),"id",{value:M++}),e.uuid=f.generateUUID(),e.name="",e.source=new y.Source(r),e.mipmaps=[],e.mapping=i,e.channel=0,e.wrapS=a,e.wrapT=u,e.magFilter=c,e.minFilter=l,e.anisotropy=_,e.format=d,e.internalFormat=null,e.type=g,e.offset=new p.Vector2(0,0),e.repeat=new p.Vector2(1,1),e.center=new p.Vector2(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new m.Matrix3,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,"string"===typeof b?e.colorSpace=b:((0,v.warnOnce)("THREE.Texture: Property .encoding has been replaced by .colorSpace."),e.colorSpace=b===h.sRGBEncoding?h.SRGBColorSpace:h.NoColorSpace),e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,a.default)(n,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==h.UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case h.RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case h.ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case h.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case h.RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case h.ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case h.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"encoding",get:function(){return(0,v.warnOnce)("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===h.SRGBColorSpace?h.sRGBEncoding:h.LinearEncoding},set:function(e){(0,v.warnOnce)("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===h.sRGBEncoding?h.SRGBColorSpace:h.NoColorSpace}}]),n}(d.EventDispatcher);t.Texture=C,C.DEFAULT_IMAGE=null,C.DEFAULT_MAPPING=h.UVMapping,C.DEFAULT_ANISOTROPY=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RAD2DEG=t.MathUtils=t.DEG2RAD=void 0,t.ceilPowerOfTwo=w,t.clamp=u,t.damp=f,t.degToRad=x,t.denormalize=N,t.euclideanModulo=c,t.floorPowerOfTwo=S,t.generateUUID=s,t.inverseLerp=d,t.isPowerOfTwo=C,t.lerp=h,t.mapLinear=l,t.normalize=E,t.pingpong=p,t.radToDeg=M,t.randFloat=g,t.randFloatSpread=_,t.randInt=v,t.seededRandom=b,t.setQuaternionFromProperEuler=T,t.smootherstep=y,t.smoothstep=m;var r=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],i=1234567,o=Math.PI/180;t.DEG2RAD=o;var a=180/Math.PI;function s(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+"-"+r[255&t]+r[t>>8&255]+"-"+r[t>>16&15|64]+r[t>>24&255]+"-"+r[63&n|128]+r[n>>8&255]+"-"+r[n>>16&255]+r[n>>24&255]+r[255&i]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255];return o.toLowerCase()}function u(e,t,n){return Math.max(t,Math.min(n,e))}function c(e,t){return(e%t+t)%t}function l(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}function d(e,t,n){return e!==t?(n-e)/(t-e):0}function h(e,t,n){return(1-n)*e+n*t}function f(e,t,n,r){return h(e,t,1-Math.exp(-n*r))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(c(e,2*t)-t)}function m(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function y(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function v(e,t){return e+Math.floor(Math.random()*(t-e+1))}function g(e,t){return e+Math.random()*(t-e)}function _(e){return e*(.5-Math.random())}function b(e){void 0!==e&&(i=e);var t=i+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function x(e){return e*o}function M(e){return e*a}function C(e){return 0===(e&e-1)&&0!==e}function w(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function S(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function T(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),c=o((t+r)/2),l=a((t+r)/2),d=o((t-r)/2),h=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*l,u*d,u*h,s*c);break;case"YZY":e.set(u*h,s*l,u*d,s*c);break;case"ZXZ":e.set(u*d,u*h,s*l,s*c);break;case"XZX":e.set(s*l,u*p,u*f,s*c);break;case"YXY":e.set(u*f,s*l,u*p,s*c);break;case"ZYZ":e.set(u*p,u*f,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function N(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function E(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}t.RAD2DEG=a;var A={DEG2RAD:o,RAD2DEG:a,generateUUID:s,clamp:u,euclideanModulo:c,mapLinear:l,inverseLerp:d,lerp:h,damp:f,pingpong:p,smoothstep:m,smootherstep:y,randInt:v,randFloat:g,randFloatSpread:_,seededRandom:b,degToRad:x,radToDeg:M,isPowerOfTwo:C,ceilPowerOfTwo:w,floorPowerOfTwo:S,setQuaternionFromProperEuler:T,normalize:E,denormalize:N};t.MathUtils=A},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;var o=r(n(189)),a=r(n(23)),s=r(n(24)),u=l(n(233));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,a.default)(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return(0,s.default)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(u.clamp(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);t.Vector2=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix3=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(t,n,r,o,a,s,u,c,l){(0,i.default)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,o,a,s,u,c,l)}return(0,o.default)(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],y=r[6],v=r[1],g=r[4],_=r[7],b=r[2],x=r[5],M=r[8];return i[0]=o*p+a*v+s*b,i[3]=o*m+a*g+s*x,i[6]=o*y+a*_+s*M,i[1]=u*p+c*v+l*b,i[4]=u*m+c*g+l*x,i[7]=u*y+c*_+l*M,i[2]=d*p+h*v+f*b,i[5]=d*m+h*g+f*x,i[8]=d*y+h*_+f*M,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=c*o-a*u,d=a*s-c*i,h=u*i-o*s,f=t*l+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=d*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=h*p,e[7]=(n*s-u*t)*p,e[8]=(o*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(s.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(s.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(s.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();t.Matrix3=a;var s=new a},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Source=void 0;var o=r(n(23)),a=r(n(24)),s=n(237),u=l(n(233));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var d=0,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,o.default)(this,e),this.isSource=!0,Object.defineProperty(this,"id",{value:d++}),this.uuid=u.generateUUID(),this.data=t,this.version=0}return(0,a.default)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)r[o].isDataTexture?i.push(f(r[o].image)):i.push(f(r[o]))}else i=f(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function f(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?s.ImageUtils.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}t.Source=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ImageUtils=void 0;var i,o=r(n(23)),a=r(n(24)),s=n(238),u=n(239),c=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===i&&(i=(0,s.createElementNS)("canvas")),i.width=e.width,i.height=e.height;var n=i.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=i}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=(0,s.createElementNS)("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=0;o<i.length;o++)i[o]=255*(0,u.SRGBToLinear)(i[o]/255);return n.putImageData(r,0,0),t}if(e.data){for(var a=e.data.slice(0),c=0;c<a.length;c++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[c]=Math.floor(255*(0,u.SRGBToLinear)(a[c]/255)):a[c]=(0,u.SRGBToLinear)(a[c]);return{data:a,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}();t.ImageUtils=c},function(e,t,n){"use strict";function r(e){if(0===e.length)return 1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function i(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function o(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayMax=i,t.arrayMin=r,t.arrayNeedsUint32=o,t.createElementNS=u,t.getTypedArray=s,t.warnOnce=l;var a={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function s(e,t){return new a[e](t)}function u(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var c={};function l(e){e in c||(c[e]=!0,console.warn(e))}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManagement=void 0,t.LinearToSRGB=l,t.SRGBToLinear=c;var i,o,a=r(n(11)),s=n(223),u=n(235);function c(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function l(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var d=(new u.Matrix3).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),h=(new u.Matrix3).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function f(e){return e.convertSRGBToLinear().applyMatrix3(h)}function p(e){return e.applyMatrix3(d).convertLinearToSRGB()}var m=(i={},(0,a.default)(i,s.LinearSRGBColorSpace,(function(e){return e})),(0,a.default)(i,s.SRGBColorSpace,(function(e){return e.convertSRGBToLinear()})),(0,a.default)(i,s.DisplayP3ColorSpace,f),i),y=(o={},(0,a.default)(o,s.LinearSRGBColorSpace,(function(e){return e})),(0,a.default)(o,s.SRGBColorSpace,(function(e){return e.convertLinearToSRGB()})),(0,a.default)(o,s.DisplayP3ColorSpace,p),o),v={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return s.LinearSRGBColorSpace},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var r=m[t],i=y[n];if(void 0===r||void 0===i)throw new Error('Unsupported color space conversion, "'.concat(t,'" to "').concat(n,'".'));return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};t.ColorManagement=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Vector4=void 0;var i=r(n(189)),o=r(n(23)),a=r(n(24)),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,o.default)(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return(0,a.default)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,u=s[0],c=s[4],l=s[8],d=s[1],h=s[5],f=s[9],p=s[2],m=s[6],y=s[10];if(Math.abs(c-d)<o&&Math.abs(l-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+d)<a&&Math.abs(l+p)<a&&Math.abs(f+m)<a&&Math.abs(u+h+y-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var v=(u+1)/2,g=(h+1)/2,_=(y+1)/2,b=(c+d)/4,x=(l+p)/4,M=(f+m)/4;return v>g&&v>_?v<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(v),r=b/n,i=x/n):g>_?g<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(g),n=b/r,i=M/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=x/i,r=M/i),this.set(n,r,i,t),this}var C=Math.sqrt((m-f)*(m-f)+(l-p)*(l-p)+(d-c)*(d-c));return Math.abs(C)<.001&&(C=1),this.x=(m-f)/C,this.y=(l-p)/C,this.z=(d-c)/C,this.w=Math.acos((u+h+y-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);t.Vector4=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DataArrayTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232),l=n(223);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,o.default)(this,n),e=t.call(this,null),e.isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:s},e.magFilter=l.NearestFilter,e.minFilter=l.NearestFilter,e.wrapR=l.ClampToEdgeWrapping,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,i.default)(n)}(c.Texture);t.DataArrayTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGL3DRenderTarget=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(229),l=n(243);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(this,n),e=t.call(this,r,i),e.isWebGL3DRenderTarget=!0,e.depth=a,e.texture=new l.Data3DTexture(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return(0,i.default)(n)}(c.WebGLRenderTarget);t.WebGL3DRenderTarget=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Data3DTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232),l=n(223);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,o.default)(this,n),e=t.call(this,null),e.isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:s},e.magFilter=l.NearestFilter,e.minFilter=l.NearestFilter,e.wrapR=l.ClampToEdgeWrapping,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,i.default)(n)}(c.Texture);t.Data3DTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLMultipleRenderTargets=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(229);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,i.default)(this,n),e=t.call(this,r,o,s),e.isWebGLMultipleRenderTargets=!0;var u=e.texture;e.texture=[];for(var c=0;c<a;c++)e.texture[c]=u.clone(),e.texture[c].isRenderTargetTexture=!0;return e}return(0,o.default)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(c.WebGLRenderTarget);t.WebGLMultipleRenderTargets=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLCubeRenderTarget=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(246),d=n(265),h=n(266),f=n(267),p=n(229),m=n(270),y=n(273),v=n(238);function g(e){var t=_();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){(0,a.default)(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,n),e=t.call(this,r,r,o),e.isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},s=[a,a,a,a,a,a];return void 0!==o.encoding&&((0,v.warnOnce)("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=o.encoding===c.sRGBEncoding?c.SRGBColorSpace:c.NoColorSpace),e.texture=new y.CubeTexture(s,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,e.texture.minFilter=void 0!==o.minFilter?o.minFilter:c.LinearFilter,e}return(0,o.default)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new d.BoxGeometry(5,5,5),i=new h.ShaderMaterial({name:"CubemapFromEquirect",uniforms:(0,f.cloneUniforms)(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:c.BackSide,blending:c.NoBlending});i.uniforms.tEquirect.value=t;var o=new l.Mesh(r,i),a=t.minFilter;t.minFilter===c.LinearMipmapLinearFilter&&(t.minFilter=c.LinearFilter);var s=new m.CubeCamera(1,10,this);return s.update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(p.WebGLRenderTarget);t.WebGLCubeRenderTarget=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Mesh=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(249),d=n(234),h=n(251),f=n(253),p=n(254),m=n(255),y=n(258),v=n(223),g=n(259),_=n(262);function b(e){var t=x();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var M=new p.Matrix4,C=new f.Ray,w=new h.Sphere,S=new l.Vector3,T=new l.Vector3,N=new l.Vector3,E=new l.Vector3,A=new l.Vector3,R=new l.Vector3,P=new d.Vector2,L=new d.Vector2,O=new d.Vector2,k=new l.Vector3,I=new l.Vector3,D=new l.Vector3,U=new l.Vector3,B=new l.Vector3,F=function(e){(0,s.default)(n,e);var t=b(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _.BufferGeometry,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g.MeshBasicMaterial;return(0,i.default)(this,n),e=t.call(this),e.isMesh=!0,e.type="Mesh",e.geometry=r,e.material=o,e.updateMorphTargets(),e}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var a=this.morphTargetInfluences;if(i&&a){R.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var c=a[s],l=i[s];0!==c&&(A.fromBufferAttribute(l,e),o?R.addScaledVector(A,c):R.addScaledVector(A.sub(t),c))}t.add(R)}return t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),w.copy(n.boundingSphere),w.applyMatrix4(i),C.copy(e.ray).recast(e.near),!1===w.containsPoint(C.origin)){if(null===C.intersectSphere(w,S))return;if(C.origin.distanceToSquared(S)>Math.pow(e.far-e.near,2))return}M.copy(i).invert(),C.copy(e.ray).applyMatrix4(M),null!==n.boundingBox&&!1===C.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,C)}}},{key:"_computeIntersections",value:function(e,t,n){var r,i=this.geometry,o=this.material,a=i.index,s=i.attributes.position,u=i.attributes.uv,c=i.attributes.uv1,l=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==a)if(Array.isArray(o))for(var f=0,p=d.length;f<p;f++)for(var m=d[f],y=o[m.materialIndex],v=Math.max(m.start,h.start),g=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count)),_=v,b=g;_<b;_+=3){var x=a.getX(_),M=a.getX(_+1),C=a.getX(_+2);r=j(this,y,e,n,u,c,l,x,M,C),r&&(r.faceIndex=Math.floor(_/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(var w=Math.max(0,h.start),S=Math.min(a.count,h.start+h.count),T=w,N=S;T<N;T+=3){var E=a.getX(T),A=a.getX(T+1),R=a.getX(T+2);r=j(this,o,e,n,u,c,l,E,A,R),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}else if(void 0!==s)if(Array.isArray(o))for(var P=0,L=d.length;P<L;P++)for(var O=d[P],k=o[O.materialIndex],I=Math.max(O.start,h.start),D=Math.min(s.count,Math.min(O.start+O.count,h.start+h.count)),U=I,B=D;U<B;U+=3){var F=U,G=U+1,z=U+2;r=j(this,k,e,n,u,c,l,F,G,z),r&&(r.faceIndex=Math.floor(U/3),r.face.materialIndex=O.materialIndex,t.push(r))}else for(var V=Math.max(0,h.start),H=Math.min(s.count,h.start+h.count),W=V,q=H;W<q;W+=3){var X=W,Y=W+1,J=W+2;r=j(this,o,e,n,u,c,l,X,Y,J),r&&(r.faceIndex=Math.floor(W/3),t.push(r))}}}]),n}(m.Object3D);function G(e,t,n,r,i,o,a,s){var u;if(u=t.side===v.BackSide?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side===v.FrontSide,s),null===u)return null;B.copy(s),B.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(B);return c<n.near||c>n.far?null:{distance:c,point:B.clone(),object:e}}function j(e,t,n,r,i,o,a,s,u,c){e.getVertexPosition(s,T),e.getVertexPosition(u,N),e.getVertexPosition(c,E);var h=G(e,t,n,r,T,N,E,U);if(h){i&&(P.fromBufferAttribute(i,s),L.fromBufferAttribute(i,u),O.fromBufferAttribute(i,c),h.uv=y.Triangle.getInterpolation(U,T,N,E,P,L,O,new d.Vector2)),o&&(P.fromBufferAttribute(o,s),L.fromBufferAttribute(o,u),O.fromBufferAttribute(o,c),h.uv1=y.Triangle.getInterpolation(U,T,N,E,P,L,O,new d.Vector2),h.uv2=h.uv1),a&&(k.fromBufferAttribute(a,s),I.fromBufferAttribute(a,u),D.fromBufferAttribute(a,c),h.normal=y.Triangle.getInterpolation(U,T,N,E,k,I,D,new l.Vector3),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));var f={a:s,b:u,c:c,normal:new l.Vector3,materialIndex:0};y.Triangle.getNormal(T,N,E,f.normal),h.face=f}return h}t.Mesh=F},function(e,t,n){var r=n(248);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports["default"]=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports["default"]=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){var r=n(228);function i(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=r(e),null===e)break;return e}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=void 0;var o=r(n(189)),a=r(n(23)),s=r(n(24)),u=d(n(233)),c=n(250);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,a.default)(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return(0,s.default)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(p.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(p.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=u*s+d*-i+c*-a-l*-o,this.y=c*s+d*-o+l*-i-u*-a,this.z=l*s+d*-a+u*-o-c*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return f.copy(this).projectOnVector(e),this.sub(f)}},{key:"reflect",value:function(e){return this.sub(f.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(u.clamp(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);t.Vector3=h;var f=new h,p=new c.Quaternion},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Quaternion=void 0;var o=r(n(189)),a=r(n(23)),s=r(n(24)),u=l(n(233));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,a.default)(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return(0,s.default)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=d*c*l+u*h*f,this._y=u*h*l-d*c*f,this._z=u*c*f+d*h*l,this._w=u*c*l-d*h*f;break;case"YXZ":this._x=d*c*l+u*h*f,this._y=u*h*l-d*c*f,this._z=u*c*f-d*h*l,this._w=u*c*l+d*h*f;break;case"ZXY":this._x=d*c*l-u*h*f,this._y=u*h*l+d*c*f,this._z=u*c*f+d*h*l,this._w=u*c*l-d*h*f;break;case"ZYX":this._x=d*c*l-u*h*f,this._y=u*h*l+d*c*f,this._z=u*c*f-d*h*l,this._w=u*c*l+d*h*f;break;case"YZX":this._x=d*c*l+u*h*f,this._y=u*h*l+d*c*f,this._z=u*c*f-d*h*l,this._w=u*c*l-d*h*f;break;case"XZY":this._x=d*c*l-u*h*f,this._y=u*h*l-d*c*f,this._z=u*c*f+d*h*l,this._w=u*c*l+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],c=t[6],l=t[10],d=n+a+l;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-s)*h,this._y=(i-u)*h,this._z=(o-r)*h}else if(n>a&&n>l){var f=2*Math.sqrt(1+n-a-l);this._w=(c-s)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(i+u)/f}else if(a>l){var p=2*Math.sqrt(1+a-n-l);this._w=(i-u)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(s+c)/p}else{var m=2*Math.sqrt(1+l-n-a);this._w=(o-r)/m,this._x=(i+u)/m,this._y=(s+c)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(u.clamp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),d=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=i*d+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=u,e[t+2]=c,void(e[t+3]=l);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(l!==p||s!==d||u!==h||c!==f){var m=1-a,y=s*d+u*h+c*f+l*p,v=y>=0?1:-1,g=1-y*y;if(g>Number.EPSILON){var _=Math.sqrt(g),b=Math.atan2(_,y*v);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var x=a*v;if(s=s*m+d*x,u=u*m+h*x,c=c*m+f*x,l=l*m+p*x,m===1-a){var M=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=M,u*=M,c*=M,l*=M}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[o],d=i[o+1],h=i[o+2],f=i[o+3];return e[t]=a*f+c*l+s*h-u*d,e[t+1]=s*f+c*d+u*l-a*h,e[t+2]=u*f+c*h+a*d-s*l,e[t+3]=c*f-a*l-s*d-u*h,e}}]),t}(Symbol.iterator);t.Quaternion=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=void 0;var i=r(n(23)),o=r(n(24)),a=n(252),s=n(249),u=new a.Box3,c=new s.Vector3,l=new s.Vector3,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s.Vector3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,i.default)(this,e),this.center=t,this.radius=n}return(0,o.default)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):u.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;c.subVectors(e,this.center);var t=c.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(c,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(l.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(c.copy(e.center).add(l)),this.expandByPoint(c.copy(e.center).sub(l))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Sphere=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Box3=void 0;var i=r(n(23)),o=r(n(24)),a=n(249),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.Vector3(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector3(-1/0,-1/0,-1/0);(0,i.default)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,o.default)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(c.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(c.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=c.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),l.copy(e.boundingBox),l.applyMatrix4(e.matrixWorld),this.union(l);else{var n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,o=r.count;i<o;i++)c.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(c);else null===n.boundingBox&&n.computeBoundingBox(),l.copy(n.boundingBox),l.applyMatrix4(e.matrixWorld),this.union(l)}for(var a=e.children,s=0,u=a.length;s<u;s++)this.expandByObject(a[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,c),c.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(v),g.subVectors(this.max,v),d.subVectors(e.a,v),h.subVectors(e.b,v),f.subVectors(e.c,v),p.subVectors(h,d),m.subVectors(f,h),y.subVectors(d,f);var t=[0,-p.z,p.y,0,-m.z,m.y,0,-y.z,y.y,p.z,0,-p.x,m.z,0,-m.x,y.z,0,-y.x,-p.y,p.x,0,-m.y,m.x,0,-y.y,y.x,0];return!!x(t,d,h,f,g)&&(t=[1,0,0,0,1,0,0,0,1],!!x(t,d,h,f,g)&&(_.crossVectors(p,m),t=[_.x,_.y,_.z],x(t,d,h,f,g)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,c).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(c).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(u[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),u[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),u[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),u[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),u[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),u[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),u[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),u[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(u)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();t.Box3=s;var u=[new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3],c=new a.Vector3,l=new s,d=new a.Vector3,h=new a.Vector3,f=new a.Vector3,p=new a.Vector3,m=new a.Vector3,y=new a.Vector3,v=new a.Vector3,g=new a.Vector3,_=new a.Vector3,b=new a.Vector3;function x(e,t,n,r,i){for(var o=0,a=e.length-3;o<=a;o+=3){b.fromArray(e,o);var s=i.x*Math.abs(b.x)+i.y*Math.abs(b.y)+i.z*Math.abs(b.z),u=t.dot(b),c=n.dot(b),l=r.dot(b);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Ray=void 0;var i=r(n(23)),o=r(n(24)),a=n(249),s=new a.Vector3,u=new a.Vector3,c=new a.Vector3,l=new a.Vector3,d=new a.Vector3,h=new a.Vector3,f=new a.Vector3,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.Vector3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector3(0,0,-1);(0,i.default)(this,e),this.origin=t,this.direction=n}return(0,o.default)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,s)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=s.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(s.copy(this.origin).addScaledVector(this.direction,t),s.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){u.copy(e).add(t).multiplyScalar(.5),c.copy(t).sub(e).normalize(),l.copy(this.origin).sub(u);var i,o,a,s,d=.5*e.distanceTo(t),h=-this.direction.dot(c),f=l.dot(this.direction),p=-l.dot(c),m=l.lengthSq(),y=Math.abs(1-h*h);if(y>0)if(i=h*p-f,o=h*f-p,s=d*y,i>=0)if(o>=-s)if(o<=s){var v=1/y;i*=v,o*=v,a=i*(i+h*o+2*f)+o*(h*i+o+2*p)+m}else o=d,i=Math.max(0,-(h*o+f)),a=-i*i+o*(o+2*p)+m;else o=-d,i=Math.max(0,-(h*o+f)),a=-i*i+o*(o+2*p)+m;else o<=-s?(i=Math.max(0,-(-h*d+f)),o=i>0?-d:Math.min(Math.max(-d,-p),d),a=-i*i+o*(o+2*p)+m):o<=s?(i=0,o=Math.min(Math.max(-d,-p),d),a=o*(o+2*p)+m):(i=Math.max(0,-(h*d+f)),o=i>0?d:Math.min(Math.max(-d,-p),d),a=-i*i+o*(o+2*p)+m);else o=h>0?-d:d,i=Math.max(0,-(h*o+f)),a=-i*i+o*(o+2*p)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(u).addScaledVector(c,o),a}},{key:"intersectSphere",value:function(e,t){s.subVectors(e.center,this.origin);var n=s.dot(this.direction),r=s.dot(s)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,u=n+o;return u<0?null:a<0?this.at(u,t):this.at(a,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),l>=0?(a=(e.min.z-d.z)*l,s=(e.max.z-d.z)*l):(a=(e.max.z-d.z)*l,s=(e.min.z-d.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,s)}},{key:"intersectTriangle",value:function(e,t,n,r,i){d.subVectors(t,e),h.subVectors(n,e),f.crossVectors(d,h);var o,a=this.direction.dot(f);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}l.subVectors(this.origin,e);var s=o*this.direction.dot(h.crossVectors(l,h));if(s<0)return null;var u=o*this.direction.dot(d.cross(l));if(u<0)return null;if(s+u>a)return null;var c=-o*l.dot(f);return c<0?null:this.at(c/a,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Ray=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix4=void 0;var i=r(n(23)),o=r(n(24)),a=n(223),s=n(249),u=function(){function e(t,n,r,o,a,s,u,c,l,d,h,f,p,m,y,v){(0,i.default)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,o,a,s,u,c,l,d,h,f,p,m,y,v)}return(0,o.default)(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u,c,l,d,h,f,p,m){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=i,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=c,y[10]=l,y[14]=d,y[3]=h,y[7]=f,y[11]=p,y[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/c.setFromMatrixColumn(e,0).length(),i=1/c.setFromMatrixColumn(e,1).length(),o=1/c.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var d=o*c,h=o*l,f=a*c,p=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=h+f*u,t[5]=d-p*u,t[9]=-a*s,t[2]=p-d*u,t[6]=f+h*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,y=s*l,v=u*c,g=u*l;t[0]=m+g*a,t[4]=v*a-y,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=y*a-v,t[6]=g+m*a,t[10]=o*s}else if("ZXY"===e.order){var _=s*c,b=s*l,x=u*c,M=u*l;t[0]=_-M*a,t[4]=-o*l,t[8]=x+b*a,t[1]=b+x*a,t[5]=o*c,t[9]=M-_*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var C=o*c,w=o*l,S=a*c,T=a*l;t[0]=s*c,t[4]=S*u-w,t[8]=C*u+T,t[1]=s*l,t[5]=T*u+C,t[9]=w*u-S,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var N=o*s,E=o*u,A=a*s,R=a*u;t[0]=s*c,t[4]=R-N*l,t[8]=A*l+E,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=E*l+A,t[10]=N-R*l}else if("XZY"===e.order){var P=o*s,L=o*u,O=a*s,k=a*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=P*l+k,t[5]=o*c,t[9]=L*l-O,t[2]=O*l-L,t[6]=a*c,t[10]=k*l+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(d,e,h)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return m.subVectors(e,t),0===m.lengthSq()&&(m.z=1),m.normalize(),f.crossVectors(n,m),0===f.lengthSq()&&(1===Math.abs(n.z)?m.x+=1e-4:m.z+=1e-4,m.normalize(),f.crossVectors(n,m)),f.normalize(),p.crossVectors(m,f),r[0]=f.x,r[4]=p.x,r[8]=m.x,r[1]=f.y,r[5]=p.y,r[9]=m.y,r[2]=f.z,r[6]=p.z,r[10]=m.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],y=n[14],v=n[3],g=n[7],_=n[11],b=n[15],x=r[0],M=r[4],C=r[8],w=r[12],S=r[1],T=r[5],N=r[9],E=r[13],A=r[2],R=r[6],P=r[10],L=r[14],O=r[3],k=r[7],I=r[11],D=r[15];return i[0]=o*x+a*S+s*A+u*O,i[4]=o*M+a*T+s*R+u*k,i[8]=o*C+a*N+s*P+u*I,i[12]=o*w+a*E+s*L+u*D,i[1]=c*x+l*S+d*A+h*O,i[5]=c*M+l*T+d*R+h*k,i[9]=c*C+l*N+d*P+h*I,i[13]=c*w+l*E+d*L+h*D,i[2]=f*x+p*S+m*A+y*O,i[6]=f*M+p*T+m*R+y*k,i[10]=f*C+p*N+m*P+y*I,i[14]=f*w+p*E+m*L+y*D,i[3]=v*x+g*S+_*A+b*O,i[7]=v*M+g*T+_*R+b*k,i[11]=v*C+g*N+_*P+b*I,i[15]=v*w+g*E+_*L+b*D,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],d=e[10],h=e[14],f=e[3],p=e[7],m=e[11],y=e[15];return f*(+i*s*l-r*u*l-i*a*d+n*u*d+r*a*h-n*s*h)+p*(+t*s*h-t*u*d+i*o*d-r*o*h+r*u*c-i*s*c)+m*(+t*u*l-t*a*h-i*o*l+n*o*h+i*a*c-n*u*c)+y*(-r*a*c-t*s*l+t*a*d+r*o*l-n*o*d+n*s*c)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],y=e[15],v=l*m*u-p*d*u+p*s*h-a*m*h-l*s*y+a*d*y,g=f*d*u-c*m*u-f*s*h+o*m*h+c*s*y-o*d*y,_=c*p*u-f*l*u+f*a*h-o*p*h-c*a*y+o*l*y,b=f*l*s-c*p*s-f*a*d+o*p*d+c*a*m-o*l*m,x=t*v+n*g+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/x;return e[0]=v*M,e[1]=(p*d*i-l*m*i-p*r*h+n*m*h+l*r*y-n*d*y)*M,e[2]=(a*m*i-p*s*i+p*r*u-n*m*u-a*r*y+n*s*y)*M,e[3]=(l*s*i-a*d*i-l*r*u+n*d*u+a*r*h-n*s*h)*M,e[4]=g*M,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*y+t*d*y)*M,e[6]=(f*s*i-o*m*i-f*r*u+t*m*u+o*r*y-t*s*y)*M,e[7]=(o*d*i-c*s*i+c*r*u-t*d*u-o*r*h+t*s*h)*M,e[8]=_*M,e[9]=(f*l*i-c*p*i-f*n*h+t*p*h+c*n*y-t*l*y)*M,e[10]=(o*p*i-f*a*i+f*n*u-t*p*u-o*n*y+t*a*y)*M,e[11]=(c*a*i-o*l*i-c*n*u+t*l*u+o*n*h-t*a*h)*M,e[12]=b*M,e[13]=(c*p*r-f*l*r+f*n*d-t*p*d-c*n*m+t*l*m)*M,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*M,e[15]=(o*l*r-c*a*r+c*n*s-t*l*s-o*n*d+t*a*d)*M,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,d=i*u,h=i*c,f=i*l,p=o*c,m=o*l,y=a*l,v=s*u,g=s*c,_=s*l,b=n.x,x=n.y,M=n.z;return r[0]=(1-(p+y))*b,r[1]=(h+_)*b,r[2]=(f-g)*b,r[3]=0,r[4]=(h-_)*x,r[5]=(1-(d+y))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+g)*M,r[9]=(m-v)*M,r[10]=(1-(d+p))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=c.set(r[0],r[1],r[2]).length(),o=c.set(r[4],r[5],r[6]).length(),a=c.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],l.copy(this);var u=1/i,d=1/o,h=1/a;return l.elements[0]*=u,l.elements[1]*=u,l.elements[2]*=u,l.elements[4]*=d,l.elements[5]*=d,l.elements[6]*=d,l.elements[8]*=h,l.elements[9]*=h,l.elements[10]*=h,t.setFromRotationMatrix(l),n.x=i,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(e,t,n,r,i,o){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.WebGLCoordinateSystem,l=this.elements,d=2*i/(t-e),h=2*i/(n-r),f=(t+e)/(t-e),p=(n+r)/(n-r);if(c===a.WebGLCoordinateSystem)s=-(o+i)/(o-i),u=-2*o*i/(o-i);else{if(c!==a.WebGPUCoordinateSystem)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);s=-o/(o-i),u=-o*i/(o-i)}return l[0]=d,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=s,l[14]=u,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,o){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.WebGLCoordinateSystem,l=this.elements,d=1/(t-e),h=1/(n-r),f=1/(o-i),p=(t+e)*d,m=(n+r)*h;if(c===a.WebGLCoordinateSystem)s=(o+i)*f,u=-2*f;else{if(c!==a.WebGPUCoordinateSystem)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);s=i*f,u=-1*f}return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=u,l[14]=-s,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();t.Matrix4=u;var c=new s.Vector3,l=new u,d=new s.Vector3(0,0,0),h=new s.Vector3(1,1,1),f=new s.Vector3,p=new s.Vector3,m=new s.Vector3},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Object3D=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(227)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(250),h=n(249),f=n(254),p=n(231),m=n(256),y=n(257),v=n(235),g=b(n(233));function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function x(e){var t=M();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var C=0,w=new h.Vector3,S=new d.Quaternion,T=new f.Matrix4,N=new h.Vector3,E=new h.Vector3,A=new h.Vector3,R=new d.Quaternion,P=new h.Vector3(1,0,0),L=new h.Vector3(0,1,0),O=new h.Vector3(0,0,1),k={type:"added"},I={type:"removed"},D=function(e){(0,u.default)(n,e);var t=x(n);function n(){var e;(0,o.default)(this,n),e=t.call(this),e.isObject3D=!0,Object.defineProperty((0,s.default)(e),"id",{value:C++}),e.uuid=g.generateUUID(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var r=new h.Vector3,i=new m.Euler,a=new d.Quaternion,u=new h.Vector3(1,1,1);function c(){a.setFromEuler(i,!1)}function l(){i.setFromQuaternion(a,void 0,!1)}return i._onChange(c),a._onChange(l),Object.defineProperties((0,s.default)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new f.Matrix4},normalMatrix:{value:new v.Matrix3}}),e.matrix=new f.Matrix4,e.matrixWorld=new f.Matrix4,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.layers=new y.Layers,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,a.default)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return S.setFromAxisAngle(e,t),this.quaternion.multiply(S),this}},{key:"rotateOnWorldAxis",value:function(e,t){return S.setFromAxisAngle(e,t),this.quaternion.premultiply(S),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(P,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(L,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(O,e)}},{key:"translateOnAxis",value:function(e,t){return w.copy(e).applyQuaternion(this.quaternion),this.position.add(w.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(P,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(L,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(O,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(T.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?N.copy(e):N.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),E.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?T.lookAt(E,N,this.up):T.lookAt(N,E,this.up),this.quaternion.setFromRotationMatrix(T),r&&(T.extractRotation(r.matrixWorld),S.setFromRotationMatrix(T),this.quaternion.premultiply(S.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(k)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(I)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(I)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),T.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),T.multiply(e.parent.matrixWorld)),e.applyMatrix4(T),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var r=0,i=this.children.length;r<i;r++){var o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E,e,A),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E,R,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++){var a=r[i];!0===a.matrixWorldAutoUpdate&&a.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],d=0,h=this.material.length;d<h;d++)l.push(i(e.materials,this.material[d]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var m=this.animations[p];r.animations.push(i(e.animations,m))}}if(t){var y=w(e.geometries),v=w(e.materials),g=w(e.textures),_=w(e.images),b=w(e.shapes),x=w(e.skeletons),M=w(e.animations),C=w(e.nodes);y.length>0&&(n.geometries=y),v.length>0&&(n.materials=v),g.length>0&&(n.textures=g),_.length>0&&(n.images=_),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),M.length>0&&(n.animations=M),C.length>0&&(n.nodes=C)}return n.object=r,n;function w(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(p.EventDispatcher);t.Object3D=D,D.DEFAULT_UP=new h.Vector3(0,1,0),D.DEFAULT_MATRIX_AUTO_UPDATE=!0,D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Euler=void 0;var i=r(n(189)),o=r(n(23)),a=r(n(24)),s=n(250),u=n(254),c=n(233),l=new u.Matrix4,d=new s.Quaternion,h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;(0,o.default)(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return(0,a.default)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],d=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin((0,c.clamp)(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,c.clamp)(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin((0,c.clamp)(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-(0,c.clamp)(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin((0,c.clamp)(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-(0,c.clamp)(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return l.makeRotationFromQuaternion(e),this.setFromRotationMatrix(l,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return d.setFromEuler(this),this.setFromQuaternion(d,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);t.Euler=h,h.DEFAULT_ORDER="XYZ"},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Layers=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(){(0,i.default)(this,e),this.mask=1}return(0,o.default)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}();t.Layers=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;var i=r(n(23)),o=r(n(24)),a=n(249),s=new a.Vector3,u=new a.Vector3,c=new a.Vector3,l=new a.Vector3,d=new a.Vector3,h=new a.Vector3,f=new a.Vector3,p=new a.Vector3,m=new a.Vector3,y=new a.Vector3,v=!1,g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.Vector3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.Vector3;(0,i.default)(this,e),this.a=t,this.b=n,this.c=r}return(0,o.default)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return s.subVectors(this.c,this.b),u.subVectors(this.a,this.b),.5*s.cross(u).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,o){return!1===v&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),v=!0),e.getInterpolation(t,this.a,this.b,this.c,n,r,i,o)}},{key:"getInterpolation",value:function(t,n,r,i,o){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,o=this.b,a=this.c;d.subVectors(o,i),h.subVectors(a,i),p.subVectors(e,i);var s=d.dot(p),u=h.dot(p);if(s<=0&&u<=0)return t.copy(i);m.subVectors(e,o);var c=d.dot(m),l=h.dot(m);if(c>=0&&l<=c)return t.copy(o);var v=s*l-c*u;if(v<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(d,n);y.subVectors(e,a);var g=d.dot(y),_=h.dot(y);if(_>=0&&g<=_)return t.copy(a);var b=g*u-s*_;if(b<=0&&u>=0&&_<=0)return r=u/(u-_),t.copy(i).addScaledVector(h,r);var x=c*_-g*l;if(x<=0&&l-c>=0&&g-_>=0)return f.subVectors(a,o),r=(l-c)/(l-c+(g-_)),t.copy(o).addScaledVector(f,r);var M=1/(x+b+v);return n=b*M,r=v*M,t.copy(i).addScaledVector(d,n).addScaledVector(h,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),s.subVectors(e,t),r.cross(s);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){s.subVectors(r,t),u.subVectors(n,t),c.subVectors(e,t);var o=s.dot(s),a=s.dot(u),l=s.dot(c),d=u.dot(u),h=u.dot(c),f=o*d-a*a;if(0===f)return i.set(-2,-1,-1);var p=1/f,m=(d*l-a*h)*p,y=(o*h-a*l)*p;return i.set(1-m-y,y,m)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,l),l.x>=0&&l.y>=0&&l.x+l.y<=1}},{key:"getUV",value:function(e,t,n,r,i,o,a,s){return!1===v&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),v=!0),this.getInterpolation(e,t,n,r,i,o,a,s)}},{key:"getInterpolation",value:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,l),s.setScalar(0),s.addScaledVector(i,l.x),s.addScaledVector(o,l.y),s.addScaledVector(a,l.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return s.subVectors(n,t),u.subVectors(e,t),s.cross(u).dot(r)<0}}]),e}();t.Triangle=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshBasicMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(223),h=n(261);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new h.Color(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=d.MultiplyOperation,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(l.Material);t.MeshBasicMaterial=m},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(227)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(231),h=n(223),f=m(n(233));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function y(e){var t=v();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=0,_=function(e){(0,u.default)(n,e);var t=y(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this),e.isMaterial=!0,Object.defineProperty((0,s.default)(e),"id",{value:g++}),e.uuid=f.generateUUID(),e.name="",e.type="Material",e.blending=h.NormalBlending,e.side=h.FrontSide,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=h.SrcAlphaFactor,e.blendDst=h.OneMinusSrcAlphaFactor,e.blendEquation=h.AddEquation,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=h.LessEqualDepth,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=h.AlwaysStencilFunc,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=h.KeepStencilOp,e.stencilZFail=h.KeepStencilOp,e.stencilZPass=h.KeepStencilOp,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,a.default)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==h.NormalBlending&&(n.blending=this.blending),this.side!==h.FrontSide&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(d.EventDispatcher);t.Material=_},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;var i=r(n(189)),o=r(n(23)),a=r(n(24)),s=n(233),u=n(239),c=n(223),l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},d={h:0,s:0,l:0},h={h:0,s:0,l:0};function f(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var p=function(e){function t(e,n,r){return(0,o.default)(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}return(0,a.default)(t,[{key:"set",value:function(e,t,n){if(void 0===t&&void 0===n){var r=e;r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SRGBColorSpace;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,u.ColorManagement.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.ColorManagement.workingColorSpace;return this.r=e,this.g=t,this.b=n,u.ColorManagement.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.ColorManagement.workingColorSpace;if(e=(0,s.euclideanModulo)(e,1),t=(0,s.clamp)(t,0,1),n=(0,s.clamp)(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,o=2*n-i;this.r=f(o,i,e+1/3),this.g=f(o,i,e),this.b=f(o,i,e-1/3)}return u.ColorManagement.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SRGBColorSpace;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,o=t[1],a=t[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SRGBColorSpace,n=l[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=(0,u.SRGBToLinear)(e.r),this.g=(0,u.SRGBToLinear)(e.g),this.b=(0,u.SRGBToLinear)(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=(0,u.LinearToSRGB)(e.r),this.g=(0,u.LinearToSRGB)(e.g),this.b=(0,u.LinearToSRGB)(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.SRGBColorSpace;return u.ColorManagement.fromWorkingColorSpace(m.copy(this),e),65536*Math.round((0,s.clamp)(255*m.r,0,255))+256*Math.round((0,s.clamp)(255*m.g,0,255))+Math.round((0,s.clamp)(255*m.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.SRGBColorSpace;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.ColorManagement.workingColorSpace;u.ColorManagement.fromWorkingColorSpace(m.copy(this),t);var n,r,i=m.r,o=m.g,a=m.b,s=Math.max(i,o,a),c=Math.min(i,o,a),l=(c+s)/2;if(c===s)n=0,r=0;else{var d=s-c;switch(r=l<=.5?d/(s+c):d/(2-s-c),s){case i:n=(o-a)/d+(o<a?6:0);break;case o:n=(a-i)/d+2;break;case a:n=(i-o)/d+4;break}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.ColorManagement.workingColorSpace;return u.ColorManagement.fromWorkingColorSpace(m.copy(this),t),e.r=m.r,e.g=m.g,e.b=m.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.SRGBColorSpace;u.ColorManagement.fromWorkingColorSpace(m.copy(this),e);var t=m.r,n=m.g,r=m.b;return e!==c.SRGBColorSpace?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(d),d.h+=e,d.s+=t,d.l+=n,this.setHSL(d.h,d.s,d.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(d),e.getHSL(h);var n=(0,s.lerp)(d.h,h.h,t),r=(0,s.lerp)(d.s,h.s,t),i=(0,s.lerp)(d.l,h.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:e,value:i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);t.Color=p;var m=new p;p.NAMES=l},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.BufferGeometry=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(227)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(249),h=n(234),f=n(252),p=n(231),m=n(263),y=n(251),v=n(255),g=n(254),_=n(235),b=C(n(233)),x=n(238);function M(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function w(e){var t=S();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var T=0,N=new g.Matrix4,E=new v.Object3D,A=new d.Vector3,R=new f.Box3,P=new f.Box3,L=new d.Vector3,O=function(e){(0,u.default)(n,e);var t=w(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this),e.isBufferGeometry=!0,Object.defineProperty((0,s.default)(e),"id",{value:T++}),e.uuid=b.generateUUID(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,a.default)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new((0,x.arrayNeedsUint32)(e)?m.Uint32BufferAttribute:m.Uint16BufferAttribute)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new _.Matrix3).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return N.makeRotationFromQuaternion(e),this.applyMatrix4(N),this}},{key:"rotateX",value:function(e){return N.makeRotationX(e),this.applyMatrix4(N),this}},{key:"rotateY",value:function(e){return N.makeRotationY(e),this.applyMatrix4(N),this}},{key:"rotateZ",value:function(e){return N.makeRotationZ(e),this.applyMatrix4(N),this}},{key:"translate",value:function(e,t,n){return N.makeTranslation(e,t,n),this.applyMatrix4(N),this}},{key:"scale",value:function(e,t,n){return N.makeScale(e,t,n),this.applyMatrix4(N),this}},{key:"lookAt",value:function(e){return E.lookAt(e),E.updateMatrix(),this.applyMatrix4(E.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(A).negate(),this.translate(A.x,A.y,A.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new m.Float32BufferAttribute(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new f.Box3);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new d.Vector3(-1/0,-1/0,-1/0),new d.Vector3(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];R.setFromBufferAttribute(i),this.morphTargetsRelative?(L.addVectors(this.boundingBox.min,R.min),this.boundingBox.expandByPoint(L),L.addVectors(this.boundingBox.max,R.max),this.boundingBox.expandByPoint(L)):(this.boundingBox.expandByPoint(R.min),this.boundingBox.expandByPoint(R.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new y.Sphere);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new d.Vector3,1/0);if(e){var n=this.boundingSphere.center;if(R.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];P.setFromBufferAttribute(o),this.morphTargetsRelative?(L.addVectors(R.min,P.min),R.expandByPoint(L),L.addVectors(R.max,P.max),R.expandByPoint(L)):(R.expandByPoint(P.min),R.expandByPoint(P.max))}R.getCenter(n);for(var a=0,s=0,u=e.count;s<u;s++)L.fromBufferAttribute(e,s),a=Math.max(a,n.distanceToSquared(L));if(t)for(var c=0,l=t.length;c<l;c++)for(var h=t[c],f=this.morphTargetsRelative,p=0,m=h.count;p<m;p++)L.fromBufferAttribute(h,p),f&&(A.fromBufferAttribute(e,p),L.add(A)),a=Math.max(a,n.distanceToSquared(L));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new m.BufferAttribute(new Float32Array(4*a),4));for(var s=this.getAttribute("tangent").array,u=[],c=[],l=0;l<a;l++)u[l]=new d.Vector3,c[l]=new d.Vector3;var f=new d.Vector3,p=new d.Vector3,y=new d.Vector3,v=new h.Vector2,g=new h.Vector2,_=new h.Vector2,b=new d.Vector3,x=new d.Vector3,M=this.groups;0===M.length&&(M=[{start:0,count:n.length}]);for(var C=0,w=M.length;C<w;++C)for(var S=M[C],T=S.start,N=S.count,E=T,A=T+N;E<A;E+=3)j(n[E+0],n[E+1],n[E+2]);for(var R=new d.Vector3,P=new d.Vector3,L=new d.Vector3,O=new d.Vector3,k=0,I=M.length;k<I;++k)for(var D=M[k],U=D.start,B=D.count,F=U,G=U+B;F<G;F+=3)z(n[F+0]),z(n[F+1]),z(n[F+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function j(e,t,n){f.fromArray(r,3*e),p.fromArray(r,3*t),y.fromArray(r,3*n),v.fromArray(o,2*e),g.fromArray(o,2*t),_.fromArray(o,2*n),p.sub(f),y.sub(f),g.sub(v),_.sub(v);var i=1/(g.x*_.y-_.x*g.y);isFinite(i)&&(b.copy(p).multiplyScalar(_.y).addScaledVector(y,-g.y).multiplyScalar(i),x.copy(y).multiplyScalar(g.x).addScaledVector(p,-_.x).multiplyScalar(i),u[e].add(b),u[t].add(b),u[n].add(b),c[e].add(x),c[t].add(x),c[n].add(x))}function z(e){L.fromArray(i,3*e),O.copy(L);var t=u[e];R.copy(t),R.sub(L.multiplyScalar(L.dot(t))).normalize(),P.crossVectors(O,t);var n=P.dot(c[e]),r=n<0?-1:1;s[4*e]=R.x,s[4*e+1]=R.y,s[4*e+2]=R.z,s[4*e+3]=r}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new m.BufferAttribute(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new d.Vector3,a=new d.Vector3,s=new d.Vector3,u=new d.Vector3,c=new d.Vector3,l=new d.Vector3,h=new d.Vector3,f=new d.Vector3;if(e)for(var p=0,y=e.count;p<y;p+=3){var v=e.getX(p+0),g=e.getX(p+1),_=e.getX(p+2);o.fromBufferAttribute(t,v),a.fromBufferAttribute(t,g),s.fromBufferAttribute(t,_),h.subVectors(s,a),f.subVectors(o,a),h.cross(f),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,g),l.fromBufferAttribute(n,_),u.add(h),c.add(h),l.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z),n.setXYZ(_,l.x,l.y,l.z)}else for(var b=0,x=t.count;b<x;b+=3)o.fromBufferAttribute(t,b+0),a.fromBufferAttribute(t,b+1),s.fromBufferAttribute(t,b+2),h.subVectors(s,a),f.subVectors(o,a),h.cross(f),n.setXYZ(b+0,h.x,h.y,h.z),n.setXYZ(b+1,h.x,h.y,h.z),n.setXYZ(b+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)L.fromBufferAttribute(e,t),L.normalize(),e.setXYZ(t,L.x,L.y,L.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r),a=0,s=0,u=0,c=t.length;u<c;u++){a=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var l=0;l<r;l++)o[s++]=n[a++]}return new m.BufferAttribute(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var o in i){var a=i[o],s=e(a,r);t.setAttribute(o,s)}var u=this.morphAttributes;for(var c in u){for(var l=[],d=u[c],h=0,f=d.length;h<f;h++){var p=d[h],y=e(p,r);l.push(y)}t.morphAttributes[c]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var v=this.groups,g=0,_=v.length;g<_;g++){var b=v[g];t.addGroup(b.start,b.count,b.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var a=i[o];e.data.attributes[o]=a.toJSON(e.data)}var s={},u=!1;for(var c in this.morphAttributes){for(var l=this.morphAttributes[c],d=[],h=0,f=l.length;h<f;h++){var p=l[h];d.push(p.toJSON(e.data))}d.length>0&&(s[c]=d,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));var y=this.boundingSphere;return null!==y&&(e.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(t))}var a=e.morphAttributes;for(var s in a){for(var u=[],c=a[s],l=0,d=c.length;l<d;l++)u.push(c[l].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,p=h.length;f<p;f++){var m=h[f];this.addGroup(m.start,m.count,m.materialIndex)}var y=e.boundingBox;null!==y&&(this.boundingBox=y.clone());var v=e.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(p.EventDispatcher);t.BufferGeometry=O},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Uint8ClampedBufferAttribute=t.Uint8BufferAttribute=t.Uint32BufferAttribute=t.Uint16BufferAttribute=t.Int8BufferAttribute=t.Int32BufferAttribute=t.Int16BufferAttribute=t.Float64BufferAttribute=t.Float32BufferAttribute=t.Float16BufferAttribute=t.BufferAttribute=void 0;var i=r(n(225)),o=r(n(226)),a=r(n(228)),s=r(n(23)),u=r(n(24)),c=n(249),l=n(234),d=n(233),h=n(223),f=n(264);function p(e){var t=m();return function(){var n,r=(0,a.default)(e);if(t){var i=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=new c.Vector3,v=new l.Vector2,g=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.default)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=h.StaticDrawUsage,this.updateRange={offset:0,count:-1},this.gpuType=h.FloatType,this.version=0}return(0,u.default)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)v.fromBufferAttribute(this,t),v.applyMatrix3(e),this.setXY(t,v.x,v.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)y.fromBufferAttribute(this,r),y.applyMatrix3(e),this.setXYZ(r,y.x,y.y,y.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)y.fromBufferAttribute(this,t),y.applyMatrix4(e),this.setXYZ(t,y.x,y.y,y.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)y.fromBufferAttribute(this,t),y.applyNormalMatrix(e),this.setXYZ(t,y.x,y.y,y.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)y.fromBufferAttribute(this,t),y.transformDirection(e),this.setXYZ(t,y.x,y.y,y.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.itemSize+t];return this.normalized&&(n=(0,d.denormalize)(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=(0,d.normalize)(n,this.array)),this.array[e*this.itemSize+t]=n,this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=(0,d.normalize)(t,this.array),n=(0,d.normalize)(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=(0,d.normalize)(t,this.array),n=(0,d.normalize)(n,this.array),r=(0,d.normalize)(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=(0,d.normalize)(t,this.array),n=(0,d.normalize)(n,this.array),r=(0,d.normalize)(r,this.array),i=(0,d.normalize)(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==h.StaticDrawUsage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();t.BufferAttribute=g;var _=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Int8Array(e),r,i)}return(0,u.default)(n)}(g);t.Int8BufferAttribute=_;var b=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Uint8Array(e),r,i)}return(0,u.default)(n)}(g);t.Uint8BufferAttribute=b;var x=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return(0,u.default)(n)}(g);t.Uint8ClampedBufferAttribute=x;var M=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Int16Array(e),r,i)}return(0,u.default)(n)}(g);t.Int16BufferAttribute=M;var C=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,u.default)(n)}(g);t.Uint16BufferAttribute=C;var w=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Int32Array(e),r,i)}return(0,u.default)(n)}(g);t.Int32BufferAttribute=w;var S=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,u.default)(n)}(g);t.Uint32BufferAttribute=S;var T=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){var o;return(0,s.default)(this,n),o=t.call(this,new Uint16Array(e),r,i),o.isFloat16BufferAttribute=!0,o}return(0,u.default)(n,[{key:"getX",value:function(e){var t=(0,f.fromHalfFloat)(this.array[e*this.itemSize]);return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize]=(0,f.toHalfFloat)(t),this}},{key:"getY",value:function(e){var t=(0,f.fromHalfFloat)(this.array[e*this.itemSize+1]);return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize+1]=(0,f.toHalfFloat)(t),this}},{key:"getZ",value:function(e){var t=(0,f.fromHalfFloat)(this.array[e*this.itemSize+2]);return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize+2]=(0,f.toHalfFloat)(t),this}},{key:"getW",value:function(e){var t=(0,f.fromHalfFloat)(this.array[e*this.itemSize+3]);return this.normalized&&(t=(0,d.denormalize)(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=(0,d.normalize)(t,this.array)),this.array[e*this.itemSize+3]=(0,f.toHalfFloat)(t),this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=(0,d.normalize)(t,this.array),n=(0,d.normalize)(n,this.array)),this.array[e+0]=(0,f.toHalfFloat)(t),this.array[e+1]=(0,f.toHalfFloat)(n),this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=(0,d.normalize)(t,this.array),n=(0,d.normalize)(n,this.array),r=(0,d.normalize)(r,this.array)),this.array[e+0]=(0,f.toHalfFloat)(t),this.array[e+1]=(0,f.toHalfFloat)(n),this.array[e+2]=(0,f.toHalfFloat)(r),this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=(0,d.normalize)(t,this.array),n=(0,d.normalize)(n,this.array),r=(0,d.normalize)(r,this.array),i=(0,d.normalize)(i,this.array)),this.array[e+0]=(0,f.toHalfFloat)(t),this.array[e+1]=(0,f.toHalfFloat)(n),this.array[e+2]=(0,f.toHalfFloat)(r),this.array[e+3]=(0,f.toHalfFloat)(i),this}}]),n}(g);t.Float16BufferAttribute=T;var N=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,u.default)(n)}(g);t.Float32BufferAttribute=N;var E=function(e){(0,i.default)(n,e);var t=p(n);function n(e,r,i){return(0,s.default)(this,n),t.call(this,new Float64Array(e),r,i)}return(0,u.default)(n)}(g);t.Float64BufferAttribute=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataUtils=void 0,t.fromHalfFloat=s,t.toHalfFloat=a;var r=n(233),i=o();function o(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),o=0;o<256;++o){var a=o-127;a<-27?(r[o]=0,r[256|o]=32768,i[o]=24,i[256|o]=24):a<-14?(r[o]=1024>>-a-14,r[256|o]=1024>>-a-14|32768,i[o]=-a-1,i[256|o]=-a-1):a<=15?(r[o]=a+15<<10,r[256|o]=a+15<<10|32768,i[o]=13,i[256|o]=13):a<128?(r[o]=31744,r[256|o]=64512,i[o]=24,i[256|o]=24):(r[o]=31744,r[256|o]=64512,i[o]=13,i[256|o]=13)}for(var s=new Uint32Array(2048),u=new Uint32Array(64),c=new Uint32Array(64),l=1;l<1024;++l){var d=l<<13,h=0;while(0===(8388608&d))d<<=1,h-=8388608;d&=-8388609,h+=947912704,s[l]=d|h}for(var f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(var p=1;p<31;++p)u[p]=p<<23;u[31]=1199570944,u[32]=2147483648;for(var m=33;m<63;++m)u[m]=2147483648+(m-32<<23);u[63]=3347054592;for(var y=1;y<64;++y)32!==y&&(c[y]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:c}}function a(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=(0,r.clamp)(e,-65504,65504),i.floatView[0]=e;var t=i.uint32View[0],n=t>>23&511;return i.baseTable[n]+((8388607&t)>>i.shiftTable[n])}function s(e){var t=e>>10;return i.uint32View[0]=i.mantissaTable[i.offsetTable[t]+(1023&e)]+i.exponentTable[t],i.floatView[0]}var u={toHalfFloat:a,fromHalfFloat:s};t.DataUtils=u},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.BoxGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(227)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(262),h=n(263),f=n(249);function p(e){var t=m();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,u.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,i.default)(this,n),e=t.call(this),e.type="BoxGeometry",e.parameters={width:r,height:o,depth:s,widthSegments:u,heightSegments:c,depthSegments:l};var d=(0,a.default)(e);u=Math.floor(u),c=Math.floor(c),l=Math.floor(l);var p=[],m=[],y=[],v=[],g=0,_=0;function b(e,t,n,r,i,o,a,s,u,c,l){for(var h=o/u,b=a/c,x=o/2,M=a/2,C=s/2,w=u+1,S=c+1,T=0,N=0,E=new f.Vector3,A=0;A<S;A++)for(var R=A*b-M,P=0;P<w;P++){var L=P*h-x;E[e]=L*r,E[t]=R*i,E[n]=C,m.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,y.push(E.x,E.y,E.z),v.push(P/u),v.push(1-A/c),T+=1}for(var O=0;O<c;O++)for(var k=0;k<u;k++){var I=g+k+w*O,D=g+k+w*(O+1),U=g+(k+1)+w*(O+1),B=g+(k+1)+w*O;p.push(I,D,B),p.push(D,U,B),N+=6}d.addGroup(_,N,l),_+=N,g+=T}return b("z","y","x",-1,-1,s,o,r,l,c,0),b("z","y","x",1,-1,s,o,-r,l,c,1),b("x","z","y",1,1,r,s,o,u,l,2),b("x","z","y",1,-1,r,s,-o,u,l,3),b("x","y","z",1,-1,r,o,s,u,c,4),b("x","y","z",-1,-1,r,o,-s,u,c,5),e.setIndex(p),e.setAttribute("position",new h.Float32BufferAttribute(m,3)),e.setAttribute("normal",new h.Float32BufferAttribute(y,3)),e.setAttribute("uv",new h.Float32BufferAttribute(v,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(d.BufferGeometry);t.BoxGeometry=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(267),h=r(n(268)),f=r(n(269));function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader=h.default,r.fragmentShader=f.default,r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.forceSinglePass=!0,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=(0,d.cloneUniforms)(e.uniforms),this.uniformsGroups=(0,d.cloneUniformsGroups)(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r],o=i.value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;var s={};for(var u in this.extensions)!0===this.extensions[u]&&(s[u]=!0);return Object.keys(s).length>0&&(t.extensions=s),t}}]),n}(l.Material);t.ShaderMaterial=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UniformsUtils=void 0,t.cloneUniforms=i,t.cloneUniformsGroups=a,t.getUnlitUniformColorSpace=s,t.mergeUniforms=o;var r=n(223);function i(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function o(e){for(var t={},n=0;n<e.length;n++){var r=i(e[n]);for(var o in r)t[o]=r[o]}return t}function a(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}function s(e){return null===e.getRenderTarget()?e.outputColorSpace:r.LinearSRGBColorSpace}var u={clone:i,merge:o};t.UniformsUtils=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n";t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CubeCamera=void 0;var i=r(n(5)),o=r(n(23)),a=r(n(24)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(255),h=n(271);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=v();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=-90,_=1,b=function(e){(0,s.default)(n,e);var t=y(n);function n(e,r,i){var a;(0,o.default)(this,n),a=t.call(this),a.type="CubeCamera",a.renderTarget=i,a.coordinateSystem=null;var s=new h.PerspectiveCamera(g,_,e,r);s.layers=a.layers,a.add(s);var u=new h.PerspectiveCamera(g,_,e,r);u.layers=a.layers,a.add(u);var c=new h.PerspectiveCamera(g,_,e,r);c.layers=a.layers,a.add(c);var l=new h.PerspectiveCamera(g,_,e,r);l.layers=a.layers,a.add(l);var d=new h.PerspectiveCamera(g,_,e,r);d.layers=a.layers,a.add(d);var f=new h.PerspectiveCamera(g,_,e,r);return f.layers=a.layers,a.add(f),a}return(0,a.default)(n,[{key:"updateCoordinateSystem",value:function(){var e,t=this.coordinateSystem,n=this.children.concat(),r=(0,i.default)(n,6),o=r[0],a=r[1],s=r[2],u=r[3],c=r[4],d=r[5],h=f(n);try{for(h.s();!(e=h.n()).done;){var p=e.value;this.remove(p)}}catch(g){h.e(g)}finally{h.f()}if(t===l.WebGLCoordinateSystem)o.up.set(0,1,0),o.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else{if(t!==l.WebGPUCoordinateSystem)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);o.up.set(0,-1,0),o.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1)}var m,y=f(n);try{for(y.s();!(m=y.n()).done;){var v=m.value;this.add(v),v.updateMatrixWorld()}}catch(g){y.e(g)}finally{y.f()}}},{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var r=(0,i.default)(this.children,6),o=r[0],a=r[1],s=r[2],u=r[3],c=r[4],l=r[5],d=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,o),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,u),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(d),e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}]),n}(d.Object3D);t.CubeCamera=b},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCamera=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(272),h=p(n(233));function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function m(e){var t=y();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,o.default)(this,n),e=t.call(this),e.isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=s,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,a.default)(n,[{key:"copy",value:function(e,t){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*h.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*h.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*h.RAD2DEG*Math.atan(Math.tan(.5*h.DEG2RAD*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*h.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,s.default)((0,l.default)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(d.Camera);t.PerspectiveCamera=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(254),h=n(255);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this),e.isCamera=!0,e.type="Camera",e.matrixWorldInverse=new d.Matrix4,e.projectionMatrix=new d.Matrix4,e.projectionMatrixInverse=new d.Matrix4,e.coordinateSystem=l.WebGLCoordinateSystem,e}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){(0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){(0,a.default)((0,c.default)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(h.Object3D);t.Camera=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CubeTexture=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232),l=n(223);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e,r,o,a,s,u,c,d,h,f){var p;return(0,i.default)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:l.CubeReflectionMapping,p=t.call(this,e,r,o,a,s,u,c,d,h,f),p.isCubeTexture=!0,p.flipY=!1,p}return(0,o.default)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(c.Texture);t.CubeTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderer=void 0;var i=r(n(23)),o=r(n(24)),a=n(223),s=n(261),u=n(275),c=n(254),l=n(234),d=n(249),h=n(240),f=n(233),p=n(277),m=n(278),y=n(279),v=n(406),g=n(407),_=n(408),b=n(409),x=n(410),M=n(411),C=n(414),w=n(415),S=n(416),T=n(417),N=n(418),E=n(419),A=n(420),R=n(425),P=n(426),L=n(427),O=n(229),k=n(429),I=n(433),D=n(434),U=n(422),B=n(435),F=n(436),G=n(441),j=n(442),z=n(238);function V(){var e=(0,z.createElementNS)("canvas");return e.style.display="block",e}var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e);var n,r=t.canvas,o=void 0===r?V():r,z=t.context,H=void 0===z?null:z,W=t.depth,q=void 0===W||W,X=t.stencil,Y=void 0===X||X,J=t.alpha,K=void 0!==J&&J,$=t.antialias,Z=void 0!==$&&$,Q=t.premultipliedAlpha,ee=void 0===Q||Q,te=t.preserveDrawingBuffer,ne=void 0!==te&&te,re=t.powerPreference,ie=void 0===re?"default":re,oe=t.failIfMajorPerformanceCaveat,ae=void 0!==oe&&oe;this.isWebGLRenderer=!0,n=null!==H?H.getContextAttributes().alpha:K;var se=new Uint32Array(4),ue=new Int32Array(4),ce=null,le=null,de=[],he=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=a.SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=a.NoToneMapping,this.toneMappingExposure=1;var fe=this,pe=!1,me=0,ye=0,ve=null,ge=-1,_e=null,be=new h.Vector4,xe=new h.Vector4,Me=null,Ce=new s.Color(0),we=0,Se=o.width,Te=o.height,Ne=1,Ee=null,Ae=null,Re=new h.Vector4(0,0,Se,Te),Pe=new h.Vector4(0,0,Se,Te),Le=!1,Oe=new u.Frustum,ke=!1,Ie=!1,De=null,Ue=new c.Matrix4,Be=new l.Vector2,Fe=new d.Vector3,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function je(){return null===ve?Ne:1}var ze,Ve,He,We,qe,Xe,Ye,Je,Ke,$e,Ze,Qe,et,tt,nt,rt,it,ot,at,st,ut,ct,lt,dt,ht=H;function ft(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o.getContext(r,t);if(null!==i)return i}return null}try{var pt={alpha:!0,depth:q,stencil:Y,antialias:Z,premultipliedAlpha:ee,preserveDrawingBuffer:ne,powerPreference:ie,failIfMajorPerformanceCaveat:ae};if("setAttribute"in o&&o.setAttribute("data-engine","three.js r".concat(a.REVISION)),o.addEventListener("webglcontextlost",gt,!1),o.addEventListener("webglcontextrestored",_t,!1),o.addEventListener("webglcontextcreationerror",bt,!1),null===ht){var mt=["webgl2","webgl","experimental-webgl"];if(!0===fe.isWebGL1Renderer&&mt.shift(),ht=ft(mt,pt),null===ht)throw ft(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ht instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ht.getShaderPrecisionFormat&&(ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ft){throw console.error("THREE.WebGLRenderer: "+Ft.message),Ft}function yt(){ze=new C.WebGLExtensions(ht),Ve=new _.WebGLCapabilities(ht,ze,t),ze.init(Ve),ct=new B.WebGLUtils(ht,ze,Ve),He=new I.WebGLState(ht,ze,Ve),We=new T.WebGLInfo(ht),qe=new R.WebGLProperties,Xe=new D.WebGLTextures(ht,ze,He,qe,Ve,ct,We),Ye=new x.WebGLCubeMaps(fe),Je=new M.WebGLCubeUVMaps(fe),Ke=new m.WebGLAttributes(ht,Ve),lt=new v.WebGLBindingStates(ht,ze,Ke,Ve),$e=new w.WebGLGeometries(ht,Ke,We,lt),Ze=new E.WebGLObjects(ht,$e,Ke,We),at=new N.WebGLMorphtargets(ht,Ve,Xe),rt=new b.WebGLClipping(qe),Qe=new A.WebGLPrograms(fe,Ye,Je,ze,Ve,lt,rt),et=new G.WebGLMaterials(fe,qe),tt=new P.WebGLRenderLists,nt=new L.WebGLRenderStates(ze,Ve),ot=new y.WebGLBackground(fe,Ye,Je,He,Ze,n,ee),it=new k.WebGLShadowMap(fe,Ze,Ve),dt=new j.WebGLUniformsGroups(ht,We,Ve,He),st=new g.WebGLBufferRenderer(ht,ze,We,Ve),ut=new S.WebGLIndexedBufferRenderer(ht,ze,We,Ve),We.programs=Qe.programs,fe.capabilities=Ve,fe.extensions=ze,fe.properties=qe,fe.renderLists=tt,fe.shadowMap=it,fe.state=He,fe.info=We}yt();var vt=new F.WebXRManager(fe,ht);function gt(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),pe=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),pe=!1;var e=We.autoReset,t=it.enabled,n=it.autoUpdate,r=it.needsUpdate,i=it.type;yt(),We.autoReset=e,it.enabled=t,it.autoUpdate=n,it.needsUpdate=r,it.type=i}function bt(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xt(e){var t=e.target;t.removeEventListener("dispose",xt),Mt(t)}function Mt(e){Ct(e),qe.remove(e)}function Ct(e){var t=qe.get(e).programs;void 0!==t&&(t.forEach((function(e){Qe.releaseProgram(e)})),e.isShaderMaterial&&Qe.releaseShaderCache(e))}this.xr=vt,this.getContext=function(){return ht},this.getContextAttributes=function(){return ht.getContextAttributes()},this.forceContextLoss=function(){var e=ze.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=ze.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Ne},this.setPixelRatio=function(e){void 0!==e&&(Ne=e,this.setSize(Se,Te,!1))},this.getSize=function(e){return e.set(Se,Te)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Se=e,Te=t,o.width=Math.floor(e*Ne),o.height=Math.floor(t*Ne),!0===n&&(o.style.width=e+"px",o.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(Se*Ne,Te*Ne).floor()},this.setDrawingBufferSize=function(e,t,n){Se=e,Te=t,Ne=n,o.width=Math.floor(e*n),o.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(be)},this.getViewport=function(e){return e.copy(Re)},this.setViewport=function(e,t,n,r){e.isVector4?Re.set(e.x,e.y,e.z,e.w):Re.set(e,t,n,r),He.viewport(be.copy(Re).multiplyScalar(Ne).floor())},this.getScissor=function(e){return e.copy(Pe)},this.setScissor=function(e,t,n,r){e.isVector4?Pe.set(e.x,e.y,e.z,e.w):Pe.set(e,t,n,r),He.scissor(xe.copy(Pe).multiplyScalar(Ne).floor())},this.getScissorTest=function(){return Le},this.setScissorTest=function(e){He.setScissorTest(Le=e)},this.setOpaqueSort=function(e){Ee=e},this.setTransparentSort=function(e){Ae=e},this.getClearColor=function(e){return e.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;if(e){var i=!1;if(null!==ve){var o=ve.texture.format;i=o===a.RGBAIntegerFormat||o===a.RGIntegerFormat||o===a.RedIntegerFormat}if(i){var s=ve.texture.type,u=s===a.UnsignedByteType||s===a.UnsignedIntType||s===a.UnsignedShortType||s===a.UnsignedInt248Type||s===a.UnsignedShort4444Type||s===a.UnsignedShort5551Type,c=ot.getClearColor(),l=ot.getClearAlpha(),d=c.r,h=c.g,f=c.b;u?(se[0]=d,se[1]=h,se[2]=f,se[3]=l,ht.clearBufferuiv(ht.COLOR,0,se)):(ue[0]=d,ue[1]=h,ue[2]=f,ue[3]=l,ht.clearBufferiv(ht.COLOR,0,ue))}else r|=ht.COLOR_BUFFER_BIT}t&&(r|=ht.DEPTH_BUFFER_BIT),n&&(r|=ht.STENCIL_BUFFER_BIT),ht.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",gt,!1),o.removeEventListener("webglcontextrestored",_t,!1),o.removeEventListener("webglcontextcreationerror",bt,!1),tt.dispose(),nt.dispose(),qe.dispose(),Ye.dispose(),Je.dispose(),Ze.dispose(),lt.dispose(),dt.dispose(),Qe.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",Tt),vt.removeEventListener("sessionend",Nt),De&&(De.dispose(),De=null),Et.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=Ge);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Dt(e,t,n,r,i);He.setMaterial(r,a);var u=n.index,c=1;if(!0===r.wireframe){if(u=$e.getWireframeAttribute(n),void 0===u)return;c=2}var l=n.drawRange,d=n.attributes.position,h=l.start*c,f=(l.start+l.count)*c;null!==o&&(h=Math.max(h,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==u?(h=Math.max(h,0),f=Math.min(f,u.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),f=Math.min(f,d.count));var p=f-h;if(!(p<0||p===1/0)){var m;lt.setup(i,r,s,n,u);var y=st;if(null!==u&&(m=Ke.get(u),y=ut,y.setIndex(m)),i.isMesh)!0===r.wireframe?(He.setLineWidth(r.wireframeLinewidth*je()),y.setMode(ht.LINES)):y.setMode(ht.TRIANGLES);else if(i.isLine){var v=r.linewidth;void 0===v&&(v=1),He.setLineWidth(v*je()),i.isLineSegments?y.setMode(ht.LINES):i.isLineLoop?y.setMode(ht.LINE_LOOP):y.setMode(ht.LINE_STRIP)}else i.isPoints?y.setMode(ht.POINTS):i.isSprite&&y.setMode(ht.TRIANGLES);if(i.isInstancedMesh)y.renderInstances(h,p,i.count);else if(n.isInstancedBufferGeometry){var g=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,_=Math.min(n.instanceCount,g);y.renderInstances(h,p,_)}else y.render(h,p)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===a.DoubleSide&&!1===e.forceSinglePass?(e.side=a.BackSide,e.needsUpdate=!0,kt(e,t,n),e.side=a.FrontSide,e.needsUpdate=!0,kt(e,t,n),e.side=a.DoubleSide):kt(e,t,n)}le=nt.get(e),le.init(),he.push(le),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(le.pushLight(e),e.castShadow&&le.pushShadow(e))})),le.setupLights(fe._useLegacyLights),e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var o=r[i];n(o,e,t)}else n(r,e,t)})),he.pop(),le=null};var wt=null;function St(e){wt&&wt(e)}function Tt(){Et.stop()}function Nt(){Et.start()}var Et=new p.WebGLAnimation;function At(e,t,n,r){if(!1!==e.visible){var i=e.layers.test(t.layers);if(i)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)le.pushLight(e),e.castShadow&&le.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Oe.intersectsSprite(e)){r&&Fe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ue);var o=Ze.update(e),a=e.material;a.visible&&ce.push(e,o,a,n,Fe.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Oe.intersectsObject(e))){var s=Ze.update(e),u=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),Fe.copy(e.boundingSphere.center)):(null===s.boundingSphere&&s.computeBoundingSphere(),Fe.copy(s.boundingSphere.center)),Fe.applyMatrix4(e.matrixWorld).applyMatrix4(Ue)),Array.isArray(u))for(var c=s.groups,l=0,d=c.length;l<d;l++){var h=c[l],f=u[h.materialIndex];f&&f.visible&&ce.push(e,s,f,n,Fe.z,h)}else u.visible&&ce.push(e,s,u,n,Fe.z,null)}for(var p=e.children,m=0,y=p.length;m<y;m++)At(p[m],t,n,r)}}function Rt(e,t,n,r){var i=e.opaque,o=e.transmissive,a=e.transparent;le.setupLightsView(n),!0===ke&&rt.setGlobalState(fe.clippingPlanes,n),o.length>0&&Pt(i,o,t,n),r&&He.viewport(be.copy(r)),i.length>0&&Lt(i,t,n),o.length>0&&Lt(o,t,n),a.length>0&&Lt(a,t,n),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function Pt(e,t,n,r){var i=Ve.isWebGL2;null===De&&(De=new O.WebGLRenderTarget(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")?a.HalfFloatType:a.UnsignedByteType,minFilter:a.LinearMipmapLinearFilter,samples:i?4:0})),fe.getDrawingBufferSize(Be),i?De.setSize(Be.x,Be.y):De.setSize((0,f.floorPowerOfTwo)(Be.x),(0,f.floorPowerOfTwo)(Be.y));var o=fe.getRenderTarget();fe.setRenderTarget(De),fe.getClearColor(Ce),we=fe.getClearAlpha(),we<1&&fe.setClearColor(16777215,.5),fe.clear();var s=fe.toneMapping;fe.toneMapping=a.NoToneMapping,Lt(e,n,r),Xe.updateMultisampleRenderTarget(De),Xe.updateRenderTargetMipmap(De);for(var u=!1,c=0,l=t.length;c<l;c++){var d=t[c],h=d.object,p=d.geometry,m=d.material,y=d.group;if(m.side===a.DoubleSide&&h.layers.test(r.layers)){var v=m.side;m.side=a.BackSide,m.needsUpdate=!0,Ot(h,n,r,p,m,y),m.side=v,m.needsUpdate=!0,u=!0}}!0===u&&(Xe.updateMultisampleRenderTarget(De),Xe.updateRenderTargetMipmap(De)),fe.setRenderTarget(o),fe.setClearColor(Ce,we),fe.toneMapping=s}function Lt(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=null===r?a.material:r,l=a.group;s.layers.test(n.layers)&&Ot(s,t,n,u,c,l)}}function Ot(e,t,n,r,i,o){e.onBeforeRender(fe,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(fe,t,n,r,e,o),!0===i.transparent&&i.side===a.DoubleSide&&!1===i.forceSinglePass?(i.side=a.BackSide,i.needsUpdate=!0,fe.renderBufferDirect(n,t,r,i,e,o),i.side=a.FrontSide,i.needsUpdate=!0,fe.renderBufferDirect(n,t,r,i,e,o),i.side=a.DoubleSide):fe.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(fe,t,n,r,i,o)}function kt(e,t,n){!0!==t.isScene&&(t=Ge);var r=qe.get(e),i=le.state.lights,o=le.state.shadowsArray,a=i.state.version,s=Qe.getParameters(e,i.state,o,t,n),u=Qe.getProgramCacheKey(s),c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Je:Ye).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",xt),c=new Map,r.programs=c);var l=c.get(u);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===a)return It(e,s),l}else s.uniforms=Qe.getUniforms(e),e.onBuild(n,s,fe),e.onBeforeCompile(s,fe),l=Qe.acquireProgram(s,u),c.set(u,l),r.uniforms=s.uniforms;var d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=rt.uniform),It(e,s),r.needsLights=Bt(e),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var h=l.getUniforms(),f=U.WebGLUniforms.seqWithValue(h.seq,d);return r.currentProgram=l,r.uniformsList=f,l}function It(e,t){var n=qe.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function Dt(e,t,n,r,i){!0!==t.isScene&&(t=Ge),Xe.resetTextureUnits();var o=t.fog,s=r.isMeshStandardMaterial?t.environment:null,u=null===ve?fe.outputColorSpace:!0===ve.isXRRenderTarget?ve.texture.colorSpace:a.LinearSRGBColorSpace,c=(r.isMeshStandardMaterial?Je:Ye).get(r.envMap||s),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,d=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=a.NoToneMapping;r.toneMapped&&(null!==ve&&!0!==ve.isXRRenderTarget||(m=fe.toneMapping));var y=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==y?y.length:0,g=qe.get(r),_=le.state.lights;if(!0===ke&&(!0===Ie||e!==_e)){var b=e===_e&&r.id===ge;rt.setState(r,e,b)}var x=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==_.state.version||g.outputColorSpace!==u||i.isInstancedMesh&&!1===g.instancing?x=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?x=!0:i.isSkinnedMesh||!0!==g.skinning?i.isInstancedMesh&&!0===g.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===g.instancingColor&&null!==i.instanceColor||g.envMap!==c||!0===r.fog&&g.fog!==o?x=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===rt.numPlanes&&g.numIntersection===rt.numIntersection?(g.vertexAlphas!==l||g.vertexTangents!==d||g.morphTargets!==h||g.morphNormals!==f||g.morphColors!==p||g.toneMapping!==m||!0===Ve.isWebGL2&&g.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,g.__version=r.version);var M=g.currentProgram;!0===x&&(M=kt(r,t,i));var C=!1,w=!1,S=!1,T=M.getUniforms(),N=g.uniforms;if(He.useProgram(M.program)&&(C=!0,w=!0,S=!0),r.id!==ge&&(ge=r.id,w=!0),C||_e!==e){if(T.setValue(ht,"projectionMatrix",e.projectionMatrix),Ve.logarithmicDepthBuffer&&T.setValue(ht,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_e!==e&&(_e=e,w=!0,S=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var E=T.map.cameraPosition;void 0!==E&&E.setValue(ht,Fe.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&T.setValue(ht,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&T.setValue(ht,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){T.setOptional(ht,i,"bindMatrix"),T.setOptional(ht,i,"bindMatrixInverse");var A=i.skeleton;A&&(Ve.floatVertexTextures?(null===A.boneTexture&&A.computeBoneTexture(),T.setValue(ht,"boneTexture",A.boneTexture,Xe),T.setValue(ht,"boneTextureSize",A.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var R=n.morphAttributes;if((void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===Ve.isWebGL2)&&at.update(i,n,M),(w||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,T.setValue(ht,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(N.envMap.value=c,N.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1),w&&(T.setValue(ht,"toneMappingExposure",fe.toneMappingExposure),g.needsLights&&Ut(N,S),o&&!0===r.fog&&et.refreshFogUniforms(N,o),et.refreshMaterialUniforms(N,r,Ne,Te,De),U.WebGLUniforms.upload(ht,g.uniformsList,N,Xe)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(U.WebGLUniforms.upload(ht,g.uniformsList,N,Xe),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&T.setValue(ht,"center",i.center),T.setValue(ht,"modelViewMatrix",i.modelViewMatrix),T.setValue(ht,"normalMatrix",i.normalMatrix),T.setValue(ht,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var P=r.uniformsGroups,L=0,O=P.length;L<O;L++)if(Ve.isWebGL2){var k=P[L];dt.update(k,M),dt.bind(k,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return M}function Ut(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Bt(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Et.setAnimationLoop(St),"undefined"!==typeof self&&Et.setContext(self),this.setAnimationLoop=function(e){wt=e,vt.setAnimationLoop(e),null===e?Et.stop():Et.start()},vt.addEventListener("sessionstart",Tt),vt.addEventListener("sessionend",Nt),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==pe){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(!0===vt.cameraAutoUpdate&&vt.updateCamera(t),t=vt.getCamera()),!0===e.isScene&&e.onBeforeRender(fe,e,t,ve),le=nt.get(e,he.length),le.init(),he.push(le),Ue.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Oe.setFromProjectionMatrix(Ue),Ie=this.localClippingEnabled,ke=rt.init(this.clippingPlanes,Ie),ce=tt.get(e,de.length),ce.init(),de.push(ce),At(e,t,0,fe.sortObjects),ce.finish(),!0===fe.sortObjects&&ce.sort(Ee,Ae),this.info.render.frame++,!0===ke&&rt.beginShadows();var n=le.state.shadowsArray;if(it.render(n,e,t),!0===ke&&rt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ot.render(ce,e),le.setupLights(fe._useLegacyLights),t.isArrayCamera)for(var r=t.cameras,i=0,o=r.length;i<o;i++){var a=r[i];Rt(ce,e,a,a.viewport)}else Rt(ce,e,t);null!==ve&&(Xe.updateMultisampleRenderTarget(ve),Xe.updateRenderTargetMipmap(ve)),!0===e.isScene&&e.onAfterRender(fe,e,t),lt.resetDefaultState(),ge=-1,_e=null,he.pop(),le=he.length>0?he[he.length-1]:null,de.pop(),ce=de.length>0?de[de.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return me},this.getActiveMipmapLevel=function(){return ye},this.getRenderTarget=function(){return ve},this.setRenderTargetTextures=function(e,t,n){qe.get(e.texture).__webglTexture=t,qe.get(e.depthTexture).__webglTexture=n;var r=qe.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===ze.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=qe.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ve=e,me=t,ye=n;var r=!0,i=null,o=!1,a=!1;if(e){var s=qe.get(e);void 0!==s.__useDefaultFramebuffer?(He.bindFramebuffer(ht.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?Xe.setupRenderTarget(e):s.__hasExternalTextures&&Xe.rebindTextures(e,qe.get(e.texture).__webglTexture,qe.get(e.depthTexture).__webglTexture);var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(a=!0);var c=qe.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],o=!0):i=Ve.isWebGL2&&e.samples>0&&!1===Xe.useMultisampledRTT(e)?qe.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,be.copy(e.viewport),xe.copy(e.scissor),Me=e.scissorTest}else be.copy(Re).multiplyScalar(Ne).floor(),xe.copy(Pe).multiplyScalar(Ne).floor(),Me=Le;var l=He.bindFramebuffer(ht.FRAMEBUFFER,i);if(l&&Ve.drawBuffers&&r&&He.drawBuffers(e,i),He.viewport(be),He.scissor(xe),He.setScissorTest(Me),o){var d=qe.get(e.texture);ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_CUBE_MAP_POSITIVE_X+t,d.__webglTexture,n)}else if(a){var h=qe.get(e.texture),f=t||0;ht.framebufferTextureLayer(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,h.__webglTexture,n||0,f)}ge=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,s){if(e&&e.isWebGLRenderTarget){var u=qe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(u=u[s]),u){He.bindFramebuffer(ht.FRAMEBUFFER,u);try{var c=e.texture,l=c.format,d=c.type;if(l!==a.RGBAFormat&&ct.convert(l)!==ht.getParameter(ht.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=d===a.HalfFloatType&&(ze.has("EXT_color_buffer_half_float")||Ve.isWebGL2&&ze.has("EXT_color_buffer_float"));if(d!==a.UnsignedByteType&&ct.convert(d)!==ht.getParameter(ht.IMPLEMENTATION_COLOR_READ_TYPE)&&(d!==a.FloatType||!(Ve.isWebGL2||ze.has("OES_texture_float")||ze.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ht.readPixels(t,n,r,i,ct.convert(l),ct.convert(d),o)}finally{var f=null!==ve?qe.get(ve).__webglFramebuffer:null;He.bindFramebuffer(ht.FRAMEBUFFER,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);Xe.setTexture2D(t,0),ht.copyTexSubImage2D(ht.TEXTURE_2D,n,0,0,e.x,e.y,i,o),He.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,o=t.image.height,a=ct.convert(n.format),s=ct.convert(n.type);Xe.setTexture2D(n,0),ht.pixelStorei(ht.UNPACK_FLIP_Y_WEBGL,n.flipY),ht.pixelStorei(ht.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ht.pixelStorei(ht.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ht.texSubImage2D(ht.TEXTURE_2D,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ht.compressedTexSubImage2D(ht.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ht.texSubImage2D(ht.TEXTURE_2D,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ht.generateMipmap(ht.TEXTURE_2D),He.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(fe.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var o,a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,c=ct.convert(r.format),l=ct.convert(r.type);if(r.isData3DTexture)Xe.setTexture3D(r,0),o=ht.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Xe.setTexture2DArray(r,0),o=ht.TEXTURE_2D_ARRAY}ht.pixelStorei(ht.UNPACK_FLIP_Y_WEBGL,r.flipY),ht.pixelStorei(ht.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),ht.pixelStorei(ht.UNPACK_ALIGNMENT,r.unpackAlignment);var d=ht.getParameter(ht.UNPACK_ROW_LENGTH),h=ht.getParameter(ht.UNPACK_IMAGE_HEIGHT),f=ht.getParameter(ht.UNPACK_SKIP_PIXELS),p=ht.getParameter(ht.UNPACK_SKIP_ROWS),m=ht.getParameter(ht.UNPACK_SKIP_IMAGES),y=n.isCompressedTexture?n.mipmaps[0]:n.image;ht.pixelStorei(ht.UNPACK_ROW_LENGTH,y.width),ht.pixelStorei(ht.UNPACK_IMAGE_HEIGHT,y.height),ht.pixelStorei(ht.UNPACK_SKIP_PIXELS,e.min.x),ht.pixelStorei(ht.UNPACK_SKIP_ROWS,e.min.y),ht.pixelStorei(ht.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ht.texSubImage3D(o,i,t.x,t.y,t.z,a,s,u,c,l,y.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ht.compressedTexSubImage3D(o,i,t.x,t.y,t.z,a,s,u,c,y.data)):ht.texSubImage3D(o,i,t.x,t.y,t.z,a,s,u,c,l,y),ht.pixelStorei(ht.UNPACK_ROW_LENGTH,d),ht.pixelStorei(ht.UNPACK_IMAGE_HEIGHT,h),ht.pixelStorei(ht.UNPACK_SKIP_PIXELS,f),ht.pixelStorei(ht.UNPACK_SKIP_ROWS,p),ht.pixelStorei(ht.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&ht.generateMipmap(o),He.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?Xe.setTextureCube(e,0):e.isData3DTexture?Xe.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Xe.setTexture2DArray(e,0):Xe.setTexture2D(e,0),He.unbindTexture()},this.resetState=function(){me=0,ye=0,ve=null,He.reset(),lt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}return(0,o.default)(e,[{key:"coordinateSystem",get:function(){return a.WebGLCoordinateSystem}},{key:"physicallyCorrectLights",get:function(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}},{key:"outputEncoding",get:function(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===a.SRGBColorSpace?a.sRGBEncoding:a.LinearEncoding},set:function(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===a.sRGBEncoding?a.SRGBColorSpace:a.LinearSRGBColorSpace}},{key:"useLegacyLights",get:function(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}]),e}();t.WebGLRenderer=H},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Frustum=void 0;var i=r(n(23)),o=r(n(24)),a=n(223),s=n(249),u=n(251),c=n(276),l=new u.Sphere,d=new s.Vector3,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.Plane,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.Plane,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c.Plane,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new c.Plane,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new c.Plane,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new c.Plane;(0,i.default)(this,e),this.planes=[t,n,r,o,a,s]}return(0,o.default)(e,[{key:"set",value:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.WebGLCoordinateSystem,n=this.planes,r=e.elements,i=r[0],o=r[1],s=r[2],u=r[3],c=r[4],l=r[5],d=r[6],h=r[7],f=r[8],p=r[9],m=r[10],y=r[11],v=r[12],g=r[13],_=r[14],b=r[15];if(n[0].setComponents(u-i,h-c,y-f,b-v).normalize(),n[1].setComponents(u+i,h+c,y+f,b+v).normalize(),n[2].setComponents(u+o,h+l,y+p,b+g).normalize(),n[3].setComponents(u-o,h-l,y-p,b-g).normalize(),n[4].setComponents(u-s,h-d,y-m,b-_).normalize(),t===a.WebGLCoordinateSystem)n[5].setComponents(u+s,h+d,y+m,b+_).normalize();else{if(t!==a.WebGPUCoordinateSystem)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,d,m,_).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),l.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),l.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(l)}},{key:"intersectsSprite",value:function(e){return l.center.set(0,0,0),l.radius=.7071067811865476,l.applyMatrix4(e.matrixWorld),this.intersectsSphere(l)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var o=t[i].distanceToPoint(n);if(o<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(d.x=r.normal.x>0?e.max.x:e.min.x,d.y=r.normal.y>0?e.max.y:e.min.y,d.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(d)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Frustum=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;var i=r(n(23)),o=r(n(24)),a=n(235),s=n(249),u=new s.Vector3,c=new s.Vector3,l=new a.Matrix3,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s.Vector3(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.default)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,o.default)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=u.subVectors(n,t).cross(c.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(u),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||l.getNormalMatrix(e),r=this.coplanarPoint(u).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Plane=d},function(e,t,n){"use strict";function r(){var e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLAnimation=r},function(e,t,n){"use strict";function r(e,t){var n=t.isWebGL2,r=new WeakMap;function i(t,r){var i,o=t.array,a=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,o,a),t.onUploadCallback(),o instanceof Float32Array)i=e.FLOAT;else if(o instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=e.HALF_FLOAT}else i=e.UNSIGNED_SHORT;else if(o instanceof Int16Array)i=e.SHORT;else if(o instanceof Uint32Array)i=e.UNSIGNED_INT;else if(o instanceof Int32Array)i=e.INT;else if(o instanceof Int8Array)i=e.BYTE;else if(o instanceof Uint8Array)i=e.UNSIGNED_BYTE;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);i=e.UNSIGNED_BYTE}return{buffer:s,type:i,bytesPerElement:o.BYTES_PER_ELEMENT,version:t.version}}function o(t,r,i){var o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}function a(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)}function s(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))}function u(e,t){if(e.isGLBufferAttribute){var n=r.get(e);(!n||n.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var a=r.get(e);void 0===a?r.set(e,i(e,t)):a.version<e.version&&(o(a.buffer,e,t),a.version=e.version)}}return{get:a,remove:s,update:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLAttributes=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBackground=h;var r=n(223),i=n(265),o=n(280),a=n(266),s=n(261),u=n(246),c=n(281),l=n(267),d={r:0,b:0,g:0};function h(e,t,n,h,f,p,m){var y,v,g=new s.Color(0),_=!0===p?0:1,b=null,x=0,M=null;function C(s,d){var p=!1,C=!0===d.isScene?d.background:null;if(C&&C.isTexture){var S=d.backgroundBlurriness>0;C=(S?n:t).get(C)}null===C?w(g,_):C&&C.isColor&&(w(C,1),p=!0);var T=e.xr,N=T.getEnvironmentBlendMode();switch(N){case"opaque":p=!0;break;case"additive":h.buffers.color.setClear(0,0,0,1,m),p=!0;break;case"alpha-blend":h.buffers.color.setClear(0,0,0,0,m),p=!0;break}(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),C&&(C.isCubeTexture||C.mapping===r.CubeUVReflectionMapping)?(void 0===v&&(v=new u.Mesh(new i.BoxGeometry(1,1,1),new a.ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:(0,l.cloneUniforms)(c.ShaderLib.backgroundCube.uniforms),vertexShader:c.ShaderLib.backgroundCube.vertexShader,fragmentShader:c.ShaderLib.backgroundCube.fragmentShader,side:r.BackSide,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update(v)),v.material.uniforms.envMap.value=C,v.material.uniforms.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,v.material.uniforms.backgroundBlurriness.value=d.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=d.backgroundIntensity,v.material.toneMapped=C.colorSpace!==r.SRGBColorSpace,b===C&&x===C.version&&M===e.toneMapping||(v.material.needsUpdate=!0,b=C,x=C.version,M=e.toneMapping),v.layers.enableAll(),s.unshift(v,v.geometry,v.material,0,0,null)):C&&C.isTexture&&(void 0===y&&(y=new u.Mesh(new o.PlaneGeometry(2,2),new a.ShaderMaterial({name:"BackgroundMaterial",uniforms:(0,l.cloneUniforms)(c.ShaderLib.background.uniforms),vertexShader:c.ShaderLib.background.vertexShader,fragmentShader:c.ShaderLib.background.fragmentShader,side:r.FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),Object.defineProperty(y.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(y)),y.material.uniforms.t2D.value=C,y.material.uniforms.backgroundIntensity.value=d.backgroundIntensity,y.material.toneMapped=C.colorSpace!==r.SRGBColorSpace,!0===C.matrixAutoUpdate&&C.updateMatrix(),y.material.uniforms.uvTransform.value.copy(C.matrix),b===C&&x===C.version&&M===e.toneMapping||(y.material.needsUpdate=!0,b=C,x=C.version,M=e.toneMapping),y.layers.enableAll(),s.unshift(y,y.geometry,y.material,0,0,null))}function w(t,n){t.getRGB(d,(0,l.getUnlitUniformColorSpace)(e)),h.buffers.color.setClear(d.r,d.g,d.b,n,m)}return{getClearColor:function(){return g},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g.set(e),_=t,w(g,_)},getClearAlpha:function(){return _},setClearAlpha:function(e){_=e,w(g,_)},render:C}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,i.default)(this,n),e=t.call(this),e.type="PlaneGeometry",e.parameters={width:r,height:o,widthSegments:a,heightSegments:s};for(var u=r/2,c=o/2,l=Math.floor(a),h=Math.floor(s),f=l+1,p=h+1,m=r/l,y=o/h,v=[],g=[],_=[],b=[],x=0;x<p;x++)for(var M=x*y-c,C=0;C<f;C++){var w=C*m-u;g.push(w,-M,0),_.push(0,0,1),b.push(C/l),b.push(1-x/h)}for(var S=0;S<h;S++)for(var T=0;T<l;T++){var N=T+f*S,E=T+f*(S+1),A=T+1+f*(S+1),R=T+1+f*S;v.push(N,E,R),v.push(E,A,R)}return e.setIndex(v),e.setAttribute("position",new d.Float32BufferAttribute(g,3)),e.setAttribute("normal",new d.Float32BufferAttribute(_,3)),e.setAttribute("uv",new d.Float32BufferAttribute(b,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(l.BufferGeometry);t.PlaneGeometry=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderLib=void 0;var r=n(282),i=n(267),o=n(234),a=n(249),s=n(405),u=n(261),c=n(235),l={basic:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.specularmap,s.UniformsLib.envmap,s.UniformsLib.aomap,s.UniformsLib.lightmap,s.UniformsLib.fog]),vertexShader:r.ShaderChunk.meshbasic_vert,fragmentShader:r.ShaderChunk.meshbasic_frag},lambert:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.specularmap,s.UniformsLib.envmap,s.UniformsLib.aomap,s.UniformsLib.lightmap,s.UniformsLib.emissivemap,s.UniformsLib.bumpmap,s.UniformsLib.normalmap,s.UniformsLib.displacementmap,s.UniformsLib.fog,s.UniformsLib.lights,{emissive:{value:new u.Color(0)}}]),vertexShader:r.ShaderChunk.meshlambert_vert,fragmentShader:r.ShaderChunk.meshlambert_frag},phong:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.specularmap,s.UniformsLib.envmap,s.UniformsLib.aomap,s.UniformsLib.lightmap,s.UniformsLib.emissivemap,s.UniformsLib.bumpmap,s.UniformsLib.normalmap,s.UniformsLib.displacementmap,s.UniformsLib.fog,s.UniformsLib.lights,{emissive:{value:new u.Color(0)},specular:{value:new u.Color(1118481)},shininess:{value:30}}]),vertexShader:r.ShaderChunk.meshphong_vert,fragmentShader:r.ShaderChunk.meshphong_frag},standard:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.envmap,s.UniformsLib.aomap,s.UniformsLib.lightmap,s.UniformsLib.emissivemap,s.UniformsLib.bumpmap,s.UniformsLib.normalmap,s.UniformsLib.displacementmap,s.UniformsLib.roughnessmap,s.UniformsLib.metalnessmap,s.UniformsLib.fog,s.UniformsLib.lights,{emissive:{value:new u.Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:r.ShaderChunk.meshphysical_vert,fragmentShader:r.ShaderChunk.meshphysical_frag},toon:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.aomap,s.UniformsLib.lightmap,s.UniformsLib.emissivemap,s.UniformsLib.bumpmap,s.UniformsLib.normalmap,s.UniformsLib.displacementmap,s.UniformsLib.gradientmap,s.UniformsLib.fog,s.UniformsLib.lights,{emissive:{value:new u.Color(0)}}]),vertexShader:r.ShaderChunk.meshtoon_vert,fragmentShader:r.ShaderChunk.meshtoon_frag},matcap:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.bumpmap,s.UniformsLib.normalmap,s.UniformsLib.displacementmap,s.UniformsLib.fog,{matcap:{value:null}}]),vertexShader:r.ShaderChunk.meshmatcap_vert,fragmentShader:r.ShaderChunk.meshmatcap_frag},points:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.points,s.UniformsLib.fog]),vertexShader:r.ShaderChunk.points_vert,fragmentShader:r.ShaderChunk.points_frag},dashed:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:r.ShaderChunk.linedashed_vert,fragmentShader:r.ShaderChunk.linedashed_frag},depth:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.displacementmap]),vertexShader:r.ShaderChunk.depth_vert,fragmentShader:r.ShaderChunk.depth_frag},normal:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.bumpmap,s.UniformsLib.normalmap,s.UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:r.ShaderChunk.meshnormal_vert,fragmentShader:r.ShaderChunk.meshnormal_frag},sprite:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.sprite,s.UniformsLib.fog]),vertexShader:r.ShaderChunk.sprite_vert,fragmentShader:r.ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new c.Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:r.ShaderChunk.background_vert,fragmentShader:r.ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:r.ShaderChunk.backgroundCube_vert,fragmentShader:r.ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:r.ShaderChunk.cube_vert,fragmentShader:r.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:r.ShaderChunk.equirect_vert,fragmentShader:r.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.common,s.UniformsLib.displacementmap,{referencePosition:{value:new a.Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:r.ShaderChunk.distanceRGBA_vert,fragmentShader:r.ShaderChunk.distanceRGBA_frag},shadow:{uniforms:(0,i.mergeUniforms)([s.UniformsLib.lights,s.UniformsLib.fog,{color:{value:new u.Color(0)},opacity:{value:1}}]),vertexShader:r.ShaderChunk.shadow_vert,fragmentShader:r.ShaderChunk.shadow_frag}};t.ShaderLib=l,l.physical={uniforms:(0,i.mergeUniforms)([l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new c.Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new c.Matrix3},clearcoatNormalScale:{value:new o.Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new c.Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new c.Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new c.Matrix3},sheen:{value:0},sheenColor:{value:new u.Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new c.Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new c.Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new c.Matrix3},transmissionSamplerSize:{value:new o.Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new c.Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new u.Color(0)},specularColor:{value:new u.Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new c.Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new c.Matrix3},anisotropyVector:{value:new o.Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new c.Matrix3}}]),vertexShader:r.ShaderChunk.meshphysical_vert,fragmentShader:r.ShaderChunk.meshphysical_frag}},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderChunk=void 0;var o=r(n(283)),a=r(n(284)),s=r(n(285)),u=r(n(286)),c=r(n(287)),l=r(n(288)),d=r(n(289)),h=r(n(290)),f=r(n(291)),p=r(n(292)),m=r(n(293)),y=r(n(294)),v=r(n(295)),g=r(n(296)),_=r(n(297)),b=r(n(298)),x=r(n(299)),M=r(n(300)),C=r(n(301)),w=r(n(302)),S=r(n(303)),T=r(n(304)),N=r(n(305)),E=r(n(306)),A=r(n(307)),R=r(n(308)),P=r(n(309)),L=r(n(310)),O=r(n(311)),k=r(n(312)),I=r(n(313)),D=r(n(314)),U=r(n(315)),B=r(n(316)),F=r(n(317)),G=r(n(318)),j=r(n(319)),z=r(n(320)),V=r(n(321)),H=r(n(322)),W=r(n(323)),q=r(n(324)),X=r(n(325)),Y=r(n(326)),J=r(n(327)),K=r(n(328)),$=r(n(329)),Z=r(n(330)),Q=r(n(331)),ee=r(n(332)),te=r(n(333)),ne=r(n(334)),re=r(n(335)),ie=r(n(336)),oe=r(n(337)),ae=r(n(338)),se=r(n(339)),ue=r(n(340)),ce=r(n(341)),le=r(n(342)),de=r(n(343)),he=r(n(344)),fe=r(n(345)),pe=r(n(346)),me=r(n(347)),ye=r(n(348)),ve=r(n(349)),ge=r(n(350)),_e=r(n(351)),be=r(n(352)),xe=r(n(353)),Me=r(n(354)),Ce=r(n(355)),we=r(n(356)),Se=r(n(357)),Te=r(n(358)),Ne=r(n(359)),Ee=r(n(360)),Ae=r(n(361)),Re=r(n(362)),Pe=r(n(363)),Le=r(n(364)),Oe=r(n(365)),ke=r(n(366)),Ie=r(n(367)),De=r(n(368)),Ue=r(n(369)),Be=r(n(370)),Fe=r(n(371)),Ge=r(n(372)),je=r(n(373)),ze=r(n(374)),Ve=r(n(375)),He=r(n(376)),We=r(n(377)),qe=r(n(378)),Xe=r(n(379)),Ye=r(n(380)),Je=r(n(381)),Ke=r(n(382)),$e=r(n(383)),Ze=r(n(384)),Qe=r(n(385)),et=r(n(386)),tt=r(n(387)),nt=bt(n(388)),rt=bt(n(389)),it=bt(n(390)),ot=bt(n(391)),at=bt(n(392)),st=bt(n(393)),ut=bt(n(394)),ct=bt(n(395)),lt=bt(n(396)),dt=bt(n(397)),ht=bt(n(398)),ft=bt(n(399)),pt=bt(n(400)),mt=bt(n(401)),yt=bt(n(402)),vt=bt(n(403)),gt=bt(n(404));function _t(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_t=function(e){return e?n:t})(e)}function bt(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=_t(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var xt={alphahash_fragment:o.default,alphahash_pars_fragment:a.default,alphamap_fragment:s.default,alphamap_pars_fragment:u.default,alphatest_fragment:c.default,alphatest_pars_fragment:l.default,aomap_fragment:d.default,aomap_pars_fragment:h.default,begin_vertex:f.default,beginnormal_vertex:p.default,bsdfs:m.default,iridescence_fragment:y.default,bumpmap_pars_fragment:v.default,clipping_planes_fragment:g.default,clipping_planes_pars_fragment:_.default,clipping_planes_pars_vertex:b.default,clipping_planes_vertex:x.default,color_fragment:M.default,color_pars_fragment:C.default,color_pars_vertex:w.default,color_vertex:S.default,common:T.default,cube_uv_reflection_fragment:N.default,defaultnormal_vertex:E.default,displacementmap_pars_vertex:A.default,displacementmap_vertex:R.default,emissivemap_fragment:P.default,emissivemap_pars_fragment:L.default,colorspace_fragment:O.default,colorspace_pars_fragment:k.default,envmap_fragment:I.default,envmap_common_pars_fragment:D.default,envmap_pars_fragment:U.default,envmap_pars_vertex:B.default,envmap_physical_pars_fragment:K.default,envmap_vertex:F.default,fog_vertex:G.default,fog_pars_vertex:j.default,fog_fragment:z.default,fog_pars_fragment:V.default,gradientmap_pars_fragment:H.default,lightmap_fragment:W.default,lightmap_pars_fragment:q.default,lights_lambert_fragment:X.default,lights_lambert_pars_fragment:Y.default,lights_pars_begin:J.default,lights_toon_fragment:$.default,lights_toon_pars_fragment:Z.default,lights_phong_fragment:Q.default,lights_phong_pars_fragment:ee.default,lights_physical_fragment:te.default,lights_physical_pars_fragment:ne.default,lights_fragment_begin:re.default,lights_fragment_maps:ie.default,lights_fragment_end:oe.default,logdepthbuf_fragment:ae.default,logdepthbuf_pars_fragment:se.default,logdepthbuf_pars_vertex:ue.default,logdepthbuf_vertex:ce.default,map_fragment:le.default,map_pars_fragment:de.default,map_particle_fragment:he.default,map_particle_pars_fragment:fe.default,metalnessmap_fragment:pe.default,metalnessmap_pars_fragment:me.default,morphcolor_vertex:ye.default,morphnormal_vertex:ve.default,morphtarget_pars_vertex:ge.default,morphtarget_vertex:_e.default,normal_fragment_begin:be.default,normal_fragment_maps:xe.default,normal_pars_fragment:Me.default,normal_pars_vertex:Ce.default,normal_vertex:we.default,normalmap_pars_fragment:Se.default,clearcoat_normal_fragment_begin:Te.default,clearcoat_normal_fragment_maps:Ne.default,clearcoat_pars_fragment:Ee.default,iridescence_pars_fragment:Ae.default,opaque_fragment:Re.default,packing:Pe.default,premultiplied_alpha_fragment:Le.default,project_vertex:Oe.default,dithering_fragment:ke.default,dithering_pars_fragment:Ie.default,roughnessmap_fragment:De.default,roughnessmap_pars_fragment:Ue.default,shadowmap_pars_fragment:Be.default,shadowmap_pars_vertex:Fe.default,shadowmap_vertex:Ge.default,shadowmask_pars_fragment:je.default,skinbase_vertex:ze.default,skinning_pars_vertex:Ve.default,skinning_vertex:He.default,skinnormal_vertex:We.default,specularmap_fragment:qe.default,specularmap_pars_fragment:Xe.default,tonemapping_fragment:Ye.default,tonemapping_pars_fragment:Je.default,transmission_fragment:Ke.default,transmission_pars_fragment:$e.default,uv_pars_fragment:Ze.default,uv_pars_vertex:Qe.default,uv_vertex:et.default,worldpos_vertex:tt.default,background_vert:nt.vertex,background_frag:nt.fragment,backgroundCube_vert:rt.vertex,backgroundCube_frag:rt.fragment,cube_vert:it.vertex,cube_frag:it.fragment,depth_vert:ot.vertex,depth_frag:ot.fragment,distanceRGBA_vert:at.vertex,distanceRGBA_frag:at.fragment,equirect_vert:st.vertex,equirect_frag:st.fragment,linedashed_vert:ut.vertex,linedashed_frag:ut.fragment,meshbasic_vert:ct.vertex,meshbasic_frag:ct.fragment,meshlambert_vert:lt.vertex,meshlambert_frag:lt.fragment,meshmatcap_vert:dt.vertex,meshmatcap_frag:dt.fragment,meshnormal_vert:ht.vertex,meshnormal_frag:ht.fragment,meshphong_vert:ft.vertex,meshphong_frag:ft.fragment,meshphysical_vert:pt.vertex,meshphysical_frag:pt.fragment,meshtoon_vert:mt.vertex,meshtoon_frag:mt.fragment,points_vert:yt.vertex,points_frag:yt.fragment,shadow_vert:vt.vertex,shadow_frag:vt.fragment,sprite_vert:gt.vertex,sprite_frag:gt.fragment};t.ShaderChunk=xt},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ALPHAHASH\n\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ALPHAHASH\n\n\t/**\n\t * See: https://casual-effects.com/research/Wyman2017Hashed/index.html\n\t */\n\n\tconst float ALPHA_HASH_SCALE = 0.05; // Derived from trials only, and may be changed.\n\n\tfloat hash2D( vec2 value ) {\n\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\n\t}\n\n\tfloat hash3D( vec3 value ) {\n\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\n\t}\n\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\n\t\t// Find the discretized derivatives of our coordinates\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\n\t\t// Find two nearest log-discretized noise scales\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\n\t\t// Compute alpha thresholds at our two noise scales\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\n\t\t// Factor to interpolate lerp with\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\n\t\t// Interpolate alpha threshold from noise at two scales\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\n\t\t// Pass into CDF to compute uniformly distrib threshold\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\n\t\t// Find our final, uniformly distributed alpha threshold (ατ)\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\n\t\t// Avoids ατ == 0. Could also do ατ =1-ατ\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ALPHATEST\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvec3 transformed = vec3( position );\n\n#ifdef USE_ALPHAHASH\n\n\tvPosition = vec3( position );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#ifdef USE_IRIDESCENCE\n\n\t// XYZ to linear-sRGB color space\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\n\t// Assume air interface for top\n\t// Note: We don't handle the case fresnel0 == 1\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\n\t}\n\n\t// Conversion FO/IOR\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\n\t}\n\n\t// ior is a value between 1.0 and 3.0. 1.0 is air interface\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\n\t}\n\n\t// Fresnel equations for dielectric/dielectric interfaces.\n\t// Ref: https://belcour.github.io/blog/research/2017/05/01/brdf-thin-film.html\n\t// Evaluation XYZ sensitivity curves in Fourier space\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\n\t}\n\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\n\t\tvec3 I;\n\n\t\t// Force iridescenceIOR -> outsideIOR when thinFilmThickness -> 0.0\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\t// Evaluate the cosTheta on the base layer (Snell law)\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\n\t\t// Handle TIR:\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\n\t\t\treturn vec3( 1.0 );\n\n\t\t}\n\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\n\t\t// First interface\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\n\t\t// Second interface\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) ); // guard against 1.0\n\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\n\t\t// Phase shift\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\n\t\t// Compound terms\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\n\t\t// Reflectance term for m = 0 (DC term amplitude)\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\n\t\t// Reflectance term for m > 0 (pairs of diracs)\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\n\t\t}\n\n\t\t// Since out of gamut colors might be produced, negative color values are clamped to 0.\n\t\treturn max( I, vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// https://mmikk.github.io/papers3d/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm; // normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_COLOR_ALPHA )\n\n\tdiffuseColor *= vColor;\n\n#elif defined( USE_COLOR )\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_COLOR_ALPHA )\n\n\tvColor = vec4( 1.0 );\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor *= color;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\n\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\n\treturn fract( sin( sn ) * c );\n\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\n#ifdef USE_ALPHAHASH\n\n\tvarying vec3 vPosition;\n\n#endif\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\nfloat luminance( const in vec3 rgb ) {\n\n\t// assumes rgb is in linear color space with sRGB primaries and D65 white point\n\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\n\treturn dot( weights, rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0; // #25071\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\n\t\t#ifdef texture2DGradEXT\n\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb; // disable anisotropic filtering\n\n\t\t#else\n\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\n\t\t#endif\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= cubeUV_r1 ) {\n\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_FOG\n\n\tvFogDepth = - mvPosition.z;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_FOG\n\n\tvarying float vFogDepth;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\n\t#else\n\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\n\t#endif\n\n}\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nLambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvarying vec3 vViewPosition;\n\nstruct LambertMaterial {\n\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\treturn irradiance;\n\n}\n\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n\t#if defined ( LEGACY_LIGHTS )\n\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t\t}\n\n\t\treturn 1.0;\n\n\t#else\n\n\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t\t// page 32, equation 26: E[window1]\n\t\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\t\tif ( cutoffDistance > 0.0 ) {\n\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t\t}\n\n\t\treturn distanceFalloff;\n\n\t#endif\n\n}\n\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\tif ( spotAttenuation > 0.0 ) {\n\n\t\t\tfloat lightDistance = length( lVector );\n\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t\t} else {\n\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\n\t\t}\n\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ENVMAP\n\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n\t#ifdef USE_ANISOTROPY\n\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t\t\t  // https://google.github.io/filament/Filament.md.html#lighting/imagebasedlights/anisotropy\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\n\t\t\t#else\n\n\t\t\t\treturn vec3( 0.0 );\n\n\t\t\t#endif\n\n\t\t}\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvarying vec3 vViewPosition;\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvarying vec3 vViewPosition;\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n\n#ifdef IOR\n\n\tmaterial.ior = ior;\n\n\t#ifdef USE_SPECULAR\n\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\n\t\t#endif\n\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\n\t\t#endif\n\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\n\t#else\n\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\n\t#endif\n\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n\n#endif\n\n#ifdef USE_CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\n\t#ifdef USE_IRIDESCENCEMAP\n\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\n\t#else\n\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\n\t#endif\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheenColor;\n\n\t#ifdef USE_SHEEN_COLORMAP\n\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\n\t#endif\n\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\n\t#endif\n\n#endif\n\n#ifdef USE_ANISOTROPY\n\n\t#ifdef USE_ANISOTROPYMAP\n\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\n\t#else\n\n\t\tvec2 anisotropyV = anisotropyVector;\n\n\t#endif\n\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\n\t// Roughness along the anisotropy bitangent is the material roughness, while the tangent roughness increases with anisotropy.\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r='\n\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n\n};\n\n// temporary\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\n\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// https://google.github.io/filament/Filament.md.html#materialsystem/anisotropicmodel/anisotropicspecularbrdf\n#ifdef USE_ANISOTROPY\n\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\n\t\treturn saturate(v);\n\n\t}\n\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\n\t}\n\n#endif\n\n#ifdef USE_CLEARCOAT\n\n\t// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\n\t\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\t\tfloat D = D_GGX( alpha, dotNH );\n\n\t\treturn F * ( V * D );\n\n\t}\n\n#endif\n\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\n\t#endif\n\n\t#ifdef USE_ANISOTROPY\n\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\n\t#else\n\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\t\tfloat D = D_GGX( alpha, dotNH );\n\n\t#endif\n\n\treturn F * ( V * D );\n\n}\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat D_Charlie( float roughness, float dotNH ) {\n\n\tfloat alpha = pow2( roughness );\n\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n\n}\n\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\n\treturn sheenColor * ( D * V );\n\n}\n\n#endif\n\n// This is a curve-fit approxmation to the "Charlie sheen" BRDF integrated over the hemisphere from \n// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF". The analysis can be found\n// in the Sheen section of https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tfloat r2 = roughness * roughness;\n\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\n\treturn saturate( DG * RECIPROCAL_PI );\n\n}\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\n\treturn fab;\n\n}\n\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\treturn specularColor * fab.x + specularF90 * fab.y;\n\n}\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\n\t#else\n\n\t\tvec3 Fr = specularColor;\n\n\t#endif\n\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\n\t#endif\n\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\n\t#endif\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\n\t#else\n\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\n\t#endif\n\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n';t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef USE_CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\n\tif ( material.iridescenceThickness == 0.0 ) {\n\n\t\tmaterial.iridescence = 0.0;\n\n\t} else {\n\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\n\t}\n\n\tif ( material.iridescence > 0.0 ) {\n\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\n\t\t// Iridescence F0 approximation\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\n\t}\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\n\t\t// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\t#ifdef USE_ANISOTROPY\n\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\n\t#else\n\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vMapUv );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\t#if defined( USE_POINTS_UV )\n\n\t\tvec2 uv = vUv;\n\n\t#else\n\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n\t#endif\n\n#endif\n\n#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, uv );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_POINTS_UV )\n\n\tvarying vec2 vUv;\n\n#else\n\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\t\tuniform mat3 uvTransform;\n\n\t#endif\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tvColor *= morphTargetBaseInfluence;\n\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t#if defined( USE_COLOR_ALPHA )\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\n\t\t#elif defined( USE_COLOR )\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\n\t\t#endif\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\n\t\t}\n\n\t#else\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t\t#else\n\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nfloat faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n\n#ifdef FLAT_SHADED\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal *= faceDirection;\n\n\t#endif\n\n#endif\n\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\n\t#ifdef USE_TANGENT\n\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\n\t#else\n\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\n\t#endif\n\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\n\t#endif\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\t#ifdef USE_TANGENT\n\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\n\t#else\n\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\n\t#endif\n\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\tnormal = normalize( tbn * mapN );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifndef FLAT_SHADED // normal is computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\n\t// Normal Mapping Without Precomputed Tangents\n\t// http://www.thetenthplanet.de/archives/1180\n\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\n\t\tvec3 N = surf_norm; // normalized\n\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\n\t\treturn mat3( T * scale, B * scale, N );\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#ifdef USE_IRIDESCENCEMAP\n\n\tuniform sampler2D iridescenceMap;\n\n#endif\n\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\tuniform sampler2D iridescenceThicknessMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\n\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\n\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\n\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ, the z-coordinate in camera space, is negative for points in front of the camera\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\t// -near maps to 0; -far maps to 1\n\treturn ( viewZ + near ) / ( near - far );\n}\n\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\t// maps orthographic depth in [ 0, 1 ] to viewZ\n\treturn depth * ( near - far ) - near;\n}\n\n// NOTE: https://twitter.com/gonnavis/status/1377183786949959682\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\t// -near maps to 0; -far maps to 1\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\n\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\t// maps perspective depth in [ 0, 1 ] to viewZ\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift according to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n\n#endif\n\n#if NUM_SPOT_LIGHT_MAPS > 0\n\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n\n#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\n\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n\n#endif\n\n#if defined( USE_SHADOWMAP )\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n\n// spot lights can be evaluated without active shadow mapping (when SpotLight.map is used)\n\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\n\tmat4 getBoneMatrix( const in float i ) {\n\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\ty = dy * ( y + 0.5 );\n\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\treturn bone;\n\n\t}\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn saturate( toneMappingExposure * color );\n\n}\n\n// source: https://www.cs.utah.edu/docs/techreports/2002/pdf/UUCS-02-001.pdf\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_TRANSMISSION\n\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\n\t#endif\n\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#ifdef USE_TRANSMISSION\n\n\t// Transmission code is based on glTF-Sampler-Viewer\n\t// https://github.com/KhronosGroup/glTF-Sample-Viewer\n\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tuniform sampler2D transmissionMap;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tuniform sampler2D thicknessMap;\n\n\t#endif\n\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec3 vWorldPosition;\n\n\t// Mipped Bicubic Texture Filtering by N8\n\t// https://www.shadertoy.com/view/Dl2SDW\n\n\tfloat w0( float a ) {\n\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\n\t}\n\n\tfloat w1( float a ) {\n\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\n\t}\n\n\tfloat w2( float a ){\n\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\n\t}\n\n\tfloat w3( float a ) {\n\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\n\t}\n\n\t// g0 and g1 are the two amplitude functions\n\tfloat g0( float a ) {\n\n\t\treturn w0( a ) + w1( a );\n\n\t}\n\n\tfloat g1( float a ) {\n\n\t\treturn w2( a ) + w3( a );\n\n\t}\n\n\t// h0 and h1 are the two offset functions\n\tfloat h0( float a ) {\n\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\n\t}\n\n\tfloat h1( float a ) {\n\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\n\t}\n\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\n\t\tuv = uv * texelSize.zw + 0.5;\n\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\n\t}\n\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\n\t}\n\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\n\t\t// Direction of refracted light.\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\n\t\t// Compute rotation-independant scaling of the model matrix.\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t// The thickness is specified in local space.\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\n\t}\n\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\n\t}\n\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\n\t}\n\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\n\t\tif ( isinf( attenuationDistance ) ) {\n\n\t\t\t// Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.\n\t\t\treturn vec3( 1.0 );\n\n\t\t} else {\n\n\t\t\t// Compute light attenuation using Beer's law.\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n\t\t\treturn transmittance;\n\n\t\t}\n\n\t}\n\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\n\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\n\t\t// Get the specular component.\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\n\t\t// As less light is transmitted, the opacity should be increased. This simple approximation does a decent job \n\t\t// of modulating a CSS background, and has no effect when the buffer is opaque, due to a solid object or clear color.\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\n\t}\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\n\tvarying vec2 vUv;\n\n#endif\n#ifdef USE_MAP\n\n\tvarying vec2 vMapUv;\n\n#endif\n#ifdef USE_ALPHAMAP\n\n\tvarying vec2 vAlphaMapUv;\n\n#endif\n#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vLightMapUv;\n\n#endif\n#ifdef USE_AOMAP\n\n\tvarying vec2 vAoMapUv;\n\n#endif\n#ifdef USE_BUMPMAP\n\n\tvarying vec2 vBumpMapUv;\n\n#endif\n#ifdef USE_NORMALMAP\n\n\tvarying vec2 vNormalMapUv;\n\n#endif\n#ifdef USE_EMISSIVEMAP\n\n\tvarying vec2 vEmissiveMapUv;\n\n#endif\n#ifdef USE_METALNESSMAP\n\n\tvarying vec2 vMetalnessMapUv;\n\n#endif\n#ifdef USE_ROUGHNESSMAP\n\n\tvarying vec2 vRoughnessMapUv;\n\n#endif\n#ifdef USE_ANISOTROPYMAP\n\n\tvarying vec2 vAnisotropyMapUv;\n\n#endif\n#ifdef USE_CLEARCOATMAP\n\n\tvarying vec2 vClearcoatMapUv;\n\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvarying vec2 vClearcoatNormalMapUv;\n\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tvarying vec2 vClearcoatRoughnessMapUv;\n\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\n\tvarying vec2 vIridescenceMapUv;\n\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\tvarying vec2 vIridescenceThicknessMapUv;\n\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\n\tvarying vec2 vSheenColorMapUv;\n\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\n\tvarying vec2 vSheenRoughnessMapUv;\n\n#endif\n#ifdef USE_SPECULARMAP\n\n\tvarying vec2 vSpecularMapUv;\n\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\n\tvarying vec2 vSpecularColorMapUv;\n\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\n\tvarying vec2 vSpecularIntensityMapUv;\n\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n\n#endif\n#ifdef USE_THICKNESSMAP\n\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\n\tvarying vec2 vUv;\n\n#endif\n#ifdef USE_MAP\n\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n\n#endif\n#ifdef USE_ALPHAMAP\n\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n\n#endif\n#ifdef USE_LIGHTMAP\n\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n\n#endif\n#ifdef USE_AOMAP\n\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n\n#endif\n#ifdef USE_BUMPMAP\n\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n\n#endif\n#ifdef USE_NORMALMAP\n\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n\n#endif\n#ifdef USE_EMISSIVEMAP\n\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n\n#endif\n#ifdef USE_METALNESSMAP\n\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n\n#endif\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n\n#endif\n#ifdef USE_ANISOTROPYMAP\n\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n\n#endif\n#ifdef USE_CLEARCOATMAP\n\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n\n#endif\n#ifdef USE_SPECULARMAP\n\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n\n#endif\n#ifdef USE_THICKNESSMAP\n\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\n\tvUv = vec3( uv, 1 ).xy;\n\n#endif\n#ifdef USE_MAP\n\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_ALPHAMAP\n\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_LIGHTMAP\n\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_AOMAP\n\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_BUMPMAP\n\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_NORMALMAP\n\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_EMISSIVEMAP\n\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_METALNESSMAP\n\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_ROUGHNESSMAP\n\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_ANISOTROPYMAP\n\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_CLEARCOATMAP\n\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_SPECULARMAP\n\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n\n#endif\n#ifdef USE_THICKNESSMAP\n\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n";t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n";t.vertex=r;var i="\nuniform sampler2D t2D;\nuniform float backgroundIntensity;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\ttexColor.rgb *= backgroundIntensity;\n\n\tgl_FragColor = texColor;\n\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n";t.vertex=r;var i="\n\n#ifdef ENVMAP_TYPE_CUBE\n\n\tuniform samplerCube envMap;\n\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\tuniform sampler2D envMap;\n\n#endif\n\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\n\t#else\n\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t#endif\n\n\ttexColor.rgb *= backgroundIntensity;\n\n\tgl_FragColor = texColor;\n\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n";t.vertex=r;var i="\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n";t.vertex=r;var i="\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n";t.vertex=r;var i="\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n";t.vertex=r;var i="\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define LAMBERT\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\n#define LAMBERT\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n";t.vertex=r;var i="\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 ); // default if matcap is missing\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n";t.vertex=r;var i="\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n\t#ifdef OPAQUE\n\n\t\tgl_FragColor.a = 1.0;\n\n\t#endif\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n#ifdef USE_TRANSMISSION\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n}\n";t.vertex=r;var i="\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\n\tuniform float ior;\n#endif\n\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n\t#include <transmission_fragment>\n\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n\t#ifdef USE_SHEEN\n\n\t\t// Sheen energy compensation approximation calculation can be found at the end of\n\t\t// https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n\t#endif\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n#ifdef USE_POINTS_UV\n\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n\n#endif\n\nvoid main() {\n\n\t#ifdef USE_POINTS_UV\n\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\t#endif\n\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\n#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\t#include <logdepthbuf_fragment>\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n";t.vertex=r;var i="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\n}\n";t.fragment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UniformsLib=void 0;var r=n(261),i=n(234),o=n(235),a={common:{diffuse:{value:new r.Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new o.Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new o.Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new o.Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new o.Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new o.Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new o.Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new o.Matrix3},normalScale:{value:new i.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new o.Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new o.Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new o.Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new o.Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new o.Matrix3},alphaTest:{value:0},uvTransform:{value:new o.Matrix3}},sprite:{diffuse:{value:new r.Color(16777215)},opacity:{value:1},center:{value:new i.Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new o.Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new o.Matrix3},alphaTest:{value:0}}};t.UniformsLib=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBindingStates=i;var r=n(223);function i(e,t,n,i){var o=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,u={},c=v(null),l=c,d=!1;function h(t,r,i,o,a){var u=!1;if(s){var c=y(o,i,r);l!==c&&(l=c,p(l.object)),u=g(t,o,i,a),u&&_(t,o,i,a)}else{var h=!0===r.wireframe;l.geometry===o.id&&l.program===i.id&&l.wireframe===h||(l.geometry=o.id,l.program=i.id,l.wireframe=h,u=!0)}null!==a&&n.update(a,e.ELEMENT_ARRAY_BUFFER),(u||d)&&(d=!1,S(t,r,i,o),null!==a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(a).buffer))}function f(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function p(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function m(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function y(e,t,n){var r=!0===n.wireframe,i=u[e.id];void 0===i&&(i={},u[e.id]=i);var o=i[t.id];void 0===o&&(o={},i[t.id]=o);var a=o[r];return void 0===a&&(a=v(f()),o[r]=a),a}function v(e){for(var t=[],n=[],r=[],i=0;i<o;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function g(e,t,n,r){var i=l.attributes,o=t.attributes,a=0,s=n.getAttributes();for(var u in s){var c=s[u];if(c.location>=0){var d=i[u],h=o[u];if(void 0===h&&("instanceMatrix"===u&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(h=e.instanceColor)),void 0===d)return!0;if(d.attribute!==h)return!0;if(h&&d.data!==h.data)return!0;a++}}return l.attributesNum!==a||l.index!==r}function _(e,t,n,r){var i={},o=t.attributes,a=0,s=n.getAttributes();for(var u in s){var c=s[u];if(c.location>=0){var d=o[u];void 0===d&&("instanceMatrix"===u&&e.instanceMatrix&&(d=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(d=e.instanceColor));var h={};h.attribute=d,d&&d.data&&(h.data=d.data),i[u]=h,a++}}l.attributes=i,l.attributesNum=a,l.index=r}function b(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function x(e){M(e,0)}function M(n,r){var o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==r){var u=i.isWebGL2?e:t.get("ANGLE_instanced_arrays");u[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function C(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function w(t,n,r,i,o,a,s){!0===s?e.vertexAttribIPointer(t,n,r,o,a):e.vertexAttribPointer(t,n,r,i,o,a)}function S(o,a,s,u){if(!1!==i.isWebGL2||!o.isInstancedMesh&&!u.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){b();var c=u.attributes,l=s.getAttributes(),d=a.defaultAttributeValues;for(var h in l){var f=l[h];if(f.location>=0){var p=c[h];if(void 0===p&&("instanceMatrix"===h&&o.instanceMatrix&&(p=o.instanceMatrix),"instanceColor"===h&&o.instanceColor&&(p=o.instanceColor)),void 0!==p){var m=p.normalized,y=p.itemSize,v=n.get(p);if(void 0===v)continue;var g=v.buffer,_=v.type,S=v.bytesPerElement,T=!0===i.isWebGL2&&(_===e.INT||_===e.UNSIGNED_INT||p.gpuType===r.IntType);if(p.isInterleavedBufferAttribute){var N=p.data,E=N.stride,A=p.offset;if(N.isInstancedInterleavedBuffer){for(var R=0;R<f.locationSize;R++)M(f.location+R,N.meshPerAttribute);!0!==o.isInstancedMesh&&void 0===u._maxInstanceCount&&(u._maxInstanceCount=N.meshPerAttribute*N.count)}else for(var P=0;P<f.locationSize;P++)x(f.location+P);e.bindBuffer(e.ARRAY_BUFFER,g);for(var L=0;L<f.locationSize;L++)w(f.location+L,y/f.locationSize,_,m,E*S,(A+y/f.locationSize*L)*S,T)}else{if(p.isInstancedBufferAttribute){for(var O=0;O<f.locationSize;O++)M(f.location+O,p.meshPerAttribute);!0!==o.isInstancedMesh&&void 0===u._maxInstanceCount&&(u._maxInstanceCount=p.meshPerAttribute*p.count)}else for(var k=0;k<f.locationSize;k++)x(f.location+k);e.bindBuffer(e.ARRAY_BUFFER,g);for(var I=0;I<f.locationSize;I++)w(f.location+I,y/f.locationSize,_,m,y*S,y/f.locationSize*I*S,T)}}else if(void 0!==d){var D=d[h];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(f.location,D);break;case 3:e.vertexAttrib3fv(f.location,D);break;case 4:e.vertexAttrib4fv(f.location,D);break;default:e.vertexAttrib1fv(f.location,D)}}}}C()}}function T(){for(var e in A(),u){var t=u[e];for(var n in t){var r=t[n];for(var i in r)m(r[i].object),delete r[i];delete t[n]}delete u[e]}}function N(e){if(void 0!==u[e.id]){var t=u[e.id];for(var n in t){var r=t[n];for(var i in r)m(r[i].object),delete r[i];delete t[n]}delete u[e.id]}}function E(e){for(var t in u){var n=u[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)m(r[i].object),delete r[i];delete n[e.id]}}}function A(){R(),d=!0,l!==c&&(l=c,p(l.object))}function R(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:h,reset:A,resetDefaultState:R,dispose:T,releaseStatesOfGeometry:N,releaseStatesOfProgram:E,initAttributes:b,enableAttribute:x,disableUnusedAttributes:C}}},function(e,t,n){"use strict";function r(e,t,n,r){var i,o=r.isWebGL2;function a(e){i=e}function s(t,r){e.drawArrays(i,t,r),n.update(r,i,1)}function u(r,a,s){if(0!==s){var u,c;if(o)u=e,c="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](i,r,a,s),n.update(a,i,s)}}this.setMode=a,this.render=s,this.renderInstances=u}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBufferRenderer=r},function(e,t,n){"use strict";function r(e,t,n){var r;function i(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,s=void 0!==n.precision?n.precision:"highp",u=o(s);u!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead."),s=u);var c=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),y=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,b=a||t.has("OES_texture_float"),x=_&&b,M=a?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:l,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:M}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLCapabilities=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLClipping=o;var r=n(235),i=n(276);function o(e){var t=this,n=null,o=0,a=!1,s=!1,u=new i.Plane,c=new r.Matrix3,l={value:null,needsUpdate:!1};function d(){l.value!==n&&(l.value=n,l.needsUpdate=o>0),t.numPlanes=o,t.numIntersection=0}function h(e,n,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=l.value,!0!==i||null===a){var s=r+4*o,d=n.matrixWorldInverse;c.getNormalMatrix(d),(null===a||a.length<s)&&(a=new Float32Array(s));for(var h=0,f=r;h!==o;++h,f+=4)u.copy(e[h]).applyMatrix4(d,c),u.normal.toArray(a,f),a[f+3]=u.constant}l.value=a,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,a}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==o||a;return a=t,o=e.length,n},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=h(e,t,0)},this.setState=function(t,r,i){var u=t.clippingPlanes,c=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!a||null===u||0===u.length||s&&!f)s?h(null):d();else{var m=s?0:o,y=4*m,v=p.clippingState||null;l.value=v,v=h(u,r,y,i);for(var g=0;g!==y;++g)v[g]=n[g];p.clippingState=v,this.numIntersection=c?this.numPlanes:0,this.numPlanes+=m}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLCubeMaps=o;var r=n(223),i=n(245);function o(e){var t=new WeakMap;function n(e,t){return t===r.EquirectangularReflectionMapping?e.mapping=r.CubeReflectionMapping:t===r.EquirectangularRefractionMapping&&(e.mapping=r.CubeRefractionMapping),e}function o(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){var s=o.mapping;if(s===r.EquirectangularReflectionMapping||s===r.EquirectangularRefractionMapping){if(t.has(o)){var u=t.get(o).texture;return n(u,o.mapping)}var c=o.image;if(c&&c.height>0){var l=new i.WebGLCubeRenderTarget(c.height/2);return l.fromEquirectangularTexture(e,o),t.set(o,l),o.addEventListener("dispose",a),n(l.texture,o.mapping)}return null}}return o}function a(e){var n=e.target;n.removeEventListener("dispose",a);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function s(){t=new WeakMap}return{get:o,dispose:s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLCubeUVMaps=o;var r=n(223),i=n(412);function o(e){var t=new WeakMap,n=null;function o(o){if(o&&o.isTexture){var u=o.mapping,c=u===r.EquirectangularReflectionMapping||u===r.EquirectangularRefractionMapping,l=u===r.CubeReflectionMapping||u===r.CubeRefractionMapping;if(c||l){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;var d=t.get(o);return null===n&&(n=new i.PMREMGenerator(e)),d=c?n.fromEquirectangular(o,d):n.fromCubemap(o,d),t.set(o,d),d.texture}if(t.has(o))return t.get(o).texture;var h=o.image;if(c&&h&&h.height>0||l&&h&&a(h)){null===n&&(n=new i.PMREMGenerator(e));var f=c?n.fromEquirectangular(o):n.fromCubemap(o);return t.set(o,f),o.addEventListener("dispose",s),f.texture}return null}}return o}function a(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}function s(e){var n=e.target;n.removeEventListener("dispose",s);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function u(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:o,dispose:u}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PMREMGenerator=void 0;var i=r(n(23)),o=r(n(24)),a=n(223),s=n(263),u=n(262),c=n(246),l=n(413),d=n(271),h=n(266),f=n(249),p=n(261),m=n(229),y=n(259),v=n(265),g=4,_=[.125,.215,.35,.446,.526,.582],b=20,x=new l.OrthographicCamera,M=new p.Color,C=null,w=(1+Math.sqrt(5))/2,S=1/w,T=[new f.Vector3(1,1,1),new f.Vector3(-1,1,1),new f.Vector3(1,1,-1),new f.Vector3(-1,1,-1),new f.Vector3(0,w,S),new f.Vector3(0,w,-S),new f.Vector3(S,0,w),new f.Vector3(-S,0,w),new f.Vector3(w,S,0),new f.Vector3(-w,S,0)],N=function(){function e(t){(0,i.default)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,o.default)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;C=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=O(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=L(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(C),e.scissorTest=!1,R(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===a.CubeReflectionMapping||e.mapping===a.CubeRefractionMapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),C=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:a.LinearFilter,minFilter:a.LinearFilter,generateMipmaps:!1,type:a.HalfFloatType,format:a.RGBAFormat,colorSpace:a.LinearSRGBColorSpace,depthBuffer:!1},r=A(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=A(e,t,n);var i=this._lodMax,o=E(i);this._sizeLods=o.sizeLods,this._lodPlanes=o.lodPlanes,this._sigmas=o.sigmas,this._blurMaterial=P(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new c.Mesh(this._lodPlanes[0],e);this._renderer.compile(t,x)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=90,o=1,s=new d.PerspectiveCamera(i,o,t,n),u=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(M),h.toneMapping=a.NoToneMapping,h.autoClear=!1;var m=new y.MeshBasicMaterial({name:"PMREM.Background",side:a.BackSide,depthWrite:!1,depthTest:!1}),g=new c.Mesh(new v.BoxGeometry,m),_=!1,b=e.background;b?b.isColor&&(m.color.copy(b),e.background=null,_=!0):(m.color.copy(M),_=!0);for(var x=0;x<6;x++){var C=x%3;0===C?(s.up.set(0,u[x],0),s.lookAt(l[x],0,0)):1===C?(s.up.set(0,0,u[x]),s.lookAt(0,l[x],0)):(s.up.set(0,u[x],0),s.lookAt(0,0,l[x]));var w=this._cubeSize;R(r,C*w,x>2?w:0,w,w),h.setRenderTarget(r),_&&h.render(g,s),h.render(e,s)}g.geometry.dispose(),g.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=b}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===a.CubeReflectionMapping||e.mapping===a.CubeRefractionMapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=O()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=L());var i=r?this._cubemapMaterial:this._equirectMaterial,o=new c.Mesh(this._lodPlanes[0],i),s=i.uniforms;s["envMap"].value=e;var u=this._cubeSize;R(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,x)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=T[(r-1)%T.length];this._blur(e,r-1,r,i,o)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,o,a){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var l=3,d=new c.Mesh(this._lodPlanes[r],u),h=u.uniforms,f=this._sizeLods[n]-1,p=isFinite(i)?Math.PI/(2*f):2*Math.PI/(2*b-1),m=i/p,y=isFinite(i)?1+Math.floor(l*m):b;y>b&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(y," samples when the maximum is set to ").concat(b));for(var v=[],_=0,M=0;M<b;++M){var C=M/m,w=Math.exp(-C*C/2);v.push(w),0===M?_+=w:M<y&&(_+=2*w)}for(var S=0;S<v.length;S++)v[S]=v[S]/_;h["envMap"].value=e.texture,h["samples"].value=y,h["weights"].value=v,h["latitudinal"].value="latitudinal"===o,a&&(h["poleAxis"].value=a);var T=this._lodMax;h["dTheta"].value=p,h["mipInt"].value=T-n;var N=this._sizeLods[r],E=3*N*(r>T-g?r-T+g:0),A=4*(this._cubeSize-N);R(t,E,A,3*N,2*N),s.setRenderTarget(t),s.render(d,x)}}]),e}();function E(e){for(var t=[],n=[],r=[],i=e,o=e-g+1+_.length,a=0;a<o;a++){var c=Math.pow(2,i);n.push(c);var l=1/c;a>e-g?l=_[a-e+g-1]:0===a&&(l=0),r.push(l);for(var d=1/(c-2),h=-d,f=1+d,p=[h,h,f,h,f,f,h,h,f,f,h,f],m=6,y=6,v=3,b=2,x=1,M=new Float32Array(v*y*m),C=new Float32Array(b*y*m),w=new Float32Array(x*y*m),S=0;S<m;S++){var T=S%3*2/3-1,N=S>2?0:-1,E=[T,N,0,T+2/3,N,0,T+2/3,N+1,0,T,N,0,T+2/3,N+1,0,T,N+1,0];M.set(E,v*y*S),C.set(p,b*y*S);var A=[S,S,S,S,S,S];w.set(A,x*y*S)}var R=new u.BufferGeometry;R.setAttribute("position",new s.BufferAttribute(M,v)),R.setAttribute("uv",new s.BufferAttribute(C,b)),R.setAttribute("faceIndex",new s.BufferAttribute(w,x)),t.push(R),i>g&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function A(e,t,n){var r=new m.WebGLRenderTarget(e,t,n);return r.texture.mapping=a.CubeUVReflectionMapping,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function R(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function P(e,t,n){var r=new Float32Array(b),i=new f.Vector3(0,1,0),o=new h.ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:b,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:k(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:a.NoBlending,depthTest:!1,depthWrite:!1});return o}function L(){return new h.ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:k(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:a.NoBlending,depthTest:!1,depthWrite:!1})}function O(){return new h.ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:k(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:a.NoBlending,depthTest:!1,depthWrite:!1})}function k(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}t.PMREMGenerator=N},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCamera=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(272);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,i.default)(this,n),e=t.call(this),e.isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=o,e.top=a,e.bottom=s,e.near=u,e.far=c,e.updateProjectionMatrix(),e}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=u*this.view.offsetX,o=i+u*this.view.width,a-=c*this.view.offsetY,s=a-c*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(l.Camera);t.OrthographicCamera=f},function(e,t,n){"use strict";function r(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLExtensions=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLGeometries=o;var r=n(263),i=n(238);function o(e,t,n,o){var a={},s=new WeakMap;function u(e){var r=e.target;for(var i in null!==r.index&&t.remove(r.index),r.attributes)t.remove(r.attributes[i]);for(var c in r.morphAttributes)for(var l=r.morphAttributes[c],d=0,h=l.length;d<h;d++)t.remove(l[d]);r.removeEventListener("dispose",u),delete a[r.id];var f=s.get(r);f&&(t.remove(f),s.delete(r)),o.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,n.memory.geometries--}function c(e,t){return!0===a[t.id]||(t.addEventListener("dispose",u),a[t.id]=!0,n.memory.geometries++),t}function l(n){var r=n.attributes;for(var i in r)t.update(r[i],e.ARRAY_BUFFER);var o=n.morphAttributes;for(var a in o)for(var s=o[a],u=0,c=s.length;u<c;u++)t.update(s[u],e.ARRAY_BUFFER)}function d(e){var n=[],o=e.index,a=e.attributes.position,u=0;if(null!==o){var c=o.array;u=o.version;for(var l=0,d=c.length;l<d;l+=3){var h=c[l+0],f=c[l+1],p=c[l+2];n.push(h,f,f,p,p,h)}}else{if(void 0===a)return;var m=a.array;u=a.version;for(var y=0,v=m.length/3-1;y<v;y+=3){var g=y+0,_=y+1,b=y+2;n.push(g,_,_,b,b,g)}}var x=new((0,i.arrayNeedsUint32)(n)?r.Uint32BufferAttribute:r.Uint16BufferAttribute)(n,1);x.version=u;var M=s.get(e);M&&t.remove(M),s.set(e,x)}function h(e){var t=s.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&d(e)}else d(e);return s.get(e)}return{get:c,update:l,getWireframeAttribute:h}}},function(e,t,n){"use strict";function r(e,t,n,r){var i,o,a,s=r.isWebGL2;function u(e){i=e}function c(e){o=e.type,a=e.bytesPerElement}function l(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)}function d(r,u,c){if(0!==c){var l,d;if(s)l=e,d="drawElementsInstanced";else if(l=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[d](i,u,o,r*a,c),n.update(u,i,c)}}this.setMode=u,this.setIndex=c,this.render=l,this.renderInstances=d}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLIndexedBufferRenderer=r},function(e,t,n){"use strict";function r(e){var t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,r,i){switch(n.calls++,r){case e.TRIANGLES:n.triangles+=i*(t/3);break;case e.LINES:n.lines+=i*(t/2);break;case e.LINE_STRIP:n.lines+=i*(t-1);break;case e.LINE_LOOP:n.lines+=i*t;break;case e.POINTS:n.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLInfo=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLMorphtargets=c;var r=n(223),i=n(241),o=n(240),a=n(234);function s(e,t){return e[0]-t[0]}function u(e,t){return Math.abs(t[1])-Math.abs(e[1])}function c(e,t,n){for(var c={},l=new Float32Array(8),d=new WeakMap,h=new o.Vector4,f=[],p=0;p<8;p++)f[p]=[p,0];function m(o,p,m){var y=o.morphTargetInfluences;if(!0===t.isWebGL2){var v=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,g=void 0!==v?v.length:0,_=d.get(p);if(void 0===_||_.count!==g){var b=function e(){P.dispose(),d.delete(p),p.removeEventListener("dispose",e)};void 0!==_&&_.texture.dispose();var x=void 0!==p.morphAttributes.position,M=void 0!==p.morphAttributes.normal,C=void 0!==p.morphAttributes.color,w=p.morphAttributes.position||[],S=p.morphAttributes.normal||[],T=p.morphAttributes.color||[],N=0;!0===x&&(N=1),!0===M&&(N=2),!0===C&&(N=3);var E=p.attributes.position.count*N,A=1;E>t.maxTextureSize&&(A=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);var R=new Float32Array(E*A*4*g),P=new i.DataArrayTexture(R,E,A,g);P.type=r.FloatType,P.needsUpdate=!0;for(var L=4*N,O=0;O<g;O++)for(var k=w[O],I=S[O],D=T[O],U=E*A*4*O,B=0;B<k.count;B++){var F=B*L;!0===x&&(h.fromBufferAttribute(k,B),R[U+F+0]=h.x,R[U+F+1]=h.y,R[U+F+2]=h.z,R[U+F+3]=0),!0===M&&(h.fromBufferAttribute(I,B),R[U+F+4]=h.x,R[U+F+5]=h.y,R[U+F+6]=h.z,R[U+F+7]=0),!0===C&&(h.fromBufferAttribute(D,B),R[U+F+8]=h.x,R[U+F+9]=h.y,R[U+F+10]=h.z,R[U+F+11]=4===D.itemSize?h.w:1)}_={count:g,texture:P,size:new a.Vector2(E,A)},d.set(p,_),p.addEventListener("dispose",b)}for(var G=0,j=0;j<y.length;j++)G+=y[j];var z=p.morphTargetsRelative?1:1-G;m.getUniforms().setValue(e,"morphTargetBaseInfluence",z),m.getUniforms().setValue(e,"morphTargetInfluences",y),m.getUniforms().setValue(e,"morphTargetsTexture",_.texture,n),m.getUniforms().setValue(e,"morphTargetsTextureSize",_.size)}else{var V=void 0===y?0:y.length,H=c[p.id];if(void 0===H||H.length!==V){H=[];for(var W=0;W<V;W++)H[W]=[W,0];c[p.id]=H}for(var q=0;q<V;q++){var X=H[q];X[0]=q,X[1]=y[q]}H.sort(u);for(var Y=0;Y<8;Y++)Y<V&&H[Y][1]?(f[Y][0]=H[Y][0],f[Y][1]=H[Y][1]):(f[Y][0]=Number.MAX_SAFE_INTEGER,f[Y][1]=0);f.sort(s);for(var J=p.morphAttributes.position,K=p.morphAttributes.normal,$=0,Z=0;Z<8;Z++){var Q=f[Z],ee=Q[0],te=Q[1];ee!==Number.MAX_SAFE_INTEGER&&te?(J&&p.getAttribute("morphTarget"+Z)!==J[ee]&&p.setAttribute("morphTarget"+Z,J[ee]),K&&p.getAttribute("morphNormal"+Z)!==K[ee]&&p.setAttribute("morphNormal"+Z,K[ee]),l[Z]=te,$+=te):(J&&!0===p.hasAttribute("morphTarget"+Z)&&p.deleteAttribute("morphTarget"+Z),K&&!0===p.hasAttribute("morphNormal"+Z)&&p.deleteAttribute("morphNormal"+Z),l[Z]=0)}var ne=p.morphTargetsRelative?1:1-$;m.getUniforms().setValue(e,"morphTargetBaseInfluence",ne),m.getUniforms().setValue(e,"morphTargetInfluences",l)}}return{update:m}}},function(e,t,n){"use strict";function r(e,t,n,r){var i=new WeakMap;function o(o){var a=r.render.frame,u=o.geometry,c=t.get(o,u);if(i.get(c)!==a&&(t.update(c),i.set(c,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",s)&&o.addEventListener("dispose",s),i.get(o)!==a&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,a))),o.isSkinnedMesh){var l=o.skeleton;i.get(l)!==a&&(l.update(),i.set(l,a))}return c}function a(){i=new WeakMap}function s(e){var t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:o,dispose:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLObjects=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLPrograms=c;var r=n(223),i=n(257),o=n(421),a=n(424),s=n(281),u=n(267);function c(e,t,n,c,l,d,h){var f=new i.Layers,p=new a.WebGLShaderCache,m=[],y=l.isWebGL2,v=l.logarithmicDepthBuffer,g=l.vertexTextures,_=l.precision,b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(e){return 0===e?"uv":"uv".concat(e)}function M(i,o,a,u,d){var f=u.fog,m=d.geometry,M=i.isMeshStandardMaterial?u.environment:null,C=(i.isMeshStandardMaterial?n:t).get(i.envMap||M),w=C&&C.mapping===r.CubeUVReflectionMapping?C.image.height:null,S=b[i.type];null!==i.precision&&(_=l.getMaxPrecision(i.precision),_!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",_,"instead."));var T,N,E,A,R=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,P=void 0!==R?R.length:0,L=0;if(void 0!==m.morphAttributes.position&&(L=1),void 0!==m.morphAttributes.normal&&(L=2),void 0!==m.morphAttributes.color&&(L=3),S){var O=s.ShaderLib[S];T=O.vertexShader,N=O.fragmentShader}else T=i.vertexShader,N=i.fragmentShader,p.update(i),E=p.getVertexShaderID(i),A=p.getFragmentShaderID(i);var k=e.getRenderTarget(),I=!0===d.isInstancedMesh,D=!!i.map,U=!!i.matcap,B=!!C,F=!!i.aoMap,G=!!i.lightMap,j=!!i.bumpMap,z=!!i.normalMap,V=!!i.displacementMap,H=!!i.emissiveMap,W=!!i.metalnessMap,q=!!i.roughnessMap,X=i.anisotropy>0,Y=i.clearcoat>0,J=i.iridescence>0,K=i.sheen>0,$=i.transmission>0,Z=X&&!!i.anisotropyMap,Q=Y&&!!i.clearcoatMap,ee=Y&&!!i.clearcoatNormalMap,te=Y&&!!i.clearcoatRoughnessMap,ne=J&&!!i.iridescenceMap,re=J&&!!i.iridescenceThicknessMap,ie=K&&!!i.sheenColorMap,oe=K&&!!i.sheenRoughnessMap,ae=!!i.specularMap,se=!!i.specularColorMap,ue=!!i.specularIntensityMap,ce=$&&!!i.transmissionMap,le=$&&!!i.thicknessMap,de=!!i.gradientMap,he=!!i.alphaMap,fe=i.alphaTest>0,pe=!!i.alphaHash,me=!!i.extensions,ye=!!m.attributes.uv1,ve=!!m.attributes.uv2,ge=!!m.attributes.uv3,_e=r.NoToneMapping;i.toneMapped&&(null!==k&&!0!==k.isXRRenderTarget||(_e=e.toneMapping));var be={isWebGL2:y,shaderID:S,shaderType:i.type,shaderName:i.name,vertexShader:T,fragmentShader:N,defines:i.defines,customVertexShaderID:E,customFragmentShaderID:A,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:_,instancing:I,instancingColor:I&&null!==d.instanceColor,supportsVertexTextures:g,outputColorSpace:null===k?e.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:r.LinearSRGBColorSpace,map:D,matcap:U,envMap:B,envMapMode:B&&C.mapping,envMapCubeUVHeight:w,aoMap:F,lightMap:G,bumpMap:j,normalMap:z,displacementMap:g&&V,emissiveMap:H,normalMapObjectSpace:z&&i.normalMapType===r.ObjectSpaceNormalMap,normalMapTangentSpace:z&&i.normalMapType===r.TangentSpaceNormalMap,metalnessMap:W,roughnessMap:q,anisotropy:X,anisotropyMap:Z,clearcoat:Y,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,iridescence:J,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:K,sheenColorMap:ie,sheenRoughnessMap:oe,specularMap:ae,specularColorMap:se,specularIntensityMap:ue,transmission:$,transmissionMap:ce,thicknessMap:le,gradientMap:de,opaque:!1===i.transparent&&i.blending===r.NormalBlending,alphaMap:he,alphaTest:fe,alphaHash:pe,combine:i.combine,mapUv:D&&x(i.map.channel),aoMapUv:F&&x(i.aoMap.channel),lightMapUv:G&&x(i.lightMap.channel),bumpMapUv:j&&x(i.bumpMap.channel),normalMapUv:z&&x(i.normalMap.channel),displacementMapUv:V&&x(i.displacementMap.channel),emissiveMapUv:H&&x(i.emissiveMap.channel),metalnessMapUv:W&&x(i.metalnessMap.channel),roughnessMapUv:q&&x(i.roughnessMap.channel),anisotropyMapUv:Z&&x(i.anisotropyMap.channel),clearcoatMapUv:Q&&x(i.clearcoatMap.channel),clearcoatNormalMapUv:ee&&x(i.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&x(i.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&x(i.iridescenceMap.channel),iridescenceThicknessMapUv:re&&x(i.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&x(i.sheenColorMap.channel),sheenRoughnessMapUv:oe&&x(i.sheenRoughnessMap.channel),specularMapUv:ae&&x(i.specularMap.channel),specularColorMapUv:se&&x(i.specularColorMap.channel),specularIntensityMapUv:ue&&x(i.specularIntensityMap.channel),transmissionMapUv:ce&&x(i.transmissionMap.channel),thicknessMapUv:le&&x(i.thicknessMap.channel),alphaMapUv:he&&x(i.alphaMap.channel),vertexTangents:!!m.attributes.tangent&&(z||X),vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!m.attributes.color&&4===m.attributes.color.itemSize,vertexUv1s:ye,vertexUv2s:ve,vertexUv3s:ge,pointsUvs:!0===d.isPoints&&!!m.attributes.uv&&(D||he),fog:!!f,useFog:!0===i.fog,fogExp2:f&&f.isFogExp2,flatShading:!0===i.flatShading,sizeAttenuation:!0===i.sizeAttenuation,logarithmicDepthBuffer:v,skinning:!0===d.isSkinnedMesh,morphTargets:void 0!==m.morphAttributes.position,morphNormals:void 0!==m.morphAttributes.normal,morphColors:void 0!==m.morphAttributes.color,morphTargetsCount:P,morphTextureStride:L,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:_e,useLegacyLights:e._useLegacyLights,premultipliedAlpha:i.premultipliedAlpha,doubleSided:i.side===r.DoubleSide,flipSided:i.side===r.BackSide,useDepthPacking:i.depthPacking>=0,depthPacking:i.depthPacking||0,index0AttributeName:i.index0AttributeName,extensionDerivatives:me&&!0===i.extensions.derivatives,extensionFragDepth:me&&!0===i.extensions.fragDepth,extensionDrawBuffers:me&&!0===i.extensions.drawBuffers,extensionShaderTextureLOD:me&&!0===i.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||c.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()};return be}function C(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(w(n,t),S(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()}function w(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function S(e,t){f.disableAll(),t.isWebGL2&&f.enable(0),t.supportsVertexTextures&&f.enable(1),t.instancing&&f.enable(2),t.instancingColor&&f.enable(3),t.matcap&&f.enable(4),t.envMap&&f.enable(5),t.normalMapObjectSpace&&f.enable(6),t.normalMapTangentSpace&&f.enable(7),t.clearcoat&&f.enable(8),t.iridescence&&f.enable(9),t.alphaTest&&f.enable(10),t.vertexColors&&f.enable(11),t.vertexAlphas&&f.enable(12),t.vertexUv1s&&f.enable(13),t.vertexUv2s&&f.enable(14),t.vertexUv3s&&f.enable(15),t.vertexTangents&&f.enable(16),t.anisotropy&&f.enable(17),e.push(f.mask),f.disableAll(),t.fog&&f.enable(0),t.useFog&&f.enable(1),t.flatShading&&f.enable(2),t.logarithmicDepthBuffer&&f.enable(3),t.skinning&&f.enable(4),t.morphTargets&&f.enable(5),t.morphNormals&&f.enable(6),t.morphColors&&f.enable(7),t.premultipliedAlpha&&f.enable(8),t.shadowMapEnabled&&f.enable(9),t.useLegacyLights&&f.enable(10),t.doubleSided&&f.enable(11),t.flipSided&&f.enable(12),t.useDepthPacking&&f.enable(13),t.dithering&&f.enable(14),t.transmission&&f.enable(15),t.sheen&&f.enable(16),t.opaque&&f.enable(17),t.pointsUvs&&f.enable(18),e.push(f.mask)}function T(e){var t,n=b[e.type];if(n){var r=s.ShaderLib[n];t=u.UniformsUtils.clone(r.uniforms)}else t=e.uniforms;return t}function N(t,n){for(var r,i=0,a=m.length;i<a;i++){var s=m[i];if(s.cacheKey===n){r=s,++r.usedTimes;break}}return void 0===r&&(r=new o.WebGLProgram(e,n,t,d),m.push(r)),r}function E(e){if(0===--e.usedTimes){var t=m.indexOf(e);m[t]=m[m.length-1],m.pop(),e.destroy()}}function A(e){p.remove(e)}function R(){p.dispose()}return{getParameters:M,getProgramCacheKey:C,getUniforms:T,acquireProgram:N,releaseProgram:E,releaseShaderCache:A,programs:m,dispose:R}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLProgram=L;var r=n(422),i=n(423),o=n(282),a=n(223),s=0;function u(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length),a=i;a<o;a++){var s=a+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[a]))}return r.join("\n")}function c(e){switch(e){case a.LinearSRGBColorSpace:return["Linear","( value )"];case a.SRGBColorSpace:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}function l(e,t,n){var r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var o=/ERROR: 0:(\d+)/.exec(i);if(o){var a=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+u(e.getShaderSource(t),a)}return i}function d(e,t){var n=c(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function h(e,t){var n;switch(t){case a.LinearToneMapping:n="Linear";break;case a.ReinhardToneMapping:n="Reinhard";break;case a.CineonToneMapping:n="OptimizedCineon";break;case a.ACESFilmicToneMapping:n="ACESFilmic";break;case a.CustomToneMapping:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function f(e){var t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(y).join("\n")}function p(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function m(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i),a=o.name,s=1;o.type===e.FLOAT_MAT2&&(s=2),o.type===e.FLOAT_MAT3&&(s=3),o.type===e.FLOAT_MAT4&&(s=4),n[a]={type:o.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}function y(e){return""!==e}function v(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function g(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var _=/^[ \t]*#include +<([\w\d./]+)>/gm;function b(e){return e.replace(_,M)}var x=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function M(e,t){var n=o.ShaderChunk[t];if(void 0===n){var r=x.get(t);if(void 0===r)throw new Error("Can not resolve #include <"+t+">");n=o.ShaderChunk[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r)}return b(n)}var C=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function w(e){return e.replace(C,S)}function S(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function T(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function N(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===a.PCFShadowMap?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===a.PCFSoftShadowMap?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===a.VSMShadowMap&&(t="SHADOWMAP_TYPE_VSM"),t}function E(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case a.CubeReflectionMapping:case a.CubeRefractionMapping:t="ENVMAP_TYPE_CUBE";break;case a.CubeUVReflectionMapping:t="ENVMAP_TYPE_CUBE_UV";break}return t}function A(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case a.CubeRefractionMapping:t="ENVMAP_MODE_REFRACTION";break}return t}function R(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case a.MultiplyOperation:t="ENVMAP_BLENDING_MULTIPLY";break;case a.MixOperation:t="ENVMAP_BLENDING_MIX";break;case a.AddOperation:t="ENVMAP_BLENDING_ADD";break}return t}function P(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function L(e,t,n,u){var c,_,x=e.getContext(),M=n.defines,C=n.vertexShader,S=n.fragmentShader,L=N(n),O=E(n),k=A(n),I=R(n),D=P(n),U=n.isWebGL2?"":f(n),B=p(M),F=x.createProgram(),G=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(c=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B].filter(y).join("\n"),c.length>0&&(c+="\n"),_=[U,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B].filter(y).join("\n"),_.length>0&&(_+="\n")):(c=[T(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+k:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+L:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(y).join("\n"),_=[U,T(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+O:"",n.envMap?"#define "+k:"",n.envMap?"#define "+I:"",D?"#define CUBEUV_TEXEL_WIDTH "+D.texelWidth:"",D?"#define CUBEUV_TEXEL_HEIGHT "+D.texelHeight:"",D?"#define CUBEUV_MAX_MIP "+D.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+L:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==a.NoToneMapping?"#define TONE_MAPPING":"",n.toneMapping!==a.NoToneMapping?o.ShaderChunk["tonemapping_pars_fragment"]:"",n.toneMapping!==a.NoToneMapping?h("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",o.ShaderChunk["colorspace_pars_fragment"],d("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(y).join("\n")),C=b(C),C=v(C,n),C=g(C,n),S=b(S),S=v(S,n),S=g(S,n),C=w(C),S=w(S),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(G="#version 300 es\n",c=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+c,_=["#define varying in",n.glslVersion===a.GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===a.GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);var j,z,V=G+c+C,H=G+_+S,W=(0,i.WebGLShader)(x,x.VERTEX_SHADER,V),q=(0,i.WebGLShader)(x,x.FRAGMENT_SHADER,H);if(x.attachShader(F,W),x.attachShader(F,q),void 0!==n.index0AttributeName?x.bindAttribLocation(F,0,n.index0AttributeName):!0===n.morphTargets&&x.bindAttribLocation(F,0,"position"),x.linkProgram(F),e.debug.checkShaderErrors){var X=x.getProgramInfoLog(F).trim(),Y=x.getShaderInfoLog(W).trim(),J=x.getShaderInfoLog(q).trim(),K=!0,$=!0;if(!1===x.getProgramParameter(F,x.LINK_STATUS))if(K=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(x,F,W,q);else{var Z=l(x,W,"vertex"),Q=l(x,q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+x.getError()+" - VALIDATE_STATUS "+x.getProgramParameter(F,x.VALIDATE_STATUS)+"\n\nProgram Info Log: "+X+"\n"+Z+"\n"+Q)}else""!==X?console.warn("THREE.WebGLProgram: Program Info Log:",X):""!==Y&&""!==J||($=!1);$&&(this.diagnostics={runnable:K,programLog:X,vertexShader:{log:Y,prefix:c},fragmentShader:{log:J,prefix:_}})}return x.deleteShader(W),x.deleteShader(q),this.getUniforms=function(){return void 0===j&&(j=new r.WebGLUniforms(x,F)),j},this.getAttributes=function(){return void 0===z&&(z=m(x,F)),z},this.destroy=function(){u.releaseStatesOfProgram(this),x.deleteProgram(F),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=s++,this.cacheKey=t,this.usedTimes=1,this.program=F,this.vertexShader=W,this.fragmentShader=q,this}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUniforms=void 0;var i=r(n(24)),o=r(n(23)),a=n(273),s=n(232),u=n(241),c=n(243),l=new s.Texture,d=new u.DataArrayTexture,h=new c.Data3DTexture,f=new a.CubeTexture,p=[],m=[],y=new Float32Array(16),v=new Float32Array(9),g=new Float32Array(4);function _(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=p[i];if(void 0===o&&(o=new Float32Array(i),p[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function b(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function x(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function M(e,t){var n=m[t];void 0===n&&(n=new Int32Array(t),m[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function C(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function w(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(b(n,t))return;e.uniform2fv(this.addr,t),x(n,t)}}function S(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(b(n,t))return;e.uniform3fv(this.addr,t),x(n,t)}}function T(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(b(n,t))return;e.uniform4fv(this.addr,t),x(n,t)}}function N(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(b(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),x(n,t)}else{if(b(n,r))return;g.set(r),e.uniformMatrix2fv(this.addr,!1,g),x(n,r)}}function E(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(b(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),x(n,t)}else{if(b(n,r))return;v.set(r),e.uniformMatrix3fv(this.addr,!1,v),x(n,r)}}function A(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(b(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),x(n,t)}else{if(b(n,r))return;y.set(r),e.uniformMatrix4fv(this.addr,!1,y),x(n,r)}}function R(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function P(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(b(n,t))return;e.uniform2iv(this.addr,t),x(n,t)}}function L(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(b(n,t))return;e.uniform3iv(this.addr,t),x(n,t)}}function O(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(b(n,t))return;e.uniform4iv(this.addr,t),x(n,t)}}function k(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function I(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(b(n,t))return;e.uniform2uiv(this.addr,t),x(n,t)}}function D(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(b(n,t))return;e.uniform3uiv(this.addr,t),x(n,t)}}function U(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(b(n,t))return;e.uniform4uiv(this.addr,t),x(n,t)}}function B(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||l,i)}function F(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||h,i)}function G(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||f,i)}function j(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||d,i)}function z(e){switch(e){case 5126:return C;case 35664:return w;case 35665:return S;case 35666:return T;case 35674:return N;case 35675:return E;case 35676:return A;case 5124:case 35670:return R;case 35667:case 35671:return P;case 35668:case 35672:return L;case 35669:case 35673:return O;case 5125:return k;case 36294:return I;case 36295:return D;case 36296:return U;case 35678:case 36198:case 36298:case 36306:case 35682:return B;case 35679:case 36299:case 36307:return F;case 35680:case 36300:case 36308:case 36293:return G;case 36289:case 36303:case 36311:case 36292:return j}}function V(e,t){e.uniform1fv(this.addr,t)}function H(e,t){var n=_(t,this.size,2);e.uniform2fv(this.addr,n)}function W(e,t){var n=_(t,this.size,3);e.uniform3fv(this.addr,n)}function q(e,t){var n=_(t,this.size,4);e.uniform4fv(this.addr,n)}function X(e,t){var n=_(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Y(e,t){var n=_(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function J(e,t){var n=_(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function K(e,t){e.uniform1iv(this.addr,t)}function $(e,t){e.uniform2iv(this.addr,t)}function Z(e,t){e.uniform3iv(this.addr,t)}function Q(e,t){e.uniform4iv(this.addr,t)}function ee(e,t){e.uniform1uiv(this.addr,t)}function te(e,t){e.uniform2uiv(this.addr,t)}function ne(e,t){e.uniform3uiv(this.addr,t)}function re(e,t){e.uniform4uiv(this.addr,t)}function ie(e,t,n){var r=this.cache,i=t.length,o=M(n,i);b(r,o)||(e.uniform1iv(this.addr,o),x(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||l,o[a])}function oe(e,t,n){var r=this.cache,i=t.length,o=M(n,i);b(r,o)||(e.uniform1iv(this.addr,o),x(r,o));for(var a=0;a!==i;++a)n.setTexture3D(t[a]||h,o[a])}function ae(e,t,n){var r=this.cache,i=t.length,o=M(n,i);b(r,o)||(e.uniform1iv(this.addr,o),x(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||f,o[a])}function se(e,t,n){var r=this.cache,i=t.length,o=M(n,i);b(r,o)||(e.uniform1iv(this.addr,o),x(r,o));for(var a=0;a!==i;++a)n.setTexture2DArray(t[a]||d,o[a])}function ue(e){switch(e){case 5126:return V;case 35664:return H;case 35665:return W;case 35666:return q;case 35674:return X;case 35675:return Y;case 35676:return J;case 5124:case 35670:return K;case 35667:case 35671:return $;case 35668:case 35672:return Z;case 35669:case 35673:return Q;case 5125:return ee;case 36294:return te;case 36295:return ne;case 36296:return re;case 35678:case 36198:case 36298:case 36306:case 35682:return ie;case 35679:case 36299:case 36307:return oe;case 35680:case 36300:case 36308:case 36293:return ae;case 36289:case 36303:case 36311:case 36292:return se}}var ce=(0,i.default)((function e(t,n,r){(0,o.default)(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=z(n.type)})),le=(0,i.default)((function e(t,n,r){(0,o.default)(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=ue(n.type)})),de=function(){function e(t){(0,o.default)(this,e),this.id=t,this.seq=[],this.map={}}return(0,i.default)(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}}}]),e}(),he=/(\w+)(\])?(\[|\.)?/g;function fe(e,t){e.seq.push(t),e.map[t.id]=t}function pe(e,t,n){var r=e.name,i=r.length;he.lastIndex=0;while(1){var o=he.exec(r),a=he.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){fe(n,void 0===c?new ce(s,e,t):new le(s,e,t));break}var l=n.map,d=l[s];void 0===d&&(d=new de(s),fe(n,d)),n=d}}var me=function(){function e(t,n){(0,o.default)(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=t.getActiveUniform(n,i),s=t.getUniformLocation(n,a.name);pe(a,s,this)}}return(0,i.default)(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n}}]),e}();t.WebGLUniforms=me},function(e,t,n){"use strict";function r(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLShader=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLShaderCache=void 0;var i=r(n(23)),o=r(n(24));function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=0,l=function(){function e(){(0,i.default)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,o.default)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),r=a(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(o){r.e(o)}finally{r.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new d(e),t.set(e,n)),n}}]),e}();t.WebGLShaderCache=l;var d=(0,o.default)((function e(t){(0,i.default)(this,e),this.id=c++,this.code=t,this.usedTimes=0}))},function(e,t,n){"use strict";function r(){var e=new WeakMap;function t(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function r(t,n,r){e.get(t)[n]=r}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLProperties=r},function(e,t,n){"use strict";function r(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function i(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function o(){var e=[],t=0,n=[],o=[],a=[];function s(){t=0,n.length=0,o.length=0,a.length=0}function u(n,r,i,o,a,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=a,u.group=s),t++,u}function c(e,t,r,i,s,c){var l=u(e,t,r,i,s,c);r.transmission>0?o.push(l):!0===r.transparent?a.push(l):n.push(l)}function l(e,t,r,i,s,c){var l=u(e,t,r,i,s,c);r.transmission>0?o.unshift(l):!0===r.transparent?a.unshift(l):n.unshift(l)}function d(e,t){n.length>1&&n.sort(e||r),o.length>1&&o.sort(t||i),a.length>1&&a.sort(t||i)}function h(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}}return{opaque:n,transmissive:o,transparent:a,init:s,push:c,unshift:l,finish:h,sort:d}}function a(){var e=new WeakMap;function t(t,n){var r,i=e.get(t);return void 0===i?(r=new o,e.set(t,[r])):n>=i.length?(r=new o,i.push(r)):r=i[n],r}function n(){e=new WeakMap}return{get:t,dispose:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderList=o,t.WebGLRenderLists=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderStates=o;var r=n(428);function i(e,t){var n=new r.WebGLLights(e,t),i=[],o=[];function a(){i.length=0,o.length=0}function s(e){i.push(e)}function u(e){o.push(e)}function c(e){n.setup(i,e)}function l(e){n.setupView(i,e)}var d={lightsArray:i,shadowsArray:o,lights:n};return{init:a,state:d,setupLights:c,setupLightsView:l,pushLight:s,pushShadow:u}}function o(e,t){var n=new WeakMap;function r(r){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=n.get(r);return void 0===s?(o=new i(e,t),n.set(r,[o])):a>=s.length?(o=new i(e,t),s.push(o)):o=s[a],o}function o(){n=new WeakMap}return{get:r,dispose:o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLLights=h;var r=n(261),i=n(254),o=n(234),a=n(249),s=n(405);function u(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new a.Vector3,color:new r.Color};break;case"SpotLight":n={position:new a.Vector3,direction:new a.Vector3,color:new r.Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new a.Vector3,color:new r.Color,distance:0,decay:0};break;case"HemisphereLight":n={direction:new a.Vector3,skyColor:new r.Color,groundColor:new r.Color};break;case"RectAreaLight":n={color:new r.Color,position:new a.Vector3,halfWidth:new a.Vector3,halfHeight:new a.Vector3};break}return e[t.id]=n,n}}}function c(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new o.Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}var l=0;function d(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function h(e,t){for(var n=new u,r=c(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},h=0;h<9;h++)o.probe.push(new a.Vector3);var f=new a.Vector3,p=new i.Matrix4,m=new i.Matrix4;function y(i,a){for(var u=0,c=0,h=0,f=0;f<9;f++)o.probe[f].set(0,0,0);var p=0,m=0,y=0,v=0,g=0,_=0,b=0,x=0,M=0,C=0;i.sort(d);for(var w=!0===a?Math.PI:1,S=0,T=i.length;S<T;S++){var N=i[S],E=N.color,A=N.intensity,R=N.distance,P=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)u+=E.r*A*w,c+=E.g*A*w,h+=E.b*A*w;else if(N.isLightProbe)for(var L=0;L<9;L++)o.probe[L].addScaledVector(N.sh.coefficients[L],A);else if(N.isDirectionalLight){var O=n.get(N);if(O.color.copy(N.color).multiplyScalar(N.intensity*w),N.castShadow){var k=N.shadow,I=r.get(N);I.shadowBias=k.bias,I.shadowNormalBias=k.normalBias,I.shadowRadius=k.radius,I.shadowMapSize=k.mapSize,o.directionalShadow[p]=I,o.directionalShadowMap[p]=P,o.directionalShadowMatrix[p]=N.shadow.matrix,_++}o.directional[p]=O,p++}else if(N.isSpotLight){var D=n.get(N);D.position.setFromMatrixPosition(N.matrixWorld),D.color.copy(E).multiplyScalar(A*w),D.distance=R,D.coneCos=Math.cos(N.angle),D.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),D.decay=N.decay,o.spot[y]=D;var U=N.shadow;if(N.map&&(o.spotLightMap[M]=N.map,M++,U.updateMatrices(N),N.castShadow&&C++),o.spotLightMatrix[y]=U.matrix,N.castShadow){var B=r.get(N);B.shadowBias=U.bias,B.shadowNormalBias=U.normalBias,B.shadowRadius=U.radius,B.shadowMapSize=U.mapSize,o.spotShadow[y]=B,o.spotShadowMap[y]=P,x++}y++}else if(N.isRectAreaLight){var F=n.get(N);F.color.copy(E).multiplyScalar(A),F.halfWidth.set(.5*N.width,0,0),F.halfHeight.set(0,.5*N.height,0),o.rectArea[v]=F,v++}else if(N.isPointLight){var G=n.get(N);if(G.color.copy(N.color).multiplyScalar(N.intensity*w),G.distance=N.distance,G.decay=N.decay,N.castShadow){var j=N.shadow,z=r.get(N);z.shadowBias=j.bias,z.shadowNormalBias=j.normalBias,z.shadowRadius=j.radius,z.shadowMapSize=j.mapSize,z.shadowCameraNear=j.camera.near,z.shadowCameraFar=j.camera.far,o.pointShadow[m]=z,o.pointShadowMap[m]=P,o.pointShadowMatrix[m]=N.shadow.matrix,b++}o.point[m]=G,m++}else if(N.isHemisphereLight){var V=n.get(N);V.skyColor.copy(N.color).multiplyScalar(A*w),V.groundColor.copy(N.groundColor).multiplyScalar(A*w),o.hemi[g]=V,g++}}v>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(o.rectAreaLTC1=s.UniformsLib.LTC_FLOAT_1,o.rectAreaLTC2=s.UniformsLib.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=s.UniformsLib.LTC_HALF_1,o.rectAreaLTC2=s.UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=u,o.ambient[1]=c,o.ambient[2]=h;var H=o.hash;H.directionalLength===p&&H.pointLength===m&&H.spotLength===y&&H.rectAreaLength===v&&H.hemiLength===g&&H.numDirectionalShadows===_&&H.numPointShadows===b&&H.numSpotShadows===x&&H.numSpotMaps===M||(o.directional.length=p,o.spot.length=y,o.rectArea.length=v,o.point.length=m,o.hemi.length=g,o.directionalShadow.length=_,o.directionalShadowMap.length=_,o.pointShadow.length=b,o.pointShadowMap.length=b,o.spotShadow.length=x,o.spotShadowMap.length=x,o.directionalShadowMatrix.length=_,o.pointShadowMatrix.length=b,o.spotLightMatrix.length=x+M-C,o.spotLightMap.length=M,o.numSpotLightShadowsWithMaps=C,H.directionalLength=p,H.pointLength=m,H.spotLength=y,H.rectAreaLength=v,H.hemiLength=g,H.numDirectionalShadows=_,H.numPointShadows=b,H.numSpotShadows=x,H.numSpotMaps=M,o.version=l++)}function v(e,t){for(var n=0,r=0,i=0,a=0,s=0,u=t.matrixWorldInverse,c=0,l=e.length;c<l;c++){var d=e[c];if(d.isDirectionalLight){var h=o.directional[n];h.direction.setFromMatrixPosition(d.matrixWorld),f.setFromMatrixPosition(d.target.matrixWorld),h.direction.sub(f),h.direction.transformDirection(u),n++}else if(d.isSpotLight){var y=o.spot[i];y.position.setFromMatrixPosition(d.matrixWorld),y.position.applyMatrix4(u),y.direction.setFromMatrixPosition(d.matrixWorld),f.setFromMatrixPosition(d.target.matrixWorld),y.direction.sub(f),y.direction.transformDirection(u),i++}else if(d.isRectAreaLight){var v=o.rectArea[a];v.position.setFromMatrixPosition(d.matrixWorld),v.position.applyMatrix4(u),m.identity(),p.copy(d.matrixWorld),p.premultiply(u),m.extractRotation(p),v.halfWidth.set(.5*d.width,0,0),v.halfHeight.set(0,.5*d.height,0),v.halfWidth.applyMatrix4(m),v.halfHeight.applyMatrix4(m),a++}else if(d.isPointLight){var g=o.point[r];g.position.setFromMatrixPosition(d.matrixWorld),g.position.applyMatrix4(u),r++}else if(d.isHemisphereLight){var _=o.hemi[s];_.direction.setFromMatrixPosition(d.matrixWorld),_.direction.transformDirection(u),s++}}}return{setup:y,setupView:v,state:o}}},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLShadowMap=b;var o=r(n(11)),a=n(223),s=n(229),u=n(430),c=n(431),l=n(266),d=n(263),h=n(262),f=n(246),p=n(240),m=n(234),y=n(275),v=_(n(432));function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function b(e,t,n){var r,i=new y.Frustum,g=new m.Vector2,_=new m.Vector2,b=new p.Vector4,x=new u.MeshDepthMaterial({depthPacking:a.RGBADepthPacking}),M=new c.MeshDistanceMaterial,C={},w=n.maxTextureSize,S=(r={},(0,o.default)(r,a.FrontSide,a.BackSide),(0,o.default)(r,a.BackSide,a.FrontSide),(0,o.default)(r,a.DoubleSide,a.DoubleSide),r),T=new l.ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new m.Vector2},radius:{value:4}},vertexShader:v.vertex,fragmentShader:v.fragment}),N=T.clone();N.defines.HORIZONTAL_PASS=1;var E=new h.BufferGeometry;E.setAttribute("position",new d.BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var A=new f.Mesh(E,T),R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=a.PCFShadowMap;var P=this.type;function L(n,r){var i=t.update(A);T.defines.VSM_SAMPLES!==n.blurSamples&&(T.defines.VSM_SAMPLES=n.blurSamples,N.defines.VSM_SAMPLES=n.blurSamples,T.needsUpdate=!0,N.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new s.WebGLRenderTarget(g.x,g.y)),T.uniforms.shadow_pass.value=n.map.texture,T.uniforms.resolution.value=n.mapSize,T.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,T,A,null),N.uniforms.shadow_pass.value=n.mapPass.texture,N.uniforms.resolution.value=n.mapSize,N.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,N,A,null)}function O(t,n,r,i){var o=null,s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?M:x,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var u=o.uuid,c=n.uuid,l=C[u];void 0===l&&(l={},C[u]=l);var d=l[c];void 0===d&&(d=o.clone(),l[c]=d),o=d}if(o.visible=n.visible,o.wireframe=n.wireframe,i===a.VSMShadowMap?o.side=null!==n.shadowSide?n.shadowSide:n.side:o.side=null!==n.shadowSide?n.shadowSide:S[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){var h=e.properties.get(o);h.light=r}return o}function k(n,r,o,s,u){if(!1!==n.visible){var c=n.layers.test(r.layers);if(c&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&u===a.VSMShadowMap)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),d=n.material;if(Array.isArray(d))for(var h=l.groups,f=0,p=h.length;f<p;f++){var m=h[f],y=d[m.materialIndex];if(y&&y.visible){var v=O(n,y,s,u);e.renderBufferDirect(o,null,l,v,n,m)}}else if(d.visible){var g=O(n,d,s,u);e.renderBufferDirect(o,null,l,g,n,null)}}for(var _=n.children,b=0,x=_.length;b<x;b++)k(_[b],r,o,s,u)}}this.render=function(t,n,r){if(!1!==R.enabled&&(!1!==R.autoUpdate||!1!==R.needsUpdate)&&0!==t.length){var o=e.getRenderTarget(),u=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),l=e.state;l.setBlending(a.NoBlending),l.buffers.color.setClear(1,1,1,1),l.buffers.depth.setTest(!0),l.setScissorTest(!1);for(var d=P!==a.VSMShadowMap&&this.type===a.VSMShadowMap,h=P===a.VSMShadowMap&&this.type!==a.VSMShadowMap,f=0,p=t.length;f<p;f++){var m=t[f],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){g.copy(y.mapSize);var v=y.getFrameExtents();if(g.multiply(v),_.copy(y.mapSize),(g.x>w||g.y>w)&&(g.x>w&&(_.x=Math.floor(w/v.x),g.x=_.x*v.x,y.mapSize.x=_.x),g.y>w&&(_.y=Math.floor(w/v.y),g.y=_.y*v.y,y.mapSize.y=_.y)),null===y.map||!0===d||!0===h){var x=this.type!==a.VSMShadowMap?{minFilter:a.NearestFilter,magFilter:a.NearestFilter}:{};null!==y.map&&y.map.dispose(),y.map=new s.WebGLRenderTarget(g.x,g.y,x),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),C=0;C<M;C++){var S=y.getViewport(C);b.set(_.x*S.x,_.y*S.y,_.x*S.z,_.y*S.w),l.viewport(b),y.updateMatrices(m,C),i=y.getFrustum(),k(n,r,y.camera,m,this.type)}!0!==y.isPointLightShadow&&this.type===a.VSMShadowMap&&L(y,r),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}P=this.type,R.needsUpdate=!1,e.setRenderTarget(o,u,c)}}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshDepthMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(223);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=d.BasicDepthPacking,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(l.Material);t.MeshDepthMaterial=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshDistanceMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(l.Material);t.MeshDistanceMaterial=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertex=t.fragment=void 0;var r="\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n";t.vertex=r;var i="\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tconst float samples = float( VSM_SAMPLES );\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\n\t\t#ifdef HORIZONTAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n";t.fragment=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLState=s;var i=r(n(11)),o=n(223),a=n(240);function s(e,t,n){var r,s,u=n.isWebGL2;function c(){var t=!1,n=new a.Vector4,r=null,i=new a.Vector4(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function l(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?Y(e.DEPTH_TEST):J(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case o.NeverDepth:e.depthFunc(e.NEVER);break;case o.AlwaysDepth:e.depthFunc(e.ALWAYS);break;case o.LessDepth:e.depthFunc(e.LESS);break;case o.LessEqualDepth:e.depthFunc(e.LEQUAL);break;case o.EqualDepth:e.depthFunc(e.EQUAL);break;case o.GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case o.GreaterDepth:e.depthFunc(e.GREATER);break;case o.NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function d(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(n){t||(n?Y(e.STENCIL_TEST):J(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}var h=new c,f=new l,p=new d,m=new WeakMap,y=new WeakMap,v={},g={},_=new WeakMap,b=[],x=null,M=!1,C=null,w=null,S=null,T=null,N=null,E=null,A=null,R=!1,P=null,L=null,O=null,k=null,I=null,D=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),U=!1,B=0,F=e.getParameter(e.VERSION);-1!==F.indexOf("WebGL")?(B=parseFloat(/^WebGL (\d)/.exec(F)[1]),U=B>=1):-1!==F.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),U=B>=2);var G=null,j={},z=e.getParameter(e.SCISSOR_BOX),V=e.getParameter(e.VIEWPORT),H=(new a.Vector4).fromArray(z),W=(new a.Vector4).fromArray(V);function q(t,n,r,i){var o=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<r;s++)!u||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,o);return a}var X={};function Y(t){!0!==v[t]&&(e.enable(t),v[t]=!0)}function J(t){!1!==v[t]&&(e.disable(t),v[t]=!1)}function K(t,n){return g[t]!==n&&(e.bindFramebuffer(t,n),g[t]=n,u&&(t===e.DRAW_FRAMEBUFFER&&(g[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(g[e.DRAW_FRAMEBUFFER]=n)),!0)}function $(r,i){var o=b,a=!1;if(r)if(o=_.get(i),void 0===o&&(o=[],_.set(i,o)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(o.length!==s.length||o[0]!==e.COLOR_ATTACHMENT0){for(var u=0,c=s.length;u<c;u++)o[u]=e.COLOR_ATTACHMENT0+u;o.length=s.length,a=!0}}else o[0]!==e.COLOR_ATTACHMENT0&&(o[0]=e.COLOR_ATTACHMENT0,a=!0);else o[0]!==e.BACK&&(o[0]=e.BACK,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function Z(t){return x!==t&&(e.useProgram(t),x=t,!0)}X[e.TEXTURE_2D]=q(e.TEXTURE_2D,e.TEXTURE_2D,1),X[e.TEXTURE_CUBE_MAP]=q(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),u&&(X[e.TEXTURE_2D_ARRAY]=q(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),X[e.TEXTURE_3D]=q(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),h.setClear(0,0,0,1),f.setClear(1),p.setClear(0),Y(e.DEPTH_TEST),f.setFunc(o.LessEqualDepth),ie(!1),oe(o.CullFaceBack),Y(e.CULL_FACE),ne(o.NoBlending);var Q=(r={},(0,i.default)(r,o.AddEquation,e.FUNC_ADD),(0,i.default)(r,o.SubtractEquation,e.FUNC_SUBTRACT),(0,i.default)(r,o.ReverseSubtractEquation,e.FUNC_REVERSE_SUBTRACT),r);if(u)Q[o.MinEquation]=e.MIN,Q[o.MaxEquation]=e.MAX;else{var ee=t.get("EXT_blend_minmax");null!==ee&&(Q[o.MinEquation]=ee.MIN_EXT,Q[o.MaxEquation]=ee.MAX_EXT)}var te=(s={},(0,i.default)(s,o.ZeroFactor,e.ZERO),(0,i.default)(s,o.OneFactor,e.ONE),(0,i.default)(s,o.SrcColorFactor,e.SRC_COLOR),(0,i.default)(s,o.SrcAlphaFactor,e.SRC_ALPHA),(0,i.default)(s,o.SrcAlphaSaturateFactor,e.SRC_ALPHA_SATURATE),(0,i.default)(s,o.DstColorFactor,e.DST_COLOR),(0,i.default)(s,o.DstAlphaFactor,e.DST_ALPHA),(0,i.default)(s,o.OneMinusSrcColorFactor,e.ONE_MINUS_SRC_COLOR),(0,i.default)(s,o.OneMinusSrcAlphaFactor,e.ONE_MINUS_SRC_ALPHA),(0,i.default)(s,o.OneMinusDstColorFactor,e.ONE_MINUS_DST_COLOR),(0,i.default)(s,o.OneMinusDstAlphaFactor,e.ONE_MINUS_DST_ALPHA),s);function ne(t,n,r,i,a,s,u,c){if(t!==o.NoBlending){if(!1===M&&(Y(e.BLEND),M=!0),t===o.CustomBlending)a=a||n,s=s||r,u=u||i,n===w&&a===N||(e.blendEquationSeparate(Q[n],Q[a]),w=n,N=a),r===S&&i===T&&s===E&&u===A||(e.blendFuncSeparate(te[r],te[i],te[s],te[u]),S=r,T=i,E=s,A=u),C=t,R=!1;else if(t!==C||c!==R){if(w===o.AddEquation&&N===o.AddEquation||(e.blendEquation(e.FUNC_ADD),w=o.AddEquation,N=o.AddEquation),c)switch(t){case o.NormalBlending:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case o.AdditiveBlending:e.blendFunc(e.ONE,e.ONE);break;case o.SubtractiveBlending:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case o.MultiplyBlending:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case o.NormalBlending:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case o.AdditiveBlending:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case o.SubtractiveBlending:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case o.MultiplyBlending:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}S=null,T=null,E=null,A=null,C=t,R=c}}else!0===M&&(J(e.BLEND),M=!1)}function re(t,n){t.side===o.DoubleSide?J(e.CULL_FACE):Y(e.CULL_FACE);var r=t.side===o.BackSide;n&&(r=!r),ie(r),t.blending===o.NormalBlending&&!1===t.transparent?ne(o.NoBlending):ne(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),f.setFunc(t.depthFunc),f.setTest(t.depthTest),f.setMask(t.depthWrite),h.setMask(t.colorWrite);var i=t.stencilWrite;p.setTest(i),i&&(p.setMask(t.stencilWriteMask),p.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),p.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),se(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Y(e.SAMPLE_ALPHA_TO_COVERAGE):J(e.SAMPLE_ALPHA_TO_COVERAGE)}function ie(t){P!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),P=t)}function oe(t){t!==o.CullFaceNone?(Y(e.CULL_FACE),t!==L&&(t===o.CullFaceBack?e.cullFace(e.BACK):t===o.CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):J(e.CULL_FACE),L=t}function ae(t){t!==O&&(U&&e.lineWidth(t),O=t)}function se(t,n,r){t?(Y(e.POLYGON_OFFSET_FILL),k===n&&I===r||(e.polygonOffset(n,r),k=n,I=r)):J(e.POLYGON_OFFSET_FILL)}function ue(t){t?Y(e.SCISSOR_TEST):J(e.SCISSOR_TEST)}function ce(t){void 0===t&&(t=e.TEXTURE0+D-1),G!==t&&(e.activeTexture(t),G=t)}function le(t,n,r){void 0===r&&(r=null===G?e.TEXTURE0+D-1:G);var i=j[r];void 0===i&&(i={type:void 0,texture:void 0},j[r]=i),i.type===t&&i.texture===n||(G!==r&&(e.activeTexture(r),G=r),e.bindTexture(t,n||X[t]),i.type=t,i.texture=n)}function de(){var t=j[G];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function he(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function fe(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function pe(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function me(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ye(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ve(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ge(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function _e(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function be(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function xe(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Me(t){!1===H.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),H.copy(t))}function Ce(t){!1===W.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),W.copy(t))}function we(t,n){var r=y.get(n);void 0===r&&(r=new WeakMap,y.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))}function Se(t,n){var r=y.get(n),i=r.get(t);m.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),m.set(n,i))}function Te(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===u&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),v={},G=null,j={},g={},_=new WeakMap,b=[],x=null,M=!1,C=null,w=null,S=null,T=null,N=null,E=null,A=null,R=!1,P=null,L=null,O=null,k=null,I=null,H.set(0,0,e.canvas.width,e.canvas.height),W.set(0,0,e.canvas.width,e.canvas.height),h.reset(),f.reset(),p.reset()}return{buffers:{color:h,depth:f,stencil:p},enable:Y,disable:J,bindFramebuffer:K,drawBuffers:$,useProgram:Z,setBlending:ne,setMaterial:re,setFlipSided:ie,setCullFace:oe,setLineWidth:ae,setPolygonOffset:se,setScissorTest:ue,activeTexture:ce,bindTexture:le,unbindTexture:de,compressedTexImage2D:he,compressedTexImage3D:fe,texImage2D:be,texImage3D:xe,updateUBOMapping:we,uniformBlockBinding:Se,texStorage2D:ge,texStorage3D:_e,texSubImage2D:pe,texSubImage3D:me,compressedTexSubImage2D:ye,compressedTexSubImage3D:ve,scissor:Me,viewport:Ce,reset:Te}}},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLTextures=h;var o=r(n(11)),a=n(223),s=d(n(233)),u=n(237),c=n(238);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function h(e,t,n,r,i,l,d){var h,f,p,m,y=i.isWebGL2,v=i.maxTextures,g=i.maxCubemapSize,_=i.maxTextureSize,b=i.maxSamples,x=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,M="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap,w=new WeakMap,S=!1;try{S="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(fe){}function T(e,t){return S?new OffscreenCanvas(e,t):(0,c.createElementNS)("canvas")}function N(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?s.floorPowerOfTwo:Math.floor,a=o(i*e.width),u=o(i*e.height);void 0===m&&(m=T(a,u));var c=n?T(a,u):m;c.width=a,c.height=u;var l=c.getContext("2d");return l.drawImage(e,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+u+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function E(e){return s.isPowerOfTwo(e.width)&&s.isPowerOfTwo(e.height)}function A(e){return!y&&(e.wrapS!==a.ClampToEdgeWrapping||e.wrapT!==a.ClampToEdgeWrapping||e.minFilter!==a.NearestFilter&&e.minFilter!==a.LinearFilter)}function R(e,t){return e.generateMipmaps&&t&&e.minFilter!==a.NearestFilter&&e.minFilter!==a.LinearFilter}function P(t){e.generateMipmap(t)}function L(n,r,i,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===y)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var u=r;return r===e.RED&&(i===e.FLOAT&&(u=e.R32F),i===e.HALF_FLOAT&&(u=e.R16F),i===e.UNSIGNED_BYTE&&(u=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(u=e.R8UI),i===e.UNSIGNED_SHORT&&(u=e.R16UI),i===e.UNSIGNED_INT&&(u=e.R32UI),i===e.BYTE&&(u=e.R8I),i===e.SHORT&&(u=e.R16I),i===e.INT&&(u=e.R32I)),r===e.RG&&(i===e.FLOAT&&(u=e.RG32F),i===e.HALF_FLOAT&&(u=e.RG16F),i===e.UNSIGNED_BYTE&&(u=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(u=e.RGBA32F),i===e.HALF_FLOAT&&(u=e.RGBA16F),i===e.UNSIGNED_BYTE&&(u=o===a.SRGBColorSpace&&!1===s?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(u=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(u=e.RGB5_A1)),u!==e.R16F&&u!==e.R32F&&u!==e.RG16F&&u!==e.RG32F&&u!==e.RGBA16F&&u!==e.RGBA32F||t.get("EXT_color_buffer_float"),u}function O(e,t,n){return!0===R(e,n)||e.isFramebufferTexture&&e.minFilter!==a.NearestFilter&&e.minFilter!==a.LinearFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(t){return t===a.NearestFilter||t===a.NearestMipmapNearestFilter||t===a.NearestMipmapLinearFilter?e.NEAREST:e.LINEAR}function I(e){var t=e.target;t.removeEventListener("dispose",I),U(t),t.isVideoTexture&&C.delete(t)}function D(e){var t=e.target;t.removeEventListener("dispose",D),F(t)}function U(e){var t=r.get(e);if(void 0!==t.__webglInit){var n=e.source,i=w.get(n);if(i){var o=i[t.__cacheKey];o.usedTimes--,0===o.usedTimes&&B(e),0===Object.keys(i).length&&w.delete(n)}r.remove(e)}}function B(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source,o=w.get(i);delete o[n.__cacheKey],d.memory.textures--}function F(t){var n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),d.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var a=0;a<6;a++){if(Array.isArray(i.__webglFramebuffer[a]))for(var s=0;s<i.__webglFramebuffer[a].length;s++)e.deleteFramebuffer(i.__webglFramebuffer[a][s]);else e.deleteFramebuffer(i.__webglFramebuffer[a]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[a])}else{if(Array.isArray(i.__webglFramebuffer))for(var u=0;u<i.__webglFramebuffer.length;u++)e.deleteFramebuffer(i.__webglFramebuffer[u]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var c=0;c<i.__webglColorRenderbuffer.length;c++)i.__webglColorRenderbuffer[c]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[c]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var l=0,h=n.length;l<h;l++){var f=r.get(n[l]);f.__webglTexture&&(e.deleteTexture(f.__webglTexture),d.memory.textures--),r.remove(n[l])}r.remove(n),r.remove(t)}var G=0;function j(){G=0}function z(){var e=G;return e>=v&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+v),G+=1,e}function V(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}function H(t,i){var o=r.get(t);if(t.isVideoTexture&&de(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){var a=t.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void Q(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}function W(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?Q(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)}function q(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?Q(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)}function X(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?ee(o,t,i):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+i)}var Y=(h={},(0,o.default)(h,a.RepeatWrapping,e.REPEAT),(0,o.default)(h,a.ClampToEdgeWrapping,e.CLAMP_TO_EDGE),(0,o.default)(h,a.MirroredRepeatWrapping,e.MIRRORED_REPEAT),h),J=(f={},(0,o.default)(f,a.NearestFilter,e.NEAREST),(0,o.default)(f,a.NearestMipmapNearestFilter,e.NEAREST_MIPMAP_NEAREST),(0,o.default)(f,a.NearestMipmapLinearFilter,e.NEAREST_MIPMAP_LINEAR),(0,o.default)(f,a.LinearFilter,e.LINEAR),(0,o.default)(f,a.LinearMipmapNearestFilter,e.LINEAR_MIPMAP_NEAREST),(0,o.default)(f,a.LinearMipmapLinearFilter,e.LINEAR_MIPMAP_LINEAR),f),K=(p={},(0,o.default)(p,a.NeverCompare,e.NEVER),(0,o.default)(p,a.AlwaysCompare,e.ALWAYS),(0,o.default)(p,a.LessCompare,e.LESS),(0,o.default)(p,a.LessEqualCompare,e.LEQUAL),(0,o.default)(p,a.EqualCompare,e.EQUAL),(0,o.default)(p,a.GreaterEqualCompare,e.GEQUAL),(0,o.default)(p,a.GreaterCompare,e.GREATER),(0,o.default)(p,a.NotEqualCompare,e.NOTEQUAL),p);function $(n,o,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,Y[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,Y[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,Y[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,J[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,J[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===a.ClampToEdgeWrapping&&o.wrapT===a.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,k(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,k(o.minFilter)),o.minFilter!==a.NearestFilter&&o.minFilter!==a.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,K[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){var u=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===a.NearestFilter)return;if(o.minFilter!==a.NearestMipmapLinearFilter&&o.minFilter!==a.LinearMipmapLinearFilter)return;if(o.type===a.FloatType&&!1===t.has("OES_texture_float_linear"))return;if(!1===y&&o.type===a.HalfFloatType&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function Z(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",I));var i=n.source,o=w.get(i);void 0===o&&(o={},w.set(i,o));var a=V(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},d.memory.textures++,r=!0),o[a].usedTimes++;var s=o[t.__cacheKey];void 0!==s&&(o[t.__cacheKey].usedTimes--,0===s.usedTimes&&B(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return r}function Q(t,i,o){var s=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(s=e.TEXTURE_3D);var u=Z(t,i),c=i.source;n.bindTexture(s,t.__webglTexture,e.TEXTURE0+o);var d=r.get(c);if(c.version!==d.__version||!0===u){n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);var h=A(i)&&!1===E(i.image),f=N(i.image,h,!1,_);f=he(i,f);var p,m=E(f)||y,v=l.convert(i.format,i.colorSpace),g=l.convert(i.type),b=L(i.internalFormat,v,g,i.colorSpace);$(s,i,m);var x=i.mipmaps,M=y&&!0!==i.isVideoTexture,C=void 0===d.__version||!0===u,w=O(i,f,m);if(i.isDepthTexture)b=e.DEPTH_COMPONENT,y?b=i.type===a.FloatType?e.DEPTH_COMPONENT32F:i.type===a.UnsignedIntType?e.DEPTH_COMPONENT24:i.type===a.UnsignedInt248Type?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===a.FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===a.DepthFormat&&b===e.DEPTH_COMPONENT&&i.type!==a.UnsignedShortType&&i.type!==a.UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=a.UnsignedIntType,g=l.convert(i.type)),i.format===a.DepthStencilFormat&&b===e.DEPTH_COMPONENT&&(b=e.DEPTH_STENCIL,i.type!==a.UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=a.UnsignedInt248Type,g=l.convert(i.type))),C&&(M?n.texStorage2D(e.TEXTURE_2D,1,b,f.width,f.height):n.texImage2D(e.TEXTURE_2D,0,b,f.width,f.height,0,v,g,null));else if(i.isDataTexture)if(x.length>0&&m){M&&C&&n.texStorage2D(e.TEXTURE_2D,w,b,x[0].width,x[0].height);for(var S=0,T=x.length;S<T;S++)p=x[S],M?n.texSubImage2D(e.TEXTURE_2D,S,0,0,p.width,p.height,v,g,p.data):n.texImage2D(e.TEXTURE_2D,S,b,p.width,p.height,0,v,g,p.data);i.generateMipmaps=!1}else M?(C&&n.texStorage2D(e.TEXTURE_2D,w,b,f.width,f.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,f.width,f.height,v,g,f.data)):n.texImage2D(e.TEXTURE_2D,0,b,f.width,f.height,0,v,g,f.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){M&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,w,b,x[0].width,x[0].height,f.depth);for(var k=0,I=x.length;k<I;k++)p=x[k],i.format!==a.RGBAFormat?null!==v?M?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,k,0,0,0,p.width,p.height,f.depth,v,p.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,k,b,p.width,p.height,f.depth,0,p.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage3D(e.TEXTURE_2D_ARRAY,k,0,0,0,p.width,p.height,f.depth,v,g,p.data):n.texImage3D(e.TEXTURE_2D_ARRAY,k,b,p.width,p.height,f.depth,0,v,g,p.data)}else{M&&C&&n.texStorage2D(e.TEXTURE_2D,w,b,x[0].width,x[0].height);for(var D=0,U=x.length;D<U;D++)p=x[D],i.format!==a.RGBAFormat?null!==v?M?n.compressedTexSubImage2D(e.TEXTURE_2D,D,0,0,p.width,p.height,v,p.data):n.compressedTexImage2D(e.TEXTURE_2D,D,b,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage2D(e.TEXTURE_2D,D,0,0,p.width,p.height,v,g,p.data):n.texImage2D(e.TEXTURE_2D,D,b,p.width,p.height,0,v,g,p.data)}else if(i.isDataArrayTexture)M?(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,w,b,f.width,f.height,f.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,v,g,f.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,b,f.width,f.height,f.depth,0,v,g,f.data);else if(i.isData3DTexture)M?(C&&n.texStorage3D(e.TEXTURE_3D,w,b,f.width,f.height,f.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,v,g,f.data)):n.texImage3D(e.TEXTURE_3D,0,b,f.width,f.height,f.depth,0,v,g,f.data);else if(i.isFramebufferTexture){if(C)if(M)n.texStorage2D(e.TEXTURE_2D,w,b,f.width,f.height);else for(var B=f.width,F=f.height,G=0;G<w;G++)n.texImage2D(e.TEXTURE_2D,G,b,B,F,0,v,g,null),B>>=1,F>>=1}else if(x.length>0&&m){M&&C&&n.texStorage2D(e.TEXTURE_2D,w,b,x[0].width,x[0].height);for(var j=0,z=x.length;j<z;j++)p=x[j],M?n.texSubImage2D(e.TEXTURE_2D,j,0,0,v,g,p):n.texImage2D(e.TEXTURE_2D,j,b,v,g,p);i.generateMipmaps=!1}else M?(C&&n.texStorage2D(e.TEXTURE_2D,w,b,f.width,f.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,v,g,f)):n.texImage2D(e.TEXTURE_2D,0,b,v,g,f);R(i,m)&&P(s),d.__version=c.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function ee(t,i,o){if(6===i.image.length){var s=Z(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);var c=r.get(u);if(u.version!==c.__version||!0===s){n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);for(var d=i.isCompressedTexture||i.image[0].isCompressedTexture,h=i.image[0]&&i.image[0].isDataTexture,f=[],p=0;p<6;p++)f[p]=d||h?h?i.image[p].image:i.image[p]:N(i.image[p],!1,!0,g),f[p]=he(i,f[p]);var m,v=f[0],_=E(v)||y,b=l.convert(i.format,i.colorSpace),x=l.convert(i.type),M=L(i.internalFormat,b,x,i.colorSpace),C=y&&!0!==i.isVideoTexture,w=void 0===c.__version||!0===s,S=O(i,v,_);if($(e.TEXTURE_CUBE_MAP,i,_),d){C&&w&&n.texStorage2D(e.TEXTURE_CUBE_MAP,S,M,v.width,v.height);for(var T=0;T<6;T++){m=f[T].mipmaps;for(var A=0;A<m.length;A++){var k=m[A];i.format!==a.RGBAFormat?null!==b?C?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+T,A,0,0,k.width,k.height,b,k.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+T,A,M,k.width,k.height,0,k.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+T,A,0,0,k.width,k.height,b,x,k.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+T,A,M,k.width,k.height,0,b,x,k.data)}}}else{m=i.mipmaps,C&&w&&(m.length>0&&S++,n.texStorage2D(e.TEXTURE_CUBE_MAP,S,M,f[0].width,f[0].height));for(var I=0;I<6;I++)if(h){C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,0,0,f[I].width,f[I].height,b,x,f[I].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,M,f[I].width,f[I].height,0,b,x,f[I].data);for(var D=0;D<m.length;D++){var U=m[D],B=U.image[I].image;C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,D+1,0,0,B.width,B.height,b,x,B.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,D+1,M,B.width,B.height,0,b,x,B.data)}}else{C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,0,0,b,x,f[I]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,M,b,x,f[I]);for(var F=0;F<m.length;F++){var G=m[F];C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,F+1,0,0,b,x,G.image[I]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+I,F+1,M,b,x,G.image[I])}}}R(i,_)&&P(e.TEXTURE_CUBE_MAP),c.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}}function te(t,i,o,a,s,u){var c=l.convert(o.format,o.colorSpace),d=l.convert(o.type),h=L(o.internalFormat,c,d,o.colorSpace),f=r.get(i);if(!f.__hasExternalTextures){var p=Math.max(1,i.width>>u),m=Math.max(1,i.height>>u);s===e.TEXTURE_3D||s===e.TEXTURE_2D_ARRAY?n.texImage3D(s,u,h,p,m,i.depth,0,c,d,null):n.texImage2D(s,u,h,p,m,0,c,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),le(i)?x.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,s,r.get(o).__webglTexture,0,ce(i)):(s===e.TEXTURE_2D||s>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&s<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(o).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function ne(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){var i=e.DEPTH_COMPONENT16;if(r||le(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===a.FloatType?i=e.DEPTH_COMPONENT32F:o.type===a.UnsignedIntType&&(i=e.DEPTH_COMPONENT24));var s=ce(n);le(n)?x.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,s,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,s,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=ce(n);r&&!1===le(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,e.DEPTH24_STENCIL8,n.width,n.height):le(n)?x.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else for(var c=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],d=0;d<c.length;d++){var h=c[d],f=l.convert(h.format,h.colorSpace),p=l.convert(h.type),m=L(h.internalFormat,f,p,h.colorSpace),y=ce(n);r&&!1===le(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,y,m,n.width,n.height):le(n)?x.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,y,m,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,m,n.width,n.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function re(t,i){var o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),H(i.depthTexture,0);var s=r.get(i.depthTexture).__webglTexture,u=ce(i);if(i.depthTexture.format===a.DepthFormat)le(i)?x.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,u):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==a.DepthStencilFormat)throw new Error("Unknown depthTexture format");le(i)?x.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,u):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function ie(t){var i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");re(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=e.createRenderbuffer(),ne(i.__webglDepthbuffer[a],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),ne(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function oe(t,n,i){var o=r.get(t);void 0!==n&&te(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&ie(t)}function ae(t){var o=t.texture,a=r.get(t),s=r.get(o);t.addEventListener("dispose",D),!0!==t.isWebGLMultipleRenderTargets&&(void 0===s.__webglTexture&&(s.__webglTexture=e.createTexture()),s.__version=o.version,d.memory.textures++);var u=!0===t.isWebGLCubeRenderTarget,c=!0===t.isWebGLMultipleRenderTargets,h=E(t)||y;if(u){a.__webglFramebuffer=[];for(var f=0;f<6;f++)if(y&&o.mipmaps&&o.mipmaps.length>0){a.__webglFramebuffer[f]=[];for(var p=0;p<o.mipmaps.length;p++)a.__webglFramebuffer[f][p]=e.createFramebuffer()}else a.__webglFramebuffer[f]=e.createFramebuffer()}else{if(y&&o.mipmaps&&o.mipmaps.length>0){a.__webglFramebuffer=[];for(var m=0;m<o.mipmaps.length;m++)a.__webglFramebuffer[m]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(c)if(i.drawBuffers)for(var v=t.texture,g=0,_=v.length;g<_;g++){var b=r.get(v[g]);void 0===b.__webglTexture&&(b.__webglTexture=e.createTexture(),d.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(y&&t.samples>0&&!1===le(t)){var x=c?o:[o];a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(var M=0;M<x.length;M++){var C=x[M];a.__webglColorRenderbuffer[M]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[M]);var w=l.convert(C.format,C.colorSpace),S=l.convert(C.type),T=L(C.internalFormat,w,S,C.colorSpace,!0===t.isXRRenderTarget),N=ce(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,N,T,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+M,e.RENDERBUFFER,a.__webglColorRenderbuffer[M])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),ne(a.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture),$(e.TEXTURE_CUBE_MAP,o,h);for(var A=0;A<6;A++)if(y&&o.mipmaps&&o.mipmaps.length>0)for(var O=0;O<o.mipmaps.length;O++)te(a.__webglFramebuffer[A][O],t,o,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+A,O);else te(a.__webglFramebuffer[A],t,o,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+A,0);R(o,h)&&P(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(c){for(var k=t.texture,I=0,U=k.length;I<U;I++){var B=k[I],F=r.get(B);n.bindTexture(e.TEXTURE_2D,F.__webglTexture),$(e.TEXTURE_2D,B,h),te(a.__webglFramebuffer,t,B,e.COLOR_ATTACHMENT0+I,e.TEXTURE_2D,0),R(B,h)&&P(e.TEXTURE_2D)}n.unbindTexture()}else{var G=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(y?G=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(G,s.__webglTexture),$(G,o,h),y&&o.mipmaps&&o.mipmaps.length>0)for(var j=0;j<o.mipmaps.length;j++)te(a.__webglFramebuffer[j],t,o,e.COLOR_ATTACHMENT0,G,j);else te(a.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0,G,0);R(o,h)&&P(G),n.unbindTexture()}t.depthBuffer&&ie(t)}function se(t){for(var i=E(t)||y,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=0,s=o.length;a<s;a++){var u=o[a];if(R(u,i)){var c=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,l=r.get(u).__webglTexture;n.bindTexture(c,l),P(c),n.unbindTexture()}}}function ue(t){if(y&&t.samples>0&&!1===le(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height,s=e.COLOR_BUFFER_BIT,u=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var h=0;h<i.length;h++)n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,l.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,l.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,l.__webglFramebuffer);for(var f=0;f<i.length;f++){u.push(e.COLOR_ATTACHMENT0+f),t.depthBuffer&&u.push(c);var p=void 0!==l.__ignoreDepthValues&&l.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,l.__webglColorRenderbuffer[f]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){var m=r.get(i[f]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,e.NEAREST),M&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,u)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(var v=0;v<i.length;v++){n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+v,e.RENDERBUFFER,l.__webglColorRenderbuffer[v]);var g=r.get(i[v]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,l.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+v,e.TEXTURE_2D,g,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,l.__webglMultisampledFramebuffer)}}function ce(e){return Math.min(b,e.samples)}function le(e){var n=r.get(e);return y&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function de(e){var t=d.render.frame;C.get(e)!==t&&(C.set(e,t),e.update())}function he(e,n){var r=e.colorSpace,i=e.format,o=e.type;return!0===e.isCompressedTexture||e.format===a._SRGBAFormat||r!==a.LinearSRGBColorSpace&&r!==a.NoColorSpace&&(r===a.SRGBColorSpace?!1===y?!0===t.has("EXT_sRGB")&&i===a.RGBAFormat?(e.format=a._SRGBAFormat,e.minFilter=a.LinearFilter,e.generateMipmaps=!1):n=u.ImageUtils.sRGBToLinear(n):i===a.RGBAFormat&&o===a.UnsignedByteType||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=z,this.resetTextureUnits=j,this.setTexture2D=H,this.setTexture2DArray=W,this.setTexture3D=q,this.setTextureCube=X,this.rebindTextures=oe,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=se,this.updateMultisampleRenderTarget=ue,this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=te,this.useMultisampledRTT=le}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUtils=i;var r=n(223);function i(e,t,n){var i=n.isWebGL2;function o(n){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.NoColorSpace;if(n===r.UnsignedByteType)return e.UNSIGNED_BYTE;if(n===r.UnsignedShort4444Type)return e.UNSIGNED_SHORT_4_4_4_4;if(n===r.UnsignedShort5551Type)return e.UNSIGNED_SHORT_5_5_5_1;if(n===r.ByteType)return e.BYTE;if(n===r.ShortType)return e.SHORT;if(n===r.UnsignedShortType)return e.UNSIGNED_SHORT;if(n===r.IntType)return e.INT;if(n===r.UnsignedIntType)return e.UNSIGNED_INT;if(n===r.FloatType)return e.FLOAT;if(n===r.HalfFloatType)return i?e.HALF_FLOAT:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===r.AlphaFormat)return e.ALPHA;if(n===r.RGBAFormat)return e.RGBA;if(n===r.LuminanceFormat)return e.LUMINANCE;if(n===r.LuminanceAlphaFormat)return e.LUMINANCE_ALPHA;if(n===r.DepthFormat)return e.DEPTH_COMPONENT;if(n===r.DepthStencilFormat)return e.DEPTH_STENCIL;if(n===r._SRGBAFormat)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===r.RedFormat)return e.RED;if(n===r.RedIntegerFormat)return e.RED_INTEGER;if(n===r.RGFormat)return e.RG;if(n===r.RGIntegerFormat)return e.RG_INTEGER;if(n===r.RGBAIntegerFormat)return e.RGBA_INTEGER;if(n===r.RGB_S3TC_DXT1_Format||n===r.RGBA_S3TC_DXT1_Format||n===r.RGBA_S3TC_DXT3_Format||n===r.RGBA_S3TC_DXT5_Format)if(a===r.SRGBColorSpace){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===r.RGB_S3TC_DXT1_Format)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT1_Format)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT3_Format)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===r.RGBA_S3TC_DXT5_Format)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===r.RGB_S3TC_DXT1_Format)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT1_Format)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT3_Format)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===r.RGBA_S3TC_DXT5_Format)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===r.RGB_PVRTC_4BPPV1_Format||n===r.RGB_PVRTC_2BPPV1_Format||n===r.RGBA_PVRTC_4BPPV1_Format||n===r.RGBA_PVRTC_2BPPV1_Format){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===r.RGB_PVRTC_4BPPV1_Format)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===r.RGB_PVRTC_2BPPV1_Format)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===r.RGBA_PVRTC_4BPPV1_Format)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===r.RGBA_PVRTC_2BPPV1_Format)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===r.RGB_ETC1_Format)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===r.RGB_ETC2_Format||n===r.RGBA_ETC2_EAC_Format){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===r.RGB_ETC2_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===r.RGBA_ETC2_EAC_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===r.RGBA_ASTC_4x4_Format||n===r.RGBA_ASTC_5x4_Format||n===r.RGBA_ASTC_5x5_Format||n===r.RGBA_ASTC_6x5_Format||n===r.RGBA_ASTC_6x6_Format||n===r.RGBA_ASTC_8x5_Format||n===r.RGBA_ASTC_8x6_Format||n===r.RGBA_ASTC_8x8_Format||n===r.RGBA_ASTC_10x5_Format||n===r.RGBA_ASTC_10x6_Format||n===r.RGBA_ASTC_10x8_Format||n===r.RGBA_ASTC_10x10_Format||n===r.RGBA_ASTC_12x10_Format||n===r.RGBA_ASTC_12x12_Format){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===r.RGBA_ASTC_4x4_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===r.RGBA_ASTC_5x4_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===r.RGBA_ASTC_5x5_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===r.RGBA_ASTC_6x5_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===r.RGBA_ASTC_6x6_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===r.RGBA_ASTC_8x5_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===r.RGBA_ASTC_8x6_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===r.RGBA_ASTC_8x8_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===r.RGBA_ASTC_10x5_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===r.RGBA_ASTC_10x6_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===r.RGBA_ASTC_10x8_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===r.RGBA_ASTC_10x10_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===r.RGBA_ASTC_12x10_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===r.RGBA_ASTC_12x12_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===r.RGBA_BPTC_Format){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===r.RGBA_BPTC_Format)return a===r.SRGBColorSpace?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===r.RED_RGTC1_Format||n===r.SIGNED_RED_RGTC1_Format||n===r.RED_GREEN_RGTC2_Format||n===r.SIGNED_RED_GREEN_RGTC2_Format){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===r.RGBA_BPTC_Format)return o.COMPRESSED_RED_RGTC1_EXT;if(n===r.SIGNED_RED_RGTC1_Format)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===r.RED_GREEN_RGTC2_Format)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===r.SIGNED_RED_GREEN_RGTC2_Format)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===r.UnsignedInt248Type?i?e.UNSIGNED_INT_24_8:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}return{convert:o}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebXRManager=void 0;var i=r(n(189)),o=r(n(191)),a=r(n(24)),s=r(n(23)),u=r(n(227)),c=r(n(225)),l=r(n(226)),d=r(n(228)),h=n(437),f=n(231),p=n(271),m=n(249),y=n(240),v=n(233),g=n(277),_=n(229),b=n(438),x=n(440),M=n(223);function C(e){var t=w();return function(){var n,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){(0,c.default)(n,e);var t=C(n);function n(e,r){var a;(0,s.default)(this,n),a=t.call(this);var c=(0,u.default)(a),l=null,d=1,f=null,C="local-floor",w=1,S=null,T=null,N=null,E=null,A=null,R=null,P=r.getContextAttributes(),L=null,O=null,k=[],I=[],D=new p.PerspectiveCamera;D.layers.enable(1),D.viewport=new y.Vector4;var U=new p.PerspectiveCamera;U.layers.enable(2),U.viewport=new y.Vector4;var B=[D,U],F=new h.ArrayCamera;F.layers.enable(1),F.layers.enable(2);var G=null,j=null;function z(e){var t=I.indexOf(e.inputSource);if(-1!==t){var n=k[t];void 0!==n&&(n.update(e.inputSource,e.frame,S||f),n.dispatchEvent({type:e.type,data:e.inputSource}))}}function V(){l.removeEventListener("select",z),l.removeEventListener("selectstart",z),l.removeEventListener("selectend",z),l.removeEventListener("squeeze",z),l.removeEventListener("squeezestart",z),l.removeEventListener("squeezeend",z),l.removeEventListener("end",V),l.removeEventListener("inputsourceschange",H);for(var t=0;t<k.length;t++){var n=I[t];null!==n&&(I[t]=null,k[t].disconnect(n))}G=null,j=null,e.setRenderTarget(L),A=null,E=null,N=null,l=null,O=null,Z.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function H(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=I.indexOf(n);r>=0&&(I[r]=null,k[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var o=e.added[i],a=I.indexOf(o);if(-1===a){for(var s=0;s<k.length;s++){if(s>=I.length){I.push(o),a=s;break}if(null===I[s]){I[s]=o,a=s;break}}if(-1===a)break}var u=k[a];u&&u.connect(o)}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=k[e];return void 0===t&&(t=new b.WebXRController,k[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=k[e];return void 0===t&&(t=new b.WebXRController,k[e]=t),t.getGripSpace()},a.getHand=function(e){var t=k[e];return void 0===t&&(t=new b.WebXRController,k[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){d=e,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){C=e,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return S||f},a.setReferenceSpace=function(e){S=e},a.getBaseLayer=function(){return null!==E?E:A},a.getBinding=function(){return N},a.getFrame=function(){return R},a.getSession=function(){return l},a.setSession=function(){var t=(0,o.default)(i.default.mark((function t(n){var o,a,s,u,h,p;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l=n,null===l){t.next=25;break}if(L=e.getRenderTarget(),l.addEventListener("select",z),l.addEventListener("selectstart",z),l.addEventListener("selectend",z),l.addEventListener("squeeze",z),l.addEventListener("squeezestart",z),l.addEventListener("squeezeend",z),l.addEventListener("end",V),l.addEventListener("inputsourceschange",H),!0===P.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===l.renderState.layers||!1===e.capabilities.isWebGL2?(o={antialias:void 0!==l.renderState.layers||P.antialias,alpha:!0,depth:P.depth,stencil:P.stencil,framebufferScaleFactor:d},A=new XRWebGLLayer(l,r,o),l.updateRenderState({baseLayer:A}),O=new _.WebGLRenderTarget(A.framebufferWidth,A.framebufferHeight,{format:M.RGBAFormat,type:M.UnsignedByteType,colorSpace:e.outputColorSpace,stencilBuffer:P.stencil})):(a=null,s=null,u=null,P.depth&&(u=P.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,a=P.stencil?M.DepthStencilFormat:M.DepthFormat,s=P.stencil?M.UnsignedInt248Type:M.UnsignedIntType),h={colorFormat:r.RGBA8,depthFormat:u,scaleFactor:d},N=new XRWebGLBinding(l,r),E=N.createProjectionLayer(h),l.updateRenderState({layers:[E]}),O=new _.WebGLRenderTarget(E.textureWidth,E.textureHeight,{format:M.RGBAFormat,type:M.UnsignedByteType,depthTexture:new x.DepthTexture(E.textureWidth,E.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,a),stencilBuffer:P.stencil,colorSpace:e.outputColorSpace,samples:P.antialias?4:0}),p=e.properties.get(O),p.__ignoreDepthValues=E.ignoreDepthValues),O.isXRRenderTarget=!0,this.setFoveation(w),S=null,t.next=20,l.requestReferenceSpace(C);case 20:f=t.sent,Z.setContext(l),Z.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.getEnvironmentBlendMode=function(){if(null!==l)return l.environmentBlendMode};var W=new m.Vector3,q=new m.Vector3;function X(e,t,n){W.setFromMatrixPosition(t.matrixWorld),q.setFromMatrixPosition(n.matrixWorld);var r=W.distanceTo(q),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=a*l,f=a*d,p=r/(-l+d),m=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var y=a+p,v=s+p,g=h-m,_=f+(r-m),b=u*s/v*y,x=c*s/v*y;e.projectionMatrix.makePerspective(g,_,b,x,y,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}function Y(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}function J(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);for(var r=e.children,i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*v.RAD2DEG*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}a.updateCamera=function(e){if(null!==l){F.near=U.near=D.near=e.near,F.far=U.far=D.far=e.far,G===F.near&&j===F.far||(l.updateRenderState({depthNear:F.near,depthFar:F.far}),G=F.near,j=F.far);var t=e.parent,n=F.cameras;Y(F,t);for(var r=0;r<n.length;r++)Y(n[r],t);2===n.length?X(F,D,U):F.projectionMatrix.copy(D.projectionMatrix),J(e,F,t)}},a.getCamera=function(){return F},a.getFoveation=function(){if(null!==E||null!==A)return w},a.setFoveation=function(e){w=e,null!==E&&(E.fixedFoveation=e),null!==A&&void 0!==A.fixedFoveation&&(A.fixedFoveation=e)};var K=null;function $(t,n){if(T=n.getViewerPose(S||f),R=n,null!==T){var r=T.views;null!==A&&(e.setRenderTargetFramebuffer(O,A.framebuffer),e.setRenderTarget(O));var i=!1;r.length!==F.cameras.length&&(F.cameras.length=0,i=!0);for(var o=0;o<r.length;o++){var a=r[o],s=null;if(null!==A)s=A.getViewport(a);else{var u=N.getViewSubImage(E,a);s=u.viewport,0===o&&(e.setRenderTargetTextures(O,u.colorTexture,E.ignoreDepthValues?void 0:u.depthStencilTexture),e.setRenderTarget(O))}var l=B[o];void 0===l&&(l=new p.PerspectiveCamera,l.layers.enable(o),l.viewport=new y.Vector4,B[o]=l),l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.quaternion,l.scale),l.projectionMatrix.fromArray(a.projectionMatrix),l.projectionMatrixInverse.copy(l.projectionMatrix).invert(),l.viewport.set(s.x,s.y,s.width,s.height),0===o&&(F.matrix.copy(l.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),!0===i&&F.cameras.push(l)}}for(var d=0;d<k.length;d++){var h=I[d],m=k[d];null!==h&&void 0!==m&&m.update(h,n,S||f)}K&&K(t,n),n.detectedPlanes&&c.dispatchEvent({type:"planesdetected",data:n}),R=null}var Z=new g.WebGLAnimation;return Z.setAnimationLoop($),a.setAnimationLoop=function(e){K=e},a.dispose=function(){},a}return(0,a.default)(n)}(f.EventDispatcher);t.WebXRManager=S},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayCamera=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(271);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)(this,n),e=t.call(this),e.isArrayCamera=!0,e.cameras=r,e}return(0,i.default)(n)}(c.PerspectiveCamera);t.ArrayCamera=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebXRController=void 0;var i=r(n(23)),o=r(n(24)),a=n(249),s=n(439);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={type:"move"},h=function(){function e(){(0,i.default)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,o.default)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new s.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new s.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new a.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new a.Vector3),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new s.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new a.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new a.Vector3),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=u(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(o){r.e(o)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,o=null,a=this._targetRay,s=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;var l,h=u(e.hand.values());try{for(h.s();!(l=h.n()).done;){var f=l.value,p=t.getJointPose(f,n),m=this._getHandJoint(c,f);null!==p&&(m.matrix.fromArray(p.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=p.radius),m.visible=null!==p}}catch(x){h.e(x)}finally{h.f()}var y=c.joints["index-finger-tip"],v=c.joints["thumb-tip"],g=y.position.distanceTo(v.position),_=.02,b=.005;c.inputState.pinching&&g>_+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&g<=_-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(d)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==c&&(c.visible=null!==o),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new s.Group;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}();t.WebXRController=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(255);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this),e.isGroup=!0,e.type="Group",e}return(0,i.default)(n)}(c.Object3D);t.Group=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DepthTexture=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(232),d=n(223);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e,r,o,a,s,u,c,l,h,f){var p;if((0,i.default)(this,n),f=void 0!==f?f:d.DepthFormat,f!==d.DepthFormat&&f!==d.DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===o&&f===d.DepthFormat&&(o=d.UnsignedIntType),void 0===o&&f===d.DepthStencilFormat&&(o=d.UnsignedInt248Type),p=t.call(this,null,a,s,u,c,l,f,o,h),p.isDepthTexture=!0,p.image={width:e,height:r},p.magFilter=void 0!==c?c:d.NearestFilter,p.minFilter=void 0!==l?l:d.NearestFilter,p.flipY=!1,p.generateMipmaps=!1,p.compareFunction=null,p}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}]),n}(l.Texture);t.DepthTexture=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLMaterials=o;var r=n(223),i=n(267);function o(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function o(t,n){n.color.getRGB(t.fogColor.value,(0,i.getUnlitUniformColorSpace)(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)}function a(e,t,n,r,i){t.isMeshBasicMaterial||t.isMeshLambertMaterial?s(e,t):t.isMeshToonMaterial?(s(e,t),f(e,t)):t.isMeshPhongMaterial?(s(e,t),h(e,t)):t.isMeshStandardMaterial?(s(e,t),p(e,t),t.isMeshPhysicalMaterial&&m(e,t,i)):t.isMeshMatcapMaterial?(s(e,t),y(e,t)):t.isMeshDepthMaterial?s(e,t):t.isMeshDistanceMaterial?(s(e,t),v(e,t)):t.isMeshNormalMaterial?s(e,t):t.isLineBasicMaterial?(u(e,t),t.isLineDashedMaterial&&c(e,t)):t.isPointsMaterial?l(e,t,n,r):t.isSpriteMaterial?d(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function s(i,o){i.opacity.value=o.opacity,o.color&&i.diffuse.value.copy(o.color),o.emissive&&i.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),o.map&&(i.map.value=o.map,n(o.map,i.mapTransform)),o.alphaMap&&(i.alphaMap.value=o.alphaMap,n(o.alphaMap,i.alphaMapTransform)),o.bumpMap&&(i.bumpMap.value=o.bumpMap,n(o.bumpMap,i.bumpMapTransform),i.bumpScale.value=o.bumpScale,o.side===r.BackSide&&(i.bumpScale.value*=-1)),o.normalMap&&(i.normalMap.value=o.normalMap,n(o.normalMap,i.normalMapTransform),i.normalScale.value.copy(o.normalScale),o.side===r.BackSide&&i.normalScale.value.negate()),o.displacementMap&&(i.displacementMap.value=o.displacementMap,n(o.displacementMap,i.displacementMapTransform),i.displacementScale.value=o.displacementScale,i.displacementBias.value=o.displacementBias),o.emissiveMap&&(i.emissiveMap.value=o.emissiveMap,n(o.emissiveMap,i.emissiveMapTransform)),o.specularMap&&(i.specularMap.value=o.specularMap,n(o.specularMap,i.specularMapTransform)),o.alphaTest>0&&(i.alphaTest.value=o.alphaTest);var a=t.get(o).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=o.reflectivity,i.ior.value=o.ior,i.refractionRatio.value=o.refractionRatio),o.lightMap){i.lightMap.value=o.lightMap;var s=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=o.lightMapIntensity*s,n(o.lightMap,i.lightMapTransform)}o.aoMap&&(i.aoMap.value=o.aoMap,i.aoMapIntensity.value=o.aoMapIntensity,n(o.aoMap,i.aoMapTransform))}function u(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}function c(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function l(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function d(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function h(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function f(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function p(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));var i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}function m(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===r.BackSide&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}function y(e,t){t.matcap&&(e.matcap.value=t.matcap)}function v(e,n){var r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}return{refreshFogUniforms:o,refreshMaterialUniforms:a}}},function(e,t,n){"use strict";function r(e,t,n,r){var i={},o={},a=[],s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(e,t){var n=t.program;r.uniformBlockBinding(e,n)}function c(e,n){var a=i[e.id];void 0===a&&(p(e),a=l(e),i[e.id]=a,e.addEventListener("dispose",y));var s=n.program;r.updateUBOMapping(e,s);var u=t.render.frame;o[e.id]!==u&&(h(e),o[e.id]=u)}function l(t){var n=d();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}function d(){for(var e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(t){var n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(var a=0,s=r.length;a<s;a++){var u=r[a];if(!0===f(u,a,o)){for(var c=u.__offset,l=Array.isArray(u.value)?u.value:[u.value],d=0,h=0;h<l.length;h++){var p=l[h],y=m(p);"number"===typeof p?(u.__data[0]=p,e.bufferSubData(e.UNIFORM_BUFFER,c+d,u.__data)):p.isMatrix3?(u.__data[0]=p.elements[0],u.__data[1]=p.elements[1],u.__data[2]=p.elements[2],u.__data[3]=p.elements[0],u.__data[4]=p.elements[3],u.__data[5]=p.elements[4],u.__data[6]=p.elements[5],u.__data[7]=p.elements[0],u.__data[8]=p.elements[6],u.__data[9]=p.elements[7],u.__data[10]=p.elements[8],u.__data[11]=p.elements[0]):(p.toArray(u.__data,d),d+=y.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,c,u.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function f(e,t,n){var r=e.value;if(void 0===n[t]){if("number"===typeof r)n[t]=r;else{for(var i=Array.isArray(r)?r:[r],o=[],a=0;a<i.length;a++)o.push(i[a].clone());n[t]=o}return!0}if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],u=Array.isArray(r)?r:[r],c=0;c<s.length;c++){var l=s[c];if(!1===l.equals(u[c]))return l.copy(u[c]),!0}return!1}function p(e){for(var t=e.uniforms,n=0,r=16,i=0,o=0,a=t.length;o<a;o++){for(var s=t[o],u={boundary:0,storage:0},c=Array.isArray(s.value)?s.value:[s.value],l=0,d=c.length;l<d;l++){var h=c[l],f=m(h);u.boundary+=f.boundary,u.storage+=f.storage}if(s.__data=new Float32Array(u.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,o>0){i=n%r;var p=r-i;0!==i&&p-u.boundary<0&&(n+=r-i,s.__offset=n)}n+=u.storage}return i=n%r,i>0&&(n+=r-i),e.__size=n,e.__cache={},this}function m(e){var t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function y(t){var n=t.target;n.removeEventListener("dispose",y);var r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}function v(){for(var t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}return{bind:u,update:c,dispose:v}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUniformsGroups=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGL1Renderer=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(274);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n)}(c.WebGLRenderer);t.WebGL1Renderer=h,h.prototype.isWebGL1Renderer=!0},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.FogExp2=void 0;var i=r(n(23)),o=r(n(24)),a=n(261),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,i.default)(this,e),this.isFogExp2=!0,this.name="",this.color=new a.Color(t),this.density=n}return(0,o.default)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();t.FogExp2=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Fog=void 0;var i=r(n(23)),o=r(n(24)),a=n(261),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,i.default)(this,e),this.isFog=!0,this.name="",this.color=new a.Color(t),this.near=n,this.far=r}return(0,o.default)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();t.Fog=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(227)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(255);function h(e){var t=f();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,u.default)(n,e);var t=h(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this),e.isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,a.default)(e)})),e}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=(0,s.default)((0,l.default)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}]),n}(d.Object3D);t.Scene=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Sprite=void 0;var i,o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(234),h=n(249),f=n(254),p=n(258),m=n(255),y=n(262),v=n(448),g=n(449),_=n(450);function b(e){var t=x();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var M=new h.Vector3,C=new h.Vector3,w=new h.Vector3,S=new d.Vector2,T=new d.Vector2,N=new f.Matrix4,E=new h.Vector3,A=new h.Vector3,R=new h.Vector3,P=new d.Vector2,L=new d.Vector2,O=new d.Vector2,k=function(e){(0,u.default)(n,e);var t=b(n);function n(e){var r;if((0,o.default)(this,n),r=t.call(this),r.isSprite=!0,r.type="Sprite",void 0===i){i=new y.BufferGeometry;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new v.InterleavedBuffer(a,5);i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new g.InterleavedBufferAttribute(s,3,0,!1)),i.setAttribute("uv",new g.InterleavedBufferAttribute(s,2,3,!1))}return r.geometry=i,r.material=void 0!==e?e:new _.SpriteMaterial,r.center=new d.Vector2(.5,.5),r}return(0,a.default)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),C.setFromMatrixScale(this.matrixWorld),N.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),w.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&C.multiplyScalar(-w.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;I(E.set(-.5,-.5,0),w,o,C,n,r),I(A.set(.5,-.5,0),w,o,C,n,r),I(R.set(.5,.5,0),w,o,C,n,r),P.set(0,0),L.set(1,0),O.set(1,1);var a=e.ray.intersectTriangle(E,A,R,!1,M);if(null!==a||(I(A.set(-.5,.5,0),w,o,C,n,r),L.set(0,1),a=e.ray.intersectTriangle(E,R,A,!1,M),null!==a)){var s=e.ray.origin.distanceTo(M);s<e.near||s>e.far||t.push({distance:s,point:M.clone(),uv:p.Triangle.getInterpolation(M,E,A,R,P,L,O,new d.Vector2),face:null,object:this})}}},{key:"copy",value:function(e,t){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(m.Object3D);function I(e,t,n,r,i,o){S.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(T.x=o*S.x-i*S.y,T.y=i*S.x+o*S.y):T.copy(S),e.copy(t),e.x+=T.x,e.y+=T.y,e.applyMatrix4(N)}t.Sprite=k},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.InterleavedBuffer=void 0;var o=r(n(23)),a=r(n(24)),s=l(n(233)),u=n(223);function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var d=function(){function e(t,n){(0,o.default)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=u.StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=s.generateUUID()}return(0,a.default)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=s.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=s.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();t.InterleavedBuffer=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.InterleavedBufferAttribute=void 0;var i=r(n(23)),o=r(n(24)),a=n(249),s=n(263),u=n(233),c=new a.Vector3,l=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,i.default)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=o}return(0,o.default)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)c.fromBufferAttribute(this,t),c.applyMatrix4(e),this.setXYZ(t,c.x,c.y,c.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)c.fromBufferAttribute(this,t),c.applyNormalMatrix(e),this.setXYZ(t,c.x,c.y,c.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)c.fromBufferAttribute(this,t),c.transformDirection(e),this.setXYZ(t,c.x,c.y,c.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=(0,u.normalize)(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=(0,u.normalize)(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=(0,u.normalize)(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=(0,u.normalize)(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=(0,u.denormalize)(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=(0,u.denormalize)(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=(0,u.denormalize)(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=(0,u.denormalize)(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=(0,u.normalize)(t,this.array),n=(0,u.normalize)(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=(0,u.normalize)(t,this.array),n=(0,u.normalize)(n,this.array),r=(0,u.normalize)(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=(0,u.normalize)(t,this.array),n=(0,u.normalize)(n,this.array),r=(0,u.normalize)(r,this.array),i=(0,u.normalize)(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)n.push(this.data.array[i+o]);return new s.BufferAttribute(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();t.InterleavedBufferAttribute=l},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SpriteMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(261);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isSpriteMaterial=!0,r.type="SpriteMaterial",r.color=new d.Color(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(l.Material);t.SpriteMaterial=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LOD=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(227)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(249),h=n(255);function f(e){var t=p();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=new d.Vector3,y=new d.Vector3,v=function(e){(0,u.default)(n,e);var t=f(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this),e._currentLevel=0,e.type="LOD",Object.defineProperties((0,a.default)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,o.default)(n,[{key:"copy",value:function(e){(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var o=t[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var r,i=this.levels;for(r=0;r<i.length;r++)if(t<i[r].distance)break;return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r;n++){var i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}},{key:"raycast",value:function(e,t){var n=this.levels;if(n.length>0){m.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(m);this.getObjectForDistance(r).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){m.setFromMatrixPosition(e.matrixWorld),y.setFromMatrixPosition(this.matrixWorld);var n,r,i=m.distanceTo(y)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){var o=t[n].distance;if(t[n].object.visible&&(o-=o*t[n].hysteresis),!(i>=o))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=(0,s.default)((0,l.default)(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,o=r.length;i<o;i++){var a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}]),n}(h.Object3D);t.LOD=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SkinnedMesh=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(246),d=n(252),h=n(254),f=n(251),p=n(249),m=n(240),y=n(253);function v(e){var t=g();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _=new p.Vector3,b=new m.Vector4,x=new m.Vector4,M=new p.Vector3,C=new h.Matrix4,w=new p.Vector3,S=new f.Sphere,T=new h.Matrix4,N=new y.Ray,E=function(e){(0,s.default)(n,e);var t=v(n);function n(e,r){var o;return(0,i.default)(this,n),o=t.call(this,e,r),o.isSkinnedMesh=!0,o.type="SkinnedMesh",o.bindMode="attached",o.bindMatrix=new h.Matrix4,o.bindMatrixInverse=new h.Matrix4,o.boundingBox=null,o.boundingSphere=null,o}return(0,o.default)(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry;null===this.boundingBox&&(this.boundingBox=new d.Box3),this.boundingBox.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)w.fromBufferAttribute(t,n),this.applyBoneTransform(n,w),this.boundingBox.expandByPoint(w)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new f.Sphere),this.boundingSphere.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)w.fromBufferAttribute(t,n),this.applyBoneTransform(n,w),this.boundingSphere.expandByPoint(w)}},{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"raycast",value:function(e,t){var n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),S.copy(this.boundingSphere),S.applyMatrix4(r),!1!==e.ray.intersectsSphere(S)&&(T.copy(r).invert(),N.copy(e.ray).applyMatrix4(T),null!==this.boundingBox&&!1===N.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,N)))}},{key:"getVertexPosition",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"getVertexPosition",this).call(this,e,t),this.applyBoneTransform(e,t),t}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new m.Vector4,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){(0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"applyBoneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;b.fromBufferAttribute(r.attributes.skinIndex,e),x.fromBufferAttribute(r.attributes.skinWeight,e),_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var o=x.getComponent(i);if(0!==o){var a=b.getComponent(i);C.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(M.copy(_).applyMatrix4(C),o)}}return t.applyMatrix4(this.bindMatrixInverse)}},{key:"boneTransform",value:function(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}]),n}(l.Mesh);t.SkinnedMesh=E},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Skeleton=void 0;var o=r(n(23)),a=r(n(24)),s=n(223),u=n(454),c=n(254),l=n(455),d=f(n(233));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var p=new c.Matrix4,m=new c.Matrix4,y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,o.default)(this,e),this.uuid=d.generateUUID(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}return(0,a.default)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new c.Matrix4)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new c.Matrix4;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var o=this.bones[r];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:m;p.multiplyMatrices(a,t[i]),p.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=d.ceilPowerOfTwo(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new l.DataTexture(t,e,e,s.RGBAFormat,s.FloatType);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],o=t[i];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),o=new u.Bone),this.bones.push(o),this.boneInverses.push((new c.Matrix4).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var o=t[r];e.bones.push(o.uuid);var a=n[r];e.boneInverses.push(a.toArray())}return e}}]),e}();t.Skeleton=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Bone=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(255);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this),e.isBone=!0,e.type="Bone",e}return(0,i.default)(n)}(c.Object3D);t.Bone=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DataTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232),l=n(223);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:l.NearestFilter,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:l.NearestFilter,m=arguments.length>10?arguments[10]:void 0,y=arguments.length>11?arguments[11]:void 0;return(0,o.default)(this,n),e=t.call(this,null,c,d,h,f,p,s,u,m,y),e.isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,i.default)(n)}(c.Texture);t.DataTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.InstancedMesh=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(457),d=n(246),h=n(252),f=n(254),p=n(251);function m(e){var t=y();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=new f.Matrix4,g=new f.Matrix4,_=[],b=new h.Box3,x=new f.Matrix4,M=new d.Mesh,C=new p.Sphere,w=function(e){(0,s.default)(n,e);var t=m(n);function n(e,r,o){var a;(0,i.default)(this,n),a=t.call(this,e,r),a.isInstancedMesh=!0,a.instanceMatrix=new l.InstancedBufferAttribute(new Float32Array(16*o),16),a.instanceColor=null,a.count=o,a.boundingBox=null,a.boundingSphere=null;for(var s=0;s<o;s++)a.setMatrixAt(s,x);return a}return(0,o.default)(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new h.Box3),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,v),b.copy(e.boundingBox).applyMatrix4(v),this.boundingBox.union(b)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new p.Sphere),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,v),C.copy(e.boundingSphere).applyMatrix4(v),this.boundingSphere.union(C)}},{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(M.geometry=this.geometry,M.material=this.material,void 0!==M.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),C.copy(this.boundingSphere),C.applyMatrix4(n),!1!==e.ray.intersectsSphere(C)))for(var i=0;i<r;i++){this.getMatrixAt(i,v),g.multiplyMatrices(n,v),M.matrixWorld=g,M.raycast(e,_);for(var o=0,a=_.length;o<a;o++){var s=_[o];s.instanceId=i,s.object=this,t.push(s)}_.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new l.InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(d.Mesh);t.InstancedMesh=w},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.InstancedBufferAttribute=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(263);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(e,r,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,i.default)(this,n),a=t.call(this,e,r,o),a.isInstancedBufferAttribute=!0,a.meshPerAttribute=s,a}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(l.BufferAttribute);t.InstancedBufferAttribute=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LineSegments=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(459),l=n(249),d=n(263);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=new l.Vector3,m=new l.Vector3,y=function(e){(0,a.default)(n,e);var t=h(n);function n(e,r){var o;return(0,i.default)(this,n),o=t.call(this,e,r),o.isLineSegments=!0,o.type="LineSegments",o}return(0,o.default)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)p.fromBufferAttribute(t,r),m.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+p.distanceTo(m);e.setAttribute("lineDistance",new d.Float32BufferAttribute(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(c.Line);t.LineSegments=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(251),d=n(253),h=n(254),f=n(255),p=n(249),m=n(460),y=n(262),v=n(263);function g(e){var t=_();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=new p.Vector3,x=new p.Vector3,M=new h.Matrix4,C=new d.Ray,w=new l.Sphere,S=function(e){(0,s.default)(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new y.BufferGeometry,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new m.LineBasicMaterial;return(0,i.default)(this,n),e=t.call(this),e.isLine=!0,e.type="Line",e.geometry=r,e.material=o,e.updateMorphTargets(),e}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)b.fromBufferAttribute(t,r-1),x.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=b.distanceTo(x);e.setAttribute("lineDistance",new v.Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),w.copy(n.boundingSphere),w.applyMatrix4(r),w.radius+=i,!1!==e.ray.intersectsSphere(w)){M.copy(r).invert(),C.copy(e.ray).applyMatrix4(M);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new p.Vector3,c=new p.Vector3,l=new p.Vector3,d=new p.Vector3,h=this.isLineSegments?2:1,f=n.index,m=n.attributes,y=m.position;if(null!==f)for(var v=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count),_=v,b=g-1;_<b;_+=h){var x=f.getX(_),S=f.getX(_+1);u.fromBufferAttribute(y,x),c.fromBufferAttribute(y,S);var T=C.distanceSqToSegment(u,c,d,l);if(!(T>s)){d.applyMatrix4(this.matrixWorld);var N=e.ray.origin.distanceTo(d);N<e.near||N>e.far||t.push({distance:N,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var E=Math.max(0,o.start),A=Math.min(y.count,o.start+o.count),R=E,P=A-1;R<P;R+=h){u.fromBufferAttribute(y,R),c.fromBufferAttribute(y,R+1);var L=C.distanceSqToSegment(u,c,d,l);if(!(L>s)){d.applyMatrix4(this.matrixWorld);var O=e.ray.origin.distanceTo(d);O<e.near||O>e.far||t.push({distance:O,point:l.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(f.Object3D);t.Line=S},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LineBasicMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(261);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new d.Color(16777215),r.map=null,r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(l.Material);t.LineBasicMaterial=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LineLoop=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(459);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e,r),i.isLineLoop=!0,i.type="LineLoop",i}return(0,i.default)(n)}(c.Line);t.LineLoop=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Points=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(251),d=n(253),h=n(254),f=n(255),p=n(249),m=n(463),y=n(262);function v(e){var t=g();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _=new h.Matrix4,b=new d.Ray,x=new l.Sphere,M=new p.Vector3,C=function(e){(0,s.default)(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new y.BufferGeometry,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new m.PointsMaterial;return(0,i.default)(this,n),e=t.call(this),e.isPoints=!0,e.type="Points",e.geometry=r,e.material=o,e.updateMorphTargets(),e}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),x.copy(n.boundingSphere),x.applyMatrix4(r),x.radius+=i,!1!==e.ray.intersectsSphere(x)){_.copy(r).invert(),b.copy(e.ray).applyMatrix4(_);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=n.index,c=n.attributes,l=c.position;if(null!==u)for(var d=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count),f=d,p=h;f<p;f++){var m=u.getX(f);M.fromBufferAttribute(l,m),w(M,m,s,r,e,t,this)}else for(var y=Math.max(0,o.start),v=Math.min(l.count,o.start+o.count),g=y,C=v;g<C;g++)M.fromBufferAttribute(l,g),w(M,g,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(f.Object3D);function w(e,t,n,r,i,o,a){var s=b.distanceSqToPoint(e);if(s<n){var u=new p.Vector3;b.closestPointToPoint(e,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:a})}}t.Points=C},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PointsMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(261);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isPointsMaterial=!0,r.type="PointsMaterial",r.color=new d.Color(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(l.Material);t.PointsMaterial=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.VideoTexture=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(227)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(232);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e,r,o,s,u,c,d,h,f){var p;(0,i.default)(this,n),p=t.call(this,e,r,o,s,u,c,d,h,f),p.isVideoTexture=!0,p.minFilter=void 0!==c?c:l.LinearFilter,p.magFilter=void 0!==u?u:l.LinearFilter,p.generateMipmaps=!1;var m=(0,a.default)(p);function y(){m.needsUpdate=!0,e.requestVideoFrameCallback(y)}return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y),p}return(0,o.default)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(d.Texture);t.VideoTexture=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.FramebufferTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232),l=n(223);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,{width:e,height:r}),i.isFramebufferTexture=!0,i.magFilter=l.NearestFilter,i.minFilter=l.NearestFilter,i.generateMipmaps=!1,i.needsUpdate=!0,i}return(0,i.default)(n)}(c.Texture);t.FramebufferTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CompressedTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r,i,a,s,u,c,l,d,h,f,p){var m;return(0,o.default)(this,n),m=t.call(this,null,u,c,l,d,h,a,s,f,p),m.isCompressedTexture=!0,m.image={width:r,height:i},m.mipmaps=e,m.flipY=!1,m.generateMipmaps=!1,m}return(0,i.default)(n)}(c.Texture);t.CompressedTexture=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CompressedArrayTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(466);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e,r,i,a,s,u){var l;return(0,o.default)(this,n),l=t.call(this,e,r,i,s,u),l.isCompressedArrayTexture=!0,l.image.depth=a,l.wrapR=c.ClampToEdgeWrapping,l}return(0,i.default)(n)}(l.CompressedTexture);t.CompressedArrayTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CompressedCubeTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(466);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e,r,i){var a;return(0,o.default)(this,n),a=t.call(this,void 0,e[0].width,e[0].height,r,i,c.CubeReflectionMapping),a.isCompressedCubeTexture=!0,a.isCubeTexture=!0,a.image=e,a}return(0,i.default)(n)}(l.CompressedTexture);t.CompressedCubeTexture=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasTexture=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(232);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r,i,a,s,u,c,l,d){var h;return(0,o.default)(this,n),h=t.call(this,e,r,i,a,s,u,c,l,d),h.isCanvasTexture=!0,h.needsUpdate=!0,h}return(0,i.default)(n)}(c.Texture);t.CanvasTexture=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(265);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(471);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(488);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(489);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n(490);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var u=n(491);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=n(493);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=n(494);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=n(498);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var h=n(487);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var f=n(499);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=n(280);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var m=n(492);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var y=n(500);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var v=n(501);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var g=n(502);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var _=n(503);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var b=n(504);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var x=n(505);Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))}));var M=n(506);Object.keys(M).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===M[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}}))}));var C=n(507);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))}))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CapsuleGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(472),l=n(487);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;(0,i.default)(this,n);var u=new c.Path;return u.absarc(0,-o/2,r,1.5*Math.PI,0),u.absarc(0,o/2,r,0,.5*Math.PI),e=t.call(this,u.getPoints(a),s),e.type="CapsuleGeometry",e.parameters={radius:r,length:o,capSegments:a,radialSegments:s},e}return(0,o.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(l.LatheGeometry);t.CapsuleGeometry=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Path=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(234),d=n(473),h=n(477),f=n(486),p=n(479),m=n(484),y=n(482);function v(e){var t=g();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _=function(e){(0,s.default)(n,e);var t=v(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.type="Path",r.currentPoint=new l.Vector2,e&&r.setFromPoints(e),r}return(0,o.default)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new y.LineCurve(this.currentPoint.clone(),new l.Vector2(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new m.QuadraticBezierCurve(this.currentPoint.clone(),new l.Vector2(e,t),new l.Vector2(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){var a=new p.CubicBezierCurve(this.currentPoint.clone(),new l.Vector2(e,t),new l.Vector2(n,r),new l.Vector2(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new f.SplineCurve(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}},{key:"absarc",value:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}},{key:"ellipse",value:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,i,o,a,s),this}},{key:"absellipse",value:function(e,t,n,r,i,o,a,s){var u=new h.EllipseCurve(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(d.CurvePath);t.Path=_},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.CurvePath=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(474),h=p(n(475));function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function m(e){var t=y();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this),e.type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,a.default)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new h["LineCurve"](t,e))}},{key:"getPoint",value:function(e,t){var n=e*this.getLength(),r=this.getCurveLengths(),i=0;while(i<r.length){if(r[i]>=n){var o=r[i]-n,a=this.curves[i],s=a.getLength(),u=0===s?0:1-o/s;return a.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=(0,s.default)((0,l.default)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,s.default)((0,l.default)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new h[i.type]).fromJSON(i))}return this}}]),n}(d.Curve);t.CurvePath=v},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Curve=void 0;var o=r(n(23)),a=r(n(24)),s=h(n(233)),u=n(234),c=n(249),l=n(254);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var f=function(){function e(){(0,o.default)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,a.default)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var o=1;o<=e;o++)t=this.getPoint(o/e),i+=t.distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];var a,s=0,u=o-1;while(s<=u)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n)return i/(o-1);var c=r[i],l=r[i+1],d=l-c,h=(n-c)/d,f=(i+h)/(o-1);return f}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new u.Vector2:new c.Vector3);return s.copy(a).sub(o).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new c.Vector3,r=[],i=[],o=[],a=new c.Vector3,u=new l.Matrix4,d=0;d<=e;d++){var h=d/e;r[d]=this.getTangentAt(h,new c.Vector3)}i[0]=new c.Vector3,o[0]=new c.Vector3;var f=Number.MAX_VALUE,p=Math.abs(r[0].x),m=Math.abs(r[0].y),y=Math.abs(r[0].z);p<=f&&(f=p,n.set(1,0,0)),m<=f&&(f=m,n.set(0,1,0)),y<=f&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var v=1;v<=e;v++){if(i[v]=i[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();var g=Math.acos(s.clamp(r[v-1].dot(r[v]),-1,1));i[v].applyMatrix4(u.makeRotationAxis(a,g))}o[v].crossVectors(r[v],i[v])}if(!0===t){var _=Math.acos(s.clamp(i[0].dot(i[e]),-1,1));_/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(_=-_);for(var b=1;b<=e;b++)i[b].applyMatrix4(u.makeRotationAxis(r[b],_*b)),o[b].crossVectors(r[b],i[b])}return{tangents:r,normals:i,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}();t.Curve=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ArcCurve",{enumerable:!0,get:function(){return r.ArcCurve}}),Object.defineProperty(t,"CatmullRomCurve3",{enumerable:!0,get:function(){return i.CatmullRomCurve3}}),Object.defineProperty(t,"CubicBezierCurve",{enumerable:!0,get:function(){return o.CubicBezierCurve}}),Object.defineProperty(t,"CubicBezierCurve3",{enumerable:!0,get:function(){return a.CubicBezierCurve3}}),Object.defineProperty(t,"EllipseCurve",{enumerable:!0,get:function(){return s.EllipseCurve}}),Object.defineProperty(t,"LineCurve",{enumerable:!0,get:function(){return u.LineCurve}}),Object.defineProperty(t,"LineCurve3",{enumerable:!0,get:function(){return c.LineCurve3}}),Object.defineProperty(t,"QuadraticBezierCurve",{enumerable:!0,get:function(){return l.QuadraticBezierCurve}}),Object.defineProperty(t,"QuadraticBezierCurve3",{enumerable:!0,get:function(){return d.QuadraticBezierCurve3}}),Object.defineProperty(t,"SplineCurve",{enumerable:!0,get:function(){return h.SplineCurve}});var r=n(476),i=n(478),o=n(479),a=n(481),s=n(477),u=n(482),c=n(483),l=n(484),d=n(485),h=n(486)},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ArcCurve=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(477);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r,i,a,s,u){var c;return(0,o.default)(this,n),c=t.call(this,e,r,i,i,a,s,u),c.isArcCurve=!0,c.type="ArcCurve",c}return(0,i.default)(n)}(c.EllipseCurve);t.ArcCurve=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.EllipseCurve=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(474),d=n(234);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,i.default)(this,n),e=t.call(this),e.isEllipseCurve=!0,e.type="EllipseCurve",e.aX=r,e.aY=o,e.xRadius=a,e.yRadius=s,e.aStartAngle=u,e.aEndAngle=c,e.aClockwise=l,e.aRotation=d,e}return(0,o.default)(n,[{key:"getPoint",value:function(e,t){var n=t||new d.Vector2,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*c-f*l+this.aX,u=h*l+f*c+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(l.Curve);t.EllipseCurve=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CatmullRomCurve3=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(249),d=n(474);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;u*=a,c*=a,i(t,n,u,c)},calc:function(i){var o=i*i,a=o*i;return e+t*i+n*o+r*a}}}var m=new l.Vector3,y=new p,v=new p,g=new p,_=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,i.default)(this,n),e=t.call(this),e.isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=r,e.closed=o,e.curveType=a,e.tension=s,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector3,i=r,o=this.points,a=o.length,s=(a-(this.closed?0:1))*e,u=Math.floor(s),c=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===c&&u===a-1&&(u=a-2,c=1),this.closed||u>0?t=o[(u-1)%a]:(m.subVectors(o[0],o[1]).add(o[0]),t=m);var d=o[u%a],h=o[(u+1)%a];if(this.closed||u+2<a?n=o[(u+2)%a]:(m.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=m),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(t.distanceToSquared(d),f),_=Math.pow(d.distanceToSquared(h),f),b=Math.pow(h.distanceToSquared(n),f);_<1e-4&&(_=1),p<1e-4&&(p=_),b<1e-4&&(b=_),y.initNonuniformCatmullRom(t.x,d.x,h.x,n.x,p,_,b),v.initNonuniformCatmullRom(t.y,d.y,h.y,n.y,p,_,b),g.initNonuniformCatmullRom(t.z,d.z,h.z,n.z,p,_,b)}else"catmullrom"===this.curveType&&(y.initCatmullRom(t.x,d.x,h.x,n.x,this.tension),v.initCatmullRom(t.y,d.y,h.y,n.y,this.tension),g.initCatmullRom(t.z,d.z,h.z,n.z,this.tension));return i.set(y.calc(c),v.calc(c),g.calc(c)),i}},{key:"copy",value:function(e){(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new l.Vector3).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(d.Curve);t.CatmullRomCurve3=_},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CubicBezierCurve=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(474),d=n(480),h=n(234);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h.Vector2,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new h.Vector2,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new h.Vector2;return(0,i.default)(this,n),e=t.call(this),e.isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=r,e.v1=o,e.v2=a,e.v3=s,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector2,n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set((0,d.CubicBezier)(e,r.x,i.x,o.x,a.x),(0,d.CubicBezier)(e,r.y,i.y,o.y,a.y)),n}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(l.Curve);t.CubicBezierCurve=m},function(e,t,n){"use strict";function r(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e,u=e*s;return(2*n-2*r+o+a)*u+(-3*n+3*r-2*o-a)*s+o*e+n}function i(e,t){var n=1-e;return n*n*t}function o(e,t){return 2*(1-e)*e*t}function a(e,t){return e*e*t}function s(e,t,n,r){return i(e,t)+o(e,n)+a(e,r)}function u(e,t){var n=1-e;return n*n*n*t}function c(e,t){var n=1-e;return 3*n*n*e*t}function l(e,t){return 3*(1-e)*e*e*t}function d(e,t){return e*e*e*t}function h(e,t,n,r,i){return u(e,t)+c(e,n)+l(e,r)+d(e,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.CatmullRom=r,t.CubicBezier=h,t.QuadraticBezier=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CubicBezierCurve3=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(474),d=n(480),h=n(249);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h.Vector3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new h.Vector3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new h.Vector3;return(0,i.default)(this,n),e=t.call(this),e.isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=r,e.v1=o,e.v2=a,e.v3=s,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector3,n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set((0,d.CubicBezier)(e,r.x,i.x,o.x,a.x),(0,d.CubicBezier)(e,r.y,i.y,o.y,a.y),(0,d.CubicBezier)(e,r.z,i.z,o.z,a.z)),n}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(l.Curve);t.CubicBezierCurve3=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LineCurve=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(234),d=n(474);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.Vector2,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector2;return(0,i.default)(this,n),e=t.call(this),e.isLineCurve=!0,e.type="LineCurve",e.v1=r,e.v2=o,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector2,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector2;return t.subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(d.Curve);t.LineCurve=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LineCurve3=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(249),d=n(474);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.Vector3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector3;return(0,i.default)(this,n),e=t.call(this),e.isLineCurve3=!0,e.type="LineCurve3",e.v1=r,e.v2=o,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector3,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Vector3;return t.subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(d.Curve);t.LineCurve3=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.QuadraticBezierCurve=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(474),d=n(480),h=n(234);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h.Vector2,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new h.Vector2;return(0,i.default)(this,n),e=t.call(this),e.isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=r,e.v1=o,e.v2=a,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector2,n=t,r=this.v0,i=this.v1,o=this.v2;return n.set((0,d.QuadraticBezier)(e,r.x,i.x,o.x),(0,d.QuadraticBezier)(e,r.y,i.y,o.y)),n}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(l.Curve);t.QuadraticBezierCurve=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.QuadraticBezierCurve3=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(474),d=n(480),h=n(249);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h.Vector3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new h.Vector3;return(0,i.default)(this,n),e=t.call(this),e.isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=r,e.v1=o,e.v2=a,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector3,n=t,r=this.v0,i=this.v1,o=this.v2;return n.set((0,d.QuadraticBezier)(e,r.x,i.x,o.x),(0,d.QuadraticBezier)(e,r.y,i.y,o.y),(0,d.QuadraticBezier)(e,r.z,i.z,o.z)),n}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(l.Curve);t.QuadraticBezierCurve3=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SplineCurve=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(474),d=n(480),h=n(234);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i.default)(this,n),e=t.call(this),e.isSplineCurve=!0,e.type="SplineCurve",e.points=r,e}return(0,o.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector2,n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set((0,d.CatmullRom)(a,s.x,u.x,c.x,l.x),(0,d.CatmullRom)(a,s.y,u.y,c.y,l.y)),n}},{key:"copy",value:function(e){(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){(0,a.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new h.Vector2).fromArray(i))}return this}}]),n}(l.Curve);t.SplineCurve=m},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.LatheGeometry=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(263),h=n(262),f=n(249),p=n(234),m=v(n(233));function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=_();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){(0,u.default)(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new p.Vector2(0,-.5),new p.Vector2(.5,0),new p.Vector2(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,o.default)(this,n),e=t.call(this),e.type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:s},i=Math.floor(i),s=m.clamp(s,0,2*Math.PI);for(var u=[],c=[],l=[],h=[],y=[],v=1/i,g=new f.Vector3,_=new p.Vector2,b=new f.Vector3,x=new f.Vector3,M=new f.Vector3,C=0,w=0,S=0;S<=r.length-1;S++)switch(S){case 0:C=r[S+1].x-r[S].x,w=r[S+1].y-r[S].y,b.x=1*w,b.y=-C,b.z=0*w,M.copy(b),b.normalize(),h.push(b.x,b.y,b.z);break;case r.length-1:h.push(M.x,M.y,M.z);break;default:C=r[S+1].x-r[S].x,w=r[S+1].y-r[S].y,b.x=1*w,b.y=-C,b.z=0*w,x.copy(b),b.x+=M.x,b.y+=M.y,b.z+=M.z,b.normalize(),h.push(b.x,b.y,b.z),M.copy(x)}for(var T=0;T<=i;T++)for(var N=a+T*v*s,E=Math.sin(N),A=Math.cos(N),R=0;R<=r.length-1;R++){g.x=r[R].x*E,g.y=r[R].y,g.z=r[R].x*A,c.push(g.x,g.y,g.z),_.x=T/i,_.y=R/(r.length-1),l.push(_.x,_.y);var P=h[3*R+0]*E,L=h[3*R+1],O=h[3*R+0]*A;y.push(P,L,O)}for(var k=0;k<i;k++)for(var I=0;I<r.length-1;I++){var D=I+k*r.length,U=D,B=D+r.length,F=D+r.length+1,G=D+1;u.push(U,B,G),u.push(F,G,B)}return e.setIndex(u),e.setAttribute("position",new d.Float32BufferAttribute(c,3)),e.setAttribute("uv",new d.Float32BufferAttribute(l,2)),e.setAttribute("normal",new d.Float32BufferAttribute(y,3)),e}return(0,a.default)(n,[{key:"copy",value:function(e){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(h.BufferGeometry);t.LatheGeometry=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CircleGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(249),f=n(234);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,i.default)(this,n),e=t.call(this),e.type="CircleGeometry",e.parameters={radius:r,segments:o,thetaStart:a,thetaLength:s},o=Math.max(3,o);var u=[],c=[],l=[],p=[],m=new h.Vector3,y=new f.Vector2;c.push(0,0,0),l.push(0,0,1),p.push(.5,.5);for(var v=0,g=3;v<=o;v++,g+=3){var _=a+v/o*s;m.x=r*Math.cos(_),m.y=r*Math.sin(_),c.push(m.x,m.y,m.z),l.push(0,0,1),y.x=(c[g]/r+1)/2,y.y=(c[g+1]/r+1)/2,p.push(y.x,y.y)}for(var b=1;b<=o;b++)u.push(b,b+1,0);return e.setIndex(u),e.setAttribute("position",new d.Float32BufferAttribute(c,3)),e.setAttribute("normal",new d.Float32BufferAttribute(l,3)),e.setAttribute("uv",new d.Float32BufferAttribute(p,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(l.BufferGeometry);t.CircleGeometry=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ConeGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(490);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,i.default)(this,n),e=t.call(this,0,r,o,a,s,u,c,l),e.type="ConeGeometry",e.parameters={radius:r,height:o,radialSegments:a,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:l},e}return(0,o.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(c.CylinderGeometry);t.ConeGeometry=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CylinderGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(227)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(262),h=n(263),f=n(249),p=n(234);function m(e){var t=y();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,i.default)(this,n),e=t.call(this),e.type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:o,height:s,radialSegments:u,heightSegments:c,openEnded:l,thetaStart:d,thetaLength:m};var y=(0,a.default)(e);u=Math.floor(u),c=Math.floor(c);var v=[],g=[],_=[],b=[],x=0,M=[],C=s/2,w=0;function S(){for(var e=new f.Vector3,t=new f.Vector3,n=0,i=(o-r)/s,a=0;a<=c;a++){for(var l=[],h=a/c,p=h*(o-r)+r,S=0;S<=u;S++){var T=S/u,N=T*m+d,E=Math.sin(N),A=Math.cos(N);t.x=p*E,t.y=-h*s+C,t.z=p*A,g.push(t.x,t.y,t.z),e.set(E,i,A).normalize(),_.push(e.x,e.y,e.z),b.push(T,1-h),l.push(x++)}M.push(l)}for(var R=0;R<u;R++)for(var P=0;P<c;P++){var L=M[P][R],O=M[P+1][R],k=M[P+1][R+1],I=M[P][R+1];v.push(L,O,I),v.push(O,k,I),n+=6}y.addGroup(w,n,0),w+=n}function T(e){for(var t=x,n=new p.Vector2,i=new f.Vector3,a=0,s=!0===e?r:o,c=!0===e?1:-1,l=1;l<=u;l++)g.push(0,C*c,0),_.push(0,c,0),b.push(.5,.5),x++;for(var h=x,M=0;M<=u;M++){var S=M/u,T=S*m+d,N=Math.cos(T),E=Math.sin(T);i.x=s*E,i.y=C*c,i.z=s*N,g.push(i.x,i.y,i.z),_.push(0,c,0),n.x=.5*N+.5,n.y=.5*E*c+.5,b.push(n.x,n.y),x++}for(var A=0;A<u;A++){var R=t+A,P=h+A;!0===e?v.push(P,P+1,R):v.push(P+1,P,R),a+=3}y.addGroup(w,a,!0===e?1:2),w+=a}return S(),!1===l&&(r>0&&T(!0),o>0&&T(!1)),e.setIndex(v),e.setAttribute("position",new h.Float32BufferAttribute(g,3)),e.setAttribute("normal",new h.Float32BufferAttribute(_,3)),e.setAttribute("uv",new h.Float32BufferAttribute(b,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(d.BufferGeometry);t.CylinderGeometry=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DodecahedronGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(492);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.default)(this,n);var a=(1+Math.sqrt(5))/2,s=1/a,u=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-a,0,-s,a,0,s,-a,0,s,a,-s,-a,0,-s,a,0,s,-a,0,s,a,0,-a,0,-s,a,0,-s,-a,0,s,a,0,s],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return e=t.call(this,u,c,r,o),e.type="DodecahedronGeometry",e.parameters={radius:r,detail:o},e}return(0,o.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(c.PolyhedronGeometry);t.DodecahedronGeometry=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PolyhedronGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(249),f=n(234);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,i.default)(this,n),e=t.call(this),e.type="PolyhedronGeometry",e.parameters={vertices:r,indices:o,radius:a,detail:s};var u=[],c=[];function l(e){for(var t=new h.Vector3,n=new h.Vector3,r=new h.Vector3,i=0;i<o.length;i+=3)_(o[i+0],t),_(o[i+1],n),_(o[i+2],r),p(t,n,r,e)}function p(e,t,n,r){for(var i=r+1,o=[],a=0;a<=i;a++){o[a]=[];for(var s=e.clone().lerp(n,a/i),u=t.clone().lerp(n,a/i),c=i-a,l=0;l<=c;l++)o[a][l]=0===l&&a===i?s:s.clone().lerp(u,l/c)}for(var d=0;d<i;d++)for(var h=0;h<2*(i-d)-1;h++){var f=Math.floor(h/2);h%2===0?(g(o[d][f+1]),g(o[d+1][f]),g(o[d][f])):(g(o[d][f+1]),g(o[d+1][f+1]),g(o[d+1][f]))}}function m(e){for(var t=new h.Vector3,n=0;n<u.length;n+=3)t.x=u[n+0],t.y=u[n+1],t.z=u[n+2],t.normalize().multiplyScalar(e),u[n+0]=t.x,u[n+1]=t.y,u[n+2]=t.z}function y(){for(var e=new h.Vector3,t=0;t<u.length;t+=3){e.x=u[t+0],e.y=u[t+1],e.z=u[t+2];var n=M(e)/2/Math.PI+.5,r=C(e)/Math.PI+.5;c.push(n,1-r)}b(),v()}function v(){for(var e=0;e<c.length;e+=6){var t=c[e+0],n=c[e+2],r=c[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(c[e+0]+=1),n<.2&&(c[e+2]+=1),r<.2&&(c[e+4]+=1))}}function g(e){u.push(e.x,e.y,e.z)}function _(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function b(){for(var e=new h.Vector3,t=new h.Vector3,n=new h.Vector3,r=new h.Vector3,i=new f.Vector2,o=new f.Vector2,a=new f.Vector2,s=0,l=0;s<u.length;s+=9,l+=6){e.set(u[s+0],u[s+1],u[s+2]),t.set(u[s+3],u[s+4],u[s+5]),n.set(u[s+6],u[s+7],u[s+8]),i.set(c[l+0],c[l+1]),o.set(c[l+2],c[l+3]),a.set(c[l+4],c[l+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=M(r);x(i,l+0,e,d),x(o,l+2,t,d),x(a,l+4,n,d)}}function x(e,t,n,r){r<0&&1===e.x&&(c[t]=e.x-1),0===n.x&&0===n.z&&(c[t]=r/2/Math.PI+.5)}function M(e){return Math.atan2(e.z,-e.x)}function C(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return l(s),m(a),y(),e.setAttribute("position",new d.Float32BufferAttribute(u,3)),e.setAttribute("normal",new d.Float32BufferAttribute(u.slice(),3)),e.setAttribute("uv",new d.Float32BufferAttribute(c,2)),0===s?e.computeVertexNormals():e.normalizeNormals(),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(l.BufferGeometry);t.PolyhedronGeometry=y},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.EdgesGeometry=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(262),h=n(263),f=v(n(233)),p=n(258),m=n(249);function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=_();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=new m.Vector3,x=new m.Vector3,M=new m.Vector3,C=new p.Triangle,w=function(e){(0,u.default)(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,o.default)(this,n),e=t.call(this),e.type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=4,s=Math.pow(10,a),u=Math.cos(f.DEG2RAD*i),c=r.getIndex(),l=r.getAttribute("position"),d=c?c.count:l.count,p=[0,0,0],m=["a","b","c"],y=new Array(3),v={},g=[],_=0;_<d;_+=3){c?(p[0]=c.getX(_),p[1]=c.getX(_+1),p[2]=c.getX(_+2)):(p[0]=_,p[1]=_+1,p[2]=_+2);var w=C.a,S=C.b,T=C.c;if(w.fromBufferAttribute(l,p[0]),S.fromBufferAttribute(l,p[1]),T.fromBufferAttribute(l,p[2]),C.getNormal(M),y[0]="".concat(Math.round(w.x*s),",").concat(Math.round(w.y*s),",").concat(Math.round(w.z*s)),y[1]="".concat(Math.round(S.x*s),",").concat(Math.round(S.y*s),",").concat(Math.round(S.z*s)),y[2]="".concat(Math.round(T.x*s),",").concat(Math.round(T.y*s),",").concat(Math.round(T.z*s)),y[0]!==y[1]&&y[1]!==y[2]&&y[2]!==y[0])for(var N=0;N<3;N++){var E=(N+1)%3,A=y[N],R=y[E],P=C[m[N]],L=C[m[E]],O="".concat(A,"_").concat(R),k="".concat(R,"_").concat(A);k in v&&v[k]?(M.dot(v[k].normal)<=u&&(g.push(P.x,P.y,P.z),g.push(L.x,L.y,L.z)),v[k]=null):O in v||(v[O]={index0:p[N],index1:p[E],normal:M.clone()})}}for(var I in v)if(v[I]){var D=v[I],U=D.index0,B=D.index1;b.fromBufferAttribute(l,U),x.fromBufferAttribute(l,B),g.push(b.x,b.y,b.z),g.push(x.x,x.y,x.z)}e.setAttribute("position",new h.Float32BufferAttribute(g,3))}return e}return(0,a.default)(n,[{key:"copy",value:function(e){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(d.BufferGeometry);t.EdgesGeometry=w},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrudeGeometry=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(227)),u=r(n(247)),c=r(n(225)),l=r(n(226)),d=r(n(228)),h=n(262),f=n(263),p=b(n(475)),m=n(234),y=n(249),v=n(495),g=n(496);function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function x(e){var t=M();return function(){var n,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){(0,c.default)(n,e);var t=x(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v.Shape([new m.Vector2(.5,.5),new m.Vector2(-.5,.5),new m.Vector2(-.5,-.5),new m.Vector2(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,n),e=t.call(this),e.type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=(0,s.default)(e),u=[],c=[],l=0,d=r.length;l<d;l++){var h=r[l];p(h)}function p(e){var t,n,r,o,s,l=[],d=void 0!==i.curveSegments?i.curveSegments:12,h=void 0!==i.steps?i.steps:1,f=void 0!==i.depth?i.depth:1,p=void 0===i.bevelEnabled||i.bevelEnabled,v=void 0!==i.bevelThickness?i.bevelThickness:.2,_=void 0!==i.bevelSize?i.bevelSize:v-.1,b=void 0!==i.bevelOffset?i.bevelOffset:0,x=void 0!==i.bevelSegments?i.bevelSegments:3,M=i.extrudePath,C=void 0!==i.UVGenerator?i.UVGenerator:w,S=!1;M&&(t=M.getSpacedPoints(h),S=!0,p=!1,n=M.computeFrenetFrames(h,!1),r=new y.Vector3,o=new y.Vector3,s=new y.Vector3),p||(x=0,v=0,_=0,b=0);var T=e.extractPoints(d),N=T.shape,E=T.holes,A=!g.ShapeUtils.isClockWise(N);if(A){N=N.reverse();for(var R=0,P=E.length;R<P;R++){var L=E[R];g.ShapeUtils.isClockWise(L)&&(E[R]=L.reverse())}}for(var O=g.ShapeUtils.triangulateShape(N,E),k=N,I=0,D=E.length;I<D;I++){var U=E[I];N=N.concat(U)}function B(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}var F=N.length,G=O.length;function j(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=a*a+s*s,d=a*c-s*u;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(l),f=Math.sqrt(u*u+c*c),p=t.x-s/h,y=t.y+a/h,v=n.x-c/f,g=n.y+u/f,_=((v-p)*c-(g-y)*u)/(a*c-s*u);r=p+a*_-e.x,i=y+s*_-e.y;var b=r*r+i*i;if(b<=2)return new m.Vector2(r,i);o=Math.sqrt(b/2)}else{var x=!1;a>Number.EPSILON?u>Number.EPSILON&&(x=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(c)&&(x=!0),x?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new m.Vector2(r/o,i/o)}for(var z=[],V=0,H=k.length,W=H-1,q=V+1;V<H;V++,W++,q++)W===H&&(W=0),q===H&&(q=0),z[V]=j(k[V],k[W],k[q]);for(var X,Y=[],J=z.concat(),K=0,$=E.length;K<$;K++){var Z=E[K];X=[];for(var Q=0,ee=Z.length,te=ee-1,ne=Q+1;Q<ee;Q++,te++,ne++)te===ee&&(te=0),ne===ee&&(ne=0),X[Q]=j(Z[Q],Z[te],Z[ne]);Y.push(X),J=J.concat(X)}for(var re=0;re<x;re++){for(var ie=re/x,oe=v*Math.cos(ie*Math.PI/2),ae=_*Math.sin(ie*Math.PI/2)+b,se=0,ue=k.length;se<ue;se++){var ce=B(k[se],z[se],ae);Be(ce.x,ce.y,-oe)}for(var le=0,de=E.length;le<de;le++){var he=E[le];X=Y[le];for(var fe=0,pe=he.length;fe<pe;fe++){var me=B(he[fe],X[fe],ae);Be(me.x,me.y,-oe)}}}for(var ye=_+b,ve=0;ve<F;ve++){var ge=p?B(N[ve],J[ve],ye):N[ve];S?(o.copy(n.normals[0]).multiplyScalar(ge.x),r.copy(n.binormals[0]).multiplyScalar(ge.y),s.copy(t[0]).add(o).add(r),Be(s.x,s.y,s.z)):Be(ge.x,ge.y,0)}for(var _e=1;_e<=h;_e++)for(var be=0;be<F;be++){var xe=p?B(N[be],J[be],ye):N[be];S?(o.copy(n.normals[_e]).multiplyScalar(xe.x),r.copy(n.binormals[_e]).multiplyScalar(xe.y),s.copy(t[_e]).add(o).add(r),Be(s.x,s.y,s.z)):Be(xe.x,xe.y,f/h*_e)}for(var Me=x-1;Me>=0;Me--){for(var Ce=Me/x,we=v*Math.cos(Ce*Math.PI/2),Se=_*Math.sin(Ce*Math.PI/2)+b,Te=0,Ne=k.length;Te<Ne;Te++){var Ee=B(k[Te],z[Te],Se);Be(Ee.x,Ee.y,f+we)}for(var Ae=0,Re=E.length;Ae<Re;Ae++){var Pe=E[Ae];X=Y[Ae];for(var Le=0,Oe=Pe.length;Le<Oe;Le++){var ke=B(Pe[Le],X[Le],Se);S?Be(ke.x,ke.y+t[h-1].y,t[h-1].x+we):Be(ke.x,ke.y,f+we)}}}function Ie(){var e=u.length/3;if(p){for(var t=0,n=F*t,r=0;r<G;r++){var i=O[r];Fe(i[2]+n,i[1]+n,i[0]+n)}t=h+2*x,n=F*t;for(var o=0;o<G;o++){var s=O[o];Fe(s[0]+n,s[1]+n,s[2]+n)}}else{for(var c=0;c<G;c++){var l=O[c];Fe(l[2],l[1],l[0])}for(var d=0;d<G;d++){var f=O[d];Fe(f[0]+F*h,f[1]+F*h,f[2]+F*h)}}a.addGroup(e,u.length/3-e,0)}function De(){var e=u.length/3,t=0;Ue(k,t),t+=k.length;for(var n=0,r=E.length;n<r;n++){var i=E[n];Ue(i,t),t+=i.length}a.addGroup(e,u.length/3-e,1)}function Ue(e,t){var n=e.length;while(--n>=0){var r=n,i=n-1;i<0&&(i=e.length-1);for(var o=0,a=h+2*x;o<a;o++){var s=F*o,u=F*(o+1),c=t+r+s,l=t+i+s,d=t+i+u,f=t+r+u;Ge(c,l,d,f)}}}function Be(e,t,n){l.push(e),l.push(t),l.push(n)}function Fe(e,t,n){je(e),je(t),je(n);var r=u.length/3,i=C.generateTopUV(a,u,r-3,r-2,r-1);ze(i[0]),ze(i[1]),ze(i[2])}function Ge(e,t,n,r){je(e),je(t),je(r),je(t),je(n),je(r);var i=u.length/3,o=C.generateSideWallUV(a,u,i-6,i-3,i-2,i-1);ze(o[0]),ze(o[1]),ze(o[3]),ze(o[1]),ze(o[2]),ze(o[3])}function je(e){u.push(l[3*e+0]),u.push(l[3*e+1]),u.push(l[3*e+2])}function ze(e){c.push(e.x),c.push(e.y)}Ie(),De()}return e.setAttribute("position",new f.Float32BufferAttribute(u,3)),e.setAttribute("uv",new f.Float32BufferAttribute(c,2)),e.computeVertexNormals(),e}return(0,a.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,d.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,d.default)(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes,r=this.parameters.options;return S(t,r,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,o=e.shapes.length;i<o;i++){var a=t[e.shapes[i]];r.push(a)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new p[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(h.BufferGeometry);t.ExtrudeGeometry=C;var w={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new m.Vector2(o,a),new m.Vector2(s,u),new m.Vector2(c,l)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],y=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<Math.abs(a-c)?[new m.Vector2(a,1-u),new m.Vector2(c,1-d),new m.Vector2(h,1-p),new m.Vector2(y,1-g)]:[new m.Vector2(s,1-u),new m.Vector2(l,1-d),new m.Vector2(f,1-p),new m.Vector2(v,1-g)]}};function S(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(472),h=p(n(233));function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function m(e){var t=y();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){(0,u.default)(n,e);var t=m(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),r.uuid=h.generateUUID(),r.type="Shape",r.holes=[],r}return(0,a.default)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=(0,s.default)((0,l.default)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,s.default)((0,l.default)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new d.Path).fromJSON(i))}return this}}]),n}(d.Path);t.Shape=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtils=void 0;var i=r(n(23)),o=r(n(24)),a=n(497),s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];u(e),c(n,e);var o=e.length;t.forEach(u);for(var s=0;s<t.length;s++)r.push(o),o+=t[s].length,c(n,t[s]);for(var l=a.Earcut.triangulate(n,r),d=0;d<l.length;d+=3)i.push(l.slice(d,d+3));return i}}]),e}();function u(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function c(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}t.ShapeUtils=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Earcut=void 0;var r={triangulate:function(e,t){var n,r,o,s,u,c,l,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,f=t&&t.length,p=f?t[0]*h:e.length,m=i(e,0,p,h,!0),y=[];if(!m||m.next===m.prev)return y;if(f&&(m=d(e,t,m,h)),e.length>80*h){n=o=e[0],r=s=e[1];for(var v=h;v<p;v+=h)u=e[v],c=e[v+1],u<n&&(n=u),c<r&&(r=c),u>o&&(o=u),c>s&&(s=c);l=Math.max(o-n,s-r),l=0!==l?32767/l:0}return a(m,y,h,n,r,l,0),y}};function i(e,t,n,r,i){var o,a;if(i===k(e,t,n,r)>0)for(o=t;o<n;o+=r)a=P(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=P(o,e[o],e[o+1],a);return a&&C(a,a.next)&&(L(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!C(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(L(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,d,h){if(e){!h&&d&&y(e,r,i,d);var f,p,m=e;while(e.prev!==e.next)if(f=e.prev,p=e.next,d?u(e,r,i,d):s(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(p.i/n|0),L(e),e=p.next,m=p.next;else if(e=p,e===m){h?1===h?(e=c(o(e),t,n),a(e,t,n,r,i,d,2)):2===h&&l(e,t,n,r,i,d):a(o(e),t,n,r,i,d,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(M(t,n,r)>=0)return!1;var i=t.x,o=n.x,a=r.x,s=t.y,u=n.y,c=r.y,l=i<o?i<a?i:a:o<a?o:a,d=s<u?s<c?s:c:u<c?u:c,h=i>o?i>a?i:a:o>a?o:a,f=s>u?s>c?s:c:u>c?u:c,p=r.next;while(p!==t){if(p.x>=l&&p.x<=h&&p.y>=d&&p.y<=f&&b(i,s,o,u,a,c,p.x,p.y)&&M(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(M(i,o,a)>=0)return!1;var s=i.x,u=o.x,c=a.x,l=i.y,d=o.y,h=a.y,f=s<u?s<c?s:c:u<c?u:c,p=l<d?l<h?l:h:d<h?d:h,m=s>u?s>c?s:c:u>c?u:c,y=l>d?l>h?l:h:d>h?d:h,v=g(f,p,t,n,r),_=g(m,y,t,n,r),x=e.prevZ,C=e.nextZ;while(x&&x.z>=v&&C&&C.z<=_){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=y&&x!==i&&x!==a&&b(s,l,u,d,c,h,x.x,x.y)&&M(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,C.x>=f&&C.x<=m&&C.y>=p&&C.y<=y&&C!==i&&C!==a&&b(s,l,u,d,c,h,C.x,C.y)&&M(C.prev,C,C.next)>=0)return!1;C=C.nextZ}while(x&&x.z>=v){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=y&&x!==i&&x!==a&&b(s,l,u,d,c,h,x.x,x.y)&&M(x.prev,x,x.next)>=0)return!1;x=x.prevZ}while(C&&C.z<=_){if(C.x>=f&&C.x<=m&&C.y>=p&&C.y<=y&&C!==i&&C!==a&&b(s,l,u,d,c,h,C.x,C.y)&&M(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function c(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!C(i,a)&&w(i,r,r.next,a)&&E(i,a)&&E(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),L(r),L(r.next),r=e=a),r=r.next}while(r!==e);return o(r)}function l(e,t,n,r,i,s){var u=e;do{var c=u.next.next;while(c!==u.prev){if(u.i!==c.i&&x(u,c)){var l=R(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,t,n,r,i,s,0),void a(l,t,n,r,i,s,0)}c=c.next}u=u.next}while(u!==e)}function d(e,t,n,r){var o,a,s,u,c,l=[];for(o=0,a=t.length;o<a;o++)s=t[o]*r,u=o<a-1?t[o+1]*r:e.length,c=i(e,s,u,r,!1),c===c.next&&(c.steiner=!0),l.push(_(c));for(l.sort(h),o=0;o<l.length;o++)n=f(l[o],n);return n}function h(e,t){return e.x-t.x}function f(e,t){var n=p(e,t);if(!n)return t;var r=R(n,e);return o(r,r.next),o(n,n.next)}function p(e,t){var n,r=t,i=-1/0,o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>i&&(i=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,c=n,l=n.x,d=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=l&&o!==r.x&&b(a<d?o:i,a,l,d,a<d?i:o,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(o-r.x),E(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&m(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}function m(e,t){return M(e.prev,e,t.prev)<0&&M(t.next,e,e.next)<0}function y(e,t,n,r){var i=e;do{0===i.z&&(i.z=g(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(e){var t,n,r,i,o,a,s,u,c=1;do{n=e,e=null,o=null,a=0;while(n){for(a++,r=n,s=0,t=0;t<c;t++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return e}function g(e,t,n,r,i){return e=(e-n)*i|0,t=(t-r)*i|0,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function _(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function b(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!N(e,t)&&(E(e,t)&&E(t,e)&&A(e,t)&&(M(e.prev,e,t.prev)||M(e,t.prev,t))||C(e,t)&&M(e.prev,e,e.next)>0&&M(t.prev,t,t.next)>0)}function M(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function C(e,t){return e.x===t.x&&e.y===t.y}function w(e,t,n,r){var i=T(M(e,t,n)),o=T(M(e,t,r)),a=T(M(n,r,e)),s=T(M(n,r,t));return i!==o&&a!==s||(!(0!==i||!S(e,n,t))||(!(0!==o||!S(e,r,t))||(!(0!==a||!S(n,e,r))||!(0!==s||!S(n,t,r)))))}function S(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function T(e){return e>0?1:e<0?-1:0}function N(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&w(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function E(e,t){return M(e.prev,e,e.next)<0?M(e,t,e.next)>=0&&M(e,e.prev,t)>=0:M(e,t,e.prev)<0||M(e,e.next,t)<0}function A(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function R(e,t){var n=new O(e.i,e.x,e.y),r=new O(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(e,t,n,r){var i=new O(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function L(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function O(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.Earcut=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.IcosahedronGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(492);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.default)(this,n);var a=(1+Math.sqrt(5))/2,s=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return e=t.call(this,s,u,r,o),e.type="IcosahedronGeometry",e.parameters={radius:r,detail:o},e}return(0,o.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(c.PolyhedronGeometry);t.IcosahedronGeometry=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.OctahedronGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(492);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.default)(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return e=t.call(this,a,s,r,o),e.type="OctahedronGeometry",e.parameters={radius:r,detail:o},e}return(0,o.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(c.PolyhedronGeometry);t.OctahedronGeometry=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.RingGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(234),f=n(249);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,i.default)(this,n),e=t.call(this),e.type="RingGeometry",e.parameters={innerRadius:r,outerRadius:o,thetaSegments:a,phiSegments:s,thetaStart:u,thetaLength:c},a=Math.max(3,a),s=Math.max(1,s);for(var l=[],p=[],m=[],y=[],v=r,g=(o-r)/s,_=new f.Vector3,b=new h.Vector2,x=0;x<=s;x++){for(var M=0;M<=a;M++){var C=u+M/a*c;_.x=v*Math.cos(C),_.y=v*Math.sin(C),p.push(_.x,_.y,_.z),m.push(0,0,1),b.x=(_.x/o+1)/2,b.y=(_.y/o+1)/2,y.push(b.x,b.y)}v+=g}for(var w=0;w<s;w++)for(var S=w*(a+1),T=0;T<a;T++){var N=T+S,E=N,A=N+a+1,R=N+a+2,P=N+1;l.push(E,A,P),l.push(A,R,P)}return e.setIndex(l),e.setAttribute("position",new d.Float32BufferAttribute(p,3)),e.setAttribute("normal",new d.Float32BufferAttribute(m,3)),e.setAttribute("uv",new d.Float32BufferAttribute(y,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(l.BufferGeometry);t.RingGeometry=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(495),f=n(496),p=n(234);function m(e){var t=y();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){(0,s.default)(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h.Shape([new p.Vector2(0,.5),new p.Vector2(-.5,-.5),new p.Vector2(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,i.default)(this,n),e=t.call(this),e.type="ShapeGeometry",e.parameters={shapes:r,curveSegments:o};var a=[],s=[],u=[],c=[],l=0,m=0;if(!1===Array.isArray(r))v(r);else for(var y=0;y<r.length;y++)v(r[y]),e.addGroup(l,m,y),l+=m,m=0;function v(e){var t=s.length/3,n=e.extractPoints(o),r=n.shape,i=n.holes;!1===f.ShapeUtils.isClockWise(r)&&(r=r.reverse());for(var l=0,d=i.length;l<d;l++){var h=i[l];!0===f.ShapeUtils.isClockWise(h)&&(i[l]=h.reverse())}for(var p=f.ShapeUtils.triangulateShape(r,i),y=0,v=i.length;y<v;y++){var g=i[y];r=r.concat(g)}for(var _=0,b=r.length;_<b;_++){var x=r[_];s.push(x.x,x.y,0),u.push(0,0,1),c.push(x.x,x.y)}for(var M=0,C=p.length;M<C;M++){var w=p[M],S=w[0]+t,T=w[1]+t,N=w[2]+t;a.push(S,T,N),m+=3}}return e.setIndex(a),e.setAttribute("position",new d.Float32BufferAttribute(s,3)),e.setAttribute("normal",new d.Float32BufferAttribute(u,3)),e.setAttribute("uv",new d.Float32BufferAttribute(c,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes;return g(t,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,o=e.shapes.length;i<o;i++){var a=t[e.shapes[i]];r.push(a)}return new n(r,e.curveSegments)}}]),n}(l.BufferGeometry);function g(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}t.ShapeGeometry=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SphereGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(249);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,i.default)(this,n),e=t.call(this),e.type="SphereGeometry",e.parameters={radius:r,widthSegments:o,heightSegments:a,phiStart:s,phiLength:u,thetaStart:c,thetaLength:l},o=Math.max(3,Math.floor(o)),a=Math.max(2,Math.floor(a));for(var f=Math.min(c+l,Math.PI),p=0,m=[],y=new h.Vector3,v=new h.Vector3,g=[],_=[],b=[],x=[],M=0;M<=a;M++){var C=[],w=M/a,S=0;0===M&&0===c?S=.5/o:M===a&&f===Math.PI&&(S=-.5/o);for(var T=0;T<=o;T++){var N=T/o;y.x=-r*Math.cos(s+N*u)*Math.sin(c+w*l),y.y=r*Math.cos(c+w*l),y.z=r*Math.sin(s+N*u)*Math.sin(c+w*l),_.push(y.x,y.y,y.z),v.copy(y).normalize(),b.push(v.x,v.y,v.z),x.push(N+S,1-w),C.push(p++)}m.push(C)}for(var E=0;E<a;E++)for(var A=0;A<o;A++){var R=m[E][A+1],P=m[E][A],L=m[E+1][A],O=m[E+1][A+1];(0!==E||c>0)&&g.push(R,P,O),(E!==a-1||f<Math.PI)&&g.push(P,L,O)}return e.setIndex(g),e.setAttribute("position",new d.Float32BufferAttribute(_,3)),e.setAttribute("normal",new d.Float32BufferAttribute(b,3)),e.setAttribute("uv",new d.Float32BufferAttribute(x,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(l.BufferGeometry);t.SphereGeometry=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.TetrahedronGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(492);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.default)(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];return e=t.call(this,a,s,r,o),e.type="TetrahedronGeometry",e.parameters={radius:r,detail:o},e}return(0,o.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(c.PolyhedronGeometry);t.TetrahedronGeometry=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.TorusGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(249);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,i.default)(this,n),e=t.call(this),e.type="TorusGeometry",e.parameters={radius:r,tube:o,radialSegments:a,tubularSegments:s,arc:u},a=Math.floor(a),s=Math.floor(s);for(var c=[],l=[],f=[],p=[],m=new h.Vector3,y=new h.Vector3,v=new h.Vector3,g=0;g<=a;g++)for(var _=0;_<=s;_++){var b=_/s*u,x=g/a*Math.PI*2;y.x=(r+o*Math.cos(x))*Math.cos(b),y.y=(r+o*Math.cos(x))*Math.sin(b),y.z=o*Math.sin(x),l.push(y.x,y.y,y.z),m.x=r*Math.cos(b),m.y=r*Math.sin(b),v.subVectors(y,m).normalize(),f.push(v.x,v.y,v.z),p.push(_/s),p.push(g/a)}for(var M=1;M<=a;M++)for(var C=1;C<=s;C++){var w=(s+1)*M+C-1,S=(s+1)*(M-1)+C-1,T=(s+1)*(M-1)+C,N=(s+1)*M+C;c.push(w,S,N),c.push(S,T,N)}return e.setIndex(c),e.setAttribute("position",new d.Float32BufferAttribute(l,3)),e.setAttribute("normal",new d.Float32BufferAttribute(f,3)),e.setAttribute("uv",new d.Float32BufferAttribute(p,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(l.BufferGeometry);t.TorusGeometry=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.TorusKnotGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(249);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,i.default)(this,n),e=t.call(this),e.type="TorusKnotGeometry",e.parameters={radius:r,tube:o,tubularSegments:a,radialSegments:s,p:u,q:c},a=Math.floor(a),s=Math.floor(s);for(var l=[],f=[],p=[],m=[],y=new h.Vector3,v=new h.Vector3,g=new h.Vector3,_=new h.Vector3,b=new h.Vector3,x=new h.Vector3,M=new h.Vector3,C=0;C<=a;++C){var w=C/a*u*Math.PI*2;I(w,u,c,r,g),I(w+.01,u,c,r,_),x.subVectors(_,g),M.addVectors(_,g),b.crossVectors(x,M),M.crossVectors(b,x),b.normalize(),M.normalize();for(var S=0;S<=s;++S){var T=S/s*Math.PI*2,N=-o*Math.cos(T),E=o*Math.sin(T);y.x=g.x+(N*M.x+E*b.x),y.y=g.y+(N*M.y+E*b.y),y.z=g.z+(N*M.z+E*b.z),f.push(y.x,y.y,y.z),v.subVectors(y,g).normalize(),p.push(v.x,v.y,v.z),m.push(C/a),m.push(S/s)}}for(var A=1;A<=a;A++)for(var R=1;R<=s;R++){var P=(s+1)*(A-1)+(R-1),L=(s+1)*A+(R-1),O=(s+1)*A+R,k=(s+1)*(A-1)+R;l.push(P,L,k),l.push(L,O,k)}function I(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(l),e.setAttribute("position",new d.Float32BufferAttribute(f,3)),e.setAttribute("normal",new d.Float32BufferAttribute(p,3)),e.setAttribute("uv",new d.Float32BufferAttribute(m,2)),e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(l.BufferGeometry);t.TorusKnotGeometry=m},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.TubeGeometry=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(262),h=n(263),f=v(n(475)),p=n(234),m=n(249);function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=_();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){(0,u.default)(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f["QuadraticBezierCurve3"](new m.Vector3(-1,-1,0),new m.Vector3(-1,1,0),new m.Vector3(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,o.default)(this,n),e=t.call(this),e.type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:s,closed:u};var c=r.computeFrenetFrames(i,u);e.tangents=c.tangents,e.normals=c.normals,e.binormals=c.binormals;var l=new m.Vector3,d=new m.Vector3,y=new p.Vector2,v=new m.Vector3,g=[],_=[],b=[],x=[];function M(){for(var e=0;e<i;e++)C(e);C(!1===u?i:0),S(),w()}function C(e){v=r.getPointAt(e/i,v);for(var t=c.normals[e],n=c.binormals[e],o=0;o<=s;o++){var u=o/s*Math.PI*2,h=Math.sin(u),f=-Math.cos(u);d.x=f*t.x+h*n.x,d.y=f*t.y+h*n.y,d.z=f*t.z+h*n.z,d.normalize(),_.push(d.x,d.y,d.z),l.x=v.x+a*d.x,l.y=v.y+a*d.y,l.z=v.z+a*d.z,g.push(l.x,l.y,l.z)}}function w(){for(var e=1;e<=i;e++)for(var t=1;t<=s;t++){var n=(s+1)*(e-1)+(t-1),r=(s+1)*e+(t-1),o=(s+1)*e+t,a=(s+1)*(e-1)+t;x.push(n,r,a),x.push(r,o,a)}}function S(){for(var e=0;e<=i;e++)for(var t=0;t<=s;t++)y.x=e/i,y.y=t/s,b.push(y.x,y.y)}return M(),e.setIndex(x),e.setAttribute("position",new h.Float32BufferAttribute(g,3)),e.setAttribute("normal",new h.Float32BufferAttribute(_,3)),e.setAttribute("uv",new h.Float32BufferAttribute(b,2)),e}return(0,a.default)(n,[{key:"copy",value:function(e){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=(0,s.default)((0,l.default)(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new f[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(d.BufferGeometry);t.TubeGeometry=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.WireframeGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262),d=n(263),h=n(249);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,i.default)(this,n),e=t.call(this),e.type="WireframeGeometry",e.parameters={geometry:r},null!==r){var o=[],a=new Set,s=new h.Vector3,u=new h.Vector3;if(null!==r.index){var c=r.attributes.position,l=r.index,f=r.groups;0===f.length&&(f=[{start:0,count:l.count,materialIndex:0}]);for(var p=0,m=f.length;p<m;++p)for(var v=f[p],g=v.start,_=v.count,b=g,x=g+_;b<x;b+=3)for(var M=0;M<3;M++){var C=l.getX(b+M),w=l.getX(b+(M+1)%3);s.fromBufferAttribute(c,C),u.fromBufferAttribute(c,w),!0===y(s,u,a)&&(o.push(s.x,s.y,s.z),o.push(u.x,u.y,u.z))}}else for(var S=r.attributes.position,T=0,N=S.count/3;T<N;T++)for(var E=0;E<3;E++){var A=3*T+E,R=3*T+(E+1)%3;s.fromBufferAttribute(S,A),u.fromBufferAttribute(S,R),!0===y(s,u,a)&&(o.push(s.x,s.y,s.z),o.push(u.x,u.y,u.z))}e.setAttribute("position",new d.Float32BufferAttribute(o,3))}return e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(l.BufferGeometry);function y(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}t.WireframeGeometry=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LineBasicMaterial",{enumerable:!0,get:function(){return _.LineBasicMaterial}}),Object.defineProperty(t,"LineDashedMaterial",{enumerable:!0,get:function(){return g.LineDashedMaterial}}),Object.defineProperty(t,"Material",{enumerable:!0,get:function(){return b.Material}}),Object.defineProperty(t,"MeshBasicMaterial",{enumerable:!0,get:function(){return y.MeshBasicMaterial}}),Object.defineProperty(t,"MeshDepthMaterial",{enumerable:!0,get:function(){return p.MeshDepthMaterial}}),Object.defineProperty(t,"MeshDistanceMaterial",{enumerable:!0,get:function(){return m.MeshDistanceMaterial}}),Object.defineProperty(t,"MeshLambertMaterial",{enumerable:!0,get:function(){return f.MeshLambertMaterial}}),Object.defineProperty(t,"MeshMatcapMaterial",{enumerable:!0,get:function(){return v.MeshMatcapMaterial}}),Object.defineProperty(t,"MeshNormalMaterial",{enumerable:!0,get:function(){return h.MeshNormalMaterial}}),Object.defineProperty(t,"MeshPhongMaterial",{enumerable:!0,get:function(){return l.MeshPhongMaterial}}),Object.defineProperty(t,"MeshPhysicalMaterial",{enumerable:!0,get:function(){return u.MeshPhysicalMaterial}}),Object.defineProperty(t,"MeshStandardMaterial",{enumerable:!0,get:function(){return c.MeshStandardMaterial}}),Object.defineProperty(t,"MeshToonMaterial",{enumerable:!0,get:function(){return d.MeshToonMaterial}}),Object.defineProperty(t,"PointsMaterial",{enumerable:!0,get:function(){return s.PointsMaterial}}),Object.defineProperty(t,"RawShaderMaterial",{enumerable:!0,get:function(){return o.RawShaderMaterial}}),Object.defineProperty(t,"ShaderMaterial",{enumerable:!0,get:function(){return a.ShaderMaterial}}),Object.defineProperty(t,"ShadowMaterial",{enumerable:!0,get:function(){return r.ShadowMaterial}}),Object.defineProperty(t,"SpriteMaterial",{enumerable:!0,get:function(){return i.SpriteMaterial}});var r=n(509),i=n(450),o=n(510),a=n(266),s=n(463),u=n(511),c=n(512),l=n(513),d=n(514),h=n(515),f=n(516),p=n(430),m=n(431),y=n(259),v=n(517),g=n(518),_=n(460),b=n(260)},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ShadowMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(260),d=n(261);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isShadowMaterial=!0,r.type="ShadowMaterial",r.color=new d.Color(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(l.Material);t.ShadowMaterial=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.RawShaderMaterial=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(266);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),r.isRawShaderMaterial=!0,r.type="RawShaderMaterial",r}return(0,i.default)(n)}(c.ShaderMaterial);t.RawShaderMaterial=h},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshPhysicalMaterial=void 0;var o=r(n(18)),a=r(n(23)),s=r(n(24)),u=r(n(227)),c=r(n(247)),l=r(n(225)),d=r(n(226)),h=r(n(228)),f=n(234),p=n(512),m=n(261),y=g(n(233));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function _(e){var t=b();return function(){var n,r=(0,h.default)(e);if(t){var i=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){(0,l.default)(n,e);var t=_(n);function n(e){var r;return(0,a.default)(this,n),r=t.call(this),r.isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.anisotropyRotation=0,r.anisotropyMap=null,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new f.Vector2(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,u.default)(r),"reflectivity",{get:function(){return y.clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new m.Color(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new m.Color(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new m.Color(1,1,1),r.specularColorMap=null,r._anisotropy=0,r._clearcoat=0,r._iridescence=0,r._sheen=0,r._transmission=0,r.setValues(e),r}return(0,s.default)(n,[{key:"anisotropy",get:function(){return this._anisotropy},set:function(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return(0,c.default)((0,h.default)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=(0,o.default)(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(p.MeshStandardMaterial);t.MeshPhysicalMaterial=x},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshStandardMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(260),h=n(234),f=n(261);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new f.Color(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new f.Color(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=l.TangentSpaceNormalMap,r.normalScale=new h.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(d.Material);t.MeshStandardMaterial=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshPhongMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(260),h=n(234),f=n(261);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshPhongMaterial=!0,r.type="MeshPhongMaterial",r.color=new f.Color(16777215),r.specular=new f.Color(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new f.Color(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=l.TangentSpaceNormalMap,r.normalScale=new h.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=l.MultiplyOperation,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(d.Material);t.MeshPhongMaterial=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshToonMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(260),h=n(234),f=n(261);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshToonMaterial=!0,r.defines={TOON:""},r.type="MeshToonMaterial",r.color=new f.Color(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new f.Color(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=l.TangentSpaceNormalMap,r.normalScale=new h.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(d.Material);t.MeshToonMaterial=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshNormalMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(260),h=n(234);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshNormalMaterial=!0,r.type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=l.TangentSpaceNormalMap,r.normalScale=new h.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(d.Material);t.MeshNormalMaterial=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshLambertMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(260),h=n(234),f=n(261);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshLambertMaterial=!0,r.type="MeshLambertMaterial",r.color=new f.Color(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new f.Color(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=l.TangentSpaceNormalMap,r.normalScale=new h.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=l.MultiplyOperation,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(d.Material);t.MeshLambertMaterial=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MeshMatcapMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(223),d=n(260),h=n(234),f=n(261);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new f.Color(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=l.TangentSpaceNormalMap,r.normalScale=new h.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(d.Material);t.MeshMatcapMaterial=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LineDashedMaterial=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(460);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.isLineDashedMaterial=!0,r.type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(l.LineBasicMaterial);t.LineDashedMaterial=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(520),l=n(534),d=n(538);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new l.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=c.AnimationClip.parse(e[n]);t.push(r)}return t}}]),n}(d.Loader);t.AnimationLoader=p},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationClip=void 0;var o=r(n(23)),a=r(n(24)),s=g(n(521)),u=n(522),c=n(527),l=n(528),d=n(529),h=n(530),f=n(532),p=n(533),m=g(n(233)),y=n(223);function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var _=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.NormalAnimationBlendMode;(0,o.default)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=m.generateUUID(),this.duration<0&&this.resetDuration()}return(0,a.default)(e,[{key:"resetDuration",value:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(x(n[i]).scale(r));var a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,o=n.length;i!==o;++i)t.push(u.KeyframeTrack.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var u=[],c=[];u.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var l=s.getKeyframeOrder(u);u=s.sortedArray(u,1,l),c=s.sortedArray(c,1,l),r||0!==u[0]||(u.push(i),c.push(c[0])),o.push(new d.NumberKeyframeTrack(".morphTargetInfluences["+t[a].name+"]",u,c).scale(1/n))}return new this(e,-1,o)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var d=[];for(var h in r)d.push(this.CreateFromMorphTargetSequence(h,r[h],t,n));return d}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];s.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,u=e.length||-1,c=e.hierarchy||[],l=0;l<c.length;l++){var f=c[l].keys;if(f&&0!==f.length)if(f[0].morphTargets){var m={},y=void 0;for(y=0;y<f.length;y++)if(f[y].morphTargets)for(var v=0;v<f[y].morphTargets.length;v++)m[f[y].morphTargets[v]]=-1;for(var g in m){for(var _=[],b=[],x=0;x!==f[y].morphTargets.length;++x){var M=f[y];_.push(M.time),b.push(M.morphTarget===g?1:0)}r.push(new d.NumberKeyframeTrack(".morphTargetInfluence["+g+"]",_,b))}u=m.length*o}else{var C=".bones["+t[l].name+"]";n(p.VectorKeyframeTrack,C+".position",f,"pos",r),n(h.QuaternionKeyframeTrack,C+".quaternion",f,"rot",r),n(p.VectorKeyframeTrack,C+".scale",f,"scl",r)}}if(0===r.length)return null;var w=new this(i,u,r,a);return w}}]),e}();function b(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return d.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return p.VectorKeyframeTrack;case"color":return l.ColorKeyframeTrack;case"quaternion":return h.QuaternionKeyframeTrack;case"bool":case"boolean":return c.BooleanKeyframeTrack;case"string":return f.StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function x(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=b(e.type);if(void 0===e.times){var n=[],r=[];s.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}t.AnimationClip=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationUtils=void 0,t.arraySlice=o,t.convertArray=a,t.flattenJSON=l,t.getKeyframeOrder=u,t.isTypedArray=s,t.makeClipAdditive=h,t.sortedArray=c,t.subclip=d;var r=n(250),i=n(223);function o(e,t,n){return s(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function a(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function s(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r}function c(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i}function l(e,t,n,r){var i=1,o=e[0];while(void 0!==o&&void 0===o[r])o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}function d(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=e.clone();o.name=t;for(var s=[],u=0;u<o.tracks.length;++u){for(var c=o.tracks[u],l=c.getValueSize(),d=[],h=[],f=0;f<c.times.length;++f){var p=c.times[f]*i;if(!(p<n||p>=r)){d.push(c.times[f]);for(var m=0;m<l;++m)h.push(c.values[f*l+m])}}0!==d.length&&(c.times=a(d,c.times.constructor),c.values=a(h,c.values.constructor),s.push(c))}o.tracks=s;for(var y=1/0,v=0;v<o.tracks.length;++v)y>o.tracks[v].times[0]&&(y=o.tracks[v].times[0]);for(var g=0;g<o.tracks.length;++g)o.tracks[g].shift(-1*y);return o.resetDuration(),o}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;a<=0&&(a=30);for(var s=n.tracks.length,u=t/a,c=function(t){var i=n.tracks[t],a=i.ValueTypeName;if("bool"===a||"string"===a)return"continue";var s=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===a}));if(void 0===s)return"continue";var c=0,l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var d=0,h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);var f=i.times.length-1,p=void 0;if(u<=i.times[0]){var m=c,y=l-c;p=o(i.values,m,y)}else if(u>=i.times[f]){var v=f*l+c,g=v+l-c;p=o(i.values,v,g)}else{var _=i.createInterpolant(),b=c,x=l-c;_.evaluate(u),p=o(_.resultBuffer,b,x)}if("quaternion"===a){var M=(new r.Quaternion).fromArray(p).normalize().conjugate();M.toArray(p)}for(var C=s.times.length,w=0;w<C;++w){var S=w*h+d;if("quaternion"===a)r.Quaternion.multiplyQuaternionsFlat(s.values,S,p,0,s.values,S);else for(var T=h-2*d,N=0;N<T;++N)s.values[S+N]-=p[N]}},l=0;l<s;++l)c(l);return e.blendMode=i.AdditiveAnimationBlendMode,e}var f={arraySlice:o,convertArray:a,isTypedArray:s,getKeyframeOrder:u,sortedArray:c,flattenJSON:l,subclip:d,makeClipAdditive:h};t.AnimationUtils=f},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.KeyframeTrack=void 0;var o=r(n(23)),a=r(n(24)),s=n(223),u=n(523),c=n(525),l=n(526),d=f(n(521));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var p=function(){function e(t,n,r,i){if((0,o.default)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=d.convertArray(n,this.TimeBufferType),this.values=d.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,a.default)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new l.DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new c.LinearInterpolant(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new u.CubicInterpolant(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case s.InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case s.InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case s.InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return s.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return s.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return s.InterpolateSmooth}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){var n=this.times,r=n.length,i=0,o=r-1;while(i!==r&&n[i]<e)++i;while(-1!==o&&n[o]>t)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=d.arraySlice(n,i,o),this.values=d.arraySlice(this.values,i*a,o*a)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&d.isTypedArray(r))for(var u=0,c=r.length;u!==c;++u){var l=r[u];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=d.arraySlice(this.times),t=d.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===s.InterpolateSmooth,i=e.length-1,o=1,a=1;a<i;++a){var u=!1,c=e[a],l=e[a+1];if(c!==l&&(1!==a||c!==e[0]))if(r)u=!0;else for(var h=a*n,f=h-n,p=h+n,m=0;m!==n;++m){var y=t[h+m];if(y!==t[f+m]||y!==t[p+m]){u=!0;break}}if(u){if(a!==o){e[o]=e[a];for(var v=a*n,g=o*n,_=0;_!==n;++_)t[g+_]=t[v+_]}++o}}if(i>0){e[o]=e[i];for(var b=i*n,x=o*n,M=0;M!==n;++M)t[x+M]=t[b+M];++o}return o!==e.length?(this.times=d.arraySlice(e,0,o),this.values=d.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=d.arraySlice(this.times,0),t=d.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:d.convertArray(e.times,Array),values:d.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();t.KeyframeTrack=p,p.prototype.TimeBufferType=Float32Array,p.prototype.ValueBufferType=Float32Array,p.prototype.DefaultInterpolation=s.InterpolateLinear},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CubicInterpolant=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(524);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e,r,o,a){var s;return(0,i.default)(this,n),s=t.call(this,e,r,o,a),s._weightPrev=-0,s._offsetPrev=-0,s._weightNext=-0,s._offsetNext=-0,s.DefaultSettings_={endingStart:c.ZeroCurvatureEnding,endingEnd:c.ZeroCurvatureEnding},s}return(0,o.default)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case c.ZeroSlopeEnding:i=e,a=2*t-n;break;case c.WrapAroundEnding:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case c.ZeroSlopeEnding:o=e,s=2*n-t;break;case c.WrapAroundEnding:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,y=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,g=(-1-h)*m+(1.5+h)*p+.5*f,_=h*m-h*p,b=0;b!==a;++b)i[b]=y*o[c+b]+v*o[u+b]+g*o[s+b]+_*o[l+b];return i}}]),n}(l.Interpolant);t.CubicInterpolant=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Interpolant=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(t,n,r,o){(0,i.default)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,o.default)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}while(n<o){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();t.Interpolant=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LinearInterpolant=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(524);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r,o,a){return(0,i.default)(this,n),t.call(this,e,r,o,a)}return(0,o.default)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c,d=0;d!==a;++d)i[d]=o[u+d]*l+o[s+d]*c;return i}}]),n}(c.Interpolant);t.LinearInterpolant=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DiscreteInterpolant=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(524);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r,o,a){return(0,i.default)(this,n),t.call(this,e,r,o,a)}return(0,o.default)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(c.Interpolant);t.DiscreteInterpolant=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanKeyframeTrack=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(522);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n)}(l.KeyframeTrack);t.BooleanKeyframeTrack=f,f.prototype.ValueTypeName="bool",f.prototype.ValueBufferType=Array,f.prototype.DefaultInterpolation=c.InterpolateDiscrete,f.prototype.InterpolantFactoryMethodLinear=void 0,f.prototype.InterpolantFactoryMethodSmooth=void 0},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ColorKeyframeTrack=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(522);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n)}(c.KeyframeTrack);t.ColorKeyframeTrack=h,h.prototype.ValueTypeName="color"},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.NumberKeyframeTrack=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(522);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n)}(c.KeyframeTrack);t.NumberKeyframeTrack=h,h.prototype.ValueTypeName="number"},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.QuaternionKeyframeTrack=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(522),d=n(531);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new d.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}]),n}(l.KeyframeTrack);t.QuaternionKeyframeTrack=p,p.prototype.ValueTypeName="quaternion",p.prototype.DefaultInterpolation=c.InterpolateLinear,p.prototype.InterpolantFactoryMethodSmooth=void 0},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.QuaternionLinearInterpolant=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(524),l=n(250);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e,r,o,a){return(0,i.default)(this,n),t.call(this,e,r,o,a)}return(0,o.default)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t),u=e*a,c=u+a;u!==c;u+=4)l.Quaternion.slerpFlat(i,0,o,u-a,o,u,s);return i}}]),n}(c.Interpolant);t.QuaternionLinearInterpolant=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.StringKeyframeTrack=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(522);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n)}(l.KeyframeTrack);t.StringKeyframeTrack=f,f.prototype.ValueTypeName="string",f.prototype.ValueBufferType=Array,f.prototype.DefaultInterpolation=c.InterpolateDiscrete,f.prototype.InterpolantFactoryMethodLinear=void 0,f.prototype.InterpolantFactoryMethodSmooth=void 0},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.VectorKeyframeTrack=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(522);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n)}(c.KeyframeTrack);t.VectorKeyframeTrack=h,h.prototype.ValueTypeName="vector"},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.FileLoader=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=r(n(535)),l=n(537),d=n(538);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p={},m=function(e){(0,a.default)(n,e);var t=h(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e),i.response=r,i}return(0,i.default)(n)}((0,c.default)(Error)),y=function(e){(0,a.default)(n,e);var t=h(n);function n(e){return(0,o.default)(this,n),t.call(this,e)}return(0,i.default)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=l.Cache.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===p[e]){p[e]=[],p[e].push({onLoad:t,onProgress:n,onError:r});var a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(a).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=p[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=i?parseInt(i):0,a=0!==o,s=0,u=new ReadableStream({start:function(e){function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{s+=u.byteLength;for(var c=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o}),l=0,d=n.length;l<d;l++){var h=n[l];h.onProgress&&h.onProgress(c)}e.enqueue(u),t()}}))}t()}});return new Response(u)}throw new m('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){var t=new DOMParser;return t.parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i,n=t.exec(s),r=n&&n[1]?n[1].toLowerCase():void 0,i=new TextDecoder(r);return e.arrayBuffer().then((function(e){return i.decode(e)}))}})).then((function(t){l.Cache.add(e,t);var n=p[e];delete p[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onLoad&&o.onLoad(t)}})).catch((function(t){var n=p[e];if(void 0===n)throw i.manager.itemError(e),t;delete p[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else p[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(d.Loader);t.FileLoader=y},function(e,t,n){var r=n(228),i=n(16),o=n(536),a=n(15);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t){function n(e){return-1!==Function.toString.call(e).indexOf("[native code]")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var r={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};t.Cache=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var i=r(n(23)),o=r(n(24)),a=n(539),s=function(){function e(t){(0,i.default)(this,e),this.manager=void 0!==t?t:a.DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,o.default)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();t.Loader=s,s.DEFAULT_MATERIAL_NAME="__DEFAULT"},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingManager=t.DefaultLoadingManager=void 0;var i=r(n(24)),o=r(n(23)),a=(0,i.default)((function e(t,n,r){(0,o.default)(this,e);var i=this,a=!1,s=0,u=0,c=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){u++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,u),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,u),s===u&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return c?c(e):e},this.setURLModifier=function(e){return c=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}));t.LoadingManager=a;var s=new a;t.DefaultLoadingManager=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CompressedTextureLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(534),d=n(466),h=n(538);function f(e){var t=p();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,a.default)(n,e);var t=f(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=[],a=new d.CompressedTexture,s=new l.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function h(l){s.load(e[l],(function(e){var n=i.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(a.minFilter=c.LinearFilter),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(var f=0,p=e.length;f<p;++f)h(f);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=c.LinearFilter),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}]),n}(h.Loader);t.CompressedTextureLoader=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CubeTextureLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(542),l=n(273),d=n(538),h=n(223);function f(e){var t=p();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,a.default)(n,e);var t=f(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=new l.CubeTexture;i.colorSpace=h.SRGBColorSpace;var o=new c.ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(d.Loader);t.CubeTextureLoader=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ImageLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(537),l=n(538),d=n(238);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=c.Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=(0,d.createElementNS)("img");function s(){l(),c.Cache.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}]),n}(l.Loader);t.ImageLoader=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DataTextureLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(223),l=n(534),d=n(455),h=n(538);function f(e){var t=p();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,a.default)(n,e);var t=f(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new d.DataTexture,a=new l.FileLoader(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){var n;try{n=i.parse(e)}catch(a){if(void 0===r)return void console.error(a);r(a)}if(!n)return r();void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:c.ClampToEdgeWrapping,o.wrapT=void 0!==n.wrapT?n.wrapT:c.ClampToEdgeWrapping,o.magFilter=void 0!==n.magFilter?n.magFilter:c.LinearFilter,o.minFilter=void 0!==n.minFilter?n.minFilter:c.LinearFilter,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?o.colorSpace=n.colorSpace:void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=c.LinearMipmapLinearFilter),1===n.mipmapCount&&(o.minFilter=c.LinearFilter),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n)}),n,r),o}}]),n}(h.Loader);t.DataTextureLoader=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.TextureLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(542),l=n(232),d=n(538);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=new l.Texture,o=new c.ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(d.Loader);t.TextureLoader=p},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectLoader=void 0;var o=r(n(189)),a=r(n(191)),s=r(n(23)),u=r(n(24)),c=r(n(225)),l=r(n(226)),d=r(n(228)),h=n(223),f=n(457),p=n(261),m=n(255),y=n(439),v=n(456),g=n(447),_=n(462),b=n(459),x=n(461),M=n(458),C=n(451),w=n(246),S=n(452),T=n(454),N=n(453),E=n(495),A=n(445),R=n(444),P=n(546),L=n(548),O=n(551),k=n(553),I=n(555),D=n(556),U=n(557),B=n(413),F=n(271),G=n(446),j=n(273),z=n(232),V=n(236),H=n(455),W=n(542),q=n(539),X=n(520),Y=n(559),J=n(560),K=n(561),$=n(538),Z=n(534),Q=ne(n(470)),ee=n(238);function te(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(te=function(e){return e?n:t})(e)}function ne(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=te(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function re(e){var t=ie();return function(){var n,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}function ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var oe=function(e){(0,c.default)(n,e);var t=re(n);function n(e){return(0,s.default)(this,n),t.call(this,e)}return(0,u.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=""===this.path?J.LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Z.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(o,t)}),n,r)}},{key:"loadAsync",value:function(){var e=(0,a.default)(o.default.mark((function e(t,n){var r,i,a,s,u,c;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?J.LoaderUtils.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,a=new Z.FileLoader(this.manager),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(s=e.sent,u=JSON.parse(s),c=u.metadata,void 0!==c&&void 0!==c.type&&"geometry"!==c.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(u);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,i,s,a,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),void 0!==t){var l=!1;for(var d in o)if(o[d].data instanceof HTMLImageElement){l=!0;break}!1===l&&t(u)}return u}},{key:"parseAsync",value:function(){var e=(0,a.default)(o.default.mark((function e(t){var n,r,i,a,s,u,c,l;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,s=this.parseTextures(t.textures,a),u=this.parseMaterials(t.materials,s),c=this.parseObject(t.object,i,u,s,n),l=this.parseSkeletons(t.skeletons,c),this.bindSkeletons(c,l),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new E.Shape).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=(new N.Skeleton).fromJSON(e[i],r);n[a.uuid]=a}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new K.BufferGeometryLoader,i=0,o=e.length;i<o;i++){var a=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in Q?a=Q[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new Y.MaterialLoader;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=X.AnimationClip.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function o(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}function a(e){if("string"===typeof e){var t=e,n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t;return o(n)}return e.data?{data:(0,ee.getTypedArray)(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var s=new q.LoadingManager(t);n=new W.ImageLoader(s),n.setCrossOrigin(this.crossOrigin);for(var u=0,c=e.length;u<c;u++){var l=e[u],d=l.url;if(Array.isArray(d)){for(var h=[],f=0,p=d.length;f<p;f++){var m=d[f],y=a(m);null!==y&&(y instanceof HTMLImageElement?h.push(y):h.push(new H.DataTexture(y.data,y.width,y.height)))}i[l.uuid]=new V.Source(h)}else{var v=a(l.url);i[l.uuid]=new V.Source(v)}}}return i}},{key:"parseImagesAsync",value:function(){var e=(0,a.default)(o.default.mark((function e(t){var n,r,i,s,u,c,l,d,h,f,p,m,y,v,g;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=function(){return u=(0,a.default)(o.default.mark((function e(t){var r,a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return r=t,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r)?r:n.resourcePath+r,e.next=5,i.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:(0,ee.getTypedArray)(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)},s=function(e){return u.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=33;break}i=new W.ImageLoader(this.manager),i.setCrossOrigin(this.crossOrigin),c=0,l=t.length;case 8:if(!(c<l)){e.next=33;break}if(d=t[c],h=d.url,!Array.isArray(h)){e.next=26;break}f=[],p=0,m=h.length;case 14:if(!(p<m)){e.next=23;break}return y=h[p],e.next=18,s(y);case 18:v=e.sent,null!==v&&(v instanceof HTMLImageElement?f.push(v):f.push(new H.DataTexture(v.data,v.width,v.height)));case 20:p++,e.next=14;break;case 23:r[d.uuid]=new V.Source(f),e.next=30;break;case 26:return e.next=28,s(d.url);case 28:g=e.sent,r[d.uuid]=new V.Source(g);case 30:c++,e.next=8;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=t[a.image],u=s.data,c=void 0;Array.isArray(u)?(c=new j.CubeTexture,6===u.length&&(c.needsUpdate=!0)):(c=u&&u.data?new H.DataTexture:new z.Texture,u&&(c.needsUpdate=!0)),c.source=s,c.uuid=a.uuid,void 0!==a.name&&(c.name=a.name),void 0!==a.mapping&&(c.mapping=n(a.mapping,ae)),void 0!==a.channel&&(c.channel=a.channel),void 0!==a.offset&&c.offset.fromArray(a.offset),void 0!==a.repeat&&c.repeat.fromArray(a.repeat),void 0!==a.center&&c.center.fromArray(a.center),void 0!==a.rotation&&(c.rotation=a.rotation),void 0!==a.wrap&&(c.wrapS=n(a.wrap[0],se),c.wrapT=n(a.wrap[1],se)),void 0!==a.format&&(c.format=a.format),void 0!==a.internalFormat&&(c.internalFormat=a.internalFormat),void 0!==a.type&&(c.type=a.type),void 0!==a.colorSpace&&(c.colorSpace=a.colorSpace),void 0!==a.encoding&&(c.encoding=a.encoding),void 0!==a.minFilter&&(c.minFilter=n(a.minFilter,ue)),void 0!==a.magFilter&&(c.magFilter=n(a.magFilter,ue)),void 0!==a.anisotropy&&(c.anisotropy=a.anisotropy),void 0!==a.flipY&&(c.flipY=a.flipY),void 0!==a.generateMipmaps&&(c.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(c.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(c.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(c.compareFunction=a.compareFunction),void 0!==a.userData&&(c.userData=a.userData),r[a.uuid]=c}return r}},{key:"parseObject",value:function(e,t,n,r,i){var o,a,s;function u(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function l(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new G.Scene,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new p.Color(e.background):o.background=l(e.background)),void 0!==e.environment&&(o.environment=l(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new A.Fog(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new R.FogExp2(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new F.PerspectiveCamera(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new B.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new I.AmbientLight(e.color,e.intensity);break;case"DirectionalLight":o=new k.DirectionalLight(e.color,e.intensity);break;case"PointLight":o=new O.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new D.RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new L.SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new P.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new U.LightProbe).fromJSON(e);break;case"SkinnedMesh":a=u(e.geometry),s=c(e.material),o=new S.SkinnedMesh(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=u(e.geometry),s=c(e.material),o=new w.Mesh(a,s);break;case"InstancedMesh":a=u(e.geometry),s=c(e.material);var d=e.count,h=e.instanceMatrix,N=e.instanceColor;o=new v.InstancedMesh(a,s,d),o.instanceMatrix=new f.InstancedBufferAttribute(new Float32Array(h.array),16),void 0!==N&&(o.instanceColor=new f.InstancedBufferAttribute(new Float32Array(N.array),N.itemSize));break;case"LOD":o=new C.LOD;break;case"Line":o=new b.Line(u(e.geometry),c(e.material));break;case"LineLoop":o=new x.LineLoop(u(e.geometry),c(e.material));break;case"LineSegments":o=new M.LineSegments(u(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new _.Points(u(e.geometry),c(e.material));break;case"Sprite":o=new g.Sprite(c(e.material));break;case"Group":o=new y.Group;break;case"Bone":o=new T.Bone;break;default:o=new m.Object3D}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children)for(var E=e.children,j=0;j<E.length;j++)o.add(this.parseObject(E[j],t,n,r,i));if(void 0!==e.animations)for(var z=e.animations,V=0;V<z.length;V++){var H=z[V];o.animations.push(i[H])}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);for(var W=e.levels,q=0;q<W.length;q++){var X=W[q],Y=o.getObjectByProperty("uuid",X.object);void 0!==Y&&o.addLevel(Y,X.distance,X.hysteresis)}}return o}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}($.Loader);t.ObjectLoader=oe;var ae={UVMapping:h.UVMapping,CubeReflectionMapping:h.CubeReflectionMapping,CubeRefractionMapping:h.CubeRefractionMapping,EquirectangularReflectionMapping:h.EquirectangularReflectionMapping,EquirectangularRefractionMapping:h.EquirectangularRefractionMapping,CubeUVReflectionMapping:h.CubeUVReflectionMapping},se={RepeatWrapping:h.RepeatWrapping,ClampToEdgeWrapping:h.ClampToEdgeWrapping,MirroredRepeatWrapping:h.MirroredRepeatWrapping},ue={NearestFilter:h.NearestFilter,NearestMipmapNearestFilter:h.NearestMipmapNearestFilter,NearestMipmapLinearFilter:h.NearestMipmapLinearFilter,LinearFilter:h.LinearFilter,LinearMipmapNearestFilter:h.LinearMipmapNearestFilter,LinearMipmapLinearFilter:h.LinearMipmapLinearFilter}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLight=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(547),d=n(261),h=n(255);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(e,r,o){var a;return(0,i.default)(this,n),a=t.call(this,e,o),a.isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(h.Object3D.DEFAULT_UP),a.updateMatrix(),a.groundColor=new d.Color(r),a}return(0,o.default)(n,[{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(l.Light);t.HemisphereLight=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Light=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(255),d=n(261);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,i.default)(this,n),r=t.call(this),r.isLight=!0,r.type="Light",r.color=new d.Color(e),r.intensity=o,r}return(0,o.default)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(l.Object3D);t.Light=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(547),d=n(549),h=n(255);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return(0,i.default)(this,n),o=t.call(this,e,r),o.isSpotLight=!0,o.type="SpotLight",o.position.copy(h.Object3D.DEFAULT_UP),o.updateMatrix(),o.target=new h.Object3D,o.distance=a,o.angle=s,o.penumbra=u,o.decay=c,o.map=null,o.shadow=new d.SpotLightShadow,o}return(0,o.default)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(l.Light);t.SpotLight=m},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLightShadow=void 0;var o=r(n(23)),a=r(n(24)),s=r(n(247)),u=r(n(225)),c=r(n(226)),l=r(n(228)),d=n(550),h=m(n(233)),f=n(271);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function y(e){var t=v();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){(0,u.default)(n,e);var t=y(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this,new f.PerspectiveCamera(50,1,.5,500)),e.isSpotLightShadow=!0,e.focus=1,e}return(0,a.default)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*h.RAD2DEG*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;r===t.fov&&i===t.aspect&&o===t.far||(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),(0,s.default)((0,l.default)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return(0,s.default)((0,l.default)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(d.LightShadow);t.SpotLightShadow=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LightShadow=void 0;var i=r(n(23)),o=r(n(24)),a=n(254),s=n(234),u=n(249),c=n(240),l=n(275),d=new a.Matrix4,h=new u.Vector3,f=new u.Vector3,p=function(){function e(t){(0,i.default)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new s.Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new a.Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new l.Frustum,this._frameExtents=new s.Vector2(1,1),this._viewportCount=1,this._viewports=[new c.Vector4(0,0,1,1)]}return(0,o.default)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;h.setFromMatrixPosition(e.matrixWorld),t.position.copy(h),f.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(f),t.updateMatrixWorld(),d.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(d)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}();t.LightShadow=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PointLight=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(547),d=n(552);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return(0,i.default)(this,n),o=t.call(this,e,r),o.isPointLight=!0,o.type="PointLight",o.distance=a,o.decay=s,o.shadow=new d.PointLightShadow,o}return(0,o.default)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(l.Light);t.PointLight=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PointLightShadow=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(550),l=n(271),d=n(254),h=n(234),f=n(249),p=n(240);function m(e){var t=y();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=new d.Matrix4,g=new f.Vector3,_=new f.Vector3,b=function(e){(0,a.default)(n,e);var t=m(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this,new l.PerspectiveCamera(90,1,.5,500)),e.isPointLightShadow=!0,e._frameExtents=new h.Vector2(4,2),e._viewportCount=6,e._viewports=[new p.Vector4(2,1,1,1),new p.Vector4(0,1,1,1),new p.Vector4(3,1,1,1),new p.Vector4(1,1,1,1),new p.Vector4(3,0,1,1),new p.Vector4(1,0,1,1)],e._cubeDirections=[new f.Vector3(1,0,0),new f.Vector3(-1,0,0),new f.Vector3(0,0,1),new f.Vector3(0,0,-1),new f.Vector3(0,1,0),new f.Vector3(0,-1,0)],e._cubeUps=[new f.Vector3(0,1,0),new f.Vector3(0,1,0),new f.Vector3(0,1,0),new f.Vector3(0,1,0),new f.Vector3(0,0,1),new f.Vector3(0,0,-1)],e}return(0,o.default)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),g.setFromMatrixPosition(e.matrixWorld),n.position.copy(g),_.copy(n.position),_.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_),n.updateMatrixWorld(),r.makeTranslation(-g.x,-g.y,-g.z),v.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v)}}]),n}(c.LightShadow);t.PointLightShadow=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLight=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(547),d=n(554),h=n(255);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(e,r){var o;return(0,i.default)(this,n),o=t.call(this,e,r),o.isDirectionalLight=!0,o.type="DirectionalLight",o.position.copy(h.Object3D.DEFAULT_UP),o.updateMatrix(),o.target=new h.Object3D,o.shadow=new d.DirectionalLightShadow,o}return(0,o.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(l.Light);t.DirectionalLight=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLightShadow=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(550),l=n(413);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e;return(0,o.default)(this,n),e=t.call(this,new l.OrthographicCamera(-5,5,5,-5,.5,500)),e.isDirectionalLightShadow=!0,e}return(0,i.default)(n)}(c.LightShadow);t.DirectionalLightShadow=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientLight=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(547);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e,r),i.isAmbientLight=!0,i.type="AmbientLight",i}return(0,i.default)(n)}(c.Light);t.AmbientLight=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.RectAreaLight=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(547);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,i.default)(this,n),o=t.call(this,e,r),o.isRectAreaLight=!0,o.type="RectAreaLight",o.width=a,o.height=s,o}return(0,o.default)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(l.Light);t.RectAreaLight=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LightProbe=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(558),d=n(547);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.SphericalHarmonics3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,i.default)(this,n),e=t.call(this,void 0,o),e.isLightProbe=!0,e.sh=r,e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(d.Light);t.LightProbe=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalHarmonics3=void 0;var i=r(n(23)),o=r(n(24)),a=n(249),s=function(){function e(){(0,i.default)(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new a.Vector3)}return(0,o.default)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();t.SphericalHarmonics3=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(261),l=n(234),d=n(249),h=n(240),f=n(235),p=n(254),m=n(534),y=n(538),v=n(508);function g(e){var t=_();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){(0,a.default)(n,e);var t=g(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),r.textures={},r}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new m.FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new c.Color).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var o in e.uniforms){var a=e.uniforms[o];switch(i.uniforms[o]={},a.type){case"t":i.uniforms[o].value=r(a.value);break;case"c":i.uniforms[o].value=(new c.Color).setHex(a.value);break;case"v2":i.uniforms[o].value=(new l.Vector2).fromArray(a.value);break;case"v3":i.uniforms[o].value=(new d.Vector3).fromArray(a.value);break;case"v4":i.uniforms[o].value=(new h.Vector4).fromArray(a.value);break;case"m3":i.uniforms[o].value=(new f.Matrix3).fromArray(a.value);break;case"m4":i.uniforms[o].value=(new p.Matrix4).fromArray(a.value);break;default:i.uniforms[o].value=a.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.matcap&&(i.matcap=r(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var u=e.normalScale;!1===Array.isArray(u)&&(u=[u,u]),i.normalScale=(new l.Vector2).fromArray(u)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=r(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=r(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new l.Vector2).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=r(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=r(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=r(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=r(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=r(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){var t={ShadowMaterial:v.ShadowMaterial,SpriteMaterial:v.SpriteMaterial,RawShaderMaterial:v.RawShaderMaterial,ShaderMaterial:v.ShaderMaterial,PointsMaterial:v.PointsMaterial,MeshPhysicalMaterial:v.MeshPhysicalMaterial,MeshStandardMaterial:v.MeshStandardMaterial,MeshPhongMaterial:v.MeshPhongMaterial,MeshToonMaterial:v.MeshToonMaterial,MeshNormalMaterial:v.MeshNormalMaterial,MeshLambertMaterial:v.MeshLambertMaterial,MeshDepthMaterial:v.MeshDepthMaterial,MeshDistanceMaterial:v.MeshDistanceMaterial,MeshBasicMaterial:v.MeshBasicMaterial,MeshMatcapMaterial:v.MeshMatcapMaterial,LineDashedMaterial:v.LineDashedMaterial,LineBasicMaterial:v.LineBasicMaterial,Material:v.Material};return new t[e]}}]),n}(y.Loader);t.MaterialLoader=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderUtils=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}();t.LoaderUtils=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.BufferGeometryLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(251),l=n(249),d=n(263),h=n(262),f=n(534),p=n(538),m=n(562),y=n(457),v=n(449),g=n(448),_=n(238);function b(e){var t=x();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){(0,a.default)(n,e);var t=b(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new f.FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,n){if(void 0!==t[n])return t[n];var r=e.interleavedBuffers,o=r[n],a=i(e,o.buffer),s=(0,_.getTypedArray)(o.type,a),u=new g.InterleavedBuffer(s,o.stride);return u.uuid=o.uuid,t[n]=u,u}function i(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers,i=r[t],o=new Uint32Array(i).buffer;return n[t]=o,o}var o=e.isInstancedBufferGeometry?new m.InstancedBufferGeometry:new h.BufferGeometry,a=e.data.index;if(void 0!==a){var s=(0,_.getTypedArray)(a.type,a.array);o.setIndex(new d.BufferAttribute(s,1))}var u=e.data.attributes;for(var f in u){var p=u[f],b=void 0;if(p.isInterleavedBufferAttribute){var x=r(e.data,p.data);b=new v.InterleavedBufferAttribute(x,p.itemSize,p.offset,p.normalized)}else{var M=(0,_.getTypedArray)(p.type,p.array),C=p.isInstancedBufferAttribute?y.InstancedBufferAttribute:d.BufferAttribute;b=new C(M,p.itemSize,p.normalized)}void 0!==p.name&&(b.name=p.name),void 0!==p.usage&&b.setUsage(p.usage),void 0!==p.updateRange&&(b.updateRange.offset=p.updateRange.offset,b.updateRange.count=p.updateRange.count),o.setAttribute(f,b)}var w=e.data.morphAttributes;if(w)for(var S in w){for(var T=w[S],N=[],E=0,A=T.length;E<A;E++){var R=T[E],P=void 0;if(R.isInterleavedBufferAttribute){var L=r(e.data,R.data);P=new v.InterleavedBufferAttribute(L,R.itemSize,R.offset,R.normalized)}else{var O=(0,_.getTypedArray)(R.type,R.array);P=new d.BufferAttribute(O,R.itemSize,R.normalized)}void 0!==R.name&&(P.name=R.name),N.push(P)}o.morphAttributes[S]=N}var k=e.data.morphTargetsRelative;k&&(o.morphTargetsRelative=!0);var I=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==I)for(var D=0,U=I.length;D!==U;++D){var B=I[D];o.addGroup(B.start,B.count,B.materialIndex)}var F=e.data.boundingSphere;if(void 0!==F){var G=new l.Vector3;void 0!==F.center&&G.fromArray(F.center),o.boundingSphere=new c.Sphere(G,F.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}]),n}(p.Loader);t.BufferGeometryLoader=M},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.InstancedBufferGeometry=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(262);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this),e.isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(l.BufferGeometry);t.InstancedBufferGeometry=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBitmapLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(537),l=n(538);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),r.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,o.default)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=c.Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){c.Cache.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(l.Loader);t.ImageBitmapLoader=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioLoader=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(565),l=n(534),d=n(538);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new l.FileLoader(this.manager);function a(t){r?r(t):console.error(t),i.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){try{var n=e.slice(0),r=c.AudioContext.getContext();r.decodeAudioData(n,(function(e){t(e)}),a)}catch(i){a(i)}}),n,r)}}]),n}(d.Loader);t.AudioLoader=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioContext=void 0;var i,o=r(n(23)),a=r(n(24)),s=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"getContext",value:function(){return void 0===i&&(i=new(window.AudioContext||window.webkitAudioContext)),i}},{key:"setContext",value:function(e){i=e}}]),e}();t.AudioContext=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLightProbe=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(261),l=n(249),d=n(557);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,o.default)(this,n),i=t.call(this,void 0,a),i.isHemisphereLightProbe=!0;var s=(new c.Color).set(e),u=(new c.Color).set(r),d=new l.Vector3(s.r,s.g,s.b),h=new l.Vector3(u.r,u.g,u.b),f=Math.sqrt(Math.PI),p=f*Math.sqrt(.75);return i.sh.coefficients[0].copy(d).add(h).multiplyScalar(f),i.sh.coefficients[1].copy(d).sub(h).multiplyScalar(p),i}return(0,i.default)(n)}(d.LightProbe);t.HemisphereLightProbe=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientLightProbe=void 0;var i=r(n(24)),o=r(n(23)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(261),l=n(557);function d(e){var t=h();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,o.default)(this,n),r=t.call(this,void 0,i),r.isAmbientLightProbe=!0;var a=(new c.Color).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,i.default)(n)}(l.LightProbe);t.AmbientLightProbe=f},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.StereoCamera=void 0;var o=r(n(23)),a=r(n(24)),s=n(254),u=d(n(233)),c=n(271);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var h=new s.Matrix4,f=new s.Matrix4,p=new s.Matrix4,m=function(){function e(){(0,o.default)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new c.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new c.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,a.default)(e,[{key:"update",value:function(e){var t=this._cache,n=t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep;if(n){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,p.copy(e.projectionMatrix);var r,i,o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(u.DEG2RAD*t.fov*.5)/t.zoom;f.elements[12]=-o,h.elements[12]=o,r=-s*t.aspect+a,i=s*t.aspect+a,p.elements[0]=2*t.near/(i-r),p.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(p),r=-s*t.aspect-a,i=s*t.aspect-a,p.elements[0]=2*t.near/(i-r),p.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(f),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(h)}}]),e}();t.StereoCamera=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioListener=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(249),d=n(250),h=n(570),f=n(255),p=n(565);function m(e){var t=y();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=new l.Vector3,g=new d.Quaternion,_=new l.Vector3,b=new l.Vector3,x=function(e){(0,s.default)(n,e);var t=m(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this),e.type="AudioListener",e.context=p.AudioContext.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new h.Clock,e}return(0,o.default)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){(0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(v,g,_),b.set(0,0,-1).applyQuaternion(g),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(v.x,i),t.positionY.linearRampToValueAtTime(v.y,i),t.positionZ.linearRampToValueAtTime(v.z,i),t.forwardX.linearRampToValueAtTime(b.x,i),t.forwardY.linearRampToValueAtTime(b.y,i),t.forwardZ.linearRampToValueAtTime(b.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(v.x,v.y,v.z),t.setOrientation(b.x,b.y,b.z,r.x,r.y,r.z)}}]),n}(f.Object3D);t.AudioListener=x},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Clock=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,i.default)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,o.default)(e,[{key:"start",value:function(){this.startTime=s(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=s();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function s(){return("undefined"===typeof performance?Date:performance).now()}t.Clock=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PositionalAudio=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(249),d=n(250),h=n(572);function f(e){var t=p();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=new l.Vector3,y=new d.Quaternion,v=new l.Vector3,g=new l.Vector3,_=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),r.panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return(0,o.default)(n,[{key:"connect",value:function(){(0,a.default)((0,c.default)(n.prototype),"connect",this).call(this),this.panner.connect(this.gain)}},{key:"disconnect",value:function(){(0,a.default)((0,c.default)(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if((0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(m,y,v),g.set(0,0,1).applyQuaternion(y);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(m.x,r),t.positionY.linearRampToValueAtTime(m.y,r),t.positionZ.linearRampToValueAtTime(m.z,r),t.orientationX.linearRampToValueAtTime(g.x,r),t.orientationY.linearRampToValueAtTime(g.y,r),t.orientationZ.linearRampToValueAtTime(g.z,r)}else t.setPosition(m.x,m.y,m.z),t.setOrientation(g.x,g.y,g.z)}}}]),n}(h.Audio);t.PositionalAudio=_},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(255);function l(e){var t=d();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,a.default)(n,e);var t=l(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r.type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,o.default)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(c.Object3D);t.Audio=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioAnalyser=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,i.default)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,o.default)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}();t.AudioAnalyser=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyMixer=void 0;var i=r(n(23)),o=r(n(24)),a=n(250),s=function(){function e(t,n,r){var o,a,s;switch((0,i.default)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":o=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,o.default)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,c=t+t;u!==c;++u)if(n[u]!==n[u+t]){a.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]}},{key:"_slerp",value:function(e,t,n,r){a.Quaternion.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var o=this._workIndex*i;a.Quaternion.multiplyQuaternionsFlat(e,o,e,t,e,n),a.Quaternion.slerpFlat(e,t,e,t,e,o,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var o=0;o!==i;++o){var a=t+o;e[a]=e[a]+e[n+o]*r}}}]),e}();t.PropertyMixer=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyBinding=void 0;var i=r(n(23)),o=r(n(24)),a="\\[\\]\\.:\\/",s=new RegExp("["+a+"]","g"),u="[^"+a+"]",c="[^"+a.replace("\\.","")+"]",l=/((?:WC+[\/:])*)/.source.replace("WC",u),d=/(WCOD+)?/.source.replace("WCOD",c),h=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",u),f=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",u),p=new RegExp("^"+l+d+h+f+"$"),m=["material","materials","bones","map"],y=function(){function e(t,n,r){(0,i.default)(this,e);var o=r||v.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,o)}return(0,o.default)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),v=function(){function e(t,n,r){(0,i.default)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,o.default)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,o=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var a=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===a){a=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var u=t[i];if(void 0!==u){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else void 0!==u.fromArray&&void 0!==u.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",t)}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(s,"")}},{key:"parseTrackName",value:function(e){var t=p.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==m.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}]),e}();t.PropertyBinding=v,v.Composite=y,v.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},v.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},v.prototype.GetterByBindingType=[v.prototype._getValue_direct,v.prototype._getValue_array,v.prototype._getValue_arrayElement,v.prototype._getValue_toArray],v.prototype.SetterByBindingTypeAndVersioning=[[v.prototype._setValue_direct,v.prototype._setValue_direct_setNeedsUpdate,v.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[v.prototype._setValue_array,v.prototype._setValue_array_setNeedsUpdate,v.prototype._setValue_array_setMatrixWorldNeedsUpdate],[v.prototype._setValue_arrayElement,v.prototype._setValue_arrayElement_setNeedsUpdate,v.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[v.prototype._setValue_fromArray,v.prototype._setValue_fromArray_setNeedsUpdate,v.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]]},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationObjectGroup=void 0;var o=r(n(23)),a=r(n(24)),s=n(575),u=l(n(233));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var d=function(){function e(){(0,o.default)(this,e),this.isAnimationObjectGroup=!0,this.uuid=u.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,a.default)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length,a=void 0,u=e.length,c=this.nCachedObjects_,l=0,d=arguments.length;l!==d;++l){var h=arguments[l],f=h.uuid,p=t[f];if(void 0===p){p=u++,t[f]=p,e.push(h);for(var m=0,y=o;m!==y;++m)i[m].push(new s.PropertyBinding(h,n[m],r[m]))}else if(p<c){a=e[p];var v=--c,g=e[v];t[g.uuid]=p,e[p]=g,t[f]=v,e[v]=h;for(var _=0,b=o;_!==b;++_){var x=i[_],M=x[v],C=x[p];x[p]=M,void 0===C&&(C=new s.PropertyBinding(h,n[_],r[_])),x[v]=C}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=t[u];if(void 0!==c&&c>=i){var l=i++,d=e[l];t[d.uuid]=c,e[c]=d,t[u]=l,e[l]=s;for(var h=0,f=r;h!==f;++h){var p=n[h],m=p[l],y=p[c];p[c]=m,p[l]=y}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=e.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=t[c];if(void 0!==l)if(delete t[c],l<i){var d=--i,h=e[d],f=--o,p=e[f];t[h.uuid]=l,e[l]=h,t[p.uuid]=d,e[d]=p,e.pop();for(var m=0,y=r;m!==y;++m){var v=n[m],g=v[d],_=v[f];v[l]=g,v[d]=_,v.pop()}}else{var b=--o,x=e[b];b>0&&(t[x.uuid]=l),e[l]=x,e.pop();for(var M=0,C=r;M!==C;++M){var w=n[M];w[l]=w[b],w.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,u=this._objects,c=u.length,l=this.nCachedObjects_,d=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(d);for(var h=l,f=u.length;h!==f;++h){var p=u[h];d[h]=new s.PropertyBinding(p,e,t)}return d}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],u=e[a];t[u]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}]),e}();t.AnimationObjectGroup=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationMixer=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(578),l=n(231),d=n(525),h=n(575),f=n(574),p=n(520),m=n(223);function y(e){var t=v();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=new Float32Array(1),_=function(e){(0,a.default)(n,e);var t=y(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),r._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,o.default)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var d=r[l],p=d.name,m=c[p];if(void 0!==m)++m.referenceCount,o[l]=m;else{if(m=o[l],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,s,p));continue}var y=t&&t._propertyBindings[l].binding.parsedPath;m=new f.PropertyMixer(h.PropertyBinding.create(n,p,y),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,s,p),o[l]=m}a[l].resultBuffer=m.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null;var l=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete l[d],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new d.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,g),n.__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,o="string"===typeof e?p.AnimationClip.findByName(r,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:m.NormalAnimationBlendMode),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var d=new c.AnimationAction(this,o,t,n);return this._bindAction(d,u),this._addInactiveAction(d,a,i),d}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?p.AnimationClip.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions,n=t-1;n>=0;--n)e[n].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s._update(r,e,i,o)}for(var u=this._bindings,c=this._nActiveBindings,l=0;l!==c;++l)u[l].apply(o);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(l.EventDispatcher);t.AnimationMixer=_},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationAction=void 0;var i=r(n(23)),o=r(n(24)),a=n(223),s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,i.default)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=o;for(var s=n.tracks,u=s.length,c=new Array(u),l={endingStart:a.ZeroCurvatureEnding,endingEnd:a.ZeroCurvatureEnding},d=0;d!==u;++d){var h=s[d].createInterpolant(null);c[d]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=c,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=a.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,o.default)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;o<0||0===n?t=0:(this._startTime=null,t=n*o)}t*=this._updateTimeScale(e);var s=this._updateTime(t),u=this._updateWeight(e);if(u>0){var c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case a.AdditiveAnimationBlendMode:for(var d=0,h=c.length;d!==h;++d)c[d].evaluate(s),l[d].accumulateAdditive(u);break;case a.NormalAnimationBlendMode:default:for(var f=0,p=c.length;f!==p;++f)c[f].evaluate(s),l[f].accumulate(r,u)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,o=n===a.LoopPingPong;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(n===a.LoopOnce){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){var s=Math.floor(r/t);r-=t*s,i+=Math.abs(s);var u=this.repetitions-i;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===u){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=a.ZeroSlopeEnding,r.endingEnd=a.ZeroSlopeEnding):(r.endingStart=e?this.zeroSlopeAtStart?a.ZeroSlopeEnding:a.ZeroCurvatureEnding:a.WrapAroundEnding,r.endingEnd=t?this.zeroSlopeAtEnd?a.ZeroSlopeEnding:a.ZeroCurvatureEnding:a.WrapAroundEnding)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}]),e}();t.AnimationAction=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Uniform=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(t){(0,i.default)(this,e),this.value=t}return(0,o.default)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();t.Uniform=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.UniformsGroup=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(227)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(231),d=n(223);function h(e){var t=f();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=0,m=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e;return(0,i.default)(this,n),e=t.call(this),e.isUniformsGroup=!0,Object.defineProperty((0,a.default)(e),"id",{value:p++}),e.name="",e.usage=d.StaticDrawUsage,e.uniforms=[],e}return(0,o.default)(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(l.EventDispatcher);t.UniformsGroup=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.InstancedInterleavedBuffer=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(448);function d(e){var t=h();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,i.default)(this,n),o=t.call(this,e,r),o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=a,o}return(0,o.default)(n,[{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(l.InterleavedBuffer);t.InstancedInterleavedBuffer=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.GLBufferAttribute=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(t,n,r,o,a){(0,i.default)(this,e),this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=o,this.count=a,this.version=0}return(0,o.default)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}();t.GLBufferAttribute=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Raycaster=void 0;var i=r(n(23)),o=r(n(24)),a=n(253),s=n(257),u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,i.default)(this,e),this.ray=new a.Ray(t,n),this.near=r,this.far=o,this.camera=null,this.layers=new s.Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,o.default)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l(e,this,n,t),n.sort(c),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)l(e[r],this,n,t);return n.sort(c),n}}]),e}();function c(e,t){return e.distance-t.distance}function l(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,o=0,a=i.length;o<a;o++)l(i[o],t,n,!0)}t.Raycaster=u},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Spherical=void 0;var o=r(n(23)),a=r(n(24)),s=c(n(233));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,o.default)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,a.default)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(s.clamp(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Spherical=l},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Cylindrical=void 0;var i=r(n(23)),o=r(n(24)),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,i.default)(this,e),this.radius=t,this.theta=n,this.y=r,this}return(0,o.default)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Cylindrical=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Box2=void 0;var i=r(n(23)),o=r(n(24)),a=n(234),s=new a.Vector2,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.Vector2(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector2(-1/0,-1/0);(0,i.default)(this,e),this.isBox2=!0,this.min=t,this.max=n}return(0,o.default)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=s.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,s).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();t.Box2=u},function(e,t,n){"use strict";var r=n(4),i=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.Line3=void 0;var o=r(n(23)),a=r(n(24)),s=n(249),u=l(n(233));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var d=new s.Vector3,h=new s.Vector3,f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s.Vector3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;(0,o.default)(this,e),this.start=t,this.end=n}return(0,a.default)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){d.subVectors(e,this.start),h.subVectors(this.end,this.start);var n=h.dot(h),r=h.dot(d),i=r/n;return t&&(i=u.clamp(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Line3=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLightHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(249),l=n(255),d=n(458),h=n(460),f=n(263),p=n(262);function m(e){var t=y();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=new c.Vector3,g=function(e){(0,a.default)(n,e);var t=m(n);function n(e,r){var o;(0,i.default)(this,n),o=t.call(this),o.light=e,o.matrix=e.matrixWorld,o.matrixAutoUpdate=!1,o.color=r,o.type="SpotLightHelper";for(var a=new p.BufferGeometry,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],u=0,c=1,l=32;u<l;u++,c++){var m=u/l*Math.PI*2,y=c/l*Math.PI*2;s.push(Math.cos(m),Math.sin(m),1,Math.cos(y),Math.sin(y),1)}a.setAttribute("position",new f.Float32BufferAttribute(s,3));var v=new h.LineBasicMaterial({fog:!1,toneMapped:!1});return o.cone=new d.LineSegments(a,v),o.add(o.cone),o.update(),o}return(0,o.default)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),v.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(v),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(l.Object3D);t.SpotLightHelper=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(458),d=n(254),h=n(460),f=n(261),p=n(249),m=n(262),y=n(263);function v(e){var t=g();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _=new p.Vector3,b=new d.Matrix4,x=new d.Matrix4,M=function(e){(0,s.default)(n,e);var t=v(n);function n(e){var r;(0,i.default)(this,n);for(var o=C(e),a=new m.BufferGeometry,s=[],u=[],c=new f.Color(0,0,1),l=new f.Color(0,1,0),d=0;d<o.length;d++){var p=o[d];p.parent&&p.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),u.push(c.r,c.g,c.b),u.push(l.r,l.g,l.b))}a.setAttribute("position",new y.Float32BufferAttribute(s,3)),a.setAttribute("color",new y.Float32BufferAttribute(u,3));var v=new h.LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return r=t.call(this,a,v),r.isSkeletonHelper=!0,r.type="SkeletonHelper",r.root=e,r.bones=o,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,o.default)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");x.copy(this.root.matrixWorld).invert();for(var o=0,s=0;o<t.length;o++){var u=t[o];u.parent&&u.parent.isBone&&(b.multiplyMatrices(x,u.matrixWorld),_.setFromMatrixPosition(b),i.setXYZ(s,_.x,_.y,_.z),b.multiplyMatrices(x,u.parent.matrixWorld),_.setFromMatrixPosition(b),i.setXYZ(s+1,_.x,_.y,_.z),s+=2)}r.getAttribute("position").needsUpdate=!0,(0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(l.LineSegments);function C(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,C(e.children[n]));return t}t.SkeletonHelper=M},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PointLightHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(246),l=n(259),d=n(502);function h(e){var t=f();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e,r,o){var a;(0,i.default)(this,n);var s=new d.SphereGeometry(r,4,2),u=new l.MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});return a=t.call(this,s,u),a.light=e,a.color=o,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,o.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(c.Mesh);t.PointLightHelper=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLightHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(249),l=n(261),d=n(255),h=n(246),f=n(259),p=n(499),m=n(263);function y(e){var t=v();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=new c.Vector3,_=new l.Color,b=new l.Color,x=function(e){(0,a.default)(n,e);var t=y(n);function n(e,r,o){var a;(0,i.default)(this,n),a=t.call(this),a.light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=o,a.type="HemisphereLightHelper";var s=new p.OctahedronGeometry(r);s.rotateY(.5*Math.PI),a.material=new f.MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var u=s.getAttribute("position"),c=new Float32Array(3*u.count);return s.setAttribute("color",new m.BufferAttribute(c,3)),a.add(new h.Mesh(s,a.material)),a.update(),a}return(0,o.default)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");_.copy(this.light.color),b.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?_:b;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(g.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(d.Object3D);t.HemisphereLightHelper=x},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.GridHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(458),l=n(460),d=n(263),h=n(262),f=n(261);function p(e){var t=m();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,a.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,i.default)(this,n),a=new f.Color(a),s=new f.Color(s);for(var u=o/2,c=r/o,p=r/2,m=[],y=[],v=0,g=0,_=-p;v<=o;v++,_+=c){m.push(-p,0,_,p,0,_),m.push(_,0,-p,_,0,p);var b=v===u?a:s;b.toArray(y,g),g+=3,b.toArray(y,g),g+=3,b.toArray(y,g),g+=3,b.toArray(y,g),g+=3}var x=new h.BufferGeometry;x.setAttribute("position",new d.Float32BufferAttribute(m,3)),x.setAttribute("color",new d.Float32BufferAttribute(y,3));var M=new l.LineBasicMaterial({vertexColors:!0,toneMapped:!1});return e=t.call(this,x,M),e.type="GridHelper",e}return(0,o.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(c.LineSegments);t.GridHelper=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PolarGridHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(458),l=n(460),d=n(263),h=n(262),f=n(261);function p(e){var t=m();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,a.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,i.default)(this,n),u=new f.Color(u),c=new f.Color(c);var p=[],m=[];if(o>1)for(var y=0;y<o;y++){var v=y/o*(2*Math.PI),g=Math.sin(v)*r,_=Math.cos(v)*r;p.push(0,0,0),p.push(g,0,_);var b=1&y?u:c;m.push(b.r,b.g,b.b),m.push(b.r,b.g,b.b)}for(var x=0;x<a;x++)for(var M=1&x?u:c,C=r-r/a*x,w=0;w<s;w++){var S=w/s*(2*Math.PI),T=Math.sin(S)*C,N=Math.cos(S)*C;p.push(T,0,N),m.push(M.r,M.g,M.b),S=(w+1)/s*(2*Math.PI),T=Math.sin(S)*C,N=Math.cos(S)*C,p.push(T,0,N),m.push(M.r,M.g,M.b)}var E=new h.BufferGeometry;E.setAttribute("position",new d.Float32BufferAttribute(p,3)),E.setAttribute("color",new d.Float32BufferAttribute(m,3));var A=new l.LineBasicMaterial({vertexColors:!0,toneMapped:!1});return e=t.call(this,E,A),e.type="PolarGridHelper",e}return(0,o.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(c.LineSegments);t.PolarGridHelper=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLightHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(249),l=n(255),d=n(459),h=n(263),f=n(262),p=n(460);function m(e){var t=y();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=new c.Vector3,g=new c.Vector3,_=new c.Vector3,b=function(e){(0,a.default)(n,e);var t=m(n);function n(e,r,o){var a;(0,i.default)(this,n),a=t.call(this),a.light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=o,a.type="DirectionalLightHelper",void 0===r&&(r=1);var s=new f.BufferGeometry;s.setAttribute("position",new h.Float32BufferAttribute([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var u=new p.LineBasicMaterial({fog:!1,toneMapped:!1});return a.lightPlane=new d.Line(s,u),a.add(a.lightPlane),s=new f.BufferGeometry,s.setAttribute("position",new h.Float32BufferAttribute([0,0,0,0,0,1],3)),a.targetLine=new d.Line(s,u),a.add(a.targetLine),a.update(),a}return(0,o.default)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),v.setFromMatrixPosition(this.light.matrixWorld),g.setFromMatrixPosition(this.light.target.matrixWorld),_.subVectors(g,v),this.lightPlane.lookAt(g),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(g),this.targetLine.scale.z=_.length()}}]),n}(l.Object3D);t.DirectionalLightHelper=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.CameraHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(272),l=n(249),d=n(458),h=n(261),f=n(460),p=n(262),m=n(263);function y(e){var t=v();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=new l.Vector3,_=new c.Camera,b=function(e){(0,a.default)(n,e);var t=y(n);function n(e){var r;(0,i.default)(this,n);var o=new p.BufferGeometry,a=new f.LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],u=[],c={};function l(e,t){d(e),d(t)}function d(e){s.push(0,0,0),u.push(0,0,0),void 0===c[e]&&(c[e]=[]),c[e].push(s.length/3-1)}l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4"),o.setAttribute("position",new m.Float32BufferAttribute(s,3)),o.setAttribute("color",new m.Float32BufferAttribute(u,3)),r=t.call(this,o,a),r.type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=c,r.update();var y=new h.Color(16755200),v=new h.Color(16711680),g=new h.Color(43775),_=new h.Color(16777215),b=new h.Color(3355443);return r.setColors(y,v,g,_,b),r}return(0,o.default)(n,[{key:"setColors",value:function(e,t,n,r,i){var o=this.geometry,a=o.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap,n=1,r=1;_.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),x("c",t,e,_,0,0,-1),x("t",t,e,_,0,0,1),x("n1",t,e,_,-n,-r,-1),x("n2",t,e,_,n,-r,-1),x("n3",t,e,_,-n,r,-1),x("n4",t,e,_,n,r,-1),x("f1",t,e,_,-n,-r,1),x("f2",t,e,_,n,-r,1),x("f3",t,e,_,-n,r,1),x("f4",t,e,_,n,r,1),x("u1",t,e,_,.7*n,1.1*r,-1),x("u2",t,e,_,.7*-n,1.1*r,-1),x("u3",t,e,_,0,2*r,-1),x("cf1",t,e,_,-n,0,1),x("cf2",t,e,_,n,0,1),x("cf3",t,e,_,0,-r,1),x("cf4",t,e,_,0,r,1),x("cn1",t,e,_,-n,0,-1),x("cn2",t,e,_,n,0,-1),x("cn3",t,e,_,0,-r,-1),x("cn4",t,e,_,0,r,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(d.LineSegments);function x(e,t,n,r,i,o,a){g.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],g.x,g.y,g.z)}t.CameraHelper=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.BoxHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(252),d=n(458),h=n(460),f=n(263),p=n(262);function m(e){var t=y();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=new l.Box3,g=function(e){(0,s.default)(n,e);var t=m(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,i.default)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),u=new p.BufferGeometry;return u.setIndex(new f.BufferAttribute(a,1)),u.setAttribute("position",new f.BufferAttribute(s,3)),r=t.call(this,u,new h.LineBasicMaterial({color:o,toneMapped:!1})),r.object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return(0,o.default)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&v.setFromObject(this.object),!v.isEmpty()){var t=v.min,n=v.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(d.LineSegments);t.BoxHelper=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Box3Helper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(458),d=n(460),h=n(263),f=n(262);function p(e){var t=m();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,i.default)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],u=new f.BufferGeometry;return u.setIndex(new h.BufferAttribute(a,1)),u.setAttribute("position",new h.Float32BufferAttribute(s,3)),r=t.call(this,u,new d.LineBasicMaterial({color:o,toneMapped:!1})),r.box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return(0,o.default)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),(0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(l.LineSegments);t.Box3Helper=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(459),d=n(246),h=n(460),f=n(259),p=n(263),m=n(262);function y(e){var t=v();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){(0,s.default)(n,e);var t=y(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,i.default)(this,n);var s=a,u=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],c=new m.BufferGeometry;c.setAttribute("position",new p.Float32BufferAttribute(u,3)),c.computeBoundingSphere(),r=t.call(this,c,new h.LineBasicMaterial({color:s,toneMapped:!1})),r.type="PlaneHelper",r.plane=e,r.size=o;var l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],y=new m.BufferGeometry;return y.setAttribute("position",new p.Float32BufferAttribute(l,3)),y.computeBoundingSphere(),r.add(new d.Mesh(y,new f.MeshBasicMaterial({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return(0,o.default)(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),(0,a.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),n}(l.Line);t.PlaneHelper=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(247)),s=r(n(225)),u=r(n(226)),c=r(n(228)),l=n(263),d=n(262),h=n(255),f=n(490),p=n(259),m=n(460),y=n(246),v=n(459),g=n(249);function _(e){var t=b();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var x,M,C=new g.Vector3,w=function(e){(0,s.default)(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g.Vector3(0,0,1),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g.Vector3(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*u;return(0,i.default)(this,n),e=t.call(this),e.type="ArrowHelper",void 0===x&&(x=new d.BufferGeometry,x.setAttribute("position",new l.Float32BufferAttribute([0,0,0,0,1,0],3)),M=new f.CylinderGeometry(0,.5,1,5,1),M.translate(0,-.5,0)),e.position.copy(o),e.line=new v.Line(x,new m.LineBasicMaterial({color:s,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new y.Mesh(M,new p.MeshBasicMaterial({color:s,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,u,c),e}return(0,o.default)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{C.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(C,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return(0,a.default)((0,c.default)(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),n}(h.Object3D);t.ArrowHelper=w},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.AxesHelper=void 0;var i=r(n(23)),o=r(n(24)),a=r(n(225)),s=r(n(226)),u=r(n(228)),c=n(458),l=n(460),d=n(263),h=n(262),f=n(261);function p(e){var t=m();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,a.default)(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,i.default)(this,n);var o=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new h.BufferGeometry;s.setAttribute("position",new d.Float32BufferAttribute(o,3)),s.setAttribute("color",new d.Float32BufferAttribute(a,3));var u=new l.LineBasicMaterial({vertexColors:!0,toneMapped:!1});return e=t.call(this,s,u),e.type="AxesHelper",e}return(0,o.default)(n,[{key:"setColors",value:function(e,t,n){var r=new f.Color,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(c.LineSegments);t.AxesHelper=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.ShapePath=void 0;var i=r(n(23)),o=r(n(24)),a=n(261),s=n(472),u=n(495),c=n(496),l=function(){function e(){(0,i.default)(this,e),this.type="ShapePath",this.color=new a.Color,this.subPaths=[],this.currentPath=null}return(0,o.default)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new s.Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new u.Shape;o.curves=i.curves,t.push(o)}return t}function n(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],u=-u,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=c*(e.x-a.x)-u*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var r,i,o,a=c.ShapeUtils.isClockWise,s=this.subPaths;if(0===s.length)return[];var l=[];if(1===s.length)return i=s[0],o=new u.Shape,o.curves=i.curves,l.push(o),l;var d=!a(s[0].getPoints());d=e?!d:d;var h,f,p=[],m=[],y=[],v=0;m[v]=void 0,y[v]=[];for(var g=0,_=s.length;g<_;g++)i=s[g],h=i.getPoints(),r=a(h),r=e?!r:r,r?(!d&&m[v]&&v++,m[v]={s:new u.Shape,p:h},m[v].s.curves=i.curves,d&&v++,y[v]=[]):y[v].push({h:i,p:h[0]});if(!m[0])return t(s);if(m.length>1){for(var b=!1,x=0,M=0,C=m.length;M<C;M++)p[M]=[];for(var w=0,S=m.length;w<S;w++)for(var T=y[w],N=0;N<T.length;N++){for(var E=T[N],A=!0,R=0;R<m.length;R++)n(E.p,m[R].p)&&(w!==R&&x++,A?(A=!1,p[R].push(E)):b=!0);A&&p[w].push(E)}x>0&&!1===b&&(y=p)}for(var P=0,L=m.length;P<L;P++){o=m[P].s,l.push(o),f=y[P];for(var O=0,k=f.length;O<k;O++)o.holes.push(f[O].h)}return l}}]),e}();t.ShapePath=l},function(e,t){},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.OcrType=void 0,t.start=s;var i=r(n(620)),o=r(n(621)),a=n(622);function s(t){var n=t.getAuthorization,r=t.secretId,o=t.secretKey,s=t.ocrType,u=t.ocrOption,c=t.cameraConfig,l=t.resultPage,d=t.resultPageConfig,h=t.theme,f=t.success,p=t.fail;return n||r&&o?s?f?(e.clientInfo={getAuthorization:n,secretId:r,secretKey:o,ocrType:s,ocrOption:u,cameraConfig:c,resultPage:!!l,resultPageConfig:d,theme:(0,a.getTheme)(h),onFinish:f,fail:p},void e.getSetting({success:function(t){console.log("theme:-----"+h),console.log("ROUTE_ENUM[ocrType]:==="+i.default[s]),t.authSetting["scope.camera"]?e.redirectTo({url:"/wxcomponents/ocrsdk/pages/".concat(i.default[s])}):e.authorize({scope:"scope.camera",success:function(){e.redirectTo({url:"/wxcomponents/ocrsdk/pages/".concat(i.default[s])})},fail:function(){e.showModal({title:"提示",content:"请打开摄像头权限",confirmText:"去设置",success:function(t){if(t.confirm)e.openSetting();else if(t.cancel)return}})}})}})):(e.showToast({icon:"none",duration:3e3,title:"请设置success函数"}),!1):(e.showToast({icon:"none",duration:3e3,title:"参数ocrType不能为空"}),!1):(e.showToast({icon:"none",duration:3e3,title:"getAuthorization和（secretId,secretKey）不能都为空"}),!1)}var u=o.default;t.OcrType=u}).call(this,n(1)["default"])},function(e,t,n){"use strict";var r,i=n(4),o=i(n(11)),a=i(n(621)),s=(r={},(0,o.default)(r,a.default.ID_CARD,"id-card/id-card"),(0,o.default)(r,a.default.ID_CARD_FRONT,"index/index"),(0,o.default)(r,a.default.ID_CARD_BACK,"index/index"),(0,o.default)(r,a.default.BANK_CARD,"index/index"),(0,o.default)(r,a.default.BUSINESS_CARD,"index/index"),r);e.exports=s},function(e,t){var n={ID_CARD:"ID_CARD",ID_CARD_FRONT:"ID_CARD_FRONT",ID_CARD_BACK:"ID_CARD_BACK",BANK_CARD:"BANK_CARD",BUSINESS_CARD:"BUSINESS_CARD"};e.exports=n},function(e,t,n){var r=n(11),i={primary:"primary",native:"native"};function o(e){var t,n=(t={},r(t,i.primary,"#006EFF"),r(t,i.native,"#07C160"),t);return n[e]}function a(e){var t,n=(t={},r(t,i.primary,"primary"),r(t,i.native,"success"),t);return n[e]}function s(e){return console.log("th:-----"+e),i[e]||i.primary}e.exports={THEME_ENUM:i,themeToRGB:o,themeToSeal:a,getTheme:s}},,,,,,,,,,,,,,,function(e,t,n){(function(t){var r=n(23),i=n(24),o={KEY_ERR:311,KEY_ERR_MSG:"key格式错误",PARAM_ERR:310,PARAM_ERR_MSG:"请求参数信息有误",SYSTEM_ERR:600,SYSTEM_ERR_MSG:"系统错误",WX_ERR_CODE:1e3,WX_OK_CODE:200},a="https://apis.map.qq.com/ws/",s=a+"place/v1/search",u=a+"place/v1/suggestion",c=a+"geocoder/v1/",l=a+"district/v1/list",d=a+"district/v1/getchildren",h=a+"distance/v1/",f=a+"direction/v1/",p={driving:"driving",transit:"transit"},m=6378136.49,y={safeAdd:function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},bitRotateLeft:function(e,t){return e<<t|e>>>32-t},md5cmn:function(e,t,n,r,i,o){return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(t,e),this.safeAdd(r,o)),i),n)},md5ff:function(e,t,n,r,i,o,a){return this.md5cmn(t&n|~t&r,e,t,i,o,a)},md5gg:function(e,t,n,r,i,o,a){return this.md5cmn(t&r|n&~r,e,t,i,o,a)},md5hh:function(e,t,n,r,i,o,a){return this.md5cmn(t^n^r,e,t,i,o,a)},md5ii:function(e,t,n,r,i,o,a){return this.md5cmn(n^(t|~r),e,t,i,o,a)},binlMD5:function(e,t){var n,r,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,u=-271733879,c=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)r=s,i=u,o=c,a=l,s=this.md5ff(s,u,c,l,e[n],7,-680876936),l=this.md5ff(l,s,u,c,e[n+1],12,-389564586),c=this.md5ff(c,l,s,u,e[n+2],17,606105819),u=this.md5ff(u,c,l,s,e[n+3],22,-1044525330),s=this.md5ff(s,u,c,l,e[n+4],7,-176418897),l=this.md5ff(l,s,u,c,e[n+5],12,1200080426),c=this.md5ff(c,l,s,u,e[n+6],17,-1473231341),u=this.md5ff(u,c,l,s,e[n+7],22,-45705983),s=this.md5ff(s,u,c,l,e[n+8],7,1770035416),l=this.md5ff(l,s,u,c,e[n+9],12,-1958414417),c=this.md5ff(c,l,s,u,e[n+10],17,-42063),u=this.md5ff(u,c,l,s,e[n+11],22,-1990404162),s=this.md5ff(s,u,c,l,e[n+12],7,1804603682),l=this.md5ff(l,s,u,c,e[n+13],12,-40341101),c=this.md5ff(c,l,s,u,e[n+14],17,-1502002290),u=this.md5ff(u,c,l,s,e[n+15],22,1236535329),s=this.md5gg(s,u,c,l,e[n+1],5,-165796510),l=this.md5gg(l,s,u,c,e[n+6],9,-1069501632),c=this.md5gg(c,l,s,u,e[n+11],14,643717713),u=this.md5gg(u,c,l,s,e[n],20,-373897302),s=this.md5gg(s,u,c,l,e[n+5],5,-701558691),l=this.md5gg(l,s,u,c,e[n+10],9,38016083),c=this.md5gg(c,l,s,u,e[n+15],14,-660478335),u=this.md5gg(u,c,l,s,e[n+4],20,-405537848),s=this.md5gg(s,u,c,l,e[n+9],5,568446438),l=this.md5gg(l,s,u,c,e[n+14],9,-1019803690),c=this.md5gg(c,l,s,u,e[n+3],14,-187363961),u=this.md5gg(u,c,l,s,e[n+8],20,1163531501),s=this.md5gg(s,u,c,l,e[n+13],5,-1444681467),l=this.md5gg(l,s,u,c,e[n+2],9,-51403784),c=this.md5gg(c,l,s,u,e[n+7],14,1735328473),u=this.md5gg(u,c,l,s,e[n+12],20,-1926607734),s=this.md5hh(s,u,c,l,e[n+5],4,-378558),l=this.md5hh(l,s,u,c,e[n+8],11,-2022574463),c=this.md5hh(c,l,s,u,e[n+11],16,1839030562),u=this.md5hh(u,c,l,s,e[n+14],23,-35309556),s=this.md5hh(s,u,c,l,e[n+1],4,-1530992060),l=this.md5hh(l,s,u,c,e[n+4],11,1272893353),c=this.md5hh(c,l,s,u,e[n+7],16,-155497632),u=this.md5hh(u,c,l,s,e[n+10],23,-1094730640),s=this.md5hh(s,u,c,l,e[n+13],4,681279174),l=this.md5hh(l,s,u,c,e[n],11,-358537222),c=this.md5hh(c,l,s,u,e[n+3],16,-722521979),u=this.md5hh(u,c,l,s,e[n+6],23,76029189),s=this.md5hh(s,u,c,l,e[n+9],4,-640364487),l=this.md5hh(l,s,u,c,e[n+12],11,-421815835),c=this.md5hh(c,l,s,u,e[n+15],16,530742520),u=this.md5hh(u,c,l,s,e[n+2],23,-995338651),s=this.md5ii(s,u,c,l,e[n],6,-198630844),l=this.md5ii(l,s,u,c,e[n+7],10,1126891415),c=this.md5ii(c,l,s,u,e[n+14],15,-1416354905),u=this.md5ii(u,c,l,s,e[n+5],21,-57434055),s=this.md5ii(s,u,c,l,e[n+12],6,1700485571),l=this.md5ii(l,s,u,c,e[n+3],10,-1894986606),c=this.md5ii(c,l,s,u,e[n+10],15,-1051523),u=this.md5ii(u,c,l,s,e[n+1],21,-2054922799),s=this.md5ii(s,u,c,l,e[n+8],6,1873313359),l=this.md5ii(l,s,u,c,e[n+15],10,-30611744),c=this.md5ii(c,l,s,u,e[n+6],15,-1560198380),u=this.md5ii(u,c,l,s,e[n+13],21,1309151649),s=this.md5ii(s,u,c,l,e[n+4],6,-145523070),l=this.md5ii(l,s,u,c,e[n+11],10,-1120210379),c=this.md5ii(c,l,s,u,e[n+2],15,718787259),u=this.md5ii(u,c,l,s,e[n+9],21,-343485551),s=this.safeAdd(s,r),u=this.safeAdd(u,i),c=this.safeAdd(c,o),l=this.safeAdd(l,a);return[s,u,c,l]},binl2rstr:function(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n},rstr2binl:function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n},rstrMD5:function(e){return this.binl2rstr(this.binlMD5(this.rstr2binl(e),8*e.length))},rstrHMACMD5:function(e,t){var n,r,i=this.rstr2binl(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=this.binlMD5(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=this.binlMD5(o.concat(this.rstr2binl(t)),512+8*t.length),this.binl2rstr(this.binlMD5(a.concat(r),640))},rstr2hex:function(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i},str2rstrUTF8:function(e){return unescape(encodeURIComponent(e))},rawMD5:function(e){return this.rstrMD5(this.str2rstrUTF8(e))},hexMD5:function(e){return this.rstr2hex(this.rawMD5(e))},rawHMACMD5:function(e,t){return this.rstrHMACMD5(this.str2rstrUTF8(e),str2rstrUTF8(t))},hexHMACMD5:function(e,t){return this.rstr2hex(this.rawHMACMD5(e,t))},md5:function(e,t,n){return t?n?this.rawHMACMD5(t,e):this.hexHMACMD5(t,e):n?this.rawMD5(e):this.hexMD5(e)},getSig:function(e,t,n,r){var i=null,o=[];return Object.keys(e).sort().forEach((function(t){o.push(t+"="+e[t])})),"search"==n&&(i="/ws/place/v1/search?"+o.join("&")+t),"suggest"==n&&(i="/ws/place/v1/suggestion?"+o.join("&")+t),"reverseGeocoder"==n&&(i="/ws/geocoder/v1/?"+o.join("&")+t),"geocoder"==n&&(i="/ws/geocoder/v1/?"+o.join("&")+t),"getCityList"==n&&(i="/ws/district/v1/list?"+o.join("&")+t),"getDistrictByCityId"==n&&(i="/ws/district/v1/getchildren?"+o.join("&")+t),"calculateDistance"==n&&(i="/ws/distance/v1/?"+o.join("&")+t),"direction"==n&&(i="/ws/direction/v1/"+r+"?"+o.join("&")+t),i=this.md5(i),i},location2query:function(e){if("string"==typeof e)return e;for(var t="",n=0;n<e.length;n++){var r=e[n];t&&(t+=";"),r.location&&(t=t+r.location.lat+","+r.location.lng),r.latitude&&r.longitude&&(t=t+r.latitude+","+r.longitude)}return t},rad:function(e){return e*Math.PI/180},getEndLocation:function(e){for(var t=e.split(";"),n=[],r=0;r<t.length;r++)n.push({lat:parseFloat(t[r].split(",")[0]),lng:parseFloat(t[r].split(",")[1])});return n},getDistance:function(e,t,n,r){var i=this.rad(e),o=this.rad(n),a=i-o,s=this.rad(t)-this.rad(r),u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(s/2),2)));return u*=m,u=Math.round(1e4*u)/1e4,parseFloat(u.toFixed(0))},getWXLocation:function(e,n,r){t.getLocation({type:"gcj02",success:e,fail:n,complete:r})},getLocationParam:function(e){if("string"==typeof e){var t=e.split(",");e=2===t.length?{latitude:e.split(",")[0],longitude:e.split(",")[1]}:{}}return e},polyfillParam:function(e){e.success=e.success||function(){},e.fail=e.fail||function(){},e.complete=e.complete||function(){}},checkParamKeyEmpty:function(e,t){if(!e[t]){var n=this.buildErrorConfig(o.PARAM_ERR,o.PARAM_ERR_MSG+t+"参数格式有误");return e.fail(n),e.complete(n),!0}return!1},checkKeyword:function(e){return!this.checkParamKeyEmpty(e,"keyword")},checkLocation:function(e){var t=this.getLocationParam(e.location);if(!t||!t.latitude||!t.longitude){var n=this.buildErrorConfig(o.PARAM_ERR,o.PARAM_ERR_MSG+" location参数格式有误");return e.fail(n),e.complete(n),!1}return!0},buildErrorConfig:function(e,t){return{status:e,message:t}},handleData:function(e,t,n){if("search"==n){for(var r=t.data,i=[],o=0;o<r.length;o++)i.push({id:r[o].id||null,title:r[o].title||null,latitude:r[o].location&&r[o].location.lat||null,longitude:r[o].location&&r[o].location.lng||null,address:r[o].address||null,category:r[o].category||null,tel:r[o].tel||null,adcode:r[o].ad_info&&r[o].ad_info.adcode||null,city:r[o].ad_info&&r[o].ad_info.city||null,district:r[o].ad_info&&r[o].ad_info.district||null,province:r[o].ad_info&&r[o].ad_info.province||null});e.success(t,{searchResult:r,searchSimplify:i})}else if("suggest"==n){var a=t.data,s=[];for(o=0;o<a.length;o++)s.push({adcode:a[o].adcode||null,address:a[o].address||null,category:a[o].category||null,city:a[o].city||null,district:a[o].district||null,id:a[o].id||null,latitude:a[o].location&&a[o].location.lat||null,longitude:a[o].location&&a[o].location.lng||null,province:a[o].province||null,title:a[o].title||null,type:a[o].type||null});e.success(t,{suggestResult:a,suggestSimplify:s})}else if("reverseGeocoder"==n){var u=t.result,c={address:u.address||null,latitude:u.location&&u.location.lat||null,longitude:u.location&&u.location.lng||null,adcode:u.ad_info&&u.ad_info.adcode||null,city:u.address_component&&u.address_component.city||null,district:u.address_component&&u.address_component.district||null,nation:u.address_component&&u.address_component.nation||null,province:u.address_component&&u.address_component.province||null,street:u.address_component&&u.address_component.street||null,street_number:u.address_component&&u.address_component.street_number||null,recommend:u.formatted_addresses&&u.formatted_addresses.recommend||null,rough:u.formatted_addresses&&u.formatted_addresses.rough||null};if(u.pois){var l=u.pois,d=[];for(o=0;o<l.length;o++)d.push({id:l[o].id||null,title:l[o].title||null,latitude:l[o].location&&l[o].location.lat||null,longitude:l[o].location&&l[o].location.lng||null,address:l[o].address||null,category:l[o].category||null,adcode:l[o].ad_info&&l[o].ad_info.adcode||null,city:l[o].ad_info&&l[o].ad_info.city||null,district:l[o].ad_info&&l[o].ad_info.district||null,province:l[o].ad_info&&l[o].ad_info.province||null});e.success(t,{reverseGeocoderResult:u,reverseGeocoderSimplify:c,pois:l,poisSimplify:d})}else e.success(t,{reverseGeocoderResult:u,reverseGeocoderSimplify:c})}else if("geocoder"==n){var h=t.result,f={title:h.title||null,latitude:h.location&&h.location.lat||null,longitude:h.location&&h.location.lng||null,adcode:h.ad_info&&h.ad_info.adcode||null,province:h.address_components&&h.address_components.province||null,city:h.address_components&&h.address_components.city||null,district:h.address_components&&h.address_components.district||null,street:h.address_components&&h.address_components.street||null,street_number:h.address_components&&h.address_components.street_number||null,level:h.level||null};e.success(t,{geocoderResult:h,geocoderSimplify:f})}else if("getCityList"==n){var p=t.result[0],m=t.result[1],y=t.result[2];e.success(t,{provinceResult:p,cityResult:m,districtResult:y})}else if("getDistrictByCityId"==n){var v=t.result[0];e.success(t,v)}else if("calculateDistance"==n){var g=t.result.elements,_=[];for(o=0;o<g.length;o++)_.push(g[o].distance);e.success(t,{calculateDistanceResult:g,distance:_})}else if("direction"==n){var b=t.result.routes;e.success(t,b)}else e.success(t)},buildWxRequestConfig:function(e,t,n){var r=this;return t.header={"content-type":"application/json"},t.method="GET",t.success=function(t){var i=t.data;0===i.status?r.handleData(e,i,n):e.fail(i)},t.fail=function(t){t.statusCode=o.WX_ERR_CODE,e.fail(r.buildErrorConfig(o.WX_ERR_CODE,t.errMsg))},t.complete=function(t){var n=+t.statusCode;switch(n){case o.WX_ERR_CODE:e.complete(r.buildErrorConfig(o.WX_ERR_CODE,t.errMsg));break;case o.WX_OK_CODE:var i=t.data;0===i.status?e.complete(i):e.complete(r.buildErrorConfig(i.status,i.message));break;default:e.complete(r.buildErrorConfig(o.SYSTEM_ERR,o.SYSTEM_ERR_MSG))}},t},locationProcess:function(e,t,n,r){var i=this;if(n=n||function(t){t.statusCode=o.WX_ERR_CODE,e.fail(i.buildErrorConfig(o.WX_ERR_CODE,t.errMsg))},r=r||function(t){t.statusCode==o.WX_ERR_CODE&&e.complete(i.buildErrorConfig(o.WX_ERR_CODE,t.errMsg))},e.location){if(i.checkLocation(e)){var a=y.getLocationParam(e.location);t(a)}}else i.getWXLocation(t,n,r)}},v=function(){"use strict";function e(t){if(r(this,e),!t.key)throw Error("key值不能为空");this.key=t.key}return i(e,[{key:"search",value:function(e){var n=this;if(e=e||{},y.polyfillParam(e),y.checkKeyword(e)){var r={keyword:e.keyword,orderby:e.orderby||"_distance",page_size:e.page_size||10,page_index:e.page_index||1,output:"json",key:n.key};e.address_format&&(r.address_format=e.address_format),e.filter&&(r.filter=e.filter);var i=e.distance||"1000",o=e.auto_extend||1,a=null,u=null;e.region&&(a=e.region),e.rectangle&&(u=e.rectangle);var c=function(n){a&&!u?(r.boundary="region("+a+","+o+","+n.latitude+","+n.longitude+")",e.sig&&(r.sig=y.getSig(r,e.sig,"search"))):u&&!a?(r.boundary="rectangle("+u+")",e.sig&&(r.sig=y.getSig(r,e.sig,"search"))):(r.boundary="nearby("+n.latitude+","+n.longitude+","+i+","+o+")",e.sig&&(r.sig=y.getSig(r,e.sig,"search"))),t.request(y.buildWxRequestConfig(e,{url:s,data:r},"search"))};y.locationProcess(e,c)}}},{key:"getSuggestion",value:function(e){var n=this;if(e=e||{},y.polyfillParam(e),y.checkKeyword(e)){var r={keyword:e.keyword,region:e.region||"全国",region_fix:e.region_fix||0,policy:e.policy||0,page_size:e.page_size||10,page_index:e.page_index||1,get_subpois:e.get_subpois||0,output:"json",key:n.key};if(e.address_format&&(r.address_format=e.address_format),e.filter&&(r.filter=e.filter),e.location){var i=function(n){r.location=n.latitude+","+n.longitude,e.sig&&(r.sig=y.getSig(r,e.sig,"suggest")),t.request(y.buildWxRequestConfig(e,{url:u,data:r},"suggest"))};y.locationProcess(e,i)}else e.sig&&(r.sig=y.getSig(r,e.sig,"suggest")),t.request(y.buildWxRequestConfig(e,{url:u,data:r},"suggest"))}}},{key:"reverseGeocoder",value:function(e){var n=this;e=e||{},y.polyfillParam(e);var r={coord_type:e.coord_type||5,get_poi:e.get_poi||0,output:"json",key:n.key};e.poi_options&&(r.poi_options=e.poi_options);var i=function(n){r.location=n.latitude+","+n.longitude,e.sig&&(r.sig=y.getSig(r,e.sig,"reverseGeocoder")),t.request(y.buildWxRequestConfig(e,{url:c,data:r},"reverseGeocoder"))};y.locationProcess(e,i)}},{key:"geocoder",value:function(e){var n=this;if(e=e||{},y.polyfillParam(e),!y.checkParamKeyEmpty(e,"address")){var r={address:e.address,output:"json",key:n.key};e.region&&(r.region=e.region),e.sig&&(r.sig=y.getSig(r,e.sig,"geocoder")),t.request(y.buildWxRequestConfig(e,{url:c,data:r},"geocoder"))}}},{key:"getCityList",value:function(e){var n=this;e=e||{},y.polyfillParam(e);var r={output:"json",key:n.key};e.sig&&(r.sig=y.getSig(r,e.sig,"getCityList")),t.request(y.buildWxRequestConfig(e,{url:l,data:r},"getCityList"))}},{key:"getDistrictByCityId",value:function(e){var n=this;if(e=e||{},y.polyfillParam(e),!y.checkParamKeyEmpty(e,"id")){var r={id:e.id||"",output:"json",key:n.key};e.sig&&(r.sig=y.getSig(r,e.sig,"getDistrictByCityId")),t.request(y.buildWxRequestConfig(e,{url:d,data:r},"getDistrictByCityId"))}}},{key:"calculateDistance",value:function(e){var n=this;if(e=e||{},y.polyfillParam(e),!y.checkParamKeyEmpty(e,"to")){var r={mode:e.mode||"walking",to:y.location2query(e.to),output:"json",key:n.key};if(e.from&&(e.location=e.from),"straight"==r.mode){var i=function(t){for(var n=y.getEndLocation(r.to),i={message:"query ok",result:{elements:[]},status:0},o=0;o<n.length;o++)i.result.elements.push({distance:y.getDistance(t.latitude,t.longitude,n[o].lat,n[o].lng),duration:0,from:{lat:t.latitude,lng:t.longitude},to:{lat:n[o].lat,lng:n[o].lng}});var a=i.result.elements,s=[];for(o=0;o<a.length;o++)s.push(a[o].distance);return e.success(i,{calculateResult:a,distanceResult:s})};y.locationProcess(e,i)}else{i=function(n){r.from=n.latitude+","+n.longitude,e.sig&&(r.sig=y.getSig(r,e.sig,"calculateDistance")),t.request(y.buildWxRequestConfig(e,{url:h,data:r},"calculateDistance"))};y.locationProcess(e,i)}}}},{key:"direction",value:function(e){var n=this;if(e=e||{},y.polyfillParam(e),!y.checkParamKeyEmpty(e,"to")){var r={output:"json",key:n.key};"string"==typeof e.to?r.to=e.to:r.to=e.to.latitude+","+e.to.longitude;var i=null;e.mode=e.mode||p.driving,i=f+e.mode,e.from&&(e.location=e.from),e.mode==p.driving&&(e.from_poi&&(r.from_poi=e.from_poi),e.heading&&(r.heading=e.heading),e.speed&&(r.speed=e.speed),e.accuracy&&(r.accuracy=e.accuracy),e.road_type&&(r.road_type=e.road_type),e.to_poi&&(r.to_poi=e.to_poi),e.from_track&&(r.from_track=e.from_track),e.waypoints&&(r.waypoints=e.waypoints),e.policy&&(r.policy=e.policy),e.plate_number&&(r.plate_number=e.plate_number)),e.mode==p.transit&&(e.departure_time&&(r.departure_time=e.departure_time),e.policy&&(r.policy=e.policy));var o=function(n){r.from=n.latitude+","+n.longitude,e.sig&&(r.sig=y.getSig(r,e.sig,"direction",e.mode)),t.request(y.buildWxRequestConfig(e,{url:i,data:r},"direction"))};y.locationProcess(e,o)}}}]),e}();e.exports=v}).call(this,n(1)["default"])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(r){var i,o,a,s=n(13);!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var r=n(1),i=n(2);e.exports={atob:r,btoa:i}},function(e,t,n){"use strict";function r(e){return/[A-Z]/.test(e)?e.charCodeAt(0)-"A".charCodeAt(0):/[a-z]/.test(e)?e.charCodeAt(0)-"a".charCodeAt(0)+26:/[0-9]/.test(e)?e.charCodeAt(0)-"0".charCodeAt(0)+52:"+"===e?62:"/"===e?63:void 0}e.exports=function(e){if((e=(e=""+e).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;for(var t="",n=0,i=0,o=0;o<e.length;o++)n<<=6,n|=r(e[o]),i+=6,24===i&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=i=0);return 12===i?(n>>=4,t+=String.fromCharCode(n)):18===i&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n)),t}},function(e,t,n){"use strict";function r(e){return e<26?String.fromCharCode(e+"A".charCodeAt(0)):e<52?String.fromCharCode(e-26+"a".charCodeAt(0)):e<62?String.fromCharCode(e-52+"0".charCodeAt(0)):62===e?"+":63===e?"/":void 0}e.exports=function(e){var t;for(e=""+e,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;var n="";for(t=0;t<e.length;t+=3){var i=[void 0,void 0,void 0,void 0];i[0]=e.charCodeAt(t)>>2,i[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(i[1]|=e.charCodeAt(t+1)>>4,i[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(i[2]|=e.charCodeAt(t+2)>>6,i[3]=63&e.charCodeAt(t+2));for(var o=0;o<i.length;o++)void 0===i[o]?n+="=":n+=r(i[o])}return n}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(n,u,c){"use strict";c.r(u),c.d(u,"createScopedThreejs",(function(){return U}));var l=c(0);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=new Map,v=function e(t){m(this,e),this.identifier=t.identifier,this.force=void 0===t.force?1:t.force,this.pageX=t.pageX||t.x,this.pageY=t.pageY||t.y,this.clientX=t.clientX||t.x,this.clientY=t.clientY||t.y,this.screenX=this.pageX,this.screenY=this.pageY},g=function(){function e(){m(this,e),y.set(this,{})}var t,n,r;return t=e,(n=[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=y.get(this);r||(r={},y.set(this,r)),r[e]||(r[e]=[]),r[e].push(t),n.capture,n.once,n.passive}},{key:"removeEventListener",value:function(e,t){var n=y.get(this);if(n){var r=n[e];if(r&&r.length>0)for(var i=r.length;i--;i>0)if(r[i]===t){r.splice(i,1);break}}}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"function"!=typeof e.preventDefault&&(e.preventDefault=function(){}),"function"!=typeof e.stopPropagation&&(e.stopPropagation=function(){});var t=y.get(this)[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e)}},{key:"dispatchTouchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h({},this),n={changedTouches:e.changedTouches.map((function(e){return new v(e)})),touches:e.touches.map((function(e){return new v(e)})),targetTouches:Array.prototype.slice.call(e.touches.map((function(e){return new v(e)}))),timeStamp:e.timeStamp,target:t,currentTarget:t,type:e.type,cancelBubble:!1,cancelable:!1};this.dispatchEvent(n)}}])&&p(t.prototype,n),r&&p(t,r),e}();function _(e){return(_="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=new WeakMap,N=new WeakMap,E=new WeakMap;function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.target=t.target||this,"function"==typeof this["on".concat(e)]&&this["on".concat(e)].call(this,t)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.readyState=e,t.readyState=e,A.call(this,"readystatechange",t)}function P(e){return!/^(http|https|ftp|wxfile):\/\/.*/i.test(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,i,o=M(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).onabort=null,e.onerror=null,e.onload=null,e.onloadstart=null,e.onprogress=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null,e.readyState=0,e.response=null,e.responseText=null,e.responseType="text",e.dataType="string",e.responseXML=null,e.status=0,e.statusText="",e.upload={},e.withCredentials=!1,T.set(w(e),{"content-type":"application/x-www-form-urlencoded"}),N.set(w(e),{}),e}return t=a,(n=[{key:"abort",value:function(){var e=E.get(this);e&&e.abort()}},{key:"getAllResponseHeaders",value:function(){var e=N.get(this);return Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n")}},{key:"getResponseHeader",value:function(e){return N.get(this)[e]}},{key:"open",value:function(e,t){this._method=e,this._url=t,R.call(this,a.OPENED)}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.readyState!==a.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");var n,i=this._url,o=T.get(this),s=this.responseType,u=this.dataType,c=P(i);"arraybuffer"===s||(n="utf8"),delete this.response,this.response=null;var l=function(t){var n=t.data,r=t.statusCode,i=t.header;if(r=void 0===r?200:r,"string"!=typeof n&&!(n instanceof ArrayBuffer))try{n=JSON.stringify(n)}catch(e){}e.status=r,i&&N.set(e,i),A.call(e,"loadstart"),R.call(e,a.HEADERS_RECEIVED),R.call(e,a.LOADING),e.response=n,n instanceof ArrayBuffer?Object.defineProperty(e,"responseText",{enumerable:!0,configurable:!0,get:function(){throw"InvalidStateError : responseType is "+this.responseType}}):e.responseText=n,R.call(e,a.DONE),A.call(e,"load"),A.call(e,"loadend")},d=function(t){var n=t.errMsg;-1!==n.indexOf("abort")?A.call(e,"abort"):A.call(e,"error",{message:n}),A.call(e,"loadend"),c&&console.warn(n)};if(c){var h=r.getFileSystemManager(),f={filePath:i,success:l,fail:d};return n&&(f.encoding=n),void h.readFile(f)}r.request({data:t,url:i,method:this._method,header:o,dataType:u,responseType:s,success:l,fail:d})}},{key:"setRequestHeader",value:function(e,t){var n=T.get(this);n[e]=t,T.set(this,n)}},{key:"addEventListener",value:function(e,t){var n=this;"function"==typeof t&&(this["on"+e]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.target=e.target||n,t.call(n,e)})}},{key:"removeEventListener",value:function(e,t){this["on"+e]===t&&(this["on"+e]=null)}}])&&b(t.prototype,n),i&&b(t,i),a}(g);function O(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n,r=O(Object.getOwnPropertyNames(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if("constructor"!==i&&"prototype"!==i&&"name"!==i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,o)}}}catch(e){r.e(e)}finally{r.f()}}function D(e){return(D="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function U(r){Object.defineProperty(r,"style",{get:function(){return{width:this.width+"px",height:this.height+"px"}}}),Object.defineProperty(r,"clientHeight",{get:function(){return this.height}}),Object.defineProperty(r,"clientWidth",{get:function(){return this.width}}),I(r.constructor.prototype,g.prototype);var s={createElementNS:function(e,t){return"canvas"===t?r:"img"===t?r.createImage():void 0}};I(s.constructor.prototype,g.prototype);var u={AudioContext:function(){},URL:{}};I(u.constructor.prototype,g.prototype);var d,h,f=L,p={};return d=this,h=function(e){function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var n=[],r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]+"-"+n[255&t]+n[t>>8&255]+"-"+n[t>>16&15|64]+n[t>>24&255]+"-"+n[63&r|128]+n[r>>8&255]+"-"+n[r>>16&255]+n[r>>24&255]+n[255&i]+n[i>>8&255]+n[i>>16&255]+n[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*i.DEG2RAD},radToDeg:function(e){return e*i.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function o(e,t){this.x=e||0,this.y=t||0}function a(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}Object.defineProperties(o.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(o.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(a,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(l!==p||s!==d||u!==h||c!==f){var m=1-a,y=s*d+u*h+c*f+l*p,v=y>=0?1:-1,g=1-y*y;if(g>Number.EPSILON){var _=Math.sqrt(g),b=Math.atan2(_,y*v);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var x=a*v;if(s=s*m+d*x,u=u*m+h*x,c=c*m+f*x,l=l*m+p*x,m===1-a){var M=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=M,u*=M,c*=M,l*=M}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}}),Object.defineProperties(a.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(a.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),d=s(n/2),h=s(r/2),f=s(i/2);return"XYZ"===o?(this._x=d*c*l+u*h*f,this._y=u*h*l-d*c*f,this._z=u*c*f+d*h*l,this._w=u*c*l-d*h*f):"YXZ"===o?(this._x=d*c*l+u*h*f,this._y=u*h*l-d*c*f,this._z=u*c*f-d*h*l,this._w=u*c*l+d*h*f):"ZXY"===o?(this._x=d*c*l-u*h*f,this._y=u*h*l+d*c*f,this._z=u*c*f+d*h*l,this._w=u*c*l-d*h*f):"ZYX"===o?(this._x=d*c*l-u*h*f,this._y=u*h*l+d*c*f,this._z=u*c*f-d*h*l,this._w=u*c*l+d*h*f):"YZX"===o?(this._x=d*c*l+u*h*f,this._y=u*h*l+d*c*f,this._z=u*c*f-d*h*l,this._w=u*c*l-d*h*f):"XZY"===o&&(this._x=d*c*l-u*h*f,this._y=u*h*l-d*c*f,this._z=u*c*f+d*h*l,this._w=u*c*l+d*h*f),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],d=n[10],h=r+s+d;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(l-u)*t,this._y=(o-c)*t,this._z=(a-i)*t):r>s&&r>d?(t=2*Math.sqrt(1+r-s-d),this._w=(l-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>d?(t=2*Math.sqrt(1+s-r-d),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+l)/t):(t=2*Math.sqrt(1+d-r-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(u+l)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(i.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),d=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=i*d+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var c=new h,d=new a;function h(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(h.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(d.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(d.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=u*s+d*-i+c*-a-l*-o,this.y=c*s+d*-o+l*-i-u*-a,this.z=l*s+d*-a+u*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return c.copy(this).projectOnVector(e),this.sub(c)},reflect:function(e){return this.sub(c.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(i.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var p,m=new h;function y(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(y.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)m.x=e.getX(t),m.y=e.getY(t),m.z=e.getZ(t),m.applyMatrix3(this),e.setXYZ(t,m.x,m.y,m.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],y=r[6],v=r[1],g=r[4],_=r[7],b=r[2],x=r[5],M=r[8];return i[0]=o*p+a*v+s*b,i[3]=o*m+a*g+s*x,i[6]=o*y+a*_+s*M,i[1]=u*p+c*v+l*b,i[4]=u*m+c*g+l*x,i[7]=u*y+c*_+l*M,i[2]=d*p+h*v+f*b,i[5]=d*m+h*g+f*x,i[8]=d*y+h*_+f*M,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],d=n[7],h=n[8],f=h*u-c*d,p=c*l-h*s,m=d*s-u*l,y=i*f+o*p+a*m;if(0===y){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var g=1/y;return r[0]=f*g,r[1]=(a*d-h*o)*g,r[2]=(c*o-a*u)*g,r[3]=p*g,r[4]=(h*i-a*l)*g,r[5]=(a*s-c*i)*g,r[6]=m*g,r[7]=(o*l-d*i)*g,r[8]=(u*i-o*s)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var v={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===p&&(p=s.createElementNS("http://www.w3.org/1999/xhtml","canvas")),p.width=e.width,p.height=e.height;var n=p.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=p}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},g=0;function _(e,t,n,r,a,s,u,c,l,d){Object.defineProperty(this,"id",{value:g++}),this.uuid=i.generateUUID(),this.name="",this.image=void 0!==e?e:_.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:_.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==a?a:1006,this.minFilter=void 0!==s?s:1008,this.anisotropy=void 0!==l?l:1,this.format=void 0!==u?u:1023,this.type=void 0!==c?c:1009,this.offset=new o(0,0),this.repeat=new o(1,1),this.center=new o(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new y,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function b(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function x(e,t,n){this.width=e,this.height=t,this.scissor=new b(0,0,e,t),this.scissorTest=!1,this.viewport=new b(0,0,e,t),n=n||{},this.texture=new _(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function M(e,t,n){x.call(this,e,t,n),this.samples=4}_.DEFAULT_IMAGE=void 0,_.DEFAULT_MAPPING=300,_.prototype=Object.assign(Object.create(t.prototype),{constructor:_,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=i.generateUUID()),!t&&void 0===e.images[r.uuid]){var o;if(Array.isArray(r)){o=[];for(var a=0,s=r.length;a<s;a++)o.push(v.getDataURL(r[a]))}else o=v.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:o}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(_.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(b.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(b.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],d=o[9],h=o[2],f=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+h)<.1&&Math.abs(d+f)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,y=(l+1)/2,v=(p+1)/2,g=(s+c)/4,_=(u+h)/4,b=(d+f)/4;return m>y&&m>v?m<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(m)),i=_/n):y>v?y<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(y)),i=b/r):v<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(v)),r=b/i),this.set(n,r,i,t),this}var x=Math.sqrt((f-d)*(f-d)+(u-h)*(u-h)+(c-s)*(c-s));return Math.abs(x)<.001&&(x=1),this.x=(f-d)/x,this.y=(u-h)/x,this.z=(c-s)/x,this.w=Math.acos((a+l+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),x.prototype=Object.assign(Object.create(t.prototype),{constructor:x,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),M.prototype=Object.assign(Object.create(x.prototype),{constructor:M,isWebGLMultisampleRenderTarget:!0,copy:function(e){return x.prototype.copy.call(this,e),this.samples=e.samples,this}});var C=new h,w=new R,S=new h(0,0,0),T=new h(1,1,1),N=new h,E=new h,A=new h;function R(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(R.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,c,l,d,h,f,p,m){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=i,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=c,y[10]=l,y[14]=d,y[3]=h,y[7]=f,y[11]=p,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new R).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/C.setFromMatrixColumn(e,0).length(),i=1/C.setFromMatrixColumn(e,1).length(),o=1/C.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var d=o*c,h=o*l,f=a*c,p=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=h+f*u,t[5]=d-p*u,t[9]=-a*s,t[2]=p-d*u,t[6]=f+h*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,y=s*l,v=u*c,g=u*l;t[0]=m+g*a,t[4]=v*a-y,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=y*a-v,t[6]=g+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*c,y=s*l,v=u*c,g=u*l,t[0]=m-g*a,t[4]=-o*l,t[8]=v+y*a,t[1]=y+v*a,t[5]=o*c,t[9]=g-m*a,t[2]=-o*u,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)d=o*c,h=o*l,f=a*c,p=a*l,t[0]=s*c,t[4]=f*u-h,t[8]=d*u+p,t[1]=s*l,t[5]=p*u+d,t[9]=h*u-f,t[2]=-u,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var _=o*s,b=o*u,x=a*s,M=a*u;t[0]=s*c,t[4]=M-_*l,t[8]=x*l+b,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=b*l+x,t[10]=_-M*l}else"XZY"===e.order&&(_=o*s,b=o*u,x=a*s,M=a*u,t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=_*l+M,t[5]=o*c,t[9]=b*l-x,t[2]=x*l-b,t[6]=a*c,t[10]=M*l+_);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(S,e,T)},lookAt:function(e,t,n){var r=this.elements;return A.subVectors(e,t),0===A.lengthSq()&&(A.z=1),A.normalize(),N.crossVectors(n,A),0===N.lengthSq()&&(1===Math.abs(n.z)?A.x+=1e-4:A.z+=1e-4,A.normalize(),N.crossVectors(n,A)),N.normalize(),E.crossVectors(A,N),r[0]=N.x,r[4]=E.x,r[8]=A.x,r[1]=N.y,r[5]=E.y,r[9]=A.y,r[2]=N.z,r[6]=E.z,r[10]=A.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],y=n[14],v=n[3],g=n[7],_=n[11],b=n[15],x=r[0],M=r[4],C=r[8],w=r[12],S=r[1],T=r[5],N=r[9],E=r[13],A=r[2],R=r[6],P=r[10],L=r[14],O=r[3],k=r[7],I=r[11],D=r[15];return i[0]=o*x+a*S+s*A+u*O,i[4]=o*M+a*T+s*R+u*k,i[8]=o*C+a*N+s*P+u*I,i[12]=o*w+a*E+s*L+u*D,i[1]=c*x+l*S+d*A+h*O,i[5]=c*M+l*T+d*R+h*k,i[9]=c*C+l*N+d*P+h*I,i[13]=c*w+l*E+d*L+h*D,i[2]=f*x+p*S+m*A+y*O,i[6]=f*M+p*T+m*R+y*k,i[10]=f*C+p*N+m*P+y*I,i[14]=f*w+p*E+m*L+y*D,i[3]=v*x+g*S+_*A+b*O,i[7]=v*M+g*T+_*R+b*k,i[11]=v*C+g*N+_*P+b*I,i[15]=v*w+g*E+_*L+b*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)C.x=e.getX(t),C.y=e.getY(t),C.z=e.getZ(t),C.applyMatrix4(this),e.setXYZ(t,C.x,C.y,C.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],d=e[10],h=e[14];return e[3]*(+i*s*l-r*u*l-i*a*d+n*u*d+r*a*h-n*s*h)+e[7]*(+t*s*h-t*u*d+i*o*d-r*o*h+r*u*c-i*s*c)+e[11]*(+t*u*l-t*a*h-i*o*l+n*o*h+i*a*c-n*u*c)+e[15]*(-r*a*c-t*s*l+t*a*d+r*o*l-n*o*d+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],y=r[12],v=r[13],g=r[14],_=r[15],b=f*g*d-v*p*d+v*l*m-c*g*m-f*l*_+c*p*_,x=y*p*d-h*g*d-y*l*m+u*g*m+h*l*_-u*p*_,M=h*v*d-y*f*d+y*c*m-u*v*m-h*c*_+u*f*_,C=y*f*l-h*v*l-y*c*p+u*v*p+h*c*g-u*f*g,w=i*b+o*x+a*M+s*C;if(0===w){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(S);return console.warn(S),this.identity()}var T=1/w;return n[0]=b*T,n[1]=(v*p*s-f*g*s-v*a*m+o*g*m+f*a*_-o*p*_)*T,n[2]=(c*g*s-v*l*s+v*a*d-o*g*d-c*a*_+o*l*_)*T,n[3]=(f*l*s-c*p*s-f*a*d+o*p*d+c*a*m-o*l*m)*T,n[4]=x*T,n[5]=(h*g*s-y*p*s+y*a*m-i*g*m-h*a*_+i*p*_)*T,n[6]=(y*l*s-u*g*s-y*a*d+i*g*d+u*a*_-i*l*_)*T,n[7]=(u*p*s-h*l*s+h*a*d-i*p*d-u*a*m+i*l*m)*T,n[8]=M*T,n[9]=(y*f*s-h*v*s-y*o*m+i*v*m+h*o*_-i*f*_)*T,n[10]=(u*v*s-y*c*s+y*o*d-i*v*d-u*o*_+i*c*_)*T,n[11]=(h*c*s-u*f*s-h*o*d+i*f*d+u*o*m-i*c*m)*T,n[12]=C*T,n[13]=(h*v*a-y*f*a+y*o*p-i*v*p-h*o*g+i*f*g)*T,n[14]=(y*c*a-u*v*a-y*o*l+i*v*l+u*o*g-i*c*g)*T,n[15]=(u*f*a-h*c*a+h*o*l-i*f*l-u*o*p+i*c*p)*T,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,d=i*u,h=i*c,f=i*l,p=o*c,m=o*l,y=a*l,v=s*u,g=s*c,_=s*l,b=n.x,x=n.y,M=n.z;return r[0]=(1-(p+y))*b,r[1]=(h+_)*b,r[2]=(f-g)*b,r[3]=0,r[4]=(h-_)*x,r[5]=(1-(d+y))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+g)*M,r[9]=(m-v)*M,r[10]=(1-(d+p))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=C.set(r[0],r[1],r[2]).length(),o=C.set(r[4],r[5],r[6]).length(),a=C.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],w.copy(this);var s=1/i,u=1/o,c=1/a;return w.elements[0]*=s,w.elements[1]*=s,w.elements[2]*=s,w.elements[4]*=u,w.elements[5]*=u,w.elements[6]*=u,w.elements[8]*=c,w.elements[9]*=c,w.elements[10]*=c,t.setFromRotationMatrix(w),n.x=i,n.y=o,n.z=a,this},makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),c=1/(o-i),l=(t+e)*s,d=(n+r)*u,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var P=new R,L=new a;function O(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||O.DefaultOrder}function k(){this.mask=1}O.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],O.DefaultOrder="XYZ",Object.defineProperties(O.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(O.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=i.clamp,o=e.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],d=o[9],h=o[2],f=o[6],p=o[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(u,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(u,p))):"XZY"===t?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-d,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return P.makeRotationFromQuaternion(e),this.setFromRotationMatrix(P,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return L.setFromEuler(this),this.setFromQuaternion(L,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new h(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(k.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var I=0,U=new h,B=new a,F=new R,G=new h,j=new h,z=new h,V=new a,H=new h(1,0,0),W=new h(0,1,0),q=new h(0,0,1),X={type:"added"},Y={type:"removed"};function J(){Object.defineProperty(this,"id",{value:I++}),this.uuid=i.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=J.DefaultUp.clone();var e=new h,t=new O,n=new a,r=new h(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new R},normalMatrix:{value:new y}}),this.matrix=new R,this.matrixWorld=new R,this.matrixAutoUpdate=J.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new k,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function K(){J.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}J.DefaultUp=new h(0,1,0),J.DefaultMatrixAutoUpdate=!0,J.prototype=Object.assign(Object.create(t.prototype),{constructor:J,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return B.setFromAxisAngle(e,t),this.quaternion.multiply(B),this},rotateOnWorldAxis:function(e,t){return B.setFromAxisAngle(e,t),this.quaternion.premultiply(B),this},rotateX:function(e){return this.rotateOnAxis(H,e)},rotateY:function(e){return this.rotateOnAxis(W,e)},rotateZ:function(e){return this.rotateOnAxis(q,e)},translateOnAxis:function(e,t){return U.copy(e).applyQuaternion(this.quaternion),this.position.add(U.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(H,e)},translateY:function(e){return this.translateOnAxis(W,e)},translateZ:function(e){return this.translateOnAxis(q,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(F.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?G.copy(e):G.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),j.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?F.lookAt(j,G,this.up):F.lookAt(G,j,this.up),this.quaternion.setFromRotationMatrix(F),r&&(F.extractRotation(r.matrixWorld),B.setFromRotationMatrix(F),this.quaternion.premultiply(B.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(X)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Y)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),F.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),F.multiply(e.parent.matrixWorld)),e.applyMatrix(F),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new h),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(j,e,z),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new h),this.updateMatrixWorld(!0),this.matrixWorld.decompose(j,V,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new h),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object);if(t){var d=m(e.geometries),h=m(e.materials),f=m(e.textures),p=m(e.images);a=m(e.shapes),d.length>0&&(n.geometries=d),h.length>0&&(n.materials=h),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),K.prototype=Object.assign(Object.create(J.prototype),{constructor:K,isScene:!0,copy:function(e,t){return J.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var $=[new h,new h,new h,new h,new h,new h,new h,new h],Z=new h,Q=new h,ee=new h,te=new h,ne=new h,re=new h,ie=new h,oe=new h,ae=new h,se=new h,ue=new h;function ce(e,t){this.min=void 0!==e?e:new h(1/0,1/0,1/0),this.max=void 0!==t?t:new h(-1/0,-1/0,-1/0)}function le(e,t,n,r,i){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){ue.fromArray(e,o);var s=i.x*Math.abs(ue.x)+i.y*Math.abs(ue.y)+i.z*Math.abs(ue.z),u=t.dot(ue),c=n.dot(ue),l=r.dot(ue);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}Object.assign(ce.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],d=e[s+2];c<t&&(t=c),l<n&&(n=l),d<r&&(r=d),c>i&&(i=c),l>o&&(o=l),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),d=e.getZ(s);c<t&&(t=c),l<n&&(n=l),d<r&&(r=d),c>i&&(i=c),l>o&&(o=l),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Z.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new h),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new h),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){var t,n;e.updateWorldMatrix(!1,!1);var r=e.geometry;if(void 0!==r)if(r.isGeometry){var i=r.vertices;for(t=0,n=i.length;t<n;t++)Z.copy(i[t]),Z.applyMatrix4(e.matrixWorld),this.expandByPoint(Z)}else if(r.isBufferGeometry){var o=r.attributes.position;if(void 0!==o)for(t=0,n=o.count;t<n;t++)Z.fromBufferAttribute(o,t).applyMatrix4(e.matrixWorld),this.expandByPoint(Z)}var a=e.children;for(t=0,n=a.length;t<n;t++)this.expandByObject(a[t]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new h),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Z),Z.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(oe),ae.subVectors(this.max,oe),Q.subVectors(e.a,oe),ee.subVectors(e.b,oe),te.subVectors(e.c,oe),ne.subVectors(ee,Q),re.subVectors(te,ee),ie.subVectors(Q,te);var t=[0,-ne.z,ne.y,0,-re.z,re.y,0,-ie.z,ie.y,ne.z,0,-ne.x,re.z,0,-re.x,ie.z,0,-ie.x,-ne.y,ne.x,0,-re.y,re.x,0,-ie.y,ie.x,0];return!!le(t,Q,ee,te,ae)&&!!le(t=[1,0,0,0,1,0,0,0,1],Q,ee,te,ae)&&(se.crossVectors(ne,re),le(t=[se.x,se.y,se.z],Q,ee,te,ae))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new h),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Z.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Z).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||($[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var de=new ce;function he(e,t){this.center=void 0!==e?e:new h,this.radius=void 0!==t?t:0}Object.assign(he.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):de.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new h),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new ce),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var fe=new h,pe=new h,me=new h,ye=new h,ve=new h,ge=new h,_e=new h;function be(e,t){this.origin=void 0!==e?e:new h,this.direction=void 0!==t?t:new h}Object.assign(be.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new h),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,fe)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new h),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=fe.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fe.copy(this.direction).multiplyScalar(t).add(this.origin),fe.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){pe.copy(e).add(t).multiplyScalar(.5),me.copy(t).sub(e).normalize(),ye.copy(this.origin).sub(pe);var i,o,a,s,u=.5*e.distanceTo(t),c=-this.direction.dot(me),l=ye.dot(this.direction),d=-ye.dot(me),h=ye.lengthSq(),f=Math.abs(1-c*c);if(f>0)if(o=c*l-d,s=u*f,(i=c*d-l)>=0)if(o>=-s)if(o<=s){var p=1/f;a=(i*=p)*(i+c*(o*=p)+2*l)+o*(c*i+o+2*d)+h}else o=u,a=-(i=Math.max(0,-(c*o+l)))*i+o*(o+2*d)+h;else o=-u,a=-(i=Math.max(0,-(c*o+l)))*i+o*(o+2*d)+h;else o<=-s?a=-(i=Math.max(0,-(-c*u+l)))*i+(o=i>0?-u:Math.min(Math.max(-u,-d),u))*(o+2*d)+h:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-d),u))*(o+2*d)+h):a=-(i=Math.max(0,-(c*u+l)))*i+(o=i>0?u:Math.min(Math.max(-u,-d),u))*(o+2*d)+h;else o=c>0?-u:u,a=-(i=Math.max(0,-(c*o+l)))*i+o*(o+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(me).multiplyScalar(o).add(pe),a},intersectSphere:function(e,t){fe.subVectors(e.center,this.origin);var n=fe.dot(this.direction),r=fe.dot(fe)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-d.z)*l,s=(e.max.z-d.z)*l):(a=(e.max.z-d.z)*l,s=(e.min.z-d.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,fe)},intersectTriangle:function(e,t,n,r,i){ve.subVectors(t,e),ge.subVectors(n,e),_e.crossVectors(ve,ge);var o,a=this.direction.dot(_e);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}ye.subVectors(this.origin,e);var s=o*this.direction.dot(ge.crossVectors(ye,ge));if(s<0)return null;var u=o*this.direction.dot(ve.cross(ye));if(u<0)return null;if(s+u>a)return null;var c=-o*ye.dot(_e);return c<0?null:this.at(c/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var xe=new h,Me=new h,Ce=new h,we=new h,Se=new h,Te=new h,Ne=new h,Ee=new h,Ae=new h,Re=new h;function Pe(e,t,n){this.a=void 0!==e?e:new h,this.b=void 0!==t?t:new h,this.c=void 0!==n?n:new h}Object.assign(Pe,{getNormal:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new h),r.subVectors(n,t),xe.subVectors(e,t),r.cross(xe);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){xe.subVectors(r,t),Me.subVectors(n,t),Ce.subVectors(e,t);var o=xe.dot(xe),a=xe.dot(Me),s=xe.dot(Ce),u=Me.dot(Me),c=Me.dot(Ce),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new h),0===l)return i.set(-2,-1,-1);var d=1/l,f=(u*s-a*c)*d,p=(o*c-a*s)*d;return i.set(1-f-p,p,f)},containsPoint:function(e,t,n,r){return Pe.getBarycoord(e,t,n,r,we),we.x>=0&&we.y>=0&&we.x+we.y<=1},getUV:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,we),s.set(0,0),s.addScaledVector(i,we.x),s.addScaledVector(o,we.y),s.addScaledVector(a,we.z),s},isFrontFacing:function(e,t,n,r){return xe.subVectors(n,t),Me.subVectors(e,t),xe.cross(Me).dot(r)<0}}),Object.assign(Pe.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return xe.subVectors(this.c,this.b),Me.subVectors(this.a,this.b),.5*xe.cross(Me).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new h),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Pe.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new h),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Pe.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return Pe.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return Pe.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Pe.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new h);var n,r,i=this.a,o=this.b,a=this.c;Se.subVectors(o,i),Te.subVectors(a,i),Ee.subVectors(e,i);var s=Se.dot(Ee),u=Te.dot(Ee);if(s<=0&&u<=0)return t.copy(i);Ae.subVectors(e,o);var c=Se.dot(Ae),l=Te.dot(Ae);if(c>=0&&l<=c)return t.copy(o);var d=s*l-c*u;if(d<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(Se,n);Re.subVectors(e,a);var f=Se.dot(Re),p=Te.dot(Re);if(p>=0&&f<=p)return t.copy(a);var m=f*u-s*p;if(m<=0&&u>=0&&p<=0)return r=u/(u-p),t.copy(i).addScaledVector(Te,r);var y=c*p-f*l;if(y<=0&&l-c>=0&&f-p>=0)return Ne.subVectors(a,o),r=(l-c)/(l-c+(f-p)),t.copy(o).addScaledVector(Ne,r);var v=1/(y+m+d);return n=m*v,r=d*v,t.copy(i).addScaledVector(Se,n).addScaledVector(Te,r)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oe={h:0,s:0,l:0},ke={h:0,s:0,l:0};function Ie(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function De(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ue(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Be(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function Fe(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new h,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Ie,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(Ie.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=i.euclideanModulo(e,1),t=i.clamp(t,0,1),n=i.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=De(o,r,e+1/3),this.g=De(o,r,e),this.b=De(o,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,l=(c=n[1]).length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(c=Le[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Ue(e.r),this.g=Ue(e.g),this.b=Ue(e.b),this},copyLinearToSRGB:function(e){return this.r=Be(e.r),this.g=Be(e.g),this.b=Be(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-r)/c+2;break;case o:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Oe),Oe.h+=e,Oe.s+=t,Oe.l+=n,this.setHSL(Oe.h,Oe.s,Oe.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Oe),e.getHSL(ke);var n=i.lerp(Oe.h,ke.h,t),r=i.lerp(Oe.s,ke.s,t),o=i.lerp(Oe.l,ke.l,t);return this.setHSL(n,r,o),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(Fe.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Ge=0;function je(){Object.defineProperty(this,"id",{value:Ge++}),this.uuid=i.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=519,this.stencilRef=0,this.stencilMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function ze(e){je.call(this),this.type="MeshBasicMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ve(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function He(e,t,n){Ve.call(this,new Int8Array(e),t,n)}function We(e,t,n){Ve.call(this,new Uint8Array(e),t,n)}function qe(e,t,n){Ve.call(this,new Uint8ClampedArray(e),t,n)}function Xe(e,t,n){Ve.call(this,new Int16Array(e),t,n)}function Ye(e,t,n){Ve.call(this,new Uint16Array(e),t,n)}function Je(e,t,n){Ve.call(this,new Int32Array(e),t,n)}function Ke(e,t,n){Ve.call(this,new Uint32Array(e),t,n)}function $e(e,t,n){Ve.call(this,new Float32Array(e),t,n)}function Ze(e,t,n){Ve.call(this,new Float64Array(e),t,n)}function Qe(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function et(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}je.prototype=Object.assign(Object.create(t.prototype),{constructor:je,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWrite=e.stencilWrite,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilMask=e.stencilMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ze.prototype=Object.create(je.prototype),ze.prototype.constructor=ze,ze.prototype.isMeshBasicMaterial=!0,ze.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(Ve.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ve.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Ie),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new o),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new h),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new b),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),He.prototype=Object.create(Ve.prototype),He.prototype.constructor=He,We.prototype=Object.create(Ve.prototype),We.prototype.constructor=We,qe.prototype=Object.create(Ve.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(Ve.prototype),Xe.prototype.constructor=Xe,Ye.prototype=Object.create(Ve.prototype),Ye.prototype.constructor=Ye,Je.prototype=Object.create(Ve.prototype),Je.prototype.constructor=Je,Ke.prototype=Object.create(Ve.prototype),Ke.prototype.constructor=Ke,$e.prototype=Object.create(Ve.prototype),$e.prototype.constructor=$e,Ze.prototype=Object.create(Ve.prototype),Ze.prototype.constructor=Ze,Object.assign(Qe.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,u=e.morphTargets,c=u.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:u[l].name,data:[]};this.morphTargets.position=t}var d,h=e.morphNormals,f=h.length;if(f>0){for(d=[],l=0;l<f;l++)d[l]={name:h[l].name,data:[]};this.morphTargets.normal=d}var p=e.skinIndices,m=e.skinWeights,y=p.length===r.length,v=m.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var _=g.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=g.normal;this.normals.push(b,b,b)}var x,M=g.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var C=g.color;this.colors.push(C,C,C)}!0===a&&(void 0!==(x=i[0][l])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new o,new o,new o))),!0===s&&(void 0!==(x=i[1][l])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new o,new o,new o)));for(var w=0;w<c;w++){var S=u[w].vertices;t[w].data.push(S[g.a],S[g.b],S[g.c])}for(w=0;w<f;w++){var T=h[w].vertexNormals[l];d[w].data.push(T.a,T.b,T.c)}y&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(m[g.a],m[g.b],m[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var tt=1,nt=new R,rt=new J,it=new h,ot=new ce,at=new ce,st=new h;function ut(){Object.defineProperty(this,"id",{value:tt+=2}),this.uuid=i.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ut.prototype=Object.assign(Object.create(t.prototype),{constructor:ut,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(et(e)>65535?Ke:Ye)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Ve(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new y).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var r=this.attributes.tangent;return void 0!==r&&((new y).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return nt.makeRotationX(e),this.applyMatrix(nt),this},rotateY:function(e){return nt.makeRotationY(e),this.applyMatrix(nt),this},rotateZ:function(e){return nt.makeRotationZ(e),this.applyMatrix(nt),this},translate:function(e,t,n){return nt.makeTranslation(e,t,n),this.applyMatrix(nt),this},scale:function(e,t,n){return nt.makeScale(e,t,n),this.applyMatrix(nt),this},lookAt:function(e){return rt.lookAt(e),rt.updateMatrix(),this.applyMatrix(rt.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(it).negate(),this.translate(it.x,it.y,it.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new $e(3*t.vertices.length,3),r=new $e(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new $e(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new $e(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Qe).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Ve(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Ve(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new Ve(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Ve(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Ve(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[a],c=0,l=u.length;c<l;c++){var d=u[c],h=new $e(3*d.data.length,3);h.name=d.name,s.push(h.copyVector3sArray(d.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var f=new $e(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new $e(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ce);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];ot.setFromBufferAttribute(i),this.boundingBox.expandByPoint(ot.min),this.boundingBox.expandByPoint(ot.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new he);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(ot.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];at.setFromBufferAttribute(o),ot.expandByPoint(at.min),ot.expandByPoint(at.max)}ot.getCenter(n);var a=0;for(r=0,i=e.count;r<i;r++)st.fromBufferAttribute(e,r),a=Math.max(a,n.distanceToSquared(st));if(t)for(r=0,i=t.length;r<i;r++)for(var s=0,u=(o=t[r]).count;s<u;s++)st.fromBufferAttribute(o,s),a=Math.max(a,n.distanceToSquared(st));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Ve(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,c=t.normal.array,l=new h,d=new h,f=new h,p=new h,m=new h;if(e){var y=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*y[i+0],s=3*y[i+1],u=3*y[i+2],l.fromArray(n,a),d.fromArray(n,s),f.fromArray(n,u),p.subVectors(f,d),m.subVectors(l,d),p.cross(m),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)l.fromArray(n,i),d.fromArray(n,i+3),f.fromArray(n,i+6),p.subVectors(f,d),m.subVectors(l,d),p.cross(m),c[i]=p.x,c[i+1]=p.y,c[i+2]=p.z,c[i+3]=p.x,c[i+4]=p.y,c[i+5]=p.z,c[i+6]=p.x,c[i+7]=p.y,c[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s),c=0,l=s;c<u;c++,l++)i[l]=a[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)st.x=e.getX(t),st.y=e.getY(t),st.z=e.getZ(t),st.normalize(),e.setXYZ(t,st.x,st.y,st.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,u=t.length;s<u;s++){o=t[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new Ve(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new ut,n=this.index.array,r=this.attributes;for(var i in r){var o=e(r[i],n);t.addAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],u=a[i],c=0,l=u.length;c<l;c++)o=e(u[c],n),s.push(o);t.morphAttributes[i]=s}for(var d=this.groups,h=(c=0,d.length);c<h;c++){var f=d[c];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(h=i[n]).toJSON();""!==h.name&&(o.name=h.name),e.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],c=[],l=0,d=u.length;l<d;l++){var h;o=(h=u[l]).toJSON(),""!==h.name&&(o.name=h.name),c.push(o)}c.length>0&&(a[n]=c,s=!0)}s&&(e.data.morphAttributes=a);var f=this.groups;f.length>0&&(e.data.groups=JSON.parse(JSON.stringify(f)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e},clone:function(){return(new ut).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],c=s[t];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[t]=u}var l=e.groups;for(n=0,r=l.length;n<r;n++){var d=l[n];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ct=new R,lt=new be,dt=new he,ht=new h,ft=new h,pt=new h,mt=new h,yt=new h,vt=new h,gt=new h,_t=new h,bt=new h,xt=new o,Mt=new o,Ct=new o,wt=new h,St=new h;function Tt(e,t){J.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new ut,this.material=void 0!==t?t:new ze({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Nt(e,t,n,r,i,o,a,s){if(null===(1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s)))return null;St.copy(s),St.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(St);return u<n.near||u>n.far?null:{distance:u,point:St.clone(),object:e}}function Et(e,t,n,r,i,a,s,u,c,l,d){ht.fromBufferAttribute(i,c),ft.fromBufferAttribute(i,l),pt.fromBufferAttribute(i,d);var h=e.morphTargetInfluences;if(t.morphTargets&&a&&h){gt.set(0,0,0),_t.set(0,0,0),bt.set(0,0,0);for(var f=0,p=a.length;f<p;f++){var m=h[f],y=a[f];0!==m&&(mt.fromBufferAttribute(y,c),yt.fromBufferAttribute(y,l),vt.fromBufferAttribute(y,d),gt.addScaledVector(mt.sub(ht),m),_t.addScaledVector(yt.sub(ft),m),bt.addScaledVector(vt.sub(pt),m))}ht.add(gt),ft.add(_t),pt.add(bt)}var v=Nt(e,t,n,r,ht,ft,pt,wt);if(v){s&&(xt.fromBufferAttribute(s,c),Mt.fromBufferAttribute(s,l),Ct.fromBufferAttribute(s,d),v.uv=Pe.getUV(wt,ht,ft,pt,xt,Mt,Ct,new o)),u&&(xt.fromBufferAttribute(u,c),Mt.fromBufferAttribute(u,l),Ct.fromBufferAttribute(u,d),v.uv2=Pe.getUV(wt,ht,ft,pt,xt,Mt,Ct,new o));var g=new Fe(c,l,d);Pe.getNormal(ht,ft,pt,g.normal),v.face=g}return v}Tt.prototype=Object.assign(Object.create(J.prototype),{constructor:Tt,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return J.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),dt.copy(r.boundingSphere),dt.applyMatrix4(a),!1!==e.ray.intersectsSphere(dt)&&(ct.getInverse(a),lt.copy(e.ray).applyMatrix4(ct),null===r.boundingBox||!1!==lt.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var s,u,c,l,d,h,f,p,m,y=r.index,v=r.attributes.position,g=r.morphAttributes.position,_=r.attributes.uv,b=r.attributes.uv2,x=r.groups,M=r.drawRange;if(null!==y)if(Array.isArray(i))for(l=0,h=x.length;l<h;l++)for(m=i[(p=x[l]).materialIndex],d=Math.max(p.start,M.start),f=Math.min(p.start+p.count,M.start+M.count);d<f;d+=3)s=y.getX(d),u=y.getX(d+1),c=y.getX(d+2),(n=Et(this,m,e,lt,v,g,_,b,s,u,c))&&(n.faceIndex=Math.floor(d/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(l=Math.max(0,M.start),h=Math.min(y.count,M.start+M.count);l<h;l+=3)s=y.getX(l),u=y.getX(l+1),c=y.getX(l+2),(n=Et(this,i,e,lt,v,g,_,b,s,u,c))&&(n.faceIndex=Math.floor(l/3),t.push(n));else if(void 0!==v)if(Array.isArray(i))for(l=0,h=x.length;l<h;l++)for(m=i[(p=x[l]).materialIndex],d=Math.max(p.start,M.start),f=Math.min(p.start+p.count,M.start+M.count);d<f;d+=3)(n=Et(this,m,e,lt,v,g,_,b,s=d,u=d+1,c=d+2))&&(n.faceIndex=Math.floor(d/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(l=Math.max(0,M.start),h=Math.min(v.count,M.start+M.count);l<h;l+=3)(n=Et(this,i,e,lt,v,g,_,b,s=l,u=l+1,c=l+2))&&(n.faceIndex=Math.floor(l/3),t.push(n))}else if(r.isGeometry){var C,w,S,T,N=Array.isArray(i),E=r.vertices,A=r.faces,R=r.faceVertexUvs[0];R.length>0&&(T=R);for(var P=0,L=A.length;P<L;P++){var O=A[P],k=N?i[O.materialIndex]:i;if(void 0!==k&&(C=E[O.a],w=E[O.b],S=E[O.c],n=Nt(this,k,e,lt,C,w,S,wt))){if(T&&T[P]){var I=T[P];xt.copy(I[0]),Mt.copy(I[1]),Ct.copy(I[2]),n.uv=Pe.getUV(wt,C,w,S,xt,Mt,Ct,new o)}n.face=O,n.faceIndex=P,t.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var At=0,Rt=new R,Pt=new J,Lt=new h;function Ot(){Object.defineProperty(this,"id",{value:At+=2}),this.uuid=i.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function kt(e,t,n,r,i,o){Ot.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new It(e,t,n,r,i,o)),this.mergeVertices()}function It(e,t,n,r,i,o){ut.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],u=[],c=[],l=[],d=0,f=0;function p(e,t,n,r,i,o,p,m,y,v,g){var _,b,x=o/y,M=p/v,C=o/2,w=p/2,S=m/2,T=y+1,N=v+1,E=0,A=0,R=new h;for(b=0;b<N;b++){var P=b*M-w;for(_=0;_<T;_++){var L=_*x-C;R[e]=L*r,R[t]=P*i,R[n]=S,u.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[n]=m>0?1:-1,c.push(R.x,R.y,R.z),l.push(_/y),l.push(1-b/v),E+=1}}for(b=0;b<v;b++)for(_=0;_<y;_++){var O=d+_+T*b,k=d+_+T*(b+1),I=d+(_+1)+T*(b+1),D=d+(_+1)+T*b;s.push(O,k,D),s.push(k,I,D),A+=6}a.addGroup(f,A,g),f+=A,d+=E}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new $e(u,3)),this.addAttribute("normal",new $e(c,3)),this.addAttribute("uv",new $e(l,2))}function Dt(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Ut(e){for(var t={},n=0;n<e.length;n++){var r=Dt(e[n]);for(var i in r)t[i]=r[i]}return t}Ot.prototype=Object.assign(Object.create(t.prototype),{constructor:Ot,isGeometry:!0,applyMatrix:function(e){for(var t=(new y).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Rt.makeRotationX(e),this.applyMatrix(Rt),this},rotateY:function(e){return Rt.makeRotationY(e),this.applyMatrix(Rt),this},rotateZ:function(e){return Rt.makeRotationZ(e),this.applyMatrix(Rt),this},translate:function(e,t,n){return Rt.makeTranslation(e,t,n),this.applyMatrix(Rt),this},scale:function(e,t,n){return Rt.makeScale(e,t,n),this.applyMatrix(Rt),this},lookAt:function(e){return Pt.lookAt(e),Pt.updateMatrix(),this.applyMatrix(Pt.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,s=void 0!==r.color?r.color.array:void 0,u=void 0!==r.uv?r.uv.array:void 0,c=void 0!==r.uv2?r.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.length;l+=3)t.vertices.push((new h).fromArray(i,l)),void 0!==s&&t.colors.push((new Ie).fromArray(s,l));function d(e,n,r,i){var l=void 0===s?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],d=new Fe(e,n,r,void 0===a?[]:[(new h).fromArray(a,3*e),(new h).fromArray(a,3*n),(new h).fromArray(a,3*r)],l,i);t.faces.push(d),void 0!==u&&t.faceVertexUvs[0].push([(new o).fromArray(u,2*e),(new o).fromArray(u,2*n),(new o).fromArray(u,2*r)]),void 0!==c&&t.faceVertexUvs[1].push([(new o).fromArray(c,2*e),(new o).fromArray(c,2*n),(new o).fromArray(c,2*r)])}var f=e.groups;if(f.length>0)for(l=0;l<f.length;l++)for(var p=f[l],m=p.start,y=m,v=m+p.count;y<v;y+=3)void 0!==n?d(n[y],n[y+1],n[y+2],p.materialIndex):d(y,y+1,y+2,p.materialIndex);else if(void 0!==n)for(l=0;l<n.length;l+=3)d(n[l],n[l+1],n[l+2]);else for(l=0;l<i.length/3;l+=3)d(l,l+1,l+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lt).negate(),this.translate(Lt.x,Lt.y,Lt.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new R;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new h,t=new h,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new h;if(e){var s,u,c,l=new h,d=new h;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],l.subVectors(c,u),d.subVectors(s,u),l.cross(d),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var f=(o=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Ot;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new h,c={a:new h,b:new h,c:new h},a.push(u),s.push(c)}var u,c,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=l.faceNormals[n],c=l.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ce),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new he),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,c=this.colors,l=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new y).getNormalMatrix(t));for(var d=0,h=a.length;d<h;d++){var f=a[d].clone();void 0!==t&&f.applyMatrix4(t),o.push(f)}for(d=0,h=l.length;d<h;d++)c.push(l[d].clone());for(d=0,h=u.length;d<h;d++){var p,m,v,g=u[d],_=g.vertexNormals,b=g.vertexColors;(p=new Fe(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==r&&p.normal.applyMatrix3(r).normalize();for(var x=0,M=_.length;x<M;x++)m=_[x].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),p.vertexNormals.push(m);for(p.color.copy(g.color),x=0,M=b.length;x<M;x++)v=b[x],p.vertexColors.push(v.clone());p.materialIndex=g.materialIndex+n,s.push(p)}for(d=0,h=e.faceVertexUvs.length;d<h;d++){var C=e.faceVertexUvs[d];for(void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]),x=0,M=C.length;x<M;x++){for(var w=C[x],S=[],T=0,N=w.length;T<N;T++)S.push(w[T].clone());this.faceVertexUvs[d].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},c=[],l=[],d=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(u[t]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[t]];var h=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var p=h[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new h(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],l={},d=[],h={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=f.normal.length()>0,y=f.vertexNormals.length>0,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,g=f.vertexColors.length>0,_=0;if(_=C(_,0,0),_=C(_,1,!0),_=C(_,2,!1),_=C(_,3,p),_=C(_,4,m),_=C(_,5,y),_=C(_,6,v),_=C(_,7,g),a.push(_),a.push(f.a,f.b,f.c),a.push(f.materialIndex),p){var b=this.faceVertexUvs[0][i];a.push(T(b[0]),T(b[1]),T(b[2]))}if(m&&a.push(w(f.normal)),y){var x=f.vertexNormals;a.push(w(x[0]),w(x[1]),w(x[2]))}if(v&&a.push(S(f.color)),g){var M=f.vertexColors;a.push(S(M[0]),S(M[1]),S(M[2]))}}function C(e,t,n){return n?e|1<<t:e&~(1<<t)}function w(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]||(u[t]=s.length/3,s.push(e.x,e.y,e.z)),u[t]}function S(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]||(l[t]=c.length,c.push(e.getHex())),l[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=d.length/2,d.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=r,e.data.normals=s,c.length>0&&(e.data.colors=c),d.length>0&&(e.data.uvs=[d]),e.data.faces=a,e},clone:function(){return(new Ot).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var d=l[r],h=[];for(o=0,a=d.length;o<a;o++){var f=d[o];h.push(f.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,i=p[t].normals.length;r<i;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var y=e.morphNormals;for(t=0,n=y.length;t<n;t++){var v={};if(void 0!==y[t].vertexNormals)for(v.vertexNormals=[],r=0,i=y[t].vertexNormals.length;r<i;r++){var g=y[t].vertexNormals[r],_={};_.a=g.a.clone(),_.b=g.b.clone(),_.c=g.c.clone(),v.vertexNormals.push(_)}if(void 0!==y[t].faceNormals)for(v.faceNormals=[],r=0,i=y[t].faceNormals.length;r<i;r++)v.faceNormals.push(y[t].faceNormals[r].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var x=e.skinIndices;for(t=0,n=x.length;t<n;t++)this.skinIndices.push(x[t].clone());var M=e.lineDistances;for(t=0,n=M.length;t<n;t++)this.lineDistances.push(M[t]);var C=e.boundingBox;null!==C&&(this.boundingBox=C.clone());var w=e.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),kt.prototype=Object.create(Ot.prototype),kt.prototype.constructor=kt,It.prototype=Object.create(ut.prototype),It.prototype.constructor=It;var Bt={clone:Dt,merge:Ut};function Ft(e){je.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Gt(){J.call(this),this.type="Camera",this.matrixWorldInverse=new R,this.projectionMatrix=new R,this.projectionMatrixInverse=new R}function jt(e,t,n,r){Gt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function zt(e,t,n,r){J.call(this),this.type="CubeCamera";var i=new jt(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new h(1,0,0)),this.add(i);var o=new jt(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new h(-1,0,0)),this.add(o);var a=new jt(90,1,e,t);a.up.set(0,0,1),a.lookAt(new h(0,1,0)),this.add(a);var s=new jt(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new h(0,-1,0)),this.add(s);var u=new jt(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new h(0,0,1)),this.add(u);var c=new jt(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new h(0,0,-1)),this.add(c),r=r||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new Vt(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,u),r.texture.generateMipmaps=l,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function Vt(e,t,n){x.call(this,e,t,n)}function Ht(e,t,n,r,i,o,a,s,u,c,l,d){_.call(this,null,o,a,s,u,c,r,i,l,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Ft.prototype=Object.create(je.prototype),Ft.prototype.constructor=Ft,Ft.prototype.isShaderMaterial=!0,Ft.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dt(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ft.prototype.toJSON=function(e){var t=je.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},Gt.prototype=Object.assign(Object.create(J.prototype),{constructor:Gt,isCamera:!0,copy:function(e,t){return J.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new h),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){J.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),jt.prototype=Object.assign(Object.create(Gt.prototype),{constructor:jt,isPerspectiveCamera:!0,copy:function(e,t){return Gt.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*i.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*i.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*i.RAD2DEG*Math.atan(Math.tan(.5*i.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*i.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,u=a.fullHeight;o+=a.offsetX*r/s,t-=a.offsetY*n/u,r*=a.width/s,n*=a.height/u}var c=this.filmOffset;0!==c&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),zt.prototype=Object.create(J.prototype),zt.prototype.constructor=zt,Vt.prototype=Object.create(x.prototype),Vt.prototype.constructor=Vt,Vt.prototype.isWebGLRenderTargetCube=!0,Vt.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new K,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new Ft({type:"CubemapFromEquirect",uniforms:Dt(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;var o=new Tt(new It(5,5,5),i);n.add(o);var a=new zt(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,n),o.geometry.dispose(),o.material.dispose(),this},Ht.prototype=Object.create(_.prototype),Ht.prototype.constructor=Ht,Ht.prototype.isDataTexture=!0;var Wt=new h,qt=new h,Xt=new y;function Yt(e,t){this.normal=void 0!==e?e:new h(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Yt.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=Wt.subVectors(n,t).cross(qt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new h),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new h);var n=e.delta(Wt),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new h),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Xt.getNormalMatrix(e),r=this.coplanarPoint(Wt).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Jt=new he,Kt=new h;function $t(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Yt,void 0!==t?t:new Yt,void 0!==n?n:new Yt,void 0!==r?r:new Yt,void 0!==i?i:new Yt,void 0!==o?o:new Yt]}Object.assign($t.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],y=n[13],v=n[14],g=n[15];return t[0].setComponents(a-r,l-s,p-d,g-m).normalize(),t[1].setComponents(a+r,l+s,p+d,g+m).normalize(),t[2].setComponents(a+i,l+u,p+h,g+y).normalize(),t[3].setComponents(a-i,l-u,p-h,g-y).normalize(),t[4].setComponents(a-o,l-c,p-f,g-v).normalize(),t[5].setComponents(a+o,l+c,p+f,g+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Jt.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Jt)},intersectsSprite:function(e){return Jt.center.set(0,0,0),Jt.radius=.7071067811865476,Jt.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jt)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Kt.x=r.normal.x>0?e.max.x:e.min.x,Kt.y=r.normal.y>0?e.max.y:e.min.y,Kt.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Kt)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Zt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\t\t\t}\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Qt={common:{diffuse:{value:new Ie(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new y},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new o(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ie(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ie(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new y}},sprite:{diffuse:{value:new Ie(15658734)},opacity:{value:1},center:{value:new o(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new y}}},en={basic:{uniforms:Ut([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.fog]),vertexShader:Zt.meshbasic_vert,fragmentShader:Zt.meshbasic_frag},lambert:{uniforms:Ut([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.fog,Qt.lights,{emissive:{value:new Ie(0)}}]),vertexShader:Zt.meshlambert_vert,fragmentShader:Zt.meshlambert_frag},phong:{uniforms:Ut([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.gradientmap,Qt.fog,Qt.lights,{emissive:{value:new Ie(0)},specular:{value:new Ie(1118481)},shininess:{value:30}}]),vertexShader:Zt.meshphong_vert,fragmentShader:Zt.meshphong_frag},standard:{uniforms:Ut([Qt.common,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.roughnessmap,Qt.metalnessmap,Qt.fog,Qt.lights,{emissive:{value:new Ie(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag},matcap:{uniforms:Ut([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,{matcap:{value:null}}]),vertexShader:Zt.meshmatcap_vert,fragmentShader:Zt.meshmatcap_frag},points:{uniforms:Ut([Qt.points,Qt.fog]),vertexShader:Zt.points_vert,fragmentShader:Zt.points_frag},dashed:{uniforms:Ut([Qt.common,Qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zt.linedashed_vert,fragmentShader:Zt.linedashed_frag},depth:{uniforms:Ut([Qt.common,Qt.displacementmap]),vertexShader:Zt.depth_vert,fragmentShader:Zt.depth_frag},normal:{uniforms:Ut([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,{opacity:{value:1}}]),vertexShader:Zt.normal_vert,fragmentShader:Zt.normal_frag},sprite:{uniforms:Ut([Qt.sprite,Qt.fog]),vertexShader:Zt.sprite_vert,fragmentShader:Zt.sprite_frag},background:{uniforms:{uvTransform:{value:new y},t2D:{value:null}},vertexShader:Zt.background_vert,fragmentShader:Zt.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zt.cube_vert,fragmentShader:Zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zt.equirect_vert,fragmentShader:Zt.equirect_frag},distanceRGBA:{uniforms:Ut([Qt.common,Qt.displacementmap,{referencePosition:{value:new h},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zt.distanceRGBA_vert,fragmentShader:Zt.distanceRGBA_frag},shadow:{uniforms:Ut([Qt.lights,Qt.fog,{color:{value:new Ie(0)},opacity:{value:1}}]),vertexShader:Zt.shadow_vert,fragmentShader:Zt.shadow_frag}};function tn(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function nn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,35044):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function rn(e,t,n,r){Ot.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new on(e,t,n,r)),this.mergeVertices()}function on(e,t,n,r){ut.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,d=c+1,h=e/u,f=t/c,p=[],m=[],y=[],v=[];for(o=0;o<d;o++){var g=o*f-s;for(i=0;i<l;i++){var _=i*h-a;m.push(_,-g,0),y.push(0,0,1),v.push(i/u),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var b=i+l*o,x=i+l*(o+1),M=i+1+l*(o+1),C=i+1+l*o;p.push(b,x,C),p.push(x,M,C)}this.setIndex(p),this.addAttribute("position",new $e(m,3)),this.addAttribute("normal",new $e(y,3)),this.addAttribute("uv",new $e(v,2))}function an(e,t,n,r){var i,o,a=new Ie(0),s=0,u=null,c=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),l(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){l(a,s=e)},render:function(t,r,d,h){var f=r.background,p=e.vr,m=p.getSession&&p.getSession();if(m&&"additive"===m.environmentBlendMode&&(f=null),null===f?(l(a,s),u=null,c=0):f&&f.isColor&&(l(f,1),h=!0,u=null,c=0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLRenderTargetCube)){void 0===o&&((o=new Tt(new It(1,1,1),new Ft({type:"BackgroundCubeMaterial",uniforms:Dt(en.cube.uniforms),vertexShader:en.cube.vertexShader,fragmentShader:en.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var y=f.isWebGLRenderTargetCube?f.texture:f;o.material.uniforms.tCube.value=y,o.material.uniforms.tFlip.value=f.isWebGLRenderTargetCube?1:-1,u===f&&c===y.version||(o.material.needsUpdate=!0,u=f,c=y.version),t.unshift(o,o.geometry,o.material,0,0,null)}else f&&f.isTexture&&(void 0===i&&((i=new Tt(new on(2,2),new Ft({type:"BackgroundMaterial",uniforms:Dt(en.background.uniforms),vertexShader:en.background.vertexShader,fragmentShader:en.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),i.material.uniforms.uvTransform.value.copy(f.matrix),u===f&&c===f.version||(i.material.needsUpdate=!0,u=f,c=f.version),t.unshift(i,i.geometry,i.material,0,0,null))}}}function sn(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var u,c;if(r.isWebGL2)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function un(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),l=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),f=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),y=e.getParameter(36349),v=l>0,g=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:d,maxCubemapSize:h,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g,maxSamples:o?e.getParameter(36183):0}}function cn(){var e=this,t=null,n=0,r=!1,i=!1,o=new Yt,a=new y,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,r,i){var u=null!==t?t.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var l=r+4*u,d=n.matrixWorldInverse;a.getNormalMatrix(d),(null===c||c.length<l)&&(c=new Float32Array(l));for(var h=0,f=r;h!==u;++h,f+=4)o.copy(t[h]).applyMatrix4(d,a),o.normal.toArray(c,f),c[f+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=u,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=c(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,o,a,l,d,h){if(!r||null===e||0===e.length||i&&!a)i?c(null):u();else{var f=i?0:n,p=4*f,m=d.clippingState||null;s.value=m,m=c(e,l,p,h);for(var y=0;y!==p;++y)m[y]=t[y];d.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=f}}}function ln(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function dn(e,t,n){var r=new WeakMap,i=new WeakMap;function o(e){var a=e.target,s=r.get(a);for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);a.removeEventListener("dispose",o),r.delete(a);var c=i.get(s);c&&(t.remove(c),i.delete(s)),n.memory.geometries--}function a(e){var n=[],r=e.index,o=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],d=s[u+1],h=s[u+2];n.push(l,d,d,h,h,l)}}else for(s=o.array,a=o.version,u=0,c=s.length/3-1;u<c;u+=3)l=u+0,d=u+1,h=u+2,n.push(l,d,d,h,h,l);var f=new(et(n)>65535?Ke:Ye)(n,1);f.version=a,t.update(f,34963);var p=i.get(e);p&&t.remove(p),i.set(e,f)}return{get:function(e,t){var i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new ut).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return i.get(e)}}}function hn(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,u,c){var l,d;if(r.isWebGL2)l=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[d](i,c,o,u*a,s.maxInstancedCount),n.update(c,i,s.maxInstancedCount)}}function fn(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 5:case 6:t.triangles+=r*(e-2);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function pn(e,t){return Math.abs(t[1])-Math.abs(e[1])}function mn(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,c=t[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];t[i.id]=c}var d=o.morphTargets&&i.morphAttributes.position,h=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<u;l++)0!==(f=c[l])[1]&&(d&&i.removeAttribute("morphTarget"+l),h&&i.removeAttribute("morphNormal"+l));for(l=0;l<u;l++)(f=c[l])[0]=l,f[1]=s[l];for(c.sort(pn),l=0;l<8;l++){var f;if(f=c[l]){var p=f[0],m=f[1];if(m){d&&i.addAttribute("morphTarget"+l,d[p]),h&&i.addAttribute("morphNormal"+l,h[p]),n[l]=m;continue}}n[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function yn(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}function vn(e,t,n,r,i,o,a,s,u,c){e=void 0!==e?e:[],t=void 0!==t?t:301,a=void 0!==a?a:1022,_.call(this,e,t,n,r,i,o,a,s,u,c),this.flipY=!1}function gn(e,t,n,r){_.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}function _n(e,t,n,r){_.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}en.physical={uniforms:Ut([en.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Ie(0)},clearcoatNormalScale:{value:new o(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag},rn.prototype=Object.create(Ot.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(ut.prototype),on.prototype.constructor=on,vn.prototype=Object.create(_.prototype),vn.prototype.constructor=vn,vn.prototype.isCubeTexture=!0,Object.defineProperty(vn.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),gn.prototype=Object.create(_.prototype),gn.prototype.constructor=gn,gn.prototype.isDataTexture2DArray=!0,_n.prototype=Object.create(_.prototype),_n.prototype.constructor=_n,_n.prototype.isDataTexture3D=!0;var bn=new _,xn=new gn,Mn=new _n,Cn=new vn,wn=[],Sn=[],Tn=new Float32Array(16),Nn=new Float32Array(9),En=new Float32Array(4);function An(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=wn[i];if(void 0===o&&(o=new Float32Array(i),wn[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Rn(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Pn(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Ln(e,t){var n=Sn[t];void 0===n&&(n=new Int32Array(t),Sn[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function On(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function kn(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Rn(n,t))return;e.uniform2fv(this.addr,t),Pn(n,t)}}function In(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Rn(n,t))return;e.uniform3fv(this.addr,t),Pn(n,t)}}function Dn(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Rn(n,t))return;e.uniform4fv(this.addr,t),Pn(n,t)}}function Un(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Rn(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Pn(n,t)}else{if(Rn(n,r))return;En.set(r),e.uniformMatrix2fv(this.addr,!1,En),Pn(n,r)}}function Bn(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Rn(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Pn(n,t)}else{if(Rn(n,r))return;Nn.set(r),e.uniformMatrix3fv(this.addr,!1,Nn),Pn(n,r)}}function Fn(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Rn(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Pn(n,t)}else{if(Rn(n,r))return;Tn.set(r),e.uniformMatrix4fv(this.addr,!1,Tn),Pn(n,r)}}function Gn(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||bn,i)}function jn(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||xn,i)}function zn(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Mn,i)}function Vn(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Cn,i)}function Hn(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Wn(e,t){var n=this.cache;Rn(n,t)||(e.uniform2iv(this.addr,t),Pn(n,t))}function qn(e,t){var n=this.cache;Rn(n,t)||(e.uniform3iv(this.addr,t),Pn(n,t))}function Xn(e,t){var n=this.cache;Rn(n,t)||(e.uniform4iv(this.addr,t),Pn(n,t))}function Yn(e,t){e.uniform1fv(this.addr,t)}function Jn(e,t){e.uniform1iv(this.addr,t)}function Kn(e,t){e.uniform2iv(this.addr,t)}function $n(e,t){e.uniform3iv(this.addr,t)}function Zn(e,t){e.uniform4iv(this.addr,t)}function Qn(e,t){var n=An(t,this.size,2);e.uniform2fv(this.addr,n)}function er(e,t){var n=An(t,this.size,3);e.uniform3fv(this.addr,n)}function tr(e,t){var n=An(t,this.size,4);e.uniform4fv(this.addr,n)}function nr(e,t){var n=An(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function rr(e,t){var n=An(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ir(e,t){var n=An(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function or(e,t,n){var r=t.length,i=Ln(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||bn,i[o])}function ar(e,t,n){var r=t.length,i=Ln(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Cn,i[o])}function sr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return On;case 35664:return kn;case 35665:return In;case 35666:return Dn;case 35674:return Un;case 35675:return Bn;case 35676:return Fn;case 35678:case 36198:return Gn;case 35679:return zn;case 35680:return Vn;case 36289:return jn;case 5124:case 35670:return Hn;case 35667:case 35671:return Wn;case 35668:case 35672:return qn;case 35669:case 35673:return Xn}}(t.type)}function ur(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Yn;case 35664:return Qn;case 35665:return er;case 35666:return tr;case 35674:return nr;case 35675:return rr;case 35676:return ir;case 35678:return or;case 35680:return ar;case 5124:case 35670:return Jn;case 35667:case 35671:return Kn;case 35668:case 35672:return $n;case 35669:case 35673:return Zn}}(t.type)}function cr(e){this.id=e,this.seq=[],this.map={}}ur.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Pn(t,e)},cr.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var lr=/([\w\d_]+)(\])?(\[|\.)?/g;function dr(e,t){e.seq.push(t),e.map[t.id]=t}function hr(e,t,n){var r=e.name,i=r.length;for(lr.lastIndex=0;;){var o=lr.exec(r),a=lr.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){dr(n,void 0===c?new sr(s,e,t):new ur(s,e,t));break}var l=n.map[s];void 0===l&&dr(n,l=new cr(s)),n=l}}function fr(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);hr(i,e.getUniformLocation(t,i.name),this)}}function pr(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}fr.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},fr.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},fr.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},fr.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var mr=0;function yr(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function vr(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function gr(e,t){var n=yr(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function _r(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function br(e){return""!==e}function xr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Mr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Cr(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=Zt[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Cr(n)}))}function wr(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}))}function Sr(e,t,n,r,i,o,a){var s=e.getContext(),u=r.defines,c=i.vertexShader,l=i.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===o.shadowMapType?d="SHADOWMAP_TYPE_PCF_SOFT":3===o.shadowMapType&&(d="SHADOWMAP_TYPE_VSM");var h="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case 301:case 302:h="ENVMAP_TYPE_CUBE";break;case 306:case 307:h="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:h="ENVMAP_TYPE_EQUIREC";break;case 305:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:p="ENVMAP_BLENDING_MULTIPLY";break;case 1:p="ENVMAP_BLENDING_MIX";break;case 2:p="ENVMAP_BLENDING_ADD"}}var m,y,v,g,_,b=e.gammaFactor>0?e.gammaFactor:1,x=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(br).join("\n")}(r.extensions,o,t),M=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(u),C=s.createProgram();if(r.isRawShaderMaterial?((m=[M].filter(br).join("\n")).length>0&&(m+="\n"),(y=[x,M].filter(br).join("\n")).length>0&&(y+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","highp"===o.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+i.name,M,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(br).join("\n"),y=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","highp"===o.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+i.name,M,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+f:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.sheen?"#define USE_SHEEN":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensions&&r.extensions.shaderTextureLOD||o.envMap)&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?Zt.tonemapping_pars_fragment:"",0!==o.toneMapping?_r("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Zt.encodings_pars_fragment:"",o.mapEncoding?gr("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?gr("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?gr("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?gr("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(v="linearToOutputTexel",g=o.outputEncoding,_=yr(g),"vec4 "+v+"( vec4 value ) { return LinearTo"+_[0]+_[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(br).join("\n")),c=Mr(c=xr(c=Cr(c),o),o),l=Mr(l=xr(l=Cr(l),o),o),c=wr(c),l=wr(l),a.isWebGL2&&!r.isRawShaderMaterial){var w=!1,S=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==c.match(S)&&null!==l.match(S)&&(w=!0,c=c.replace(S,""),l=l.replace(S,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,y=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y}var T,N,E=y+l,A=pr(s,35633,m+c),R=pr(s,35632,E);if(s.attachShader(C,A),s.attachShader(C,R),void 0!==r.index0AttributeName?s.bindAttribLocation(C,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(C,0,"position"),s.linkProgram(C),e.debug.checkShaderErrors){var P=s.getProgramInfoLog(C).trim(),L=s.getShaderInfoLog(A).trim(),O=s.getShaderInfoLog(R).trim(),k=!0,I=!0;if(!1===s.getProgramParameter(C,35714)){k=!1;var D=vr(s,A,"vertex"),U=vr(s,R,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(C,35715),"gl.getProgramInfoLog",P,D,U)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==O||(I=!1);I&&(this.diagnostics={runnable:k,material:r,programLog:P,vertexShader:{log:L,prefix:m},fragmentShader:{log:O,prefix:y}})}return s.deleteShader(A),s.deleteShader(R),this.getUniforms=function(){return void 0===T&&(T=new fr(s,C)),T},this.getAttributes=function(){return void 0===N&&(N=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,C)),N},this.destroy=function(){s.deleteProgram(C),this.program=void 0},this.name=i.name,this.id=mr++,this.code=n,this.usedTimes=1,this.program=C,this.vertexShader=A,this.fragmentShader=R,this}function Tr(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=3e3,3e3===n&&t&&(n=3007),n}this.getParameters=function(t,r,o,s,u,c,l){var d=i[t.type],h=l.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(l):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:d,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:a(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,tangentSpaceNormalMap:0===t.normalMapType,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap),fog:!!s,useFog:t.fog,fogExp2:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:t.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,c=0,l=r.length;c<l;c++){var d=r[c];if(d.code===s){++(u=d).usedTimes;break}}return void 0===u&&(u=new Sr(e,t,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Nr(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Er(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ar(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Rr(){var e=[],t=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,u){var c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=o,c.program=o.program||i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),t++,c}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,i,a,s,u){var c=o(e,t,i,a,s,u);(!0===i.transparent?r:n).push(c)},unshift:function(e,t,i,a,s,u){var c=o(e,t,i,a,s,u);(!0===i.transparent?r:n).unshift(c)},sort:function(){n.length>1&&n.sort(Er),r.length>1&&r.sort(Ar)}}}function Pr(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i,o=e.get(n);return void 0===o?(i=new Rr,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):void 0===(i=o.get(r))&&(i=new Rr,o.set(r,i)),i},dispose:function(){e=new WeakMap}}}function Lr(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new h,color:new Ie,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o};break;case"SpotLight":n={position:new h,direction:new h,color:new Ie,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o};break;case"PointLight":n={position:new h,color:new Ie,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new h,skyColor:new Ie,groundColor:new Ie};break;case"RectAreaLight":n={color:new Ie,position:new h,halfWidth:new h,halfHeight:new h}}return e[t.id]=n,n}}}var Or=0;function kr(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ir(){for(var e=new Lr,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new h);var r=new h,i=new R,o=new R;return{setup:function(n,a,s){for(var u=0,c=0,l=0,d=0;d<9;d++)t.probe[d].set(0,0,0);var h=0,f=0,p=0,m=0,y=0,v=0,g=0,_=0,b=s.matrixWorldInverse;n.sort(kr),d=0;for(var x=n.length;d<x;d++){var M=n[d],C=M.color,w=M.intensity,S=M.distance,T=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)u+=C.r*w,c+=C.g*w,l+=C.b*w;else if(M.isLightProbe)for(var N=0;N<9;N++)t.probe[N].addScaledVector(M.sh.coefficients[N],w);else if(M.isDirectionalLight){if((A=e.get(M)).color.copy(M.color).multiplyScalar(M.intensity),A.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(b),A.shadow=M.castShadow,M.castShadow){var E=M.shadow;A.shadowBias=E.bias,A.shadowRadius=E.radius,A.shadowMapSize=E.mapSize,t.directionalShadowMap[h]=T,t.directionalShadowMatrix[h]=M.shadow.matrix,v++}t.directional[h]=A,h++}else if(M.isSpotLight)(A=e.get(M)).position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(b),A.color.copy(C).multiplyScalar(w),A.distance=S,A.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(b),A.coneCos=Math.cos(M.angle),A.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),A.decay=M.decay,A.shadow=M.castShadow,M.castShadow&&(E=M.shadow,A.shadowBias=E.bias,A.shadowRadius=E.radius,A.shadowMapSize=E.mapSize,t.spotShadowMap[p]=T,t.spotShadowMatrix[p]=M.shadow.matrix,_++),t.spot[p]=A,p++;else if(M.isRectAreaLight)(A=e.get(M)).color.copy(C).multiplyScalar(w),A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(b),o.identity(),i.copy(M.matrixWorld),i.premultiply(b),o.extractRotation(i),A.halfWidth.set(.5*M.width,0,0),A.halfHeight.set(0,.5*M.height,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),t.rectArea[m]=A,m++;else if(M.isPointLight)(A=e.get(M)).position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(b),A.color.copy(M.color).multiplyScalar(M.intensity),A.distance=M.distance,A.decay=M.decay,A.shadow=M.castShadow,M.castShadow&&(E=M.shadow,A.shadowBias=E.bias,A.shadowRadius=E.radius,A.shadowMapSize=E.mapSize,A.shadowCameraNear=E.camera.near,A.shadowCameraFar=E.camera.far,t.pointShadowMap[f]=T,t.pointShadowMatrix[f]=M.shadow.matrix,g++),t.point[f]=A,f++;else if(M.isHemisphereLight){var A;(A=e.get(M)).direction.setFromMatrixPosition(M.matrixWorld),A.direction.transformDirection(b),A.direction.normalize(),A.skyColor.copy(M.color).multiplyScalar(w),A.groundColor.copy(M.groundColor).multiplyScalar(w),t.hemi[y]=A,y++}}t.ambient[0]=u,t.ambient[1]=c,t.ambient[2]=l;var R=t.hash;R.directionalLength===h&&R.pointLength===f&&R.spotLength===p&&R.rectAreaLength===m&&R.hemiLength===y&&R.numDirectionalShadows===v&&R.numPointShadows===g&&R.numSpotShadows===_||(t.directional.length=h,t.spot.length=p,t.rectArea.length=m,t.point.length=f,t.hemi.length=y,t.directionalShadowMap.length=v,t.pointShadowMap.length=g,t.spotShadowMap.length=_,t.directionalShadowMatrix.length=v,t.pointShadowMatrix.length=g,t.spotShadowMatrix.length=_,R.directionalLength=h,R.pointLength=f,R.spotLength=p,R.rectAreaLength=m,R.hemiLength=y,R.numDirectionalShadows=v,R.numPointShadows=g,R.numSpotShadows=_,t.version=Or++)},state:t}}function Dr(){var e=new Ir,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Ur(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i;return!1===e.has(n)?(i=new Dr,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):!1===e.get(n).has(r)?(i=new Dr,e.get(n).set(r,i)):i=e.get(n).get(r),i},dispose:function(){e=new WeakMap}}}function Br(e){je.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Fr(e){je.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new h,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Gr(e,t,n){var r=new $t,i=new o,a=new o,s=new b,u=new Array(4),c=new Array(4),l={},d={0:1,1:0,2:2},h=new Ft({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new o},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONAL_PASS=1;var p=new ut;p.addAttribute("position",new Ve(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var m=new Tt(p,h),y=0;4!==y;++y){var v=0!=(1&y),g=0!=(2&y),_=new Br({depthPacking:3201,morphTargets:v,skinning:g});u[y]=_;var M=new Fr({morphTargets:v,skinning:g});c[y]=M}var C=this;function w(n,r){var i=t.update(m);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,f,m,null)}function S(t,n,r,i,o,a){var s=t.geometry,h=null,f=u,p=t.customDepthMaterial;if(r.isPointLight&&(f=c,p=t.customDistanceMaterial),p)h=p;else{var m=!1;n.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=0;m&&(y|=1),t.isSkinnedMesh&&n.skinning&&(y|=2),h=f[y]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var v=h.uuid,g=n.uuid,_=l[v];void 0===_&&(_={},l[v]=_);var b=_[g];void 0===b&&(b=h.clone(),_[g]=b),h=b}return h.visible=n.visible,h.wireframe=n.wireframe,h.side=3===a?null!=n.shadowSide?n.shadowSide:n.side:null!=n.shadowSide?n.shadowSide:d[n.side],h.clipShadows=n.clipShadows,h.clippingPlanes=n.clippingPlanes,h.clipIntersection=n.clipIntersection,h.wireframeLinewidth=n.wireframeLinewidth,h.linewidth=n.linewidth,r.isPointLight&&h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(r.matrixWorld),h.nearDistance=i,h.farDistance=o),h}function T(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,d=0,h=l.length;d<h;d++){var f=l[d],p=c[f.materialIndex];if(p&&p.visible){var m=S(n,p,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,m,n,f)}}else c.visible&&(m=S(n,c,a,o.near,o.far,s),e.renderBufferDirect(o,null,u,m,n,null))}for(var y=n.children,v=0,g=y.length;v<g;v++)T(y[v],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,o,u){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var c=e.getRenderTarget(),l=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],y=m.shadow;if(void 0!==y){i.copy(y.mapSize);var v=y.getFrameExtents();if(i.multiply(v),a.copy(y.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",m,"has shadow exceeding max texture size, reducing"),i.x>n&&(a.x=Math.floor(n/v.x),i.x=a.x*v.x,y.mapSize.x=a.x),i.y>n&&(a.y=Math.floor(n/v.y),i.y=a.y*v.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var g={minFilter:1006,magFilter:1006,format:1023};y.map=new x(i.x,i.y,g),y.map.texture.name=m.name+".shadowMap",y.mapPass=new x(i.x,i.y,g),y.camera.updateProjectionMatrix()}null===y.map&&(g={minFilter:1003,magFilter:1003,format:1023},y.map=new x(i.x,i.y,g),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()),e.setRenderTarget(y.map),e.clear();for(var _=y.getViewportCount(),b=0;b<_;b++){var M=y.getViewport(b);s.set(a.x*M.x,a.y*M.y,a.x*M.z,a.y*M.w),h.viewport(s),y.updateMatrices(m,u,b),r=y.getFrustum(),T(o,u,y.camera,m,this.type)}y.isPointLightShadow||3!==this.type||w(y,u)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}C.needsUpdate=!1,e.setRenderTarget(c,l,d)}}}function jr(e,t,n,r){var i=new function(){var t=!1,n=new b,r=null,i=new b(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?G(2929):j(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?G(2960):j(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}},s=e.getParameter(34921),u=new Uint8Array(s),c=new Uint8Array(s),l=new Uint8Array(s),d={},h=null,f=null,p=null,m=null,y=null,v=null,g=null,_=null,x=null,M=null,C=!1,w=null,S=null,T=null,N=null,E=null,A=e.getParameter(35661),R=!1,P=0,L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(P=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),R=P>=1):-1!==L.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),R=P>=2);var O=null,k={},I=new b,D=new b;function U(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var B={};function F(n,i){u[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),l[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),l[n]=i)}function G(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function j(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function z(t,r,i,o,a,s,u,c){if(0!==t){if(p||(G(3042),p=!0),5===t)a=a||r,s=s||i,u=u||o,r===y&&a===_||(e.blendEquationSeparate(n.convert(r),n.convert(a)),y=r,_=a),i===v&&o===g&&s===x&&u===M||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),v=i,g=o,x=s,M=u),m=t,C=null;else if(t!==m||c!==C){if(100===y&&100===_||(e.blendEquation(32774),y=100,_=100),c)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,g=null,x=null,M=null,m=t,C=c}}else p&&(j(3042),p=!1)}function V(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function H(t){0!==t?(G(2884),t!==S&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):j(2884),S=t}function W(t,n,r){t?(G(32823),N===n&&E===r||(e.polygonOffset(n,r),N=n,E=r)):j(32823)}function q(t){void 0===t&&(t=33984+A-1),O!==t&&(e.activeTexture(t),O=t)}return B[3553]=U(3553,3553,1),B[34067]=U(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),G(2929),o.setFunc(3),V(!1),H(1),G(2884),z(0),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=u.length;e<t;e++)u[e]=0},enableAttribute:function(e){F(e,0)},enableAttributeAndDivisor:F,disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==u[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:G,disable:j,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),r=0;r<n.length;r++)h.push(n[r]);return h},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:z,setMaterial:function(e,t){2===e.side?j(2884):G(2884);var n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?z(0):z(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);var r=e.stencilWrite;a.setTest(r),r&&(a.setFunc(e.stencilFunc,e.stencilRef,e.stencilMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:V,setCullFace:H,setLineWidth:function(t){t!==T&&(R&&e.lineWidth(t),T=t)},setPolygonOffset:W,setScissorTest:function(e){e?G(3089):j(3089)},activeTexture:q,bindTexture:function(t,n){null===O&&q();var r=k[O];void 0===r&&(r={type:void 0,texture:void 0},k[O]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||B[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);d={},h=null,O=null,k={},f=null,m=null,w=null,S=null,i.reset(),o.reset(),a.reset()}}}function zr(e,t,n,r,o,a,u){var c,l=new WeakMap,d="undefined"!=typeof OffscreenCanvas;function h(e,t){return d?new OffscreenCanvas(e,t):s.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function f(e,t,n,r){var o=1;if((e.width>r||e.height>r)&&(o=r/Math.max(e.width,e.height)),o<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?i.floorPowerOfTwo:Math.floor,s=a(o*e.width),u=a(o*e.height);void 0===c&&(c=h(s,u));var l=n?h(s,u):c;return l.width=s,l.height=u,l.getContext("2d").drawImage(e,0,0,s,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+u+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function p(e){return i.isPowerOfTwo(e.width)&&i.isPowerOfTwo(e.height)}function m(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function y(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function v(e,n){if(!o.isWebGL2)return e;var r=e;return 6403===e&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===e&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===e&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?t.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function g(e){return 1003===e||1004===e||1005===e?9728:9729}function _(t){var n=t.target;n.removeEventListener("dispose",_),function(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&l.delete(n),u.memory.textures--}function b(t){var n=t.target;n.removeEventListener("dispose",b),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}(n),u.memory.textures--}var x=0;function M(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=u.render.frame;l.get(e)!==t&&(l.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void N(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function C(t,i){if(6===t.image.length){var s=r.get(t);if(t.version>0&&s.__version!==t.version){T(s,t),n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture),e.pixelStorei(37440,t.flipY);for(var u=t&&t.isCompressedTexture,c=t.image[0]&&t.image[0].isDataTexture,l=[],d=0;d<6;d++)l[d]=u||c?c?t.image[d].image:t.image[d]:f(t.image[d],!1,!0,o.maxCubemapSize);var h,g=l[0],_=p(g)||o.isWebGL2,b=a.convert(t.format),x=a.convert(t.type),M=v(b,x);if(S(34067,t,_),u){for(d=0;d<6;d++){h=l[d].mipmaps;for(var C=0;C<h.length;C++){var w=h[C];1023!==t.format&&1022!==t.format?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+d,C,M,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+d,C,M,w.width,w.height,0,b,x,w.data)}}s.__maxMipLevel=h.length-1}else{for(h=t.mipmaps,d=0;d<6;d++)if(c)for(n.texImage2D(34069+d,0,M,l[d].width,l[d].height,0,b,x,l[d].data),C=0;C<h.length;C++){var N=(w=h[C]).image[d].image;n.texImage2D(34069+d,C+1,M,N.width,N.height,0,b,x,N.data)}else for(n.texImage2D(34069+d,0,M,b,x,l[d]),C=0;C<h.length;C++)w=h[C],n.texImage2D(34069+d,C+1,M,b,x,w.image[d]);s.__maxMipLevel=h.length}m(t,_)&&y(34067,t,g.width,g.height),s.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture)}}function w(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}function S(n,i,s){var u;if(s?(e.texParameteri(n,10242,a.convert(i.wrapS)),e.texParameteri(n,10243,a.convert(i.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,a.convert(i.wrapR)),e.texParameteri(n,10240,a.convert(i.magFilter)),e.texParameteri(n,10241,a.convert(i.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===i.wrapS&&1001===i.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,g(i.magFilter)),e.texParameteri(n,10241,g(i.minFilter)),1003!==i.minFilter&&1006!==i.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=t.get("EXT_texture_filter_anisotropic")){if(1015===i.type&&null===t.get("OES_texture_float_linear"))return;if(1016===i.type&&null===(o.isWebGL2||t.get("OES_texture_half_float_linear")))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,o.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function T(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",_),t.__webglTexture=e.createTexture(),u.memory.textures++)}function N(t,r,i){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),T(t,r),n.activeTexture(33984+i),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var u=function(e){return!o.isWebGL2&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===p(r.image),c=f(r.image,u,!1,o.maxTextureSize),l=p(c)||o.isWebGL2,d=a.convert(r.format),h=a.convert(r.type),g=v(d,h);S(s,r,l);var _,b=r.mipmaps;if(r.isDepthTexture){if(g=6402,1015===r.type){if(!o.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");g=36012}else o.isWebGL2&&(g=33189);1026===r.format&&6402===g&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,h=a.convert(r.type)),1027===r.format&&(g=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,h=a.convert(r.type))),n.texImage2D(3553,0,g,c.width,c.height,0,d,h,null)}else if(r.isDataTexture)if(b.length>0&&l){for(var x=0,M=b.length;x<M;x++)_=b[x],n.texImage2D(3553,x,g,_.width,_.height,0,d,h,_.data);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,g,c.width,c.height,0,d,h,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(x=0,M=b.length;x<M;x++)_=b[x],1023!==r.format&&1022!==r.format?n.getCompressedTextureFormats().indexOf(d)>-1?n.compressedTexImage2D(3553,x,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,x,g,_.width,_.height,0,d,h,_.data);t.__maxMipLevel=b.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,g,c.width,c.height,c.depth,0,d,h,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,g,c.width,c.height,c.depth,0,d,h,c.data),t.__maxMipLevel=0;else if(b.length>0&&l){for(x=0,M=b.length;x<M;x++)_=b[x],n.texImage2D(3553,x,g,d,h,_);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,g,d,h,c),t.__maxMipLevel=0;m(r,l)&&y(3553,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function E(t,i,o,s){var u=a.convert(i.texture.format),c=a.convert(i.texture.type),l=v(u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function A(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=P(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer)r?(i=P(n),e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t);else{var o=v(a.convert(n.texture.format),a.convert(n.texture.type));r?(i=P(n),e.renderbufferStorageMultisample(36161,i,o,n.width,n.height)):e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function R(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),M(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),A(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),A(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function P(e){return o.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(o.maxSamples,e.samples):0}var L=!1,O=!1;this.allocateTextureUnit=function(){var e=x;return e>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+o.maxTextures),x+=1,e},this.resetTextureUnits=function(){x=0},this.setTexture2D=M,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=C,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(t){var i=r.get(t),s=r.get(t.texture);t.addEventListener("dispose",b),s.__webglTexture=e.createTexture(),u.memory.textures++;var c=!0===t.isWebGLRenderTargetCube,l=!0===t.isWebGLMultisampleRenderTarget,d=p(t)||o.isWebGL2;if(c){i.__webglFramebuffer=[];for(var h=0;h<6;h++)i.__webglFramebuffer[h]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),l)if(o.isWebGL2){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var f=v(a.convert(t.texture.format),a.convert(t.texture.type)),g=P(t);e.renderbufferStorageMultisample(36161,g,f,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),A(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){for(n.bindTexture(34067,s.__webglTexture),S(34067,t.texture,d),h=0;h<6;h++)E(i.__webglFramebuffer[h],t,36064,34069+h);m(t.texture,d)&&y(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),S(3553,t.texture,d),E(i.__webglFramebuffer,t,36064,3553),m(t.texture,d)&&y(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&R(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(m(t,p(e)||o.isWebGL2)){var i=e.isWebGLRenderTargetCube?34067:3553,a=r.get(t).__webglTexture;n.bindTexture(i,a),y(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(o.isWebGL2){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var i=t.width,a=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,i,a,0,0,i,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),M(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?C(e,t):w(e,t)}}function Vr(e,t,n){return{convert:function(e){var r;if(1e3===e)return 10497;if(1001===e)return 33071;if(1002===e)return 33648;if(1003===e)return 9728;if(1004===e)return 9984;if(1005===e)return 9986;if(1006===e)return 9729;if(1007===e)return 9985;if(1008===e)return 9987;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(n.isWebGL2)return 5131;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(100===e)return 32774;if(101===e)return 32778;if(102===e)return 32779;if(200===e)return 0;if(201===e)return 1;if(202===e)return 768;if(203===e)return 769;if(204===e)return 770;if(205===e)return 771;if(206===e)return 772;if(207===e)return 773;if(208===e)return 774;if(209===e)return 775;if(210===e)return 776;if((33776===e||33777===e||33778===e||33779===e)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===e)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===e||35841===e||35842===e||35843===e)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===e)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return e;if(103===e||104===e){if(n.isWebGL2){if(103===e)return 32775;if(104===e)return 32776}if(null!==(r=t.get("EXT_blend_minmax"))){if(103===e)return r.MIN_EXT;if(104===e)return r.MAX_EXT}}if(1020===e){if(n.isWebGL2)return 34042;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Hr(){J.call(this),this.type="Group"}function Wr(e){jt.call(this),this.cameras=e||[]}Br.prototype=Object.create(je.prototype),Br.prototype.constructor=Br,Br.prototype.isMeshDepthMaterial=!0,Br.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Fr.prototype=Object.create(je.prototype),Fr.prototype.constructor=Fr,Fr.prototype.isMeshDistanceMaterial=!0,Fr.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Hr.prototype=Object.assign(Object.create(J.prototype),{constructor:Hr,isGroup:!0}),Wr.prototype=Object.assign(Object.create(jt.prototype),{constructor:Wr,isArrayCamera:!0});var qr,Xr=new h,Yr=new h;function Jr(e,t,n){Xr.setFromMatrixPosition(t.matrixWorld),Yr.setFromMatrixPosition(n.matrixWorld);var r=Xr.distanceTo(Yr),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=a*l,f=a*d,p=r/(-l+d),m=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var y=a+p,v=s+p,g=h-m,_=f+(r-m),b=u*s/v*y,x=c*s/v*y;e.projectionMatrix.makePerspective(g,_,b,x,y,v)}function Kr(e){var t,n,r=this,i=null,s=null,c=null,l=[],d=new R,f=new R,p=1,m="local-floor";void 0!==u&&"VRFrameData"in u&&(s=new u.VRFrameData,u.addEventListener("vrdisplaypresentchange",T,!1));var y=new R,v=new a,g=new h,_=new jt;_.viewport=new b,_.layers.enable(1);var x=new jt;x.viewport=new b,x.layers.enable(2);var M=new Wr([_,x]);function C(){return null!==i&&!0===i.isPresenting}M.layers.enable(1),M.layers.enable(2);var w,S=new o;function T(){if(C()){var o=i.getEyeParameters("left");t=2*o.renderWidth*p,n=o.renderHeight*p,w=e.getPixelRatio(),e.getSize(S),e.setDrawingBufferSize(t,n,1),_.viewport.set(0,0,t/2,n),x.viewport.set(t/2,0,t/2,n),P.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&e.setDrawingBufferSize(S.width,S.height,w),P.stop(),r.dispatchEvent({type:"sessionend"})}var N=[];function E(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("HTC Vive Focus")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}function A(e,r){null!==r&&4===r.length&&e.set(r[0]*t,r[1]*n,r[2]*t,r[3]*n)}this.enabled=!1,this.getController=function(e){var t=l[e];return void 0===t&&((t=new Hr).matrixAutoUpdate=!1,t.visible=!1,l[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),P.setContext(e)},this.setFramebufferScaleFactor=function(e){p=e},this.setReferenceSpaceType=function(e){m=e},this.setPoseTarget=function(e){void 0!==e&&(c=e)},this.getCamera=function(e){var t="local-floor"===m?1.6:0;if(!1===C())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(s),"local-floor"===m){var n=i.stageParameters;n?d.fromArray(n.sittingToStandingTransform):d.makeTranslation(0,t,0)}var r=s.pose,o=null!==c?c:e;o.matrix.copy(d),o.matrix.decompose(o.position,o.quaternion,o.scale),null!==r.orientation&&(v.fromArray(r.orientation),o.quaternion.multiply(v)),null!==r.position&&(v.setFromRotationMatrix(d),g.fromArray(r.position),g.applyQuaternion(v),o.position.add(g)),o.updateMatrixWorld(),_.near=e.near,x.near=e.near,_.far=e.far,x.far=e.far,_.matrixWorldInverse.fromArray(s.leftViewMatrix),x.matrixWorldInverse.fromArray(s.rightViewMatrix),f.getInverse(d),"local-floor"===m&&(_.matrixWorldInverse.multiply(f),x.matrixWorldInverse.multiply(f));var a=o.parent;null!==a&&(y.getInverse(a.matrixWorld),_.matrixWorldInverse.multiply(y),x.matrixWorldInverse.multiply(y)),_.matrixWorld.getInverse(_.matrixWorldInverse),x.matrixWorld.getInverse(x.matrixWorldInverse),_.projectionMatrix.fromArray(s.leftProjectionMatrix),x.projectionMatrix.fromArray(s.rightProjectionMatrix),Jr(M,_,x);var u=i.getLayers();if(u.length){var h=u[0];A(_.viewport,h.leftBounds),A(x.viewport,h.rightBounds)}return function(){for(var e=0;e<l.length;e++){var t=l[e],n=E(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(d),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;void 0===N[e]&&(N[e]=!1),N[e]!==n.buttons[i].pressed&&(N[e]=n.buttons[i].pressed,!0===N[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),M},this.getStandingMatrix=function(){return d},this.isPresenting=C;var P=new tn;this.setAnimationLoop=function(e){P.setAnimationLoop(e),C()&&P.start()},this.submitFrame=function(){C()&&i.submitFrame()},this.dispose=function(){void 0!==u&&u.removeEventListener("vrdisplaypresentchange",T)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function $r(e,t){var n=this,r=null,i=null,o="local-floor",a=null,s=[],u=[];function c(){return null!==r&&null!==i}var l=new jt;l.layers.enable(1),l.viewport=new b;var d=new jt;d.layers.enable(2),d.viewport=new b;var h=new Wr([l,d]);function f(e){for(var t=0;t<s.length;t++)u[t]===e.inputSource&&s[t].dispatchEvent({type:e.type})}function p(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),g.stop(),n.dispatchEvent({type:"sessionend"})}function m(e){i=e,g.setContext(r),g.start(),n.dispatchEvent({type:"sessionstart"})}function y(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new Hr).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.setFramebufferScaleFactor=function(e){},this.setReferenceSpaceType=function(e){o=e},this.getSession=function(){return r},this.setSession=function(e){null!==(r=e)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",p),r.updateRenderState({baseLayer:new XRWebGLLayer(r,t)}),r.requestReferenceSpace(o).then(m),u=r.inputSources,r.addEventListener("inputsourceschange",(function(){u=r.inputSources,console.log(u);for(var e=0;e<s.length;e++)s[e].userData.inputSource=u[e]})))},this.getCamera=function(e){if(c()){var t=e.parent,n=h.cameras;y(h,t);for(var r=0;r<n.length;r++)y(n[r],t);e.matrixWorld.copy(h.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return Jr(h,l,d),h}return e},this.isPresenting=c;var v=null,g=new tn;g.setAnimationLoop((function(t,n){if(null!==(a=n.getViewerPose(i))){var o=a.views,c=r.renderState.baseLayer;e.setFramebuffer(c.framebuffer);for(var l=0;l<o.length;l++){var d=o[l],f=c.getViewport(d),p=d.transform.inverse.matrix,m=h.cameras[l];m.matrix.fromArray(p).getInverse(m.matrix),m.projectionMatrix.fromArray(d.projectionMatrix),m.viewport.set(f.x,f.y,f.width,f.height),0===l&&h.matrix.copy(m.matrix)}}for(l=0;l<s.length;l++){var y=s[l],g=u[l];if(g){var _=n.getPose(g.targetRaySpace,i);if(null!==_){y.matrix.fromArray(_.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.visible=!0;continue}}y.visible=!1}v&&v(t)})),this.setAnimationLoop=function(e){v=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new R},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Zr(e){var t=void 0!==(e=e||{}).canvas?e.canvas:s.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,c=void 0===e.stencil||e.stencil,l=void 0!==e.antialias&&e.antialias,d=void 0===e.premultipliedAlpha||e.premultipliedAlpha,f=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,p=void 0!==e.powerPreference?e.powerPreference:"default",m=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,y=null,v=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g,_,x,M,C,w,S,T,N,E,A,P,L,O,k,I,D,U,B=this,F=!1,G=null,j=0,z=0,V=null,H=null,W=-1,q={geometry:null,program:null,wireframe:!1},X=null,Y=null,J=new b,K=new b,$=null,Z=t.width,Q=t.height,ee=1,te=new b(0,0,Z,Q),ne=new b(0,0,Z,Q),re=!1,ie=new $t,oe=new cn,ae=!1,se=!1,ue=new R,ce=new h;function le(){return null===V?ee:1}try{var de={alpha:r,depth:a,stencil:c,antialias:l,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:m,xrCompatible:!0};if(t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ye,!1),null===(g=n||t.getContext("webgl",de)||t.getContext("experimental-webgl",de)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===g.getShaderPrecisionFormat&&(g.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function he(){_=new ln(g),(x=new un(g,_,e)).isWebGL2||(_.get("WEBGL_depth_texture"),_.get("OES_texture_float"),_.get("OES_texture_half_float"),_.get("OES_texture_half_float_linear"),_.get("OES_standard_derivatives"),_.get("OES_element_index_uint"),_.get("ANGLE_instanced_arrays")),_.get("OES_texture_float_linear"),U=new Vr(g,_,x),(M=new jr(g,_,U,x)).scissor(K.copy(ne).multiplyScalar(ee).floor()),M.viewport(J.copy(te).multiplyScalar(ee).floor()),C=new fn(g),w=new Nr,S=new zr(g,_,M,w,x,U,C),T=new nn(g),N=new dn(g,T,C),E=new yn(N,C),k=new mn(g),A=new Tr(B,_,x),P=new Pr,L=new Ur,O=new an(B,M,E,d),I=new sn(g,_,C,x),D=new hn(g,_,C,x),C.programs=A.programs,B.capabilities=x,B.extensions=_,B.properties=w,B.renderLists=P,B.state=M,B.info=C}he();var fe="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new $r(B,g):new Kr(B);this.vr=fe;var pe=new Gr(B,E,x.maxTextureSize);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1,he()}function ve(e){var t=e.target;t.removeEventListener("dispose",ve),function(e){ge(e),w.remove(e)}(t)}function ge(e){var t=w.get(e).program;e.program=void 0,void 0!==t&&A.releaseProgram(t)}this.shadowMap=pe,this.getContext=function(){return g},this.getContextAttributes=function(){return g.getContextAttributes()},this.forceContextLoss=function(){var e=_.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=_.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(e){void 0!==e&&(ee=e,this.setSize(Z,Q,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new o),e.set(Z,Q)},this.setSize=function(e,n,r){fe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Z=e,Q=n,t.width=Math.floor(e*ee),t.height=Math.floor(n*ee),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new o),e.set(Z*ee,Q*ee).floor()},this.setDrawingBufferSize=function(e,n,r){Z=e,Q=n,ee=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new b),e.copy(J)},this.getViewport=function(e){return e.copy(te)},this.setViewport=function(e,t,n,r){e.isVector4?te.set(e.x,e.y,e.z,e.w):te.set(e,t,n,r),M.viewport(J.copy(te).multiplyScalar(ee).floor())},this.getScissor=function(e){return e.copy(ne)},this.setScissor=function(e,t,n,r){e.isVector4?ne.set(e.x,e.y,e.z,e.w):ne.set(e,t,n,r),M.scissor(K.copy(ne).multiplyScalar(ee).floor())},this.getScissorTest=function(){return re},this.setScissorTest=function(e){M.setScissorTest(re=e)},this.getClearColor=function(){return O.getClearColor()},this.setClearColor=function(){O.setClearColor.apply(O,arguments)},this.getClearAlpha=function(){return O.getClearAlpha()},this.setClearAlpha=function(){O.setClearAlpha.apply(O,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),g.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ye,!1),P.dispose(),L.dispose(),w.dispose(),E.dispose(),fe.dispose(),be.stop()},this.renderBufferImmediate=function(e,t){M.initAttributes();var n=w.get(e);e.hasPositions&&!n.position&&(n.position=g.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=g.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=g.createBuffer()),e.hasColors&&!n.color&&(n.color=g.createBuffer());var r=t.getAttributes();e.hasPositions&&(g.bindBuffer(34962,n.position),g.bufferData(34962,e.positionArray,35048),M.enableAttribute(r.position),g.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(g.bindBuffer(34962,n.normal),g.bufferData(34962,e.normalArray,35048),M.enableAttribute(r.normal),g.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(g.bindBuffer(34962,n.uv),g.bufferData(34962,e.uvArray,35048),M.enableAttribute(r.uv),g.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(g.bindBuffer(34962,n.color),g.bufferData(34962,e.colorArray,35048),M.enableAttribute(r.color),g.vertexAttribPointer(r.color,3,5126,!1,0,0)),M.disableUnusedAttributes(),g.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;M.setMaterial(r,a);var s=Se(e,t,r,i),u=!1;q.geometry===n.id&&q.program===s.id&&q.wireframe===(!0===r.wireframe)||(q.geometry=n.id,q.program=s.id,q.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(k.update(i,n,r,s),u=!0);var c,l=n.index,d=n.attributes.position,h=1;!0===r.wireframe&&(l=N.getWireframeAttribute(n),h=2);var f=I;null!==l&&(c=T.get(l),(f=D).setIndex(c)),u&&(function(e,t,n){if(n&&n.isInstancedBufferGeometry&&!x.isWebGL2&&null===_.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{M.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var c=u.normalized,l=u.itemSize,d=T.get(u);if(void 0===d)continue;var h=d.buffer,f=d.type,p=d.bytesPerElement;if(u.isInterleavedBufferAttribute){var m=u.data,y=m.stride,v=u.offset;m&&m.isInstancedInterleavedBuffer?(M.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):M.enableAttribute(s),g.bindBuffer(34962,h),g.vertexAttribPointer(s,l,f,c,y*p,v*p)}else u.isInstancedBufferAttribute?(M.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):M.enableAttribute(s),g.bindBuffer(34962,h),g.vertexAttribPointer(s,l,f,c,0,0)}else if(void 0!==o){var b=o[a];if(void 0!==b)switch(b.length){case 2:g.vertexAttrib2fv(s,b);break;case 3:g.vertexAttrib3fv(s,b);break;case 4:g.vertexAttrib4fv(s,b);break;default:g.vertexAttrib1fv(s,b)}}}}M.disableUnusedAttributes()}}(r,s,n),null!==l&&g.bindBuffer(34963,c.buffer));var p=1/0;null!==l?p=l.count:void 0!==d&&(p=d.count);var m=n.drawRange.start*h,y=n.drawRange.count*h,v=null!==o?o.start*h:0,b=null!==o?o.count*h:1/0,C=Math.max(m,v),w=Math.min(p,m+y,v+b)-1,S=Math.max(0,w-C+1);if(0!==S){if(i.isMesh)if(!0===r.wireframe)M.setLineWidth(r.wireframeLinewidth*le()),f.setMode(1);else switch(i.drawMode){case 0:f.setMode(4);break;case 1:f.setMode(5);break;case 2:f.setMode(6)}else if(i.isLine){var E=r.linewidth;void 0===E&&(E=1),M.setLineWidth(E*le()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,C,S):f.render(C,S)}},this.compile=function(e,t){(v=L.get(e,t)).init(),e.traverse((function(e){e.isLight&&(v.pushLight(e),e.castShadow&&v.pushShadow(e))})),v.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)we(t.material[n],e.fog,t);else we(t.material,e.fog,t)}))};var _e=null,be=new tn;function xe(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)v.pushLight(e),e.castShadow&&v.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ie.intersectsSprite(e)){r&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ue);var i=E.update(e);(o=e.material).visible&&y.push(e,i,o,n,ce.z,null)}}else if(e.isImmediateRenderObject)r&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ue),y.push(e,null,e.material,n,ce.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ie.intersectsObject(e))){r&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ue),i=E.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&y.push(e,i,l,n,ce.z,c)}else o.visible&&y.push(e,i,o,n,ce.z,null)}var d=e.children;for(s=0,u=d.length;s<u;s++)xe(d[s],t,n,r)}}function Me(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){Y=n;for(var d=n.cameras,h=0,f=d.length;h<f;h++){var p=d[h];s.layers.test(p.layers)&&(M.viewport(J.copy(p.viewport)),v.setupLights(p),Ce(s,t,p,u,c,l))}}else Y=null,Ce(s,t,n,u,c,l)}}function Ce(e,t,n,r,i,o){if(e.onBeforeRender(B,t,n,r,i,o),v=L.get(t,Y||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){M.setMaterial(i);var a=Se(n,t.fog,i,e);q.geometry=null,q.program=null,q.wireframe=!1,function(e,t){e.render((function(e){B.renderBufferImmediate(e,t)}))}(e,a)}else B.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(B,t,n,r,i,o),v=L.get(t,Y||n)}function we(e,t,n){var r=w.get(e),i=v.state.lights,o=v.state.shadowsArray,a=i.state.version,s=A.getParameters(e,i.state,o,t,oe.numPlanes,oe.numIntersection,n),u=A.getProgramCode(e,s),c=r.program,l=!0;if(void 0===c)e.addEventListener("dispose",ve);else if(c.code!==u)ge(e);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,l=!1;else{if(void 0!==s.shaderID)return;l=!1}if(l){if(s.shaderID){var d=en[s.shaderID];r.shader={name:e.type,uniforms:Dt(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,B),u=A.getProgramCode(e,s),c=A.acquireProgram(e,r.shader,s,u),r.program=c,e.program=c}var h=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<B.maxMorphTargets;f++)h["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,f=0;f<B.maxMorphNormals;f++)h["morphNormal"+f]>=0&&e.numSupportedMorphNormals++;var p=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=oe.numPlanes,r.numIntersection=oe.numIntersection,p.clippingPlanes=oe.uniform),r.fog=t,r.lightsStateVersion=a,e.lights&&(p.ambientLightColor.value=i.state.ambient,p.lightProbe.value=i.state.probe,p.directionalLights.value=i.state.directional,p.spotLights.value=i.state.spot,p.rectAreaLights.value=i.state.rectArea,p.pointLights.value=i.state.point,p.hemisphereLights.value=i.state.hemi,p.directionalShadowMap.value=i.state.directionalShadowMap,p.directionalShadowMatrix.value=i.state.directionalShadowMatrix,p.spotShadowMap.value=i.state.spotShadowMap,p.spotShadowMatrix.value=i.state.spotShadowMatrix,p.pointShadowMap.value=i.state.pointShadowMap,p.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),y=fr.seqWithValue(m.seq,p);r.uniformsList=y}function Se(e,t,n,r){S.resetTextureUnits();var o=w.get(n),a=v.state.lights;if(ae&&(se||e!==X)){var s=e===X&&n.id===W;oe.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,o,s)}!1===n.needsUpdate&&(void 0===o.program||n.fog&&o.fog!==t||n.lights&&o.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===o.numClippingPlanes||o.numClippingPlanes===oe.numPlanes&&o.numIntersection===oe.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(we(n,t,r),n.needsUpdate=!1);var u,c,l=!1,d=!1,h=!1,f=o.program,p=f.getUniforms(),m=o.shader.uniforms;if(M.useProgram(f.program)&&(l=!0,d=!0,h=!0),n.id!==W&&(W=n.id,d=!0),l||X!==e){if(p.setValue(g,"projectionMatrix",e.projectionMatrix),x.logarithmicDepthBuffer&&p.setValue(g,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),X!==e&&(X=e,d=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var y=p.map.cameraPosition;void 0!==y&&y.setValue(g,ce.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(g,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){p.setOptional(g,r,"bindMatrix"),p.setOptional(g,r,"bindMatrixInverse");var _=r.skeleton;if(_){var b=_.bones;if(x.floatVertexTextures){if(void 0===_.boneTexture){var C=Math.sqrt(4*b.length);C=i.ceilPowerOfTwo(C),C=Math.max(C,4);var T=new Float32Array(C*C*4);T.set(_.boneMatrices);var N=new Ht(T,C,C,1023,1015);N.needsUpdate=!0,_.boneMatrices=T,_.boneTexture=N,_.boneTextureSize=C}p.setValue(g,"boneTexture",_.boneTexture,S),p.setValue(g,"boneTextureSize",_.boneTextureSize)}else p.setOptional(g,_,"boneMatrices")}}return d&&(p.setValue(g,"toneMappingExposure",B.toneMappingExposure),p.setValue(g,"toneMappingWhitePoint",B.toneMappingWhitePoint),n.lights&&(c=h,(u=m).ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.pointLights.needsUpdate=c,u.spotLights.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),t&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(m,t),n.isMeshBasicMaterial?Te(m,n):n.isMeshLambertMaterial?(Te(m,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(m,n)):n.isMeshPhongMaterial?(Te(m,n),n.isMeshToonMaterial?function(e,t){Ne(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(m,n):Ne(m,n)):n.isMeshStandardMaterial?(Te(m,n),n.isMeshPhysicalMaterial?function(e,t){Ee(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()),e.transparency.value=t.transparency}(m,n):Ee(m,n)):n.isMeshMatcapMaterial?(Te(m,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(m,n)):n.isMeshDepthMaterial?(Te(m,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(m,n)):n.isMeshDistanceMaterial?(Te(m,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(m,n)):n.isMeshNormalMaterial?(Te(m,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(m,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(m,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(m,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*ee,e.scale.value=.5*Q,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(m,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(m,n):n.isShadowMaterial&&(m.color.value.copy(n.color),m.opacity.value=n.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=Qt.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=Qt.LTC_2),fr.upload(g,o.uniformsList,m,S)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(fr.upload(g,o.uniformsList,m,S),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&p.setValue(g,"center",r.center),p.setValue(g,"modelViewMatrix",r.modelViewMatrix),p.setValue(g,"normalMatrix",r.normalMatrix),p.setValue(g,"modelMatrix",r.matrixWorld),f}function Te(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=w.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Ne(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ee(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}be.setAnimationLoop((function(e){fe.isPresenting()||_e&&_e(e)})),void 0!==u&&be.setContext(u),this.setAnimationLoop=function(e){_e=e,fe.setAnimationLoop(e),be.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!F){q.geometry=null,q.program=null,q.wireframe=!1,W=-1,X=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),fe.enabled&&(t=fe.getCamera(t)),(v=L.get(e,t)).init(),e.onBeforeRender(B,e,t,n||V),ue.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ie.setFromMatrix(ue),se=this.localClippingEnabled,ae=oe.init(this.clippingPlanes,se,t),(y=P.get(e,t)).init(),xe(e,t,0,B.sortObjects),!0===B.sortObjects&&y.sort(),ae&&oe.beginShadows();var i=v.state.shadowsArray;pe.render(i,e,t),v.setupLights(t),ae&&oe.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),O.render(y,e,t,r);var o=y.opaque,a=y.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Me(o,e,t,s),a.length&&Me(a,e,t,s)}else o.length&&Me(o,e,t),a.length&&Me(a,e,t);e.onAfterRender(B,e,t),null!==V&&(S.updateRenderTargetMipmap(V),S.updateMultisampleRenderTarget(V)),M.buffers.depth.setTest(!0),M.buffers.depth.setMask(!0),M.buffers.color.setMask(!0),M.setPolygonOffset(!1),fe.enabled&&fe.submitFrame(),y=null,v=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){G!==e&&g.bindFramebuffer(36160,e),G=e},this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return V},this.setRenderTarget=function(e,t,n){V=e,j=t,z=n,e&&void 0===w.get(e).__webglFramebuffer&&S.setupRenderTarget(e);var r=G,i=!1;if(e){var o=w.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?w.get(e).__webglMultisampledFramebuffer:o,J.copy(e.viewport),K.copy(e.scissor),$=e.scissorTest}else J.copy(te).multiplyScalar(ee).floor(),K.copy(ne).multiplyScalar(ee).floor(),$=re;if(H!==r&&(g.bindFramebuffer(36160,r),H=r),M.viewport(J),M.scissor(K),M.setScissorTest($),i){var a=w.get(e.texture);g.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=w.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var u=!1;s!==H&&(g.bindFramebuffer(36160,s),u=!0);try{var c=e.texture,l=c.format,d=c.type;if(1023!==l&&U.convert(l)!==g.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===d||U.convert(d)===g.getParameter(35738)||1015===d&&(x.isWebGL2||_.get("OES_texture_float")||_.get("WEBGL_color_buffer_float"))||1016===d&&(x.isWebGL2?_.get("EXT_color_buffer_float"):_.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===g.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&g.readPixels(t,n,r,i,U.convert(l),U.convert(d),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&g.bindFramebuffer(36160,H)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=U.convert(t.format);S.setTexture2D(t,0),g.copyTexImage2D(3553,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=U.convert(n.format),s=U.convert(n.type);S.setTexture2D(n,0),t.isDataTexture?g.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):g.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Qr(e,t){this.name="",this.color=new Ie(e),this.density=void 0!==t?t:25e-5}function ei(e,t,n){this.name="",this.color=new Ie(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function ti(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ni(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function ri(e){je.call(this),this.type="SpriteMaterial",this.color=new Ie(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}Object.assign(Kr.prototype,t.prototype),Object.assign($r.prototype,t.prototype),Object.assign(Qr.prototype,{isFogExp2:!0,clone:function(){return new Qr(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(ei.prototype,{isFog:!0,clone:function(){return new ei(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(ti.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ti.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(ni.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ni.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),ri.prototype=Object.create(je.prototype),ri.prototype.constructor=ri,ri.prototype.isSpriteMaterial=!0,ri.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var ii=new h,oi=new h,ai=new h,si=new o,ui=new o,ci=new R,li=new h,di=new h,hi=new h,fi=new o,pi=new o,mi=new o;function yi(e){if(J.call(this),this.type="Sprite",void 0===qr){qr=new ut;var t=new ti(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);qr.setIndex([0,1,2,0,2,3]),qr.addAttribute("position",new ni(t,3,0,!1)),qr.addAttribute("uv",new ni(t,2,3,!1))}this.geometry=qr,this.material=void 0!==e?e:new ri,this.center=new o(.5,.5)}function vi(e,t,n,r,i,o){si.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(ui.x=o*si.x-i*si.y,ui.y=i*si.x+o*si.y):ui.copy(si),e.copy(t),e.x+=ui.x,e.y+=ui.y,e.applyMatrix4(ci)}yi.prototype=Object.assign(Object.create(J.prototype),{constructor:yi,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),oi.setFromMatrixScale(this.matrixWorld),ci.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ai.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&oi.multiplyScalar(-ai.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;vi(li.set(-.5,-.5,0),ai,a,oi,n,r),vi(di.set(.5,-.5,0),ai,a,oi,n,r),vi(hi.set(.5,.5,0),ai,a,oi,n,r),fi.set(0,0),pi.set(1,0),mi.set(1,1);var s=e.ray.intersectTriangle(li,di,hi,!1,ii);if(null!==s||(vi(di.set(-.5,.5,0),ai,a,oi,n,r),pi.set(0,1),null!==(s=e.ray.intersectTriangle(li,hi,di,!1,ii)))){var u=e.ray.origin.distanceTo(ii);u<e.near||u>e.far||t.push({distance:u,point:ii.clone(),uv:Pe.getUV(ii,li,di,hi,fi,pi,mi,new o),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return J.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var gi=new h,_i=new h;function bi(){J.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function xi(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Tt.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new R,this.bindMatrixInverse=new R}bi.prototype=Object.assign(Object.create(J.prototype),{constructor:bi,isLOD:!0,copy:function(e){J.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(e,t){gi.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(gi);this.getObjectForDistance(n).raycast(e,t)},update:function(e){var t=this.levels;if(t.length>1){gi.setFromMatrixPosition(e.matrixWorld),_i.setFromMatrixPosition(this.matrixWorld);var n=gi.distanceTo(_i);t[0].object.visible=!0;for(var r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),xi.prototype=Object.assign(Object.create(Tt.prototype),{constructor:xi,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new b,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Tt.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Mi=new R,Ci=new R;function wi(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new R)}}function Si(){J.call(this),this.type="Bone"}function Ti(e){je.call(this),this.type="LineBasicMaterial",this.color=new Ie(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}Object.assign(wi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new R;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:Ci;Mi.multiplyMatrices(a,t[i]),Mi.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new wi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Si.prototype=Object.assign(Object.create(J.prototype),{constructor:Si,isBone:!0}),Ti.prototype=Object.create(je.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isLineBasicMaterial=!0,Ti.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var Ni=new h,Ei=new h,Ai=new R,Ri=new be,Pi=new he;function Li(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),J.call(this),this.type="Line",this.geometry=void 0!==e?e:new ut,this.material=void 0!==t?t:new Ti({color:16777215*Math.random()})}Li.prototype=Object.assign(Object.create(J.prototype),{constructor:Li,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Ni.fromBufferAttribute(t,r-1),Ei.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Ni.distanceTo(Ei);e.addAttribute("lineDistance",new $e(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(e,t){var n=e.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Pi.copy(r.boundingSphere),Pi.applyMatrix4(i),Pi.radius+=n,!1!==e.ray.intersectsSphere(Pi)){Ai.getInverse(i),Ri.copy(e.ray).applyMatrix4(Ai);var o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new h,u=new h,c=new h,l=new h,d=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var f=r.index,p=r.attributes.position.array;if(null!==f)for(var m=f.array,y=0,v=m.length-1;y<v;y+=d){var g=m[y],_=m[y+1];s.fromArray(p,3*g),u.fromArray(p,3*_),Ri.distanceSqToSegment(s,u,l,c)>a||(l.applyMatrix4(this.matrixWorld),(M=e.ray.origin.distanceTo(l))<e.near||M>e.far||t.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(y=0,v=p.length/3-1;y<v;y+=d)s.fromArray(p,3*y),u.fromArray(p,3*y+3),Ri.distanceSqToSegment(s,u,l,c)>a||(l.applyMatrix4(this.matrixWorld),(M=e.ray.origin.distanceTo(l))<e.near||M>e.far||t.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(r.isGeometry){var b=r.vertices,x=b.length;for(y=0;y<x-1;y+=d){var M;Ri.distanceSqToSegment(b[y],b[y+1],l,c)>a||(l.applyMatrix4(this.matrixWorld),(M=e.ray.origin.distanceTo(l))<e.near||M>e.far||t.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Oi=new h,ki=new h;function Ii(e,t){Li.call(this,e,t),this.type="LineSegments"}function Di(e,t){Li.call(this,e,t),this.type="LineLoop"}function Ui(e){je.call(this),this.type="PointsMaterial",this.color=new Ie(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}Ii.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ii,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Oi.fromBufferAttribute(t,r),ki.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Oi.distanceTo(ki);e.addAttribute("lineDistance",new $e(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(n=e.lineDistances,r=0,i=o.length;r<i;r+=2)Oi.copy(o[r]),ki.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Oi.distanceTo(ki)}return this}}),Di.prototype=Object.assign(Object.create(Li.prototype),{constructor:Di,isLineLoop:!0}),Ui.prototype=Object.create(je.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isPointsMaterial=!0,Ui.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Bi=new R,Fi=new be,Gi=new he,ji=new h;function zi(e,t){J.call(this),this.type="Points",this.geometry=void 0!==e?e:new ut,this.material=void 0!==t?t:new Ui({color:16777215*Math.random()}),this.updateMorphTargets()}function Vi(e,t,n,r,i,o,a){var s=Fi.distanceSqToPoint(e);if(s<n){var u=new h;Fi.closestPointToPoint(e,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:a})}}function Hi(e,t,n,r,i,o,a,s,u){_.call(this,e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1}function Wi(e,t,n,r,i,o,a,s,u,c,l,d){_.call(this,null,o,a,s,u,c,r,i,l,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function qi(e,t,n,r,i,o,a,s,u){_.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function Xi(e,t,n,r,i,o,a,s,u,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),_.call(this,null,r,i,o,a,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}function Yi(e){ut.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,u,c,l,d=[],f=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var y=e.faces;for(t=0,r=y.length;t<r;t++){var v=y[t];for(n=0;n<3;n++)s=v[m[n]],u=v[m[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===p[c=f[0]+","+f[1]]&&(p[c]={index1:f[0],index2:f[1]})}for(c in p)a=p[c],l=e.vertices[a.index1],d.push(l.x,l.y,l.z),l=e.vertices[a.index2],d.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var g,_,b,x,M,C,w;if(l=new h,null!==e.index){for(g=e.attributes.position,_=e.index,0===(b=e.groups).length&&(b=[{start:0,count:_.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=M=(x=b[i]).start,r=M+x.count;t<r;t+=3)for(n=0;n<3;n++)s=_.getX(t+n),u=_.getX(t+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===p[c=f[0]+","+f[1]]&&(p[c]={index1:f[0],index2:f[1]});for(c in p)a=p[c],l.fromBufferAttribute(g,a.index1),d.push(l.x,l.y,l.z),l.fromBufferAttribute(g,a.index2),d.push(l.x,l.y,l.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)C=3*t+n,l.fromBufferAttribute(g,C),d.push(l.x,l.y,l.z),w=3*t+(n+1)%3,l.fromBufferAttribute(g,w),d.push(l.x,l.y,l.z)}this.addAttribute("position",new $e(d,3))}function Ji(e,t,n){Ot.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ki(e,t,n)),this.mergeVertices()}function Ki(e,t,n){ut.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],u=[],c=1e-5,l=new h,d=new h,f=new h,p=new h,m=new h;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var y=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,d),a.push(d.x,d.y,d.z),g-c>=0?(e(g-c,v,f),p.subVectors(d,f)):(e(g+c,v,f),p.subVectors(f,d)),v-c>=0?(e(g,v-c,f),m.subVectors(d,f)):(e(g,v+c,f),m.subVectors(f,d)),l.crossVectors(p,m).normalize(),s.push(l.x,l.y,l.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var _=r*y+i,b=r*y+i+1,x=(r+1)*y+i+1,M=(r+1)*y+i;o.push(_,b,M),o.push(b,x,M)}this.setIndex(o),this.addAttribute("position",new $e(a,3)),this.addAttribute("normal",new $e(s,3)),this.addAttribute("uv",new $e(u,2))}function $i(e,t,n,r){Ot.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Zi(e,t,n,r)),this.mergeVertices()}function Zi(e,t,n,r){ut.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],a=[];function s(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var c=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),d=a-i;for(o=0;o<=d;o++)s[i][o]=0===o&&i===a?c:c.clone().lerp(l,o/d)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var h=Math.floor(o/2);o%2==0?(u(s[i][h+1]),u(s[i+1][h]),u(s[i][h])):(u(s[i][h+1]),u(s[i+1][h+1]),u(s[i+1][h]))}}function u(e){i.push(e.x,e.y,e.z)}function c(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new h,r=new h,i=new h,o=0;o<t.length;o+=3)c(t[o+0],n),c(t[o+1],r),c(t[o+2],i),s(n,r,i,e)}(r=r||0),function(e){for(var t=new h,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new h,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=d(e)/2/Math.PI+.5,r=(s=e,Math.atan2(-s.y,Math.sqrt(s.x*s.x+s.z*s.z))/Math.PI+.5);a.push(n,1-r)}var s;(function(){for(var e=new h,t=new h,n=new h,r=new h,s=new o,u=new o,c=new o,f=0,p=0;f<i.length;f+=9,p+=6){e.set(i[f+0],i[f+1],i[f+2]),t.set(i[f+3],i[f+4],i[f+5]),n.set(i[f+6],i[f+7],i[f+8]),s.set(a[p+0],a[p+1]),u.set(a[p+2],a[p+3]),c.set(a[p+4],a[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var m=d(r);l(s,p+0,e,m),l(u,p+2,t,m),l(c,p+4,n,m)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new $e(i,3)),this.addAttribute("normal",new $e(i.slice(),3)),this.addAttribute("uv",new $e(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Qi(e,t){Ot.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new eo(e,t)),this.mergeVertices()}function eo(e,t){Zi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function to(e,t){Ot.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new no(e,t)),this.mergeVertices()}function no(e,t){Zi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ro(e,t){Ot.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new io(e,t)),this.mergeVertices()}function io(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Zi.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function oo(e,t){Ot.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ao(e,t)),this.mergeVertices()}function ao(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Zi.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function so(e,t,n,r,i,o){Ot.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new uo(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function uo(e,t,n,r,i){ut.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var s,u,c=new h,l=new h,d=new o,f=new h,p=[],m=[],y=[],v=[];function g(i){f=e.getPointAt(i/t,f);var o=a.normals[i],s=a.binormals[i];for(u=0;u<=r;u++){var d=u/r*Math.PI*2,h=Math.sin(d),y=-Math.cos(d);l.x=y*o.x+h*s.x,l.y=y*o.y+h*s.y,l.z=y*o.z+h*s.z,l.normalize(),m.push(l.x,l.y,l.z),c.x=f.x+n*l.x,c.y=f.y+n*l.y,c.z=f.z+n*l.z,p.push(c.x,c.y,c.z)}}!function(){for(s=0;s<t;s++)g(s);g(!1===i?t:0),function(){for(s=0;s<=t;s++)for(u=0;u<=r;u++)d.x=s/t,d.y=u/r,y.push(d.x,d.y)}(),function(){for(u=1;u<=t;u++)for(s=1;s<=r;s++){var e=(r+1)*(u-1)+(s-1),n=(r+1)*u+(s-1),i=(r+1)*u+s,o=(r+1)*(u-1)+s;v.push(e,n,o),v.push(n,i,o)}}()}(),this.setIndex(v),this.addAttribute("position",new $e(p,3)),this.addAttribute("normal",new $e(m,3)),this.addAttribute("uv",new $e(y,2))}function co(e,t,n,r,i,o,a){Ot.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new lo(e,t,n,r,i,o)),this.mergeVertices()}function lo(e,t,n,r,i,o){ut.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],c=[],l=[],d=[],f=new h,p=new h,m=new h,y=new h,v=new h,g=new h,_=new h;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(E(b,i,o,e,m),E(b+.01,i,o,e,y),g.subVectors(y,m),_.addVectors(y,m),v.crossVectors(g,_),_.crossVectors(v,g),v.normalize(),_.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,M=-t*Math.cos(x),C=t*Math.sin(x);f.x=m.x+(M*_.x+C*v.x),f.y=m.y+(M*_.y+C*v.y),f.z=m.z+(M*_.z+C*v.z),c.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),l.push(p.x,p.y,p.z),d.push(a/n),d.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var w=(r+1)*(s-1)+(a-1),S=(r+1)*s+(a-1),T=(r+1)*s+a,N=(r+1)*(s-1)+a;u.push(w,S,N),u.push(S,T,N)}function E(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new $e(c,3)),this.addAttribute("normal",new $e(l,3)),this.addAttribute("uv",new $e(d,2))}function ho(e,t,n,r,i){Ot.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new fo(e,t,n,r,i)),this.mergeVertices()}function fo(e,t,n,r,i){ut.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],c=[],l=[],d=new h,f=new h,p=new h;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var m=a/r*i,y=o/n*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(m),f.y=(e+t*Math.cos(y))*Math.sin(m),f.z=t*Math.sin(y),u.push(f.x,f.y,f.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),l.push(a/r),l.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,_=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(v,g,b),s.push(g,_,b)}this.setIndex(s),this.addAttribute("position",new $e(u,3)),this.addAttribute("normal",new $e(c,3)),this.addAttribute("uv",new $e(l,2))}zi.prototype=Object.assign(Object.create(J.prototype),{constructor:zi,isPoints:!0,raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gi.copy(n.boundingSphere),Gi.applyMatrix4(r),Gi.radius+=i,!1!==e.ray.intersectsSphere(Gi)){Bi.getInverse(r),Fi.copy(e.ray).applyMatrix4(Bi);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var c=s.array,l=0,d=c.length;l<d;l++){var h=c[l];ji.fromArray(u,3*h),Vi(ji,h,a,r,e,t,this)}else{l=0;for(var f=u.length/3;l<f;l++)ji.fromArray(u,3*l),Vi(ji,l,a,r,e,t,this)}}else{var p=n.vertices;for(l=0,f=p.length;l<f;l++)Vi(p[l],l,a,r,e,t,this)}}},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Hi.prototype=Object.assign(Object.create(_.prototype),{constructor:Hi,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Wi.prototype=Object.create(_.prototype),Wi.prototype.constructor=Wi,Wi.prototype.isCompressedTexture=!0,qi.prototype=Object.create(_.prototype),qi.prototype.constructor=qi,qi.prototype.isCanvasTexture=!0,Xi.prototype=Object.create(_.prototype),Xi.prototype.constructor=Xi,Xi.prototype.isDepthTexture=!0,Yi.prototype=Object.create(ut.prototype),Yi.prototype.constructor=Yi,Ji.prototype=Object.create(Ot.prototype),Ji.prototype.constructor=Ji,Ki.prototype=Object.create(ut.prototype),Ki.prototype.constructor=Ki,$i.prototype=Object.create(Ot.prototype),$i.prototype.constructor=$i,Zi.prototype=Object.create(ut.prototype),Zi.prototype.constructor=Zi,Qi.prototype=Object.create(Ot.prototype),Qi.prototype.constructor=Qi,eo.prototype=Object.create(Zi.prototype),eo.prototype.constructor=eo,to.prototype=Object.create(Ot.prototype),to.prototype.constructor=to,no.prototype=Object.create(Zi.prototype),no.prototype.constructor=no,ro.prototype=Object.create(Ot.prototype),ro.prototype.constructor=ro,io.prototype=Object.create(Zi.prototype),io.prototype.constructor=io,oo.prototype=Object.create(Ot.prototype),oo.prototype.constructor=oo,ao.prototype=Object.create(Zi.prototype),ao.prototype.constructor=ao,so.prototype=Object.create(Ot.prototype),so.prototype.constructor=so,uo.prototype=Object.create(ut.prototype),uo.prototype.constructor=uo,uo.prototype.toJSON=function(){var e=ut.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},co.prototype=Object.create(Ot.prototype),co.prototype.constructor=co,lo.prototype=Object.create(ut.prototype),lo.prototype.constructor=lo,ho.prototype=Object.create(Ot.prototype),ho.prototype.constructor=ho,fo.prototype=Object.create(ut.prototype),fo.prototype.constructor=fo;var po=function(e,t,n){n=n||2;var r,i,o,a,s,u,c,l=t&&t.length,d=l?t[0]*n:e.length,h=mo(e,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(l&&(h=function(e,t,n,r){var i,o,a,s,u,c=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(u=mo(e,a,s,r,!1))===u.next&&(u.steiner=!0),c.push(So(u));for(c.sort(Mo),i=0;i<c.length;i++)Co(c[i],n),n=yo(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<d;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return vo(h,f,n,r,i,c),f};function mo(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Oo(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Oo(o,e[o],e[o+1],a);return a&&Ao(a,a.next)&&(ko(a),a=a.next),a}function yo(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ao(r,r.next)&&0!==Eo(r.prev,r,r.next))r=r.next;else{if(ko(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function vo(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=wo(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?_o(e,r,i,o):go(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),ko(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?vo(e=bo(e,t,n),t,n,r,i,o,2):2===a&&xo(e,t,n,r,i,o):vo(yo(e),t,n,r,i,o,1);break}}}function go(e){var t=e.prev,n=e,r=e.next;if(Eo(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(To(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Eo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function _o(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Eo(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,d=wo(s,u,t,n,r),h=wo(c,l,t,n,r),f=e.prevZ,p=e.nextZ;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&To(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Eo(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&To(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Eo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&To(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Eo(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&To(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Eo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function bo(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Ao(i,o)&&Ro(i,r,r.next,o)&&Po(i,o)&&Po(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),ko(r),ko(r.next),r=e=o),r=r.next}while(r!==e);return r}function xo(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&No(a,s)){var u=Lo(a,s);return a=yo(a,a.next),u=yo(u,u.next),vo(a,t,n,r,i,o),void vo(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Mo(e,t){return e.x-t.x}function Co(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,d=n.y,h=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&To(o<d?i:a,o,l,d,o<d?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&Po(r,e)&&(n=r,h=u),r=r.next;return n}(e,t)){var n=Lo(t,e);yo(n,n.next)}}function wo(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function So(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function To(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function No(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ro(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Po(e,t)&&Po(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Eo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ao(e,t){return e.x===t.x&&e.y===t.y}function Ro(e,t,n,r){return!!(Ao(e,n)&&Ao(t,r)||Ao(e,r)&&Ao(n,t))||Eo(e,t,n)>0!=Eo(e,t,r)>0&&Eo(n,r,e)>0!=Eo(n,r,t)>0}function Po(e,t){return Eo(e.prev,e,e.next)<0?Eo(e,t,e.next)>=0&&Eo(e,e.prev,t)>=0:Eo(e,t,e.prev)<0||Eo(e,e.next,t)<0}function Lo(e,t){var n=new Io(e.i,e.x,e.y),r=new Io(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Oo(e,t,n,r){var i=new Io(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ko(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Io(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Do={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Do.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Uo(e),Bo(n,e);var o=e.length;t.forEach(Uo);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Bo(n,t[a]);var s=po(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Uo(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Bo(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Fo(e,t){Ot.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Go(e,t)),this.mergeVertices()}function Go(e,t){ut.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],a=0,s=e.length;a<s;a++)u(e[a]);function u(e){var a=[],s=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:d-2,p=void 0!==t.bevelOffset?t.bevelOffset:0,m=void 0!==t.bevelSegments?t.bevelSegments:3,y=t.extrudePath,v=void 0!==t.UVGenerator?t.UVGenerator:jo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var g,_,b,x,M,C,w,S,T=!1;y&&(g=y.getSpacedPoints(u),T=!0,l=!1,_=y.computeFrenetFrames(u,!1),b=new h,x=new h,M=new h),l||(m=0,d=0,f=0,p=0);var N=e.extractPoints(s),E=N.shape,A=N.holes;if(!Do.isClockWise(E))for(E=E.reverse(),w=0,S=A.length;w<S;w++)C=A[w],Do.isClockWise(C)&&(A[w]=C.reverse());var R=Do.triangulateShape(E,A),P=E;for(w=0,S=A.length;w<S;w++)C=A[w],E=E.concat(C);function L(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var O,k,I,D,U,B,F=E.length,G=R.length;function j(e,t,n){var r,i,a,s=e.x-t.x,u=e.y-t.y,c=n.x-e.x,l=n.y-e.y,d=s*s+u*u,h=s*l-u*c;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(d),p=Math.sqrt(c*c+l*l),m=t.x-u/f,y=t.y+s/f,v=((n.x-l/p-m)*l-(n.y+c/p-y)*c)/(s*l-u*c),g=(r=m+s*v-e.x)*r+(i=y+u*v-e.y)*i;if(g<=2)return new o(r,i);a=Math.sqrt(g/2)}else{var _=!1;s>Number.EPSILON?c>Number.EPSILON&&(_=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(_=!0):Math.sign(u)===Math.sign(l)&&(_=!0),_?(r=-u,i=s,a=Math.sqrt(d)):(r=s,i=u,a=Math.sqrt(d/2))}return new o(r/a,i/a)}for(var z=[],V=0,H=P.length,W=H-1,q=V+1;V<H;V++,W++,q++)W===H&&(W=0),q===H&&(q=0),z[V]=j(P[V],P[W],P[q]);var X,Y,J=[],K=z.concat();for(w=0,S=A.length;w<S;w++){for(C=A[w],X=[],V=0,W=(H=C.length)-1,q=V+1;V<H;V++,W++,q++)W===H&&(W=0),q===H&&(q=0),X[V]=j(C[V],C[W],C[q]);J.push(X),K=K.concat(X)}for(O=0;O<m;O++){for(I=O/m,D=d*Math.cos(I*Math.PI/2),k=f*Math.sin(I*Math.PI/2)+p,V=0,H=P.length;V<H;V++)Z((U=L(P[V],z[V],k)).x,U.y,-D);for(w=0,S=A.length;w<S;w++)for(C=A[w],X=J[w],V=0,H=C.length;V<H;V++)Z((U=L(C[V],X[V],k)).x,U.y,-D)}for(k=f+p,V=0;V<F;V++)U=l?L(E[V],K[V],k):E[V],T?(x.copy(_.normals[0]).multiplyScalar(U.x),b.copy(_.binormals[0]).multiplyScalar(U.y),M.copy(g[0]).add(x).add(b),Z(M.x,M.y,M.z)):Z(U.x,U.y,0);for(Y=1;Y<=u;Y++)for(V=0;V<F;V++)U=l?L(E[V],K[V],k):E[V],T?(x.copy(_.normals[Y]).multiplyScalar(U.x),b.copy(_.binormals[Y]).multiplyScalar(U.y),M.copy(g[Y]).add(x).add(b),Z(M.x,M.y,M.z)):Z(U.x,U.y,c/u*Y);for(O=m-1;O>=0;O--){for(I=O/m,D=d*Math.cos(I*Math.PI/2),k=f*Math.sin(I*Math.PI/2)+p,V=0,H=P.length;V<H;V++)Z((U=L(P[V],z[V],k)).x,U.y,c+D);for(w=0,S=A.length;w<S;w++)for(C=A[w],X=J[w],V=0,H=C.length;V<H;V++)U=L(C[V],X[V],k),T?Z(U.x,U.y+g[u-1].y,g[u-1].x+D):Z(U.x,U.y,c+D)}function $(e,t){var n,r;for(V=e.length;--V>=0;){n=V,(r=V-1)<0&&(r=e.length-1);var i=0,o=u+2*m;for(i=0;i<o;i++){var a=F*i,s=F*(i+1);ee(t+n+a,t+r+a,t+r+s,t+n+s)}}}function Z(e,t,n){a.push(e),a.push(t),a.push(n)}function Q(e,t,i){te(e),te(t),te(i);var o=r.length/3,a=v.generateTopUV(n,r,o-3,o-2,o-1);ne(a[0]),ne(a[1]),ne(a[2])}function ee(e,t,i,o){te(e),te(t),te(o),te(t),te(i),te(o);var a=r.length/3,s=v.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ne(s[0]),ne(s[1]),ne(s[3]),ne(s[1]),ne(s[2]),ne(s[3])}function te(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function ne(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(l){var t=0,i=F*t;for(V=0;V<G;V++)Q((B=R[V])[2]+i,B[1]+i,B[0]+i);for(i=F*(t=u+2*m),V=0;V<G;V++)Q((B=R[V])[0]+i,B[1]+i,B[2]+i)}else{for(V=0;V<G;V++)Q((B=R[V])[2],B[1],B[0]);for(V=0;V<G;V++)Q((B=R[V])[0]+F*u,B[1]+F*u,B[2]+F*u)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for($(P,t),t+=P.length,w=0,S=A.length;w<S;w++)$(C=A[w],t),t+=C.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new $e(r,3)),this.addAttribute("uv",new $e(i,2)),this.computeVertexNormals()}Fo.prototype=Object.create(Ot.prototype),Fo.prototype.constructor=Fo,Fo.prototype.toJSON=function(){var e=Ot.prototype.toJSON.call(this);return zo(this.parameters.shapes,this.parameters.options,e)},Go.prototype=Object.create(ut.prototype),Go.prototype.constructor=Go,Go.prototype.toJSON=function(){var e=ut.prototype.toJSON.call(this);return zo(this.parameters.shapes,this.parameters.options,e)};var jo={generateTopUV:function(e,t,n,r,i){var a=t[3*n],s=t[3*n+1],u=t[3*r],c=t[3*r+1],l=t[3*i],d=t[3*i+1];return[new o(a,s),new o(u,c),new o(l,d)]},generateSideWallUV:function(e,t,n,r,i,a){var s=t[3*n],u=t[3*n+1],c=t[3*n+2],l=t[3*r],d=t[3*r+1],h=t[3*r+2],f=t[3*i],p=t[3*i+1],m=t[3*i+2],y=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(u-d)<.01?[new o(s,1-c),new o(l,1-h),new o(f,1-m),new o(y,1-g)]:[new o(u,1-c),new o(d,1-h),new o(p,1-m),new o(v,1-g)]}};function zo(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Vo(e,t){Ot.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ho(e,t)),this.mergeVertices()}function Ho(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ot;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Go.call(this,r,t),this.type="TextBufferGeometry"}function Wo(e,t,n,r,i,o,a){Ot.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new qo(e,t,n,r,i,o,a)),this.mergeVertices()}function qo(e,t,n,r,i,o,a){ut.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,c=Math.min(o+a,Math.PI),l=0,d=[],f=new h,p=new h,m=[],y=[],v=[],g=[];for(u=0;u<=n;u++){var _=[],b=u/n,x=0;for(0==u&&0==o?x=.5/t:u==n&&c==Math.PI&&(x=-.5/t),s=0;s<=t;s++){var M=s/t;f.x=-e*Math.cos(r+M*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+M*i)*Math.sin(o+b*a),y.push(f.x,f.y,f.z),p.copy(f).normalize(),v.push(p.x,p.y,p.z),g.push(M+x,1-b),_.push(l++)}d.push(_)}for(u=0;u<n;u++)for(s=0;s<t;s++){var C=d[u][s+1],w=d[u][s],S=d[u+1][s],T=d[u+1][s+1];(0!==u||o>0)&&m.push(C,w,T),(u!==n-1||c<Math.PI)&&m.push(w,S,T)}this.setIndex(m),this.addAttribute("position",new $e(y,3)),this.addAttribute("normal",new $e(v,3)),this.addAttribute("uv",new $e(g,2))}function Xo(e,t,n,r,i,o){Ot.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Yo(e,t,n,r,i,o)),this.mergeVertices()}function Yo(e,t,n,r,i,a){ut.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var s,u,c,l=[],d=[],f=[],p=[],m=e,y=(t-e)/(r=void 0!==r?Math.max(1,r):1),v=new h,g=new o;for(u=0;u<=r;u++){for(c=0;c<=n;c++)s=i+c/n*a,v.x=m*Math.cos(s),v.y=m*Math.sin(s),d.push(v.x,v.y,v.z),f.push(0,0,1),g.x=(v.x/t+1)/2,g.y=(v.y/t+1)/2,p.push(g.x,g.y);m+=y}for(u=0;u<r;u++){var _=u*(n+1);for(c=0;c<n;c++){var b=s=c+_,x=s+n+1,M=s+n+2,C=s+1;l.push(b,x,C),l.push(x,M,C)}}this.setIndex(l),this.addAttribute("position",new $e(d,3)),this.addAttribute("normal",new $e(f,3)),this.addAttribute("uv",new $e(p,2))}function Jo(e,t,n,r){Ot.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Ko(e,t,n,r)),this.mergeVertices()}function Ko(e,t,n,r){ut.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=i.clamp(r,0,2*Math.PI);var a,s,u,c=[],l=[],d=[],f=1/t,p=new h,m=new o;for(s=0;s<=t;s++){var y=n+s*f*r,v=Math.sin(y),g=Math.cos(y);for(u=0;u<=e.length-1;u++)p.x=e[u].x*v,p.y=e[u].y,p.z=e[u].x*g,l.push(p.x,p.y,p.z),m.x=s/t,m.y=u/(e.length-1),d.push(m.x,m.y)}for(s=0;s<t;s++)for(u=0;u<e.length-1;u++){var _=a=u+s*e.length,b=a+e.length,x=a+e.length+1,M=a+1;c.push(_,b,M),c.push(b,x,M)}if(this.setIndex(c),this.addAttribute("position",new $e(l,3)),this.addAttribute("uv",new $e(d,2)),this.computeVertexNormals(),r===2*Math.PI){var C=this.attributes.normal.array,w=new h,S=new h,T=new h;for(a=t*e.length*3,s=0,u=0;s<e.length;s++,u+=3)w.x=C[u+0],w.y=C[u+1],w.z=C[u+2],S.x=C[a+u+0],S.y=C[a+u+1],S.z=C[a+u+2],T.addVectors(w,S).normalize(),C[u+0]=C[a+u+0]=T.x,C[u+1]=C[a+u+1]=T.y,C[u+2]=C[a+u+2]=T.z}}function $o(e,t){Ot.call(this),this.type="ShapeGeometry","object"===D(t)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Zo(e,t)),this.mergeVertices()}function Zo(e,t){ut.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var u=0;u<e.length;u++)c(e[u]),this.addGroup(a,s,u),a+=s,s=0;function c(e){var a,u,c,l=r.length/3,d=e.extractPoints(t),h=d.shape,f=d.holes;for(!1===Do.isClockWise(h)&&(h=h.reverse()),a=0,u=f.length;a<u;a++)c=f[a],!0===Do.isClockWise(c)&&(f[a]=c.reverse());var p=Do.triangulateShape(h,f);for(a=0,u=f.length;a<u;a++)c=f[a],h=h.concat(c);for(a=0,u=h.length;a<u;a++){var m=h[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var y=p[a],v=y[0]+l,g=y[1]+l,_=y[2]+l;n.push(v,g,_),s+=3}}this.setIndex(n),this.addAttribute("position",new $e(r,3)),this.addAttribute("normal",new $e(i,3)),this.addAttribute("uv",new $e(o,2))}function Qo(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function ea(e,t){ut.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,o,a,s=[],u=Math.cos(i.DEG2RAD*t),c=[0,0],l={},d=["a","b","c"];e.isBufferGeometry?(a=new Ot).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,p=0,m=f.length;p<m;p++)for(var y=f[p],v=0;v<3;v++)n=y[d[v]],r=y[d[(v+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===l[o=c[0]+","+c[1]]?l[o]={index1:c[0],index2:c[1],face1:p,face2:void 0}:l[o].face2=p;for(o in l){var g=l[o];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=u){var _=h[g.index1];s.push(_.x,_.y,_.z),_=h[g.index2],s.push(_.x,_.y,_.z)}}this.addAttribute("position",new $e(s,3))}function ta(e,t,n,r,i,o,a,s){Ot.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new na(e,t,n,r,i,o,a,s)),this.mergeVertices()}function na(e,t,n,r,i,a,s,u){ut.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var l=[],d=[],f=[],p=[],m=0,y=[],v=n/2,g=0;function _(n){var i,a,y,_=new o,b=new h,x=0,M=!0===n?e:t,C=!0===n?1:-1;for(a=m,i=1;i<=r;i++)d.push(0,v*C,0),f.push(0,C,0),p.push(.5,.5),m++;for(y=m,i=0;i<=r;i++){var w=i/r*u+s,S=Math.cos(w),T=Math.sin(w);b.x=M*T,b.y=v*C,b.z=M*S,d.push(b.x,b.y,b.z),f.push(0,C,0),_.x=.5*S+.5,_.y=.5*T*C+.5,p.push(_.x,_.y),m++}for(i=0;i<r;i++){var N=a+i,E=y+i;!0===n?l.push(E,E+1,N):l.push(E+1,E,N),x+=3}c.addGroup(g,x,!0===n?1:2),g+=x}!function(){var o,a,_=new h,b=new h,x=0,M=(t-e)/n;for(a=0;a<=i;a++){var C=[],w=a/i,S=w*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,N=T*u+s,E=Math.sin(N),A=Math.cos(N);b.x=S*E,b.y=-w*n+v,b.z=S*A,d.push(b.x,b.y,b.z),_.set(E,M,A).normalize(),f.push(_.x,_.y,_.z),p.push(T,1-w),C.push(m++)}y.push(C)}for(o=0;o<r;o++)for(a=0;a<i;a++){var R=y[a][o],P=y[a+1][o],L=y[a+1][o+1],O=y[a][o+1];l.push(R,P,O),l.push(P,L,O),x+=6}c.addGroup(g,x,0),g+=x}(),!1===a&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(l),this.addAttribute("position",new $e(d,3)),this.addAttribute("normal",new $e(f,3)),this.addAttribute("uv",new $e(p,2))}function ra(e,t,n,r,i,o,a){ta.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ia(e,t,n,r,i,o,a){na.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function oa(e,t,n,r){Ot.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new aa(e,t,n,r)),this.mergeVertices()}function aa(e,t,n,r){ut.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,a,s=[],u=[],c=[],l=[],d=new h,f=new o;for(u.push(0,0,0),c.push(0,0,1),l.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var p=n+a/t*r;d.x=e*Math.cos(p),d.y=e*Math.sin(p),u.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(u[i]/e+1)/2,f.y=(u[i+1]/e+1)/2,l.push(f.x,f.y)}for(i=1;i<=t;i++)s.push(i,i+1,0);this.setIndex(s),this.addAttribute("position",new $e(u,3)),this.addAttribute("normal",new $e(c,3)),this.addAttribute("uv",new $e(l,2))}Vo.prototype=Object.create(Ot.prototype),Vo.prototype.constructor=Vo,Ho.prototype=Object.create(Go.prototype),Ho.prototype.constructor=Ho,Wo.prototype=Object.create(Ot.prototype),Wo.prototype.constructor=Wo,qo.prototype=Object.create(ut.prototype),qo.prototype.constructor=qo,Xo.prototype=Object.create(Ot.prototype),Xo.prototype.constructor=Xo,Yo.prototype=Object.create(ut.prototype),Yo.prototype.constructor=Yo,Jo.prototype=Object.create(Ot.prototype),Jo.prototype.constructor=Jo,Ko.prototype=Object.create(ut.prototype),Ko.prototype.constructor=Ko,$o.prototype=Object.create(Ot.prototype),$o.prototype.constructor=$o,$o.prototype.toJSON=function(){var e=Ot.prototype.toJSON.call(this);return Qo(this.parameters.shapes,e)},Zo.prototype=Object.create(ut.prototype),Zo.prototype.constructor=Zo,Zo.prototype.toJSON=function(){var e=ut.prototype.toJSON.call(this);return Qo(this.parameters.shapes,e)},ea.prototype=Object.create(ut.prototype),ea.prototype.constructor=ea,ta.prototype=Object.create(Ot.prototype),ta.prototype.constructor=ta,na.prototype=Object.create(ut.prototype),na.prototype.constructor=na,ra.prototype=Object.create(ta.prototype),ra.prototype.constructor=ra,ia.prototype=Object.create(na.prototype),ia.prototype.constructor=ia,oa.prototype=Object.create(Ot.prototype),oa.prototype.constructor=oa,aa.prototype=Object.create(ut.prototype),aa.prototype.constructor=aa;var sa=Object.freeze({WireframeGeometry:Yi,ParametricGeometry:Ji,ParametricBufferGeometry:Ki,TetrahedronGeometry:Qi,TetrahedronBufferGeometry:eo,OctahedronGeometry:to,OctahedronBufferGeometry:no,IcosahedronGeometry:ro,IcosahedronBufferGeometry:io,DodecahedronGeometry:oo,DodecahedronBufferGeometry:ao,PolyhedronGeometry:$i,PolyhedronBufferGeometry:Zi,TubeGeometry:so,TubeBufferGeometry:uo,TorusKnotGeometry:co,TorusKnotBufferGeometry:lo,TorusGeometry:ho,TorusBufferGeometry:fo,TextGeometry:Vo,TextBufferGeometry:Ho,SphereGeometry:Wo,SphereBufferGeometry:qo,RingGeometry:Xo,RingBufferGeometry:Yo,PlaneGeometry:rn,PlaneBufferGeometry:on,LatheGeometry:Jo,LatheBufferGeometry:Ko,ShapeGeometry:$o,ShapeBufferGeometry:Zo,ExtrudeGeometry:Fo,ExtrudeBufferGeometry:Go,EdgesGeometry:ea,ConeGeometry:ra,ConeBufferGeometry:ia,CylinderGeometry:ta,CylinderBufferGeometry:na,CircleGeometry:oa,CircleBufferGeometry:aa,BoxGeometry:kt,BoxBufferGeometry:It});function ua(e){je.call(this),this.type="ShadowMaterial",this.color=new Ie(0),this.transparent=!0,this.setValues(e)}function ca(e){Ft.call(this,e),this.type="RawShaderMaterial"}function la(e){je.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ie(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function da(e){la.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new o(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function ha(e){je.call(this),this.type="MeshPhongMaterial",this.color=new Ie(16777215),this.specular=new Ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fa(e){ha.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function pa(e){je.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ma(e){je.call(this),this.type="MeshLambertMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ya(e){je.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ie(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function va(e){Ti.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}ua.prototype=Object.create(je.prototype),ua.prototype.constructor=ua,ua.prototype.isShadowMaterial=!0,ua.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this},ca.prototype=Object.create(Ft.prototype),ca.prototype.constructor=ca,ca.prototype.isRawShaderMaterial=!0,la.prototype=Object.create(je.prototype),la.prototype.constructor=la,la.prototype.isMeshStandardMaterial=!0,la.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},da.prototype=Object.create(la.prototype),da.prototype.constructor=da,da.prototype.isMeshPhysicalMaterial=!0,da.prototype.copy=function(e){return la.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new Ie).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},ha.prototype=Object.create(je.prototype),ha.prototype.constructor=ha,ha.prototype.isMeshPhongMaterial=!0,ha.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fa.prototype=Object.create(ha.prototype),fa.prototype.constructor=fa,fa.prototype.isMeshToonMaterial=!0,fa.prototype.copy=function(e){return ha.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},pa.prototype=Object.create(je.prototype),pa.prototype.constructor=pa,pa.prototype.isMeshNormalMaterial=!0,pa.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ma.prototype=Object.create(je.prototype),ma.prototype.constructor=ma,ma.prototype.isMeshLambertMaterial=!0,ma.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ya.prototype=Object.create(je.prototype),ya.prototype.constructor=ya,ya.prototype.isMeshMatcapMaterial=!0,ya.prototype.copy=function(e){return je.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},va.prototype=Object.create(Ti.prototype),va.prototype.constructor=va,va.prototype.isLineDashedMaterial=!0,va.prototype.copy=function(e){return Ti.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var ga=Object.freeze({ShadowMaterial:ua,SpriteMaterial:ri,RawShaderMaterial:ca,ShaderMaterial:Ft,PointsMaterial:Ui,MeshPhysicalMaterial:da,MeshStandardMaterial:la,MeshPhongMaterial:ha,MeshToonMaterial:fa,MeshNormalMaterial:pa,MeshLambertMaterial:ma,MeshDepthMaterial:Br,MeshDistanceMaterial:Fr,MeshBasicMaterial:ze,MeshMatcapMaterial:ya,LineDashedMaterial:va,LineBasicMaterial:Ti,Material:je}),_a={arraySlice:function(e,t,n){return _a.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function ba(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function xa(e,t,n,r){ba.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ma(e,t,n,r){ba.call(this,e,t,n,r)}function Ca(e,t,n,r){ba.call(this,e,t,n,r)}function wa(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_a.convertArray(t,this.TimeBufferType),this.values=_a.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Sa(e,t,n){wa.call(this,e,t,n)}function Ta(e,t,n,r){wa.call(this,e,t,n,r)}function Na(e,t,n,r){wa.call(this,e,t,n,r)}function Ea(e,t,n,r){ba.call(this,e,t,n,r)}function Aa(e,t,n,r){wa.call(this,e,t,n,r)}function Ra(e,t,n,r){wa.call(this,e,t,n,r)}function Pa(e,t,n,r){wa.call(this,e,t,n,r)}function La(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=i.generateUUID(),this.duration<0&&this.resetDuration()}function Oa(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Na;case"vector":case"vector2":case"vector3":case"vector4":return Pa;case"color":return Ta;case"quaternion":return Aa;case"bool":case"boolean":return Sa;case"string":return Ra}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];_a.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(ba.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ba.prototype,{beforeStart_:ba.prototype.copySampleValue_,afterEnd_:ba.prototype.copySampleValue_}),xa.prototype=Object.assign(Object.create(ba.prototype),{constructor:xa,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,y=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,g=(-1-h)*m+(1.5+h)*p+.5*f,_=h*m-h*p,b=0;b!==a;++b)i[b]=y*o[c+b]+v*o[u+b]+g*o[s+b]+_*o[l+b];return i}}),Ma.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ma,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c,d=0;d!==a;++d)i[d]=o[u+d]*l+o[s+d]*c;return i}}),Ca.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ca,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(wa,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:_a.convertArray(e.times,Array),values:_a.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(wa.prototype,{constructor:wa,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Ca(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Ma(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new xa(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=_a.arraySlice(n,i,o),this.values=_a.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&_a.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var c=a*n,l=c-n,d=c+n,h=0;h!==n;++h){var f=t[c+h];if(f!==t[l+h]||f!==t[d+h]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(h=0;h!==n;++h)t[m+h]=t[p+h]}++i}}if(o>0){for(e[i]=e[o],p=o*n,m=i*n,h=0;h!==n;++h)t[m+h]=t[p+h];++i}return i!==e.length&&(this.times=_a.arraySlice(e,0,i),this.values=_a.arraySlice(t,0,i*n)),this},clone:function(){var e=_a.arraySlice(this.times,0),t=_a.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Sa.prototype=Object.assign(Object.create(wa.prototype),{constructor:Sa,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ta.prototype=Object.assign(Object.create(wa.prototype),{constructor:Ta,ValueTypeName:"color"}),Na.prototype=Object.assign(Object.create(wa.prototype),{constructor:Na,ValueTypeName:"number"}),Ea.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ea,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=e*s,c=(n-t)/(r-t),l=u+s;u!==l;u+=4)a.slerpFlat(i,0,o,u-s,o,u,c);return i}}),Aa.prototype=Object.assign(Object.create(wa.prototype),{constructor:Aa,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Ea(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ra.prototype=Object.assign(Object.create(wa.prototype),{constructor:Ra,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Pa.prototype=Object.assign(Object.create(wa.prototype),{constructor:Pa,ValueTypeName:"vector"}),Object.assign(La,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Oa(n[i]).scale(r));return new La(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(wa.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=_a.getKeyframeOrder(s);s=_a.sortedArray(s,1,c),u=_a.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Na(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new La(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var c=r[d=u[1]];c||(r[d]=c=[]),c.push(s)}}var l=[];for(var d in r)l.push(La.CreateFromMorphTargetSequence(d,r[d],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];_a.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var h=0;h<c[d].morphTargets.length;h++)l[c[d].morphTargets[h]]=-1;for(var f in l){var p=[],m=[];for(h=0;h!==c[d].morphTargets.length;++h){var y=c[d];p.push(y.time),m.push(y.morphTarget===f?1:0)}r.push(new Na(".morphTargetInfluence["+f+"]",p,m))}o=l.length*(a||1)}else{var v=".bones["+t[u].name+"]";n(Pa,v+".position",c,"pos",r),n(Aa,v+".quaternion",c,"rot",r),n(Pa,v+".scale",c,"scl",r)}}return 0===r.length?null:new La(i,o,r)}}),Object.assign(La.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new La(this.name,this.duration,e)}});var ka={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ia(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Da=new Ia;function Ua(e){this.manager=void 0!==e?e:Da,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Ua.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}}),Ua.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}};var Ba={};function Fa(e){Ua.call(this,e)}function Ga(e){Ua.call(this,e)}function ja(e){Ua.call(this,e),this._parser=null}function za(e){Ua.call(this,e),this._parser=null}function Va(e){Ua.call(this,e)}function Ha(e){Ua.call(this,e)}function Wa(e){Ua.call(this,e)}function qa(){this.type="Curve",this.arcLengthDivisions=200}function Xa(e,t,n,r,i,o,a,s){qa.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ya(e,t,n,r,i,o){Xa.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Ja(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,c*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Fa.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Fa,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ka.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===Ba[e]){var a,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],c=!!s[2],d=s[3];d=decodeURIComponent(d),c&&(a=d,d=Object(l.atob)(a));try{var h,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var m=new Uint8Array(d.length),y=0;y<d.length;y++)m[y]=d.charCodeAt(y);h="blob"===p?new Blob([m.buffer],{type:u}):m.buffer;break;case"document":var v=new DOMParser;h=v.parseFromString(d,u);break;case"json":h=JSON.parse(d);break;default:h=d}setTimeout((function(){t&&t(h),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{Ba[e]=[],Ba[e].push({onLoad:t,onProgress:n,onError:r});var g=new f;for(var _ in g.open("GET",e,!0),g.addEventListener("load",(function(t){var n=this.response;ka.add(e,n);var r=Ba[e];if(delete Ba[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),g.addEventListener("progress",(function(t){for(var n=Ba[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),g.addEventListener("error",(function(t){var n=Ba[e];delete Ba[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),g.addEventListener("abort",(function(t){var n=Ba[e];delete Ba[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)g.setRequestHeader(_,this.requestHeader[_]);g.send(null)}return i.manager.itemStart(e),g}Ba[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Ga.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Ga,load:function(e,t,n,r){var i=this,o=new Fa(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=La.parse(e[n]);t.push(r)}return t}}),ja.prototype=Object.assign(Object.create(Ua.prototype),{constructor:ja,load:function(e,t,n,r){var i=this,o=[],a=new Wi;a.image=o;var s=new Fa(this.manager);function u(u){s.load(e[u],(function(e){var n=i._parser(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=1006),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,d=e.length;l<d;++l)u(l);else s.load(e,(function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=1006),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}),za.prototype=Object.assign(Object.create(Ua.prototype),{constructor:za,load:function(e,t,n,r){var i=this,o=new Ht,a=new Fa(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:1001,o.wrapT=void 0!==n.wrapT?n.wrapT:1001,o.magFilter=void 0!==n.magFilter?n.magFilter:1006,o.minFilter=void 0!==n.minFilter?n.minFilter:1008,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Va.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Va,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ka.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=s.createElementNS("http://www.w3.org/1999/xhtml","img");function u(){a.removeEventListener("load",u,!1),a.removeEventListener("error",c,!1),ka.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){a.removeEventListener("load",u,!1),a.removeEventListener("error",c,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",u,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),Ha.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Ha,load:function(e,t,n,r){var i=new vn,o=new Va(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6==++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}),Wa.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Wa,load:function(e,t,n,r){var i=new _,o=new Va(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(qa.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,o,a=new h,s=[],u=[],c=[],l=new h,d=new R;for(n=0;n<=e;n++)r=n/e,s[n]=this.getTangentAt(r),s[n].normalize();u[0]=new h,c[0]=new h;var f=Number.MAX_VALUE,p=Math.abs(s[0].x),m=Math.abs(s[0].y),y=Math.abs(s[0].z);for(p<=f&&(f=p,a.set(1,0,0)),m<=f&&(f=m,a.set(0,1,0)),y<=f&&a.set(0,0,1),l.crossVectors(s[0],a).normalize(),u[0].crossVectors(s[0],l),c[0].crossVectors(s[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),c[n]=c[n-1].clone(),l.crossVectors(s[n-1],s[n]),l.length()>Number.EPSILON&&(l.normalize(),o=Math.acos(i.clamp(s[n-1].dot(s[n]),-1,1)),u[n].applyMatrix4(d.makeRotationAxis(l,o))),c[n].crossVectors(s[n],u[n]);if(!0===t)for(o=Math.acos(i.clamp(u[0].dot(u[e]),-1,1)),o/=e,s[0].dot(l.crossVectors(u[0],u[e]))>0&&(o=-o),n=1;n<=e;n++)u[n].applyMatrix4(d.makeRotationAxis(s[n],o*n)),c[n].crossVectors(s[n],u[n]);return{tangents:s,normals:u,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Xa.prototype=Object.create(qa.prototype),Xa.prototype.constructor=Xa,Xa.prototype.isEllipseCurve=!0,Xa.prototype.getPoint=function(e,t){for(var n=t||new o,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var s=this.aStartAngle+e*i,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=u-this.aX,f=c-this.aY;u=h*l-f*d+this.aX,c=h*d+f*l+this.aY}return n.set(u,c)},Xa.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Xa.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Xa.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ya.prototype=Object.create(Xa.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isArcCurve=!0;var Ka=new h,$a=new Ja,Za=new Ja,Qa=new Ja;function es(e,t,n,r){qa.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function ts(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function ns(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function rs(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function is(e,t,n,r){qa.call(this),this.type="CubicBezierCurve",this.v0=e||new o,this.v1=t||new o,this.v2=n||new o,this.v3=r||new o}function os(e,t,n,r){qa.call(this),this.type="CubicBezierCurve3",this.v0=e||new h,this.v1=t||new h,this.v2=n||new h,this.v3=r||new h}function as(e,t){qa.call(this),this.type="LineCurve",this.v1=e||new o,this.v2=t||new o}function ss(e,t){qa.call(this),this.type="LineCurve3",this.v1=e||new h,this.v2=t||new h}function us(e,t,n){qa.call(this),this.type="QuadraticBezierCurve",this.v0=e||new o,this.v1=t||new o,this.v2=n||new o}function cs(e,t,n){qa.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new h,this.v1=t||new h,this.v2=n||new h}function ls(e){qa.call(this),this.type="SplineCurve",this.points=e||[]}es.prototype=Object.create(qa.prototype),es.prototype.constructor=es,es.prototype.isCatmullRomCurve3=!0,es.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new h,s=this.points,u=s.length,c=(u-(this.closed?0:1))*e,l=Math.floor(c),d=c-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/u)+1)*u:0===d&&l===u-1&&(l=u-2,d=1),this.closed||l>0?n=s[(l-1)%u]:(Ka.subVectors(s[0],s[1]).add(s[0]),n=Ka),r=s[l%u],i=s[(l+1)%u],this.closed||l+2<u?o=s[(l+2)%u]:(Ka.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Ka),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),m=Math.pow(r.distanceToSquared(i),f),y=Math.pow(i.distanceToSquared(o),f);m<1e-4&&(m=1),p<1e-4&&(p=m),y<1e-4&&(y=m),$a.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,m,y),Za.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,m,y),Qa.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,m,y)}else"catmullrom"===this.curveType&&($a.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Za.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Qa.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set($a.calc(d),Za.calc(d),Qa.calc(d)),a},es.prototype.copy=function(e){qa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},es.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},es.prototype.fromJSON=function(e){qa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new h).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},is.prototype=Object.create(qa.prototype),is.prototype.constructor=is,is.prototype.isCubicBezierCurve=!0,is.prototype.getPoint=function(e,t){var n=t||new o,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(rs(e,r.x,i.x,a.x,s.x),rs(e,r.y,i.y,a.y,s.y)),n},is.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},is.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},is.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},os.prototype=Object.create(qa.prototype),os.prototype.constructor=os,os.prototype.isCubicBezierCurve3=!0,os.prototype.getPoint=function(e,t){var n=t||new h,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(rs(e,r.x,i.x,o.x,a.x),rs(e,r.y,i.y,o.y,a.y),rs(e,r.z,i.z,o.z,a.z)),n},os.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},os.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},os.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},as.prototype=Object.create(qa.prototype),as.prototype.constructor=as,as.prototype.isLineCurve=!0,as.prototype.getPoint=function(e,t){var n=t||new o;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},as.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},as.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},as.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},as.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},as.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ss.prototype=Object.create(qa.prototype),ss.prototype.constructor=ss,ss.prototype.isLineCurve3=!0,ss.prototype.getPoint=function(e,t){var n=t||new h;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ss.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ss.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ss.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ss.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},us.prototype=Object.create(qa.prototype),us.prototype.constructor=us,us.prototype.isQuadraticBezierCurve=!0,us.prototype.getPoint=function(e,t){var n=t||new o,r=this.v0,i=this.v1,a=this.v2;return n.set(ns(e,r.x,i.x,a.x),ns(e,r.y,i.y,a.y)),n},us.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},us.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},us.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},cs.prototype=Object.create(qa.prototype),cs.prototype.constructor=cs,cs.prototype.isQuadraticBezierCurve3=!0,cs.prototype.getPoint=function(e,t){var n=t||new h,r=this.v0,i=this.v1,o=this.v2;return n.set(ns(e,r.x,i.x,o.x),ns(e,r.y,i.y,o.y),ns(e,r.z,i.z,o.z)),n},cs.prototype.copy=function(e){return qa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},cs.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},cs.prototype.fromJSON=function(e){return qa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ls.prototype=Object.create(qa.prototype),ls.prototype.constructor=ls,ls.prototype.isSplineCurve=!0,ls.prototype.getPoint=function(e,t){var n=t||new o,r=this.points,i=(r.length-1)*e,a=Math.floor(i),s=i-a,u=r[0===a?a:a-1],c=r[a],l=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return n.set(ts(s,u.x,c.x,l.x,d.x),ts(s,u.y,c.y,l.y,d.y)),n},ls.prototype.copy=function(e){qa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},ls.prototype.toJSON=function(){var e=qa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},ls.prototype.fromJSON=function(e){qa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new o).fromArray(r))}return this};var ds=Object.freeze({ArcCurve:Ya,CatmullRomCurve3:es,CubicBezierCurve:is,CubicBezierCurve3:os,EllipseCurve:Xa,LineCurve:as,LineCurve3:ss,QuadraticBezierCurve:us,QuadraticBezierCurve3:cs,SplineCurve:ls});function hs(){qa.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function fs(e){hs.call(this),this.type="Path",this.currentPoint=new o,e&&this.setFromPoints(e)}function ps(e){fs.call(this,e),this.uuid=i.generateUUID(),this.type="Shape",this.holes=[]}function ms(e,t){J.call(this),this.type="Light",this.color=new Ie(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ys(e,t,n){ms.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(J.DefaultUp),this.updateMatrix(),this.groundColor=new Ie(t)}function vs(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new o(512,512),this.map=null,this.mapPass=null,this.matrix=new R,this._frustum=new $t,this._frameExtents=new o(1,1),this._viewportCount=1,this._viewports=[new b(0,0,1,1)]}function gs(){vs.call(this,new jt(50,1,.5,500))}function _s(e,t,n,r,i,o){ms.call(this,e,t),this.type="SpotLight",this.position.copy(J.DefaultUp),this.updateMatrix(),this.target=new J,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new gs}function bs(){vs.call(this,new jt(90,1,.5,500)),this._frameExtents=new o(4,2),this._viewportCount=6,this._viewports=[new b(2,1,1,1),new b(0,1,1,1),new b(3,1,1,1),new b(1,1,1,1),new b(3,0,1,1),new b(1,0,1,1)],this._cubeDirections=[new h(1,0,0),new h(-1,0,0),new h(0,0,1),new h(0,0,-1),new h(0,1,0),new h(0,-1,0)],this._cubeUps=[new h(0,1,0),new h(0,1,0),new h(0,1,0),new h(0,1,0),new h(0,0,1),new h(0,0,-1)]}function xs(e,t,n,r){ms.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new bs}function Ms(e,t,n,r,i,o){Gt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Cs(){vs.call(this,new Ms(-5,5,5,-5,.5,500))}function ws(e,t){ms.call(this,e,t),this.type="DirectionalLight",this.position.copy(J.DefaultUp),this.updateMatrix(),this.target=new J,this.shadow=new Cs}function Ss(e,t){ms.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ts(e,t,n,r){ms.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Ns(e){Ua.call(this,e),this.textures={}}hs.prototype=Object.assign(Object.create(qa.prototype),{constructor:hs,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new as(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){qa.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=qa.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){qa.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new ds[r.type]).fromJSON(r))}return this}}),fs.prototype=Object.assign(Object.create(hs.prototype),{constructor:fs,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new as(this.currentPoint.clone(),new o(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new us(this.currentPoint.clone(),new o(e,t),new o(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var s=new is(this.currentPoint.clone(),new o(e,t),new o(n,r),new o(i,a));this.curves.push(s),this.currentPoint.set(i,a)},splineThru:function(e){var t=new ls([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+u,t+c,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var u=new Xa(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return hs.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=hs.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return hs.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ps.prototype=Object.assign(Object.create(fs.prototype),{constructor:ps,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){fs.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=fs.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){fs.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new fs).fromJSON(r))}return this}}),ms.prototype=Object.assign(Object.create(J.prototype),{constructor:ms,isLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ys.prototype=Object.assign(Object.create(ms.prototype),{constructor:ys,isHemisphereLight:!0,copy:function(e){return ms.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(vs.prototype,{_projScreenMatrix:new R,_lightPositionWorld:new h,_lookTarget:new h,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),gs.prototype=Object.assign(Object.create(vs.prototype),{constructor:gs,isSpotLightShadow:!0,updateMatrices:function(e,t,n){var r=this.camera,o=2*i.RAD2DEG*e.angle,a=this.mapSize.width/this.mapSize.height,s=e.distance||r.far;o===r.fov&&a===r.aspect&&s===r.far||(r.fov=o,r.aspect=a,r.far=s,r.updateProjectionMatrix()),vs.prototype.updateMatrices.call(this,e,t,n)}}),_s.prototype=Object.assign(Object.create(ms.prototype),{constructor:_s,isSpotLight:!0,copy:function(e){return ms.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),bs.prototype=Object.assign(Object.create(vs.prototype),{constructor:bs,isPointLightShadow:!0,updateMatrices:function(e,t,n){var r=this.camera,i=this.matrix,o=this._lightPositionWorld,a=this._lookTarget,s=this._projScreenMatrix;o.setFromMatrixPosition(e.matrixWorld),r.position.copy(o),a.copy(r.position),a.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(a),r.updateMatrixWorld(),i.makeTranslation(-o.x,-o.y,-o.z),s.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromMatrix(s)}}),xs.prototype=Object.assign(Object.create(ms.prototype),{constructor:xs,isPointLight:!0,copy:function(e){return ms.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ms.prototype=Object.assign(Object.create(Gt.prototype),{constructor:Ms,isOrthographicCamera:!0,copy:function(e,t){return Gt.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/u))+l*(this.view.width/u),s=(a-=d*(this.view.offsetY/c))-d*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Cs.prototype=Object.assign(Object.create(vs.prototype),{constructor:Cs,isDirectionalLightShadow:!0,updateMatrices:function(e,t,n){vs.prototype.updateMatrices.call(this,e,t,n)}}),ws.prototype=Object.assign(Object.create(ms.prototype),{constructor:ws,isDirectionalLight:!0,copy:function(e){return ms.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ss.prototype=Object.assign(Object.create(ms.prototype),{constructor:Ss,isAmbientLight:!0}),Ts.prototype=Object.assign(Object.create(ms.prototype),{constructor:Ts,isRectAreaLight:!0,copy:function(e){return ms.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ms.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Ns.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Ns,load:function(e,t,n,r){var i=this,o=new Fa(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new ga[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new Ie).setHex(a.value);break;case"v2":r.uniforms[i].value=(new o).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new h).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new b).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new y).fromArray(a.value);case"m4":r.uniforms[i].value=(new R).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var u=e.normalScale;!1===Array.isArray(u)&&(u=[u,u]),r.normalScale=(new o).fromArray(u)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new o).fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});var Es={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function As(){ut.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Rs(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ve.call(this,e,t,n),this.meshPerAttribute=r||1}function Ps(e){Ua.call(this,e)}As.prototype=Object.assign(Object.create(ut.prototype),{constructor:As,isInstancedBufferGeometry:!0,copy:function(e){return ut.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=ut.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),Rs.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Rs,isInstancedBufferAttribute:!0,copy:function(e){return Ve.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Ve.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Ps.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Ps,load:function(e,t,n,r){var i=this,o=new Fa(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new As:new ut,n=e.data.index;if(void 0!==n){var r=new Ls[n.type](n.array);t.setIndex(new Ve(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(r=new Ls[a.type](a.array),new(a.isInstancedBufferAttribute?Rs:Ve)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.addAttribute(o,s)}var u=e.data.morphAttributes;if(u)for(var o in u){for(var c=u[o],l=[],d=0,f=c.length;d<f;d++)a=c[d],s=new Ve(r=new Ls[a.type](a.array),a.itemSize,a.normalized),void 0!==a.name&&(s.name=a.name),l.push(s);t.morphAttributes[o]=l}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){d=0;for(var m=p.length;d!==m;++d){var y=p[d];t.addGroup(y.start,y.count,y.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new h;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new he(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var Ls={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Os(e){Ua.call(this,e)}Os.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Os,load:function(e,t,n,r){var i=this,o=""===this.path?Es.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Fa(i.manager);a.setPath(this.path),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new ps).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Ps,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new sa[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new sa[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new sa[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new sa[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new sa[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new sa[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new sa[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new sa[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new sa[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new sa[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new sa[s.type]((new ds[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new sa[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new sa[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,d=s.shapes.length;l<d;l++){var h=t[s.shapes[l]];c.push(h)}a=new sa[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,d=s.shapes.length;l<d;l++)h=t[s.shapes[l]],c.push(h);var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new ds[f.type]).fromJSON(f)),a=new sa[s.type](c,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":"THREE"in u&&"LegacyJSONLoader"in THREE?a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Ns;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),u.push(n[l.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=La.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new Va(new Ia(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],c=u.url;if(Array.isArray(c)){r[u.uuid]=[];for(var l=0,d=c.length;l<d;l++){var h=c[l],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;r[u.uuid].push(i(f))}}else f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url,r[u.uuid]=i(f)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new vn(t[s.image]):new _(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Is)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Ds),a.wrapT=n(s.wrap[1],Ds)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Us)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Us)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new K,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new Ie(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new ei(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Qr(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new jt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Ms(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Ss(e.color,e.intensity);break;case"DirectionalLight":r=new ws(e.color,e.intensity);break;case"PointLight":r=new xs(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Ts(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new _s(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ys(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new xi(a,s):new Tt(a,s),void 0!==e.drawMode&&r.setDrawMode(e.drawMode);break;case"LOD":r=new bi;break;case"Line":r=new Li(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Di(i(e.geometry),o(e.material));break;case"LineSegments":r=new Ii(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new zi(i(e.geometry),o(e.material));break;case"Sprite":r=new yi(o(e.material));break;case"Group":r=new Hr;break;default:r=new J}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,c=0;c<u.length;c++)r.add(this.parseObject(u[c],t,n));if("LOD"===e.type)for(var l=e.levels,d=0;d<l.length;d++){var h=l[d],f=r.getObjectByProperty("uuid",h.object);void 0!==f&&r.addLevel(f,h.distance)}return r}});var ks,Is={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Ds={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Us={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};function Bs(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ua.call(this,e),this.options=void 0}function Fs(){this.type="ShapePath",this.color=new Ie,this.subPaths=[],this.currentPath=null}function Gs(e){this.type="Font",this.data=e}function js(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,c,l,d,h,f,p=new Fs;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),y=0,v=m.length;y<v;)switch(m[y++]){case"m":a=m[y++]*t+n,s=m[y++]*t+r,p.moveTo(a,s);break;case"l":a=m[y++]*t+n,s=m[y++]*t+r,p.lineTo(a,s);break;case"q":u=m[y++]*t+n,c=m[y++]*t+r,l=m[y++]*t+n,d=m[y++]*t+r,p.quadraticCurveTo(l,d,u,c);break;case"b":u=m[y++]*t+n,c=m[y++]*t+r,l=m[y++]*t+n,d=m[y++]*t+r,h=m[y++]*t+n,f=m[y++]*t+r,p.bezierCurveTo(l,d,h,f,u,c)}return{offsetX:o.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function zs(e){Ua.call(this,e)}Bs.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Bs,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ka.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(n){ka.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(Fs.prototype,{moveTo:function(e,t){this.currentPath=new fs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new ps;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],u=-u,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=c*(e.x-a.x)-u*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Do.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],(u=new ps).curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=e?!l:l;var d,h,f=[],p=[],m=[],y=0;p[y]=void 0,m[y]=[];for(var v=0,g=o.length;v<g;v++)a=i(d=(s=o[v]).getPoints()),(a=e?!a:a)?(!l&&p[y]&&y++,p[y]={s:new ps,p:d},p[y].s.curves=s.curves,l&&y++,m[y]=[]):m[y].push({h:s,p:d[0]});if(!p[0])return n(o);if(p.length>1){for(var _=!1,b=[],x=0,M=p.length;x<M;x++)f[x]=[];for(x=0,M=p.length;x<M;x++)for(var C=m[x],w=0;w<C.length;w++){for(var S=C[w],T=!0,N=0;N<p.length;N++)r(S.p,p[N].p)&&(x!==N&&b.push({froms:x,tos:N,hole:w}),T?(T=!1,f[N].push(S)):_=!0);T&&f[x].push(S)}b.length>0&&(_||(m=f))}v=0;for(var E=p.length;v<E;v++){u=p[v].s,c.push(u);for(var A=0,R=(h=m[v]).length;A<R;A++)u.holes.push(h[A].h)}return c}}),Object.assign(Gs.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=o;else{var d=js(l,i,s,u,n);s+=d.offsetX,a.push(d.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),zs.prototype=Object.assign(Object.create(Ua.prototype),{constructor:zs,load:function(e,t,n,r){var i=this,o=new Fa(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Gs(e)}});var Vs={getContext:function(){return void 0===ks&&(ks=new(u.AudioContext||u.webkitAudioContext)),ks},setContext:function(e){ks=e}};function Hs(e){Ua.call(this,e)}function Ws(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new h)}function qs(e,t){ms.call(this,void 0,t),this.sh=void 0!==e?e:new Ws}function Xs(e,t,n){qs.call(this,void 0,n);var r=(new Ie).set(e),i=(new Ie).set(t),o=new h(r.r,r.g,r.b),a=new h(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function Ys(e,t){qs.call(this,void 0,t);var n=(new Ie).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Hs.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Hs,load:function(e,t,n,r){var i=new Fa(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){var n=e.slice(0);Vs.getContext().decodeAudioData(n,(function(e){t(e)}))}),n,r)}}),Object.assign(Ws.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*r),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*n),t.addScale(o[4],n*r*1.092548),t.addScale(o[5],r*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],n*i*1.092548),t.addScale(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*r),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*r),t.addScale(o[5],.858086*r*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*n*i),t.addScale(o[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(Ws,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),qs.prototype=Object.assign(Object.create(ms.prototype),{constructor:qs,isLightProbe:!0,copy:function(e){return ms.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return ms.prototype.toJSON.call(this,e)}}),Xs.prototype=Object.assign(Object.create(qs.prototype),{constructor:Xs,isHemisphereLightProbe:!0,copy:function(e){return qs.prototype.copy.call(this,e),this},toJSON:function(e){return qs.prototype.toJSON.call(this,e)}}),Ys.prototype=Object.assign(Object.create(qs.prototype),{constructor:Ys,isAmbientLightProbe:!0,copy:function(e){return qs.prototype.copy.call(this,e),this},toJSON:function(e){return qs.prototype.toJSON.call(this,e)}});var Js=new R,Ks=new R;function $s(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Zs(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign($s.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,o=e.projectionMatrix.clone(),a=t.eyeSep/2,s=a*t.near/t.focus,u=t.near*Math.tan(i.DEG2RAD*t.fov*.5)/t.zoom;Ks.elements[12]=-a,Js.elements[12]=a,n=-u*t.aspect+s,r=u*t.aspect+s,o.elements[0]=2*t.near/(r-n),o.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(o),n=-u*t.aspect-s,r=u*t.aspect-s,o.elements[0]=2*t.near/(r-n),o.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(o)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ks),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Js)}}),Object.assign(Zs.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var Qs=new h,eu=new a,tu=new h,nu=new h;function ru(){J.call(this),this.type="AudioListener",this.context=Vs.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Zs}function iu(e){J.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}ru.prototype=Object.assign(Object.create(J.prototype),{constructor:ru,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){J.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qs,eu,tu),nu.set(0,0,-1).applyQuaternion(eu),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qs.x,r),t.positionY.linearRampToValueAtTime(Qs.y,r),t.positionZ.linearRampToValueAtTime(Qs.z,r),t.forwardX.linearRampToValueAtTime(nu.x,r),t.forwardY.linearRampToValueAtTime(nu.y,r),t.forwardZ.linearRampToValueAtTime(nu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Qs.x,Qs.y,Qs.z),t.setOrientation(nu.x,nu.y,nu.z,n.x,n.y,n.z)}}),iu.prototype=Object.assign(Object.create(J.prototype),{constructor:iu,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var ou=new h,au=new a,su=new h,uu=new h;function cu(e){iu.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function lu(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function du(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}cu.prototype=Object.assign(Object.create(iu.prototype),{constructor:cu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(J.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(ou,au,su),uu.set(0,0,1).applyQuaternion(au);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ou.x,n),t.positionY.linearRampToValueAtTime(ou.y,n),t.positionZ.linearRampToValueAtTime(ou.z,n),t.orientationX.linearRampToValueAtTime(uu.x,n),t.orientationY.linearRampToValueAtTime(uu.y,n),t.orientationZ.linearRampToValueAtTime(uu.z,n)}else t.setPosition(ou.x,ou.y,ou.z),t.setOrientation(uu.x,uu.y,uu.z)}}}),Object.assign(lu.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(du.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){a.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var hu=new RegExp("[\\[\\]\\.:\\/]","g"),fu="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",pu=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),mu=/(WCOD+)?/.source.replace("WCOD",fu),yu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),vu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),gu=new RegExp("^"+pu+mu+yu+vu+"$"),_u=["material","materials","bones"];function bu(e,t,n){var r=n||xu.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function xu(e,t,n){this.path=t,this.parsedPath=n||xu.parseTrackName(t),this.node=xu.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Mu(){this.uuid=i.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Cu(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:2400,endingEnd:2400},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function wu(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Su(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Tu(e,t,n){ti.call(this,e,t),this.meshPerAttribute=n||1}function Nu(e,t,n,r){this.ray=new be(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Eu(e,t){return e.distance-t.distance}function Au(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Au(i[o],t,n,!0)}function Ru(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Pu(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(bu.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(xu,{Composite:bu,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new xu.Composite(e,t,n):new xu(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(hu,"")},parseTrackName:function(e){var t=gu.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==_u.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign(xu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=xu.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(xu.prototype,{_getValue_unbound:xu.prototype.getValue,_setValue_unbound:xu.prototype.setValue}),Object.assign(Mu.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var d=arguments[c],h=d.uuid,f=r[h];if(void 0===f){f=t++,r[h]=f,e.push(d);for(var p=0,m=s;p!==m;++p)a[p].push(new xu(d,i[p],o[p]))}else if(f<n){u=e[f];var y=--n,v=e[y];for(r[v.uuid]=f,e[f]=v,r[h]=y,e[y]=d,p=0,m=s;p!==m;++p){var g=a[p],_=g[y],b=g[f];g[f]=_,void 0===b&&(b=new xu(d,i[p],o[p])),g[y]=b}}else e[f]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=t){var l=t++,d=e[l];n[d.uuid]=c,e[c]=d,n[u]=l,e[l]=s;for(var h=0,f=i;h!==f;++h){var p=r[h],m=p[l],y=p[c];p[c]=m,p[l]=y}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var d=--n,h=e[d],f=e[g=--t];r[h.uuid]=l,e[l]=h,r[f.uuid]=d,e[d]=f,e.pop();for(var p=0,m=o;p!==m;++p){var y=(_=i[p])[d],v=_[g];_[l]=y,_[d]=v,_.pop()}}else{var g;for(r[(f=e[g=--t]).uuid]=l,e[l]=f,e.pop(),p=0,m=o;p!==m;++p){var _;(_=i[p])[l]=_[g],_.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var d=c,h=s.length;d!==h;++d){var f=s[d];l[d]=new xu(f,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Cu.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,d=u.length;l!==d;++l)u[l].evaluate(a),c[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1==(1&i)?n-t:t;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1==(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),wu.prototype=Object.assign(Object.create(t.prototype),{constructor:wu,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var d=r[l],h=d.name,f=c[h];if(void 0!==f)o[l]=f;else{if(void 0!==(f=o[l])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;++(f=new du(xu.create(n,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,s,h),o[l]=f}a[l].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Ma(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?La.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new Cu(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?La.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(r,e,i,o);var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Su.prototype.clone=function(){return new Su(void 0===this.value.clone?this.value:this.value.clone())},Tu.prototype=Object.assign(Object.create(ti.prototype),{constructor:Tu,isInstancedInterleavedBuffer:!0,copy:function(e){return ti.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Nu.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Au(e,this,r,t),r.sort(Eu),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Au(e[i],this,r,t);return r.sort(Eu),r}}),Object.assign(Ru.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(i.clamp(t/this.radius,-1,1))),this}}),Object.assign(Pu.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var Lu=new o;function Ou(e,t){this.min=void 0!==e?e:new o(1/0,1/0),this.max=void 0!==t?t:new o(-1/0,-1/0)}Object.assign(Ou.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Lu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new o),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new o),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new o),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new o),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Lu.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var ku=new h,Iu=new h;function Du(e,t){this.start=void 0!==e?e:new h,this.end=void 0!==t?t:new h}function Uu(e){J.call(this),this.material=e,this.render=function(){}}Object.assign(Du.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new h),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new h),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new h),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){ku.subVectors(e,this.start),Iu.subVectors(this.end,this.start);var n=Iu.dot(Iu),r=Iu.dot(ku)/n;return t&&(r=i.clamp(r,0,1)),r},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new h),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Uu.prototype=Object.create(J.prototype),Uu.prototype.constructor=Uu,Uu.prototype.isImmediateRenderObject=!0;var Bu=new h,Fu=new h,Gu=new y,ju=["a","b","c"];function zu(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new ut,c=new $e(2*a*3,3);u.addAttribute("position",c),Ii.call(this,u,new Ti({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}zu.prototype=Object.create(Ii.prototype),zu.prototype.constructor=zu,zu.prototype.update=function(){this.object.updateMatrixWorld(!0),Gu.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,i=n.faces,o=0,a=0,s=i.length;a<s;a++)for(var u=i[a],c=0,l=u.vertexNormals.length;c<l;c++){var d=r[u[ju[c]]],h=u.vertexNormals[c];Bu.copy(d).applyMatrix4(e),Fu.copy(h).applyMatrix3(Gu).normalize().multiplyScalar(this.size).add(Bu),t.setXYZ(o,Bu.x,Bu.y,Bu.z),o+=1,t.setXYZ(o,Fu.x,Fu.y,Fu.z),o+=1}else if(n&&n.isBufferGeometry){var f=n.attributes.position,p=n.attributes.normal;for(o=0,c=0,l=f.count;c<l;c++)Bu.set(f.getX(c),f.getY(c),f.getZ(c)).applyMatrix4(e),Fu.set(p.getX(c),p.getY(c),p.getZ(c)),Fu.applyMatrix3(Gu).normalize().multiplyScalar(this.size).add(Bu),t.setXYZ(o,Bu.x,Bu.y,Bu.z),o+=1,t.setXYZ(o,Fu.x,Fu.y,Fu.z),o+=1}t.needsUpdate=!0};var Vu=new h;function Hu(e,t){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ut,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new $e(r,3));var u=new Ti({fog:!1});this.cone=new Ii(n,u),this.add(this.cone),this.update()}Hu.prototype=Object.create(J.prototype),Hu.prototype.constructor=Hu,Hu.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Hu.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Vu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Vu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Wu=new h,qu=new R,Xu=new R;function Yu(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new ut,r=[],i=[],o=new Ie(0,0,1),a=new Ie(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new $e(r,3)),n.addAttribute("color",new $e(i,3));var c=new Ti({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});Ii.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Ju(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new qo(t,4,2),i=new ze({wireframe:!0,fog:!1});Tt.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ku(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new ut;n.addAttribute("position",new $e([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var r=new Ti({fog:!1});Li.call(this,n,r);var i=new ut;i.addAttribute("position",new $e([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Tt(i,new ze({side:1,fog:!1}))),this.update()}Yu.prototype=Object.create(Ii.prototype),Yu.prototype.constructor=Yu,Yu.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Xu.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(qu.multiplyMatrices(Xu,a.matrixWorld),Wu.setFromMatrixPosition(qu),r.setXYZ(o,Wu.x,Wu.y,Wu.z),qu.multiplyMatrices(Xu,a.parent.matrixWorld),Wu.setFromMatrixPosition(qu),r.setXYZ(o+1,Wu.x,Wu.y,Wu.z),o+=2)}n.getAttribute("position").needsUpdate=!0,J.prototype.updateMatrixWorld.call(this,e)},Ju.prototype=Object.create(Tt.prototype),Ju.prototype.constructor=Ju,Ju.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ju.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Ku.prototype=Object.create(Li.prototype),Ku.prototype.constructor=Ku,Ku.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Ku.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var $u=new h,Zu=new Ie,Qu=new Ie;function ec(e,t,n){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new no(t);r.rotateY(.5*Math.PI),this.material=new ze({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new Ve(o,3)),this.add(new Tt(r,this.material)),this.update()}function tc(e,t){this.lightProbe=e,this.size=t;var n={GAMMA_OUTPUT:""},r=new Ft({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new qo(1,32,16);Tt.call(this,i,r),this.onBeforeRender()}function nc(e,t,n,r){e=e||10,t=t||10,n=new Ie(void 0!==n?n:4473924),r=new Ie(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],c=0,l=0,d=-a;c<=t;c++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);var h=c===i?n:r;h.toArray(u,l),l+=3,h.toArray(u,l),l+=3,h.toArray(u,l),l+=3,h.toArray(u,l),l+=3}var f=new ut;f.addAttribute("position",new $e(s,3)),f.addAttribute("color",new $e(u,3));var p=new Ti({vertexColors:2});Ii.call(this,f,p)}function rc(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new Ie(void 0!==i?i:4473924),o=new Ie(void 0!==o?o:8947848);var a,s,u,c,l,d,h,f=[],p=[];for(c=0;c<=t;c++)u=c/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,f.push(0,0,0),f.push(a,0,s),h=1&c?i:o,p.push(h.r,h.g,h.b),p.push(h.r,h.g,h.b);for(c=0;c<=n;c++)for(h=1&c?i:o,d=e-e/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*d,s=Math.cos(u)*d,f.push(a,0,s),p.push(h.r,h.g,h.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*d,s=Math.cos(u)*d,f.push(a,0,s),p.push(h.r,h.g,h.b);var m=new ut;m.addAttribute("position",new $e(f,3)),m.addAttribute("color",new $e(p,3));var y=new Ti({vertexColors:2});Ii.call(this,m,y)}function ic(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new ut,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.addAttribute("position",new Ve(a,3));var s=new Ti({color:65280}),u=new Ti({color:16776960});Li.call(this,i,[u,s]),this.update()}ec.prototype=Object.create(J.prototype),ec.prototype.constructor=ec,ec.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ec.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Zu.copy(this.light.color),Qu.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Zu:Qu;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt($u.setFromMatrixPosition(this.light.matrixWorld).negate())},tc.prototype=Object.create(Tt.prototype),tc.prototype.constructor=tc,tc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},tc.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},nc.prototype=Object.assign(Object.create(Ii.prototype),{constructor:nc,copy:function(e){return Ii.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),rc.prototype=Object.create(Ii.prototype),rc.prototype.constructor=rc,ic.prototype=Object.create(Li.prototype),ic.prototype.constructor=ic,ic.prototype.update=function(){var e,t,n=this.audio,r=this.range,o=this.divisionsInnerAngle,a=this.divisionsOuterAngle,s=i.degToRad(n.panner.coneInnerAngle),u=i.degToRad(n.panner.coneOuterAngle),c=s/2,l=u/2,d=0,h=0,f=this.geometry,p=f.attributes.position;function m(n,i,o,a){var s=(i-n)/o;for(p.setXYZ(d,0,0,0),h++,e=n;e<i;e+=s)t=d+h,p.setXYZ(t,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(t+1,Math.sin(Math.min(e+s,i))*r,0,Math.cos(Math.min(e+s,i))*r),p.setXYZ(t+2,0,0,0),h+=3;f.addGroup(d,h,a),d+=h,h=0}f.clearGroups(),m(-l,-c,a,0),m(-c,c,o,1),m(c,l,a,0),p.needsUpdate=!0,s===u&&(this.material[0].visible=!1)},ic.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var oc=new h,ac=new h,sc=new y;function uc(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new ut,c=new $e(2*a*3,3);u.addAttribute("position",c),Ii.call(this,u,new Ti({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}uc.prototype=Object.create(Ii.prototype),uc.prototype.constructor=uc,uc.prototype.update=function(){this.object.updateMatrixWorld(!0),sc.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,r=n.vertices,i=n.faces,o=0,a=0,s=i.length;a<s;a++){var u=i[a],c=u.normal;oc.copy(r[u.a]).add(r[u.b]).add(r[u.c]).divideScalar(3).applyMatrix4(e),ac.copy(c).applyMatrix3(sc).normalize().multiplyScalar(this.size).add(oc),t.setXYZ(o,oc.x,oc.y,oc.z),o+=1,t.setXYZ(o,ac.x,ac.y,ac.z),o+=1}t.needsUpdate=!0};var cc=new h,lc=new h,dc=new h;function hc(e,t,n){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new ut;r.addAttribute("position",new $e([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Ti({fog:!1});this.lightPlane=new Li(r,i),this.add(this.lightPlane),(r=new ut).addAttribute("position",new $e([0,0,0,0,0,1],3)),this.targetLine=new Li(r,i),this.add(this.targetLine),this.update()}hc.prototype=Object.create(J.prototype),hc.prototype.constructor=hc,hc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},hc.prototype.update=function(){cc.setFromMatrixPosition(this.light.matrixWorld),lc.setFromMatrixPosition(this.light.target.matrixWorld),dc.subVectors(lc,cc),this.lightPlane.lookAt(lc),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lc),this.targetLine.scale.z=dc.length()};var fc=new h,pc=new Gt;function mc(e){var t=new ut,n=new Ti({color:16777215,vertexColors:1}),r=[],i=[],o={},a=new Ie(16755200),s=new Ie(16711680),u=new Ie(43775),c=new Ie(16777215),l=new Ie(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",u),d("u2","u3",u),d("u3","u1",u),d("c","t",c),d("p","c",l),d("cn1","cn2",l),d("cn3","cn4",l),d("cf1","cf2",l),d("cf3","cf4",l),t.addAttribute("position",new $e(r,3)),t.addAttribute("color",new $e(i,3)),Ii.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function yc(e,t,n,r,i,o,a){fc.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],fc.x,fc.y,fc.z)}mc.prototype=Object.create(Ii.prototype),mc.prototype.constructor=mc,mc.prototype.update=function(){var e=this.geometry,t=this.pointMap;pc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),yc("c",t,e,pc,0,0,-1),yc("t",t,e,pc,0,0,1),yc("n1",t,e,pc,-1,-1,-1),yc("n2",t,e,pc,1,-1,-1),yc("n3",t,e,pc,-1,1,-1),yc("n4",t,e,pc,1,1,-1),yc("f1",t,e,pc,-1,-1,1),yc("f2",t,e,pc,1,-1,1),yc("f3",t,e,pc,-1,1,1),yc("f4",t,e,pc,1,1,1),yc("u1",t,e,pc,.7,1.1,-1),yc("u2",t,e,pc,-.7,1.1,-1),yc("u3",t,e,pc,0,2,-1),yc("cf1",t,e,pc,-1,0,1),yc("cf2",t,e,pc,1,0,1),yc("cf3",t,e,pc,0,-1,1),yc("cf4",t,e,pc,0,1,1),yc("cn1",t,e,pc,-1,0,-1),yc("cn2",t,e,pc,1,0,-1),yc("cn3",t,e,pc,0,-1,-1),yc("cn4",t,e,pc,0,1,-1),e.getAttribute("position").needsUpdate=!0};var vc=new ce;function gc(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new ut;i.setIndex(new Ve(n,1)),i.addAttribute("position",new Ve(r,3)),Ii.call(this,i,new Ti({color:t})),this.matrixAutoUpdate=!1,this.update()}function _c(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ut;r.setIndex(new Ve(n,1)),r.addAttribute("position",new $e([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ii.call(this,r,new Ti({color:t})),this.geometry.computeBoundingSphere()}function bc(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new ut;i.addAttribute("position",new $e([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Li.call(this,i,new Ti({color:r}));var o=new ut;o.addAttribute("position",new $e([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Tt(o,new ze({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}gc.prototype=Object.create(Ii.prototype),gc.prototype.constructor=gc,gc.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&vc.setFromObject(this.object),!vc.isEmpty()){var t=vc.min,n=vc.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},gc.prototype.setFromObject=function(e){return this.object=e,this.update(),this},gc.prototype.copy=function(e){return Ii.prototype.copy.call(this,e),this.object=e.object,this},gc.prototype.clone=function(){return(new this.constructor).copy(this)},_c.prototype=Object.create(Ii.prototype),_c.prototype.constructor=_c,_c.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),J.prototype.updateMatrixWorld.call(this,e))},bc.prototype=Object.create(Li.prototype),bc.prototype.constructor=bc,bc.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),J.prototype.updateMatrixWorld.call(this,e)};var xc,Mc,Cc=new h;function wc(e,t,n,r,i,o){J.call(this),void 0===e&&(e=new h(0,0,1)),void 0===t&&(t=new h(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===xc&&((xc=new ut).addAttribute("position",new $e([0,0,0,0,1,0],3)),(Mc=new na(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Li(xc,new Ti({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Tt(Mc,new ze({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Sc(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new ut;n.addAttribute("position",new $e(t,3)),n.addAttribute("color",new $e([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Ti({vertexColors:2});Ii.call(this,n,r)}function Tc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),es.call(this,e),this.type="catmullrom",this.closed=!0}function Nc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),es.call(this,e),this.type="catmullrom"}function Ec(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),es.call(this,e),this.type="catmullrom"}wc.prototype=Object.create(J.prototype),wc.prototype.constructor=wc,wc.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Cc.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Cc,t)}},wc.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},wc.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},wc.prototype.copy=function(e){return J.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},wc.prototype.clone=function(){return(new this.constructor).copy(this)},Sc.prototype=Object.create(Ii.prototype),Sc.prototype.constructor=Sc,qa.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(qa.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(hs.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Ot,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new h(i.x,i.y,i.z||0))}return t}}),Object.assign(fs.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Tc.prototype=Object.create(es.prototype),Nc.prototype=Object.create(es.prototype),Ec.prototype=Object.create(es.prototype),Object.assign(Ec.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),nc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Yu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ua.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Es.extractUrlBase(e)}}),Object.assign(Os.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Ou.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ce.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Du.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(i,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),i.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),i.ceilPowerOfTwo(e)}}),Object.assign(y.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(R.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new h).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),Yt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},a.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(be.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Pe.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Pe,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Pe.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Pe.getNormal(e,t,n,r)}}),Object.assign(ps.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new $o(this,e)}}),Object.assign(o.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(h.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(b.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ot.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(J.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(J.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(bi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(wi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),xi.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(qa.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),jt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ms.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ve.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(ut.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ut.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Go.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Su.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(je.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ie}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(ha.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ft.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Zr.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Zr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Gr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Vt.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(x.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Kr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),iu.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Hs).load(e,(function(e){t.setBuffer(e)})),this},lu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},zt.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Ac={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};v.crossOrigin=void 0,v.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Wa;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},v.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ha;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},v.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},v.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Rc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.ACESFilmicToneMapping=5,e.AddEquation=100,e.AddOperation=2,e.AdditiveBlending=2,e.AlphaFormat=1021,e.AlwaysDepth=1,e.AlwaysStencilFunc=519,e.AmbientLight=Ss,e.AmbientLightProbe=Ys,e.AnimationClip=La,e.AnimationLoader=Ga,e.AnimationMixer=wu,e.AnimationObjectGroup=Mu,e.AnimationUtils=_a,e.ArcCurve=Ya,e.ArrayCamera=Wr,e.ArrowHelper=wc,e.Audio=iu,e.AudioAnalyser=lu,e.AudioContext=Vs,e.AudioListener=ru,e.AudioLoader=Hs,e.AxesHelper=Sc,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Sc(e)},e.BackSide=1,e.BasicDepthPacking=3200,e.BasicShadowMap=0,e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new za(e)},e.Bone=Si,e.BooleanKeyframeTrack=Sa,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new gc(e,t)},e.Box2=Ou,e.Box3=ce,e.Box3Helper=_c,e.BoxBufferGeometry=It,e.BoxGeometry=kt,e.BoxHelper=gc,e.BufferAttribute=Ve,e.BufferGeometry=ut,e.BufferGeometryLoader=Ps,e.ByteType=1010,e.Cache=ka,e.Camera=Gt,e.CameraHelper=mc,e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.CanvasTexture=qi,e.CatmullRomCurve3=es,e.CineonToneMapping=4,e.CircleBufferGeometry=aa,e.CircleGeometry=oa,e.ClampToEdgeWrapping=1001,e.Clock=Zs,e.ClosedSplineCurve3=Tc,e.Color=Ie,e.ColorKeyframeTrack=Ta,e.CompressedTexture=Wi,e.CompressedTextureLoader=ja,e.ConeBufferGeometry=ia,e.ConeGeometry=ra,e.CubeCamera=zt,e.CubeGeometry=kt,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.CubeTexture=vn,e.CubeTextureLoader=Ha,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.CubicBezierCurve=is,e.CubicBezierCurve3=os,e.CubicInterpolant=xa,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.CullFaceNone=0,e.Curve=qa,e.CurvePath=hs,e.CustomBlending=5,e.CylinderBufferGeometry=na,e.CylinderGeometry=ta,e.Cylindrical=Pu,e.DataTexture=Ht,e.DataTexture2DArray=gn,e.DataTexture3D=_n,e.DataTextureLoader=za,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=Da,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.DepthTexture=Xi,e.DirectionalLight=ws,e.DirectionalLightHelper=hc,e.DirectionalLightShadow=Cs,e.DiscreteInterpolant=Ca,e.DodecahedronBufferGeometry=ao,e.DodecahedronGeometry=oo,e.DoubleSide=2,e.DstAlphaFactor=206,e.DstColorFactor=208,e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Ve(e,t).setDynamic(!0)},e.EdgesGeometry=ea,e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ii(new ea(e.geometry),new Ti({color:void 0!==t?t:16777215}))},e.EllipseCurve=Xa,e.EqualDepth=4,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.Euler=O,e.EventDispatcher=t,e.ExtrudeBufferGeometry=Go,e.ExtrudeGeometry=Fo,e.Face3=Fe,e.Face4=function(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Fe(e,t,n,i,o,a)},e.FaceColors=1,e.FaceNormalsHelper=uc,e.FileLoader=Fa,e.FlatShading=1,e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new $e(e,t)},e.Float32BufferAttribute=$e,e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ze(e,t)},e.Float64BufferAttribute=Ze,e.FloatType=1015,e.Fog=ei,e.FogExp2=Qr,e.Font=Gs,e.FontLoader=zs,e.FrontFaceDirectionCCW=1,e.FrontFaceDirectionCW=0,e.FrontSide=0,e.Frustum=$t,e.GammaEncoding=3007,e.Geometry=Ot,e.GeometryUtils=Ac,e.GreaterDepth=6,e.GreaterEqualDepth=5,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=nc,e.Group=Hr,e.HalfFloatType=1016,e.HemisphereLight=ys,e.HemisphereLightHelper=ec,e.HemisphereLightProbe=Xs,e.IcosahedronBufferGeometry=io,e.IcosahedronGeometry=ro,e.ImageBitmapLoader=Bs,e.ImageLoader=Va,e.ImageUtils=v,e.ImmediateRenderObject=Uu,e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=Rs,e.InstancedBufferGeometry=As,e.InstancedInterleavedBuffer=Tu,e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Xe(e,t)},e.Int16BufferAttribute=Xe,e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Je(e,t)},e.Int32BufferAttribute=Je,e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new He(e,t)},e.Int8BufferAttribute=He,e.IntType=1013,e.InterleavedBuffer=ti,e.InterleavedBufferAttribute=ni,e.Interpolant=ba,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.InvertStencilOp=5386,e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.KeepStencilOp=7680,e.KeyframeTrack=wa,e.LOD=bi,e.LatheBufferGeometry=Ko,e.LatheGeometry=Jo,e.Layers=k,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},e.LessDepth=2,e.LessEqualDepth=3,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=ms,e.LightProbe=qs,e.LightProbeHelper=tc,e.LightShadow=vs,e.Line=Li,e.Line3=Du,e.LineBasicMaterial=Ti,e.LineCurve=as,e.LineCurve3=ss,e.LineDashedMaterial=va,e.LineLoop=Di,e.LinePieces=1,e.LineSegments=Ii,e.LineStrip=0,e.LinearEncoding=3e3,e.LinearFilter=1006,e.LinearInterpolant=Ma,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=1008,e.LinearMipmapNearestFilter=1007,e.LinearToneMapping=1,e.Loader=Ua,e.LoaderUtils=Es,e.LoadingManager=Ia,e.LogLuvEncoding=3003,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=1025,e.LuminanceFormat=1024,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=je,e.MaterialLoader=Ns,e.Math=i,e.Matrix3=y,e.Matrix4=R,e.MaxEquation=104,e.Mesh=Tt,e.MeshBasicMaterial=ze,e.MeshDepthMaterial=Br,e.MeshDistanceMaterial=Fr,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MeshLambertMaterial=ma,e.MeshMatcapMaterial=ya,e.MeshNormalMaterial=pa,e.MeshPhongMaterial=ha,e.MeshPhysicalMaterial=da,e.MeshStandardMaterial=la,e.MeshToonMaterial=fa,e.MinEquation=103,e.MirroredRepeatWrapping=1002,e.MixOperation=1,e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.MultiplyBlending=4,e.MultiplyOperation=0,e.NearestFilter=1003,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=1005,e.NearestMipmapNearestFilter=1004,e.NeverDepth=0,e.NeverStencilFunc=512,e.NoBlending=0,e.NoColors=0,e.NoToneMapping=0,e.NormalBlending=1,e.NotEqualDepth=7,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Na,e.Object3D=J,e.ObjectLoader=Os,e.ObjectSpaceNormalMap=1,e.OctahedronBufferGeometry=no,e.OctahedronGeometry=to,e.OneFactor=201,e.OneMinusDstAlphaFactor=207,e.OneMinusDstColorFactor=209,e.OneMinusSrcAlphaFactor=205,e.OneMinusSrcColorFactor=203,e.OrthographicCamera=Ms,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.ParametricBufferGeometry=Ki,e.ParametricGeometry=Ji,e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new yi(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ui(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new zi(e,t)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ui(e)},e.Path=fs,e.PerspectiveCamera=jt,e.Plane=Yt,e.PlaneBufferGeometry=on,e.PlaneGeometry=rn,e.PlaneHelper=bc,e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new zi(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ui(e)},e.PointLight=xs,e.PointLightHelper=Ju,e.Points=zi,e.PointsMaterial=Ui,e.PolarGridHelper=rc,e.PolyhedronBufferGeometry=Zi,e.PolyhedronGeometry=$i,e.PositionalAudio=cu,e.PositionalAudioHelper=ic,e.PropertyBinding=xu,e.PropertyMixer=du,e.QuadraticBezierCurve=us,e.QuadraticBezierCurve3=cs,e.Quaternion=a,e.QuaternionKeyframeTrack=Aa,e.QuaternionLinearInterpolant=Ea,e.REVISION="108",e.RGBADepthPacking=3201,e.RGBAFormat=1023,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGBDEncoding=3006,e.RGBEEncoding=3002,e.RGBEFormat=1023,e.RGBFormat=1022,e.RGBM16Encoding=3005,e.RGBM7Encoding=3004,e.RGB_ETC1_Format=36196,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_S3TC_DXT1_Format=33776,e.RawShaderMaterial=ca,e.Ray=be,e.Raycaster=Nu,e.RectAreaLight=Ts,e.RectAreaLightHelper=Ku,e.RedFormat=1028,e.ReinhardToneMapping=2,e.RepeatWrapping=1e3,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=102,e.RingBufferGeometry=Yo,e.RingGeometry=Xo,e.Scene=K,e.SceneUtils=Rc,e.ShaderChunk=Zt,e.ShaderLib=en,e.ShaderMaterial=Ft,e.ShadowMaterial=ua,e.Shape=ps,e.ShapeBufferGeometry=Zo,e.ShapeGeometry=$o,e.ShapePath=Fs,e.ShapeUtils=Do,e.ShortType=1011,e.Skeleton=wi,e.SkeletonHelper=Yu,e.SkinnedMesh=xi,e.SmoothShading=2,e.Sphere=he,e.SphereBufferGeometry=qo,e.SphereGeometry=Wo,e.Spherical=Ru,e.SphericalHarmonics3=Ws,e.SphericalReflectionMapping=305,e.Spline=Ec,e.SplineCurve=ls,e.SplineCurve3=Nc,e.SpotLight=_s,e.SpotLightHelper=Hu,e.SpotLightShadow=gs,e.Sprite=yi,e.SpriteMaterial=ri,e.SrcAlphaFactor=204,e.SrcAlphaSaturateFactor=210,e.SrcColorFactor=202,e.StereoCamera=$s,e.StringKeyframeTrack=Ra,e.SubtractEquation=101,e.SubtractiveBlending=3,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=0,e.TetrahedronBufferGeometry=eo,e.TetrahedronGeometry=Qi,e.TextBufferGeometry=Ho,e.TextGeometry=Vo,e.Texture=_,e.TextureLoader=Wa,e.TorusBufferGeometry=fo,e.TorusGeometry=ho,e.TorusKnotBufferGeometry=lo,e.TorusKnotGeometry=co,e.Triangle=Pe,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=0,e.TubeBufferGeometry=uo,e.TubeGeometry=so,e.UVMapping=300,e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ye(e,t)},e.Uint16BufferAttribute=Ye,e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ke(e,t)},e.Uint32BufferAttribute=Ke,e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new We(e,t)},e.Uint8BufferAttribute=We,e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new qe(e,t)},e.Uint8ClampedBufferAttribute=qe,e.Uncharted2ToneMapping=3,e.Uniform=Su,e.UniformsLib=Qt,e.UniformsUtils=Bt,e.UnsignedByteType=1009,e.UnsignedInt248Type=1020,e.UnsignedIntType=1014,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedShortType=1012,e.VSMShadowMap=3,e.Vector2=o,e.Vector3=h,e.Vector4=b,e.VectorKeyframeTrack=Pa,e.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new h(e,t,n)},e.VertexColors=2,e.VertexNormalsHelper=zu,e.VideoTexture=Hi,e.WebGLMultisampleRenderTarget=M,e.WebGLRenderTarget=x,e.WebGLRenderTargetCube=Vt,e.WebGLRenderer=Zr,e.WebGLUtils=Vr,e.WireframeGeometry=Yi,e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ii(new Yi(e.geometry),new Ti({color:void 0!==t?t:16777215}))},e.WrapAroundEnding=2402,e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Fa(e)},e.ZeroCurvatureEnding=2400,e.ZeroFactor=200,e.ZeroSlopeEnding=2401,e.ZeroStencilOp=0,e.sRGBEncoding=3001,Object.defineProperty(e,"__esModule",{value:!0})},"object"===D(p)&&void 0!==n?h(p):c(3)?(o=[t],i=h,a="function"===typeof i?i.apply(t,o):i,void 0!==a&&(e.exports=a)):h((d=d||self).THREE={}),p}L.UNSEND=0,L.OPENED=1,L.HEADERS_RECEIVED=2,L.LOADING=3,L.DONE=4}]))}).call(this,n(1)["default"])},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.registerGLTFLoader=o;var i=r(n(13));function o(e){e.GLTFLoader=function(){function t(t){this.manager=void 0!==t?t:e.DefaultLoadingManager,this.dracoLoader=null,this.ddsLoader=null}function n(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}t.prototype={constructor:t,crossOrigin:"anonymous",load:function(t,n,r,i){var o,a=this;o=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:e.LoaderUtils.extractUrlBase(t),a.manager.itemStart(t);var s=function(e){i?i(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},u=new e.FileLoader(a.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&u.setWithCredentials(!0),u.load(t,(function(e){try{a.parse(e,o,(function(e){n(e),a.manager.itemEnd(t)}),s)}catch(r){s(r)}}),r,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(t,n,i,c){var l,m={};if("string"===typeof t)l=t;else{var y=e.LoaderUtils.decodeText(new Uint8Array(t,0,4));if(y===u){try{m[r.KHR_BINARY_GLTF]=new d(t)}catch(M){return void(c&&c(M))}l=m[r.KHR_BINARY_GLTF].content}else l=e.LoaderUtils.decodeText(new Uint8Array(t))}var v=JSON.parse(l);if(void 0===v.asset||v.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(v.extensionsUsed)for(var g=0;g<v.extensionsUsed.length;++g){var _=v.extensionsUsed[g],b=v.extensionsRequired||[];switch(_){case r.KHR_LIGHTS_PUNCTUAL:m[_]=new a(v);break;case r.KHR_MATERIALS_UNLIT:m[_]=new s;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[_]=new p;break;case r.KHR_DRACO_MESH_COMPRESSION:m[_]=new h(v,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:m[r.MSFT_TEXTURE_DDS]=new o(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:m[r.KHR_TEXTURE_TRANSFORM]=new f;break;default:b.indexOf(_)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}var x=new D(v,m,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});x.parse(i,c)}}};var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function o(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function a(e){this.name=r.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function s(){this.name=r.KHR_MATERIALS_UNLIT}a.prototype.loadLight=function(t){var n,r=this.lightDefs[t],i=new e.Color(16777215);void 0!==r.color&&i.fromArray(r.color);var o=void 0!==r.range?r.range:0;switch(r.type){case"directional":n=new e.DirectionalLight(i),n.target.position.set(0,0,-1),n.add(n.target);break;case"point":n=new e.PointLight(i),n.distance=o;break;case"spot":n=new e.SpotLight(i),n.distance=o,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,n.angle=r.spot.outerConeAngle,n.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,n.target.position.set(0,0,-1),n.add(n.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+r.type+'".')}return n.position.set(0,0,0),n.decay=2,void 0!==r.intensity&&(n.intensity=r.intensity),n.name=r.name||"light_"+t,Promise.resolve(n)},s.prototype.getMaterialType=function(){return e.MeshBasicMaterial},s.prototype.extendParams=function(t,n,r){var i=[];t.color=new e.Color(1,1,1),t.opacity=1;var o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(r.assignTexture(t,"map",o.baseColorTexture))}return Promise.all(i)};var u="glTF",c=12,l={JSON:1313821514,BIN:5130562};function d(t){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,c);if(this.header={magic:e.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==u)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");var i=new DataView(t,c),o=0;while(o<i.byteLength){var a=i.getUint32(o,!0);o+=4;var s=i.getUint32(o,!0);if(o+=4,s===l.JSON){var d=new Uint8Array(t,c+o,a);this.content=e.LoaderUtils.decodeText(d)}else if(s===l.BIN){var h=c+o;this.body=t.slice(h,h+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function f(){this.name=r.KHR_TEXTURE_TRANSFORM}function p(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return e.ShaderMaterial},extendParams:function(t,n,r){var i=n.extensions[this.name],o=e.ShaderLib["standard"],a=e.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),d=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",d);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new e.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},t.vertexShader=o.vertexShader,t.fragmentShader=h,t.uniforms=a,t.defines={STANDARD:""},t.color=new e.Color(1,1,1),t.opacity=1;var f=[];if(Array.isArray(i.diffuseFactor)){var p=i.diffuseFactor;t.color.fromArray(p),t.opacity=p[3]}if(void 0!==i.diffuseTexture&&f.push(r.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new e.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new e.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var m=i.specularGlossinessTexture;f.push(r.assignTexture(t,"glossinessMap",m)),f.push(r.assignTexture(t,"specularMap",m))}return Promise.all(f)},createMaterial:function(t){var n=new e.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return n.isGLTFSpecularGlossinessMaterial=!0,n.color=t.color,n.map=void 0===t.map?null:t.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=void 0===t.aoMap?null:t.aoMap,n.aoMapIntensity=1,n.emissive=t.emissive,n.emissiveIntensity=1,n.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,n.bumpMap=void 0===t.bumpMap?null:t.bumpMap,n.bumpScale=1,n.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(n.normalScale=t.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=void 0===t.specularMap?null:t.specularMap,n.specular=t.specular,n.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,n.glossiness=t.glossiness,n.alphaMap=null,n.envMap=void 0===t.envMap?null:t.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n.extensions.derivatives=!0,n},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++){var o=e[n[r]];t[n[r]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,n,r,i){if(!0===i.isGLTFSpecularGlossinessMaterial){var o,a=i.uniforms,s=i.defines;a.opacity.value=i.opacity,a.diffuse.value.copy(i.color),a.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),a.map.value=i.map,a.specularMap.value=i.specularMap,a.alphaMap.value=i.alphaMap,a.lightMap.value=i.lightMap,a.lightMapIntensity.value=i.lightMapIntensity,a.aoMap.value=i.aoMap,a.aoMapIntensity.value=i.aoMapIntensity,i.map?o=i.map:i.specularMap?o=i.specularMap:i.displacementMap?o=i.displacementMap:i.normalMap?o=i.normalMap:i.bumpMap?o=i.bumpMap:i.glossinessMap?o=i.glossinessMap:i.alphaMap?o=i.alphaMap:i.emissiveMap&&(o=i.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),a.uvTransform.value.copy(o.matrix)),i.envMap&&(a.envMap.value=i.envMap,a.envMapIntensity.value=i.envMapIntensity,a.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,a.reflectivity.value=i.reflectivity,a.refractionRatio.value=i.refractionRatio,a.maxMipLevel.value=e.properties.get(i.envMap).__maxMipLevel),a.specular.value.copy(i.specular),a.glossiness.value=i.glossiness,a.glossinessMap.value=i.glossinessMap,a.emissiveMap.value=i.emissiveMap,a.bumpMap.value=i.bumpMap,a.normalMap.value=i.normalMap,a.displacementMap.value=i.displacementMap,a.displacementScale.value=i.displacementScale,a.displacementBias.value=i.displacementBias,null!==a.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function m(t,n,r,i){e.Interpolant.call(this,t,n,r,i)}h.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var c in o){var l=M[c]||c.toLowerCase();a[l]=o[c]}for(c in e.attributes){l=M[c]||c.toLowerCase();if(void 0!==o[c]){var d=n.accessors[e.attributes[c]],h=g[d.componentType];u[l]=h,s[l]=!0===d.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),a,u)}))}))},f.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},m.prototype=Object.create(e.Interpolant.prototype),m.prototype.constructor=m,m.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},m.prototype.beforeStart_=m.prototype.copySampleValue_,m.prototype.afterEnd_=m.prototype.copySampleValue_,m.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,c=r-t,l=(n-t)/c,d=l*l,h=d*l,f=e*u,p=f-u,m=-2*h+3*d,y=h-d,v=1-m,g=y-d+l,_=0;_!==a;_++){var b=o[p+_+a],x=o[p+_+s]*c,M=o[f+_+a],C=o[f+_]*c;i[_]=v*b+g*x+m*M+y*C}return i};var y,v={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},g={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_={9728:e.NearestFilter,9729:e.LinearFilter,9984:e.NearestMipmapNearestFilter,9985:e.LinearMipmapNearestFilter,9986:e.NearestMipmapLinearFilter,9987:e.LinearMipmapLinearFilter},b={33071:e.ClampToEdgeWrapping,33648:e.MirroredRepeatWrapping,10497:e.RepeatWrapping},x={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},M={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},C={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},w={CUBICSPLINE:void 0,LINEAR:e.InterpolateLinear,STEP:e.InterpolateDiscrete},S={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},T={"image/png":e.RGBAFormat,"image/jpeg":e.RGBFormat};function N(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function E(){return y=y||new e.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e.FrontSide}),y}function A(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function R(e,t){void 0!==t.extras&&("object"===(0,i.default)(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function P(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a;o++){var s=t[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);var u=[],c=[];for(o=0,a=t.length;o<a;o++){s=t[o];if(r){var l=void 0!==s.POSITION?n.getDependency("accessor",s.POSITION):e.attributes.position;u.push(l)}if(i){l=void 0!==s.NORMAL?n.getDependency("accessor",s.NORMAL):e.attributes.normal;c.push(l)}}return Promise.all([Promise.all(u),Promise.all(c)]).then((function(n){for(var o=n[0],a=n[1],s=0,u=o.length;s<u;s++)e.attributes.position!==o[s]&&(o[s]=I(o[s]));for(s=0,u=a.length;s<u;s++)e.attributes.normal!==a[s]&&(a[s]=I(a[s]));for(s=0,u=t.length;s<u;s++){var c=t[s],l="morphTarget"+s;if(r&&void 0!==c.POSITION){var d=o[s];d.name=l;for(var h=e.attributes.position,f=0,p=d.count;f<p;f++)d.setXYZ(f,d.getX(f)+h.getX(f),d.getY(f)+h.getY(f),d.getZ(f)+h.getZ(f))}if(i&&void 0!==c.NORMAL){var m=a[s];m.name=l;var y=e.attributes.normal;for(f=0,p=m.count;f<p;f++)m.setXYZ(f,m.getX(f)+y.getX(f),m.getY(f)+y.getY(f),m.getZ(f)+y.getZ(f))}}return r&&(e.morphAttributes.position=o),i&&(e.morphAttributes.normal=a),e}))}function L(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function O(e){var t,n=e.extensions&&e.extensions[r.KHR_DRACO_MESH_COMPRESSION];return t=n?"draco:"+n.bufferView+":"+n.indices+":"+k(n.attributes):e.indices+":"+k(e.attributes)+":"+e.mode,t}function k(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function I(t){if(t.isInterleavedBufferAttribute){for(var n=t.count,r=t.itemSize,i=t.array.slice(0,n*r),o=0,a=0;o<n;++o)i[a++]=t.getX(o),r>=2&&(i[a++]=t.getY(o)),r>=3&&(i[a++]=t.getZ(o)),r>=4&&(i[a++]=t.getW(o));return new e.BufferAttribute(i,r,t.normalized)}return t.clone()}function D(t,r,i){this.json=t||{},this.extensions=r||{},this.options=i||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new e.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function U(e,t,n){var r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.addAttribute(r,t)}))}for(var a in r){var s=M[a]||a.toLowerCase();s in e.attributes||i.push(o(r[a],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return R(e,t),Promise.all(i).then((function(){return void 0!==t.targets?P(e,t.targets,n):e}))}return D.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};A(i,o,r),R(o,r),e(o)})).catch(t)},D.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,u=0,c=s.length;u<c;u++)e[s[u]].isBone=!0;for(var l=0,d=e.length;l<d;l++){var h=e[l];void 0!==h.mesh&&(void 0===r[h.mesh]&&(r[h.mesh]=i[h.mesh]=0),r[h.mesh]++,void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},D.prototype.getDependency=function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this.loadMesh(t);break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this.loadBufferView(t);break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this.loadMaterial(t);break;case"texture":i=this.loadTexture(t);break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;case"light":i=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i},D.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},D.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load(N(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},D.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},D.prototype.loadAccessor=function(t){var n=this,r=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(t){var o,a,s=t[0],u=x[i.type],c=g[i.componentType],l=c.BYTES_PER_ELEMENT,d=l*u,h=i.byteOffset||0,f=void 0!==i.bufferView?r.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;if(f&&f!==d){var m=Math.floor(h/f),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count,v=n.cache.get(y);v||(o=new c(s,m*f,i.count*f/l),v=new e.InterleavedBuffer(o,f/l),n.cache.add(y,v)),a=new e.InterleavedBufferAttribute(v,u,h%f/l,p)}else o=null===s?new c(i.count*u):new c(s,h,i.count*u),a=new e.BufferAttribute(o,u,p);if(void 0!==i.sparse){var _=x.SCALAR,b=g[i.sparse.indices.componentType],M=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,w=new b(t[1],M,i.sparse.count*_),S=new c(t[2],C,i.sparse.count*u);null!==s&&a.setArray(a.array.slice());for(var T=0,N=w.length;T<N;T++){var E=w[T];if(a.setX(E,S[T*u]),u>=2&&a.setY(E,S[T*u+1]),u>=3&&a.setZ(E,S[T*u+2]),u>=4&&a.setW(E,S[T*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},D.prototype.loadTexture=function(t){var n,i=this,o=this.json,a=this.options,s=this.textureLoader,u=window.URL||window.webkitURL,c=o.textures[t],l=c.extensions||{};n=l[r.MSFT_TEXTURE_DDS]?o.images[l[r.MSFT_TEXTURE_DDS].source]:o.images[c.source];var d=n.uri,h=!1;return void 0!==n.bufferView&&(d=i.getDependency("bufferView",n.bufferView).then((function(e){h=!0;var t=new Blob([e],{type:n.mimeType});return d=u.createObjectURL(t),d}))),Promise.resolve(d).then((function(t){var n=e.Loader.Handlers.get(t);return n||(n=l[r.MSFT_TEXTURE_DDS]?i.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(e,r){n.load(N(t,a.path),e,void 0,r)}))})).then((function(t){!0===h&&u.revokeObjectURL(d),t.flipY=!1,void 0!==c.name&&(t.name=c.name),n.mimeType in T&&(t.format=T[n.mimeType]);var r=o.samplers||{},i=r[c.sampler]||{};return t.magFilter=_[i.magFilter]||e.LinearFilter,t.minFilter=_[i.minFilter]||e.LinearMipmapLinearFilter,t.wrapS=b[i.wrapS]||e.RepeatWrapping,t.wrapT=b[i.wrapT]||e.RepeatWrapping,t}))},D.prototype.assignTexture=function(t,n,i){var o=this;return this.getDependency("texture",i.index).then((function(a){if(!a.isCompressedTexture)switch(n){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":a.format=e.RGBFormat;break}if(o.extensions[r.KHR_TEXTURE_TRANSFORM]){var s=void 0!==i.extensions?i.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;s&&(a=o.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(a,s))}t[n]=a}))},D.prototype.assignFinalMaterial=function(t){var n=t.geometry,i=t.material,o=this.extensions,a=void 0!==n.attributes.tangent,s=void 0!==n.attributes.color,u=void 0===n.attributes.normal,c=!0===t.isSkinnedMesh,l=Object.keys(n.morphAttributes).length>0,d=l&&void 0!==n.morphAttributes.normal;if(t.isPoints){var h="PointsMaterial:"+i.uuid,f=this.cache.get(h);f||(f=new e.PointsMaterial,e.Material.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,f.lights=!1,f.sizeAttenuation=!1,this.cache.add(h,f)),i=f}else if(t.isLine){h="LineBasicMaterial:"+i.uuid;var p=this.cache.get(h);p||(p=new e.LineBasicMaterial,e.Material.prototype.copy.call(p,i),p.color.copy(i.color),p.lights=!1,this.cache.add(h,p)),i=p}if(a||s||u||c||l){h="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),c&&(h+="skinning:"),a&&(h+="vertex-tangents:"),s&&(h+="vertex-colors:"),u&&(h+="flat-shading:"),l&&(h+="morph-targets:"),d&&(h+="morph-normals:");var m=this.cache.get(h);m||(m=i.isGLTFSpecularGlossinessMaterial?o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(i):i.clone(),c&&(m.skinning=!0),a&&(m.vertexTangents=!0),s&&(m.vertexColors=e.VertexColors),u&&(m.flatShading=!0),l&&(m.morphTargets=!0),d&&(m.morphNormals=!0),this.cache.add(h,m)),i=m}i.aoMap&&void 0===n.attributes.uv2&&void 0!==n.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),n.addAttribute("uv2",new e.BufferAttribute(n.attributes.uv.array,2))),i.isGLTFSpecularGlossinessMaterial&&(t.onBeforeRender=o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),t.material=i},D.prototype.loadMaterial=function(t){var n,i=this,o=this.json,a=this.extensions,s=o.materials[t],u={},c=s.extensions||{},l=[];if(c[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var d=a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=d.getMaterialType(),l.push(d.extendParams(u,s,i))}else if(c[r.KHR_MATERIALS_UNLIT]){var h=a[r.KHR_MATERIALS_UNLIT];n=h.getMaterialType(),l.push(h.extendParams(u,s,i))}else{n=e.MeshStandardMaterial;var f=s.pbrMetallicRoughness||{};if(u.color=new e.Color(1,1,1),u.opacity=1,Array.isArray(f.baseColorFactor)){var p=f.baseColorFactor;u.color.fromArray(p),u.opacity=p[3]}void 0!==f.baseColorTexture&&l.push(i.assignTexture(u,"map",f.baseColorTexture)),u.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,u.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(i.assignTexture(u,"metalnessMap",f.metallicRoughnessTexture)),l.push(i.assignTexture(u,"roughnessMap",f.metallicRoughnessTexture)))}!0===s.doubleSided&&(u.side=e.DoubleSide);var m=s.alphaMode||S.OPAQUE;return m===S.BLEND?u.transparent=!0:(u.transparent=!1,m===S.MASK&&(u.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&n!==e.MeshBasicMaterial&&(l.push(i.assignTexture(u,"normalMap",s.normalTexture)),u.normalScale=new e.Vector2(1,1),void 0!==s.normalTexture.scale&&u.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&n!==e.MeshBasicMaterial&&(l.push(i.assignTexture(u,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(u.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&n!==e.MeshBasicMaterial&&(u.emissive=(new e.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&n!==e.MeshBasicMaterial&&l.push(i.assignTexture(u,"emissiveMap",s.emissiveTexture)),Promise.all(l).then((function(){var t;return t=n===e.ShaderMaterial?a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(u):new n(u),void 0!==s.name&&(t.name=s.name),t.map&&(t.map.encoding=e.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=e.sRGBEncoding),t.specularMap&&(t.specularMap.encoding=e.sRGBEncoding),R(t,s),s.extensions&&A(a,t,s),t}))},D.prototype.loadGeometries=function(t){var n=this,i=this.extensions,o=this.primitiveCache;function a(e){return i[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then((function(t){return U(t,e,n)}))}for(var s=[],u=0,c=t.length;u<c;u++){var l,d=t[u],h=O(d),f=o[h];if(f)s.push(f.promise);else l=d.extensions&&d.extensions[r.KHR_DRACO_MESH_COMPRESSION]?a(d):U(new e.BufferGeometry,d,n),o[h]={primitive:d,promise:l},s.push(l)}return Promise.all(s)},D.prototype.loadMesh=function(t){for(var n=this,r=this.json,i=r.meshes[t],o=i.primitives,a=[],s=0,u=o.length;s<u;s++){var c=void 0===o[s].material?E():this.getDependency("material",o[s].material);a.push(c)}return Promise.all(a).then((function(r){return n.loadGeometries(o).then((function(a){for(var s=[],u=0,c=a.length;u<c;u++){var l,d=a[u],h=o[u],f=r[u];if(h.mode===v.TRIANGLES||h.mode===v.TRIANGLE_STRIP||h.mode===v.TRIANGLE_FAN||void 0===h.mode)l=!0===i.isSkinnedMesh?new e.SkinnedMesh(d,f):new e.Mesh(d,f),!0!==l.isSkinnedMesh||l.geometry.attributes.skinWeight.normalized||l.normalizeSkinWeights(),h.mode===v.TRIANGLE_STRIP?l.drawMode=e.TriangleStripDrawMode:h.mode===v.TRIANGLE_FAN&&(l.drawMode=e.TriangleFanDrawMode);else if(h.mode===v.LINES)l=new e.LineSegments(d,f);else if(h.mode===v.LINE_STRIP)l=new e.Line(d,f);else if(h.mode===v.LINE_LOOP)l=new e.LineLoop(d,f);else{if(h.mode!==v.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);l=new e.Points(d,f)}Object.keys(l.geometry.morphAttributes).length>0&&L(l,i),l.name=i.name||"mesh_"+t,a.length>1&&(l.name+="_"+u),R(l,i),n.assignFinalMaterial(l),s.push(l)}if(1===s.length)return s[0];var p=new e.Group;for(u=0,c=s.length;u<c;u++)p.add(s[u]);return p}))}))},D.prototype.loadCamera=function(t){var n,r=this.json.cameras[t],i=r[r.type];if(i)return"perspective"===r.type?n=new e.PerspectiveCamera(e.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===r.type&&(n=new e.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==r.name&&(n.name=r.name),R(n,r),Promise.resolve(n);console.warn("THREE.GLTFLoader: Missing camera parameters.")},D.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},D.prototype.loadAnimation=function(t){for(var n=this.json,r=n.animations[t],i=[],o=[],a=[],s=[],u=[],c=0,l=r.channels.length;c<l;c++){var d=r.channels[c],h=r.samplers[d.sampler],f=d.target,p=void 0!==f.node?f.node:f.id,y=void 0!==r.parameters?r.parameters[h.input]:h.input,v=void 0!==r.parameters?r.parameters[h.output]:h.output;i.push(this.getDependency("node",p)),o.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",v)),s.push(h),u.push(f)}return Promise.all([Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(u)]).then((function(n){for(var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=[],l=0,d=i.length;l<d;l++){var h=i[l],f=o[l],p=a[l],y=s[l],v=u[l];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,C[v.path]){case C.weights:g=e.NumberKeyframeTrack;break;case C.rotation:g=e.QuaternionKeyframeTrack;break;case C.position:case C.scale:default:g=e.VectorKeyframeTrack;break}var _=h.name?h.name:h.uuid,b=void 0!==y.interpolation?w[y.interpolation]:e.InterpolateLinear,x=[];C[v.path]===C.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(_);var M=p.array;if(p.normalized){var S;if(M.constructor===Int8Array)S=1/127;else if(M.constructor===Uint8Array)S=1/255;else if(M.constructor==Int16Array)S=1/32767;else{if(M.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");S=1/65535}for(var T=new Float32Array(M.length),N=0,E=M.length;N<E;N++)T[N]=M[N]*S;M=T}for(N=0,E=x.length;N<E;N++){var A=new g(x[N]+"."+C[v.path],f.array,M,b);"CUBICSPLINE"===y.interpolation&&(A.createInterpolant=function(e){return new m(this.times,this.values,this.getValueSize()/3,e)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(A)}}}var R=void 0!==r.name?r.name:"animation_"+t;return new e.AnimationClip(R,void 0,c)}))},D.prototype.loadNode=function(t){var n=this.json,i=this.extensions,o=this,a=n.meshReferences,s=n.meshUses,u=n.nodes[t];return function(){var e=[];return void 0!==u.mesh&&e.push(o.getDependency("mesh",u.mesh).then((function(e){var t;if(a[u.mesh]>1){var n=s[u.mesh]++;t=e.clone(),t.name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var r=0,i=t.children.length;r<i;r++)t.children[r].name+="_instance_"+n,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==u.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=u.weights.length;t<n;t++)e.morphTargetInfluences[t]=u.weights[t]})),t}))),void 0!==u.camera&&e.push(o.getDependency("camera",u.camera)),u.extensions&&u.extensions[r.KHR_LIGHTS_PUNCTUAL]&&void 0!==u.extensions[r.KHR_LIGHTS_PUNCTUAL].light&&e.push(o.getDependency("light",u.extensions[r.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(e)}().then((function(t){var n;if(n=!0===u.isBone?new e.Bone:t.length>1?new e.Group:1===t.length?t[0]:new e.Object3D,n!==t[0])for(var r=0,o=t.length;r<o;r++)n.add(t[r]);if(void 0!==u.name&&(n.userData.name=u.name,n.name=e.PropertyBinding.sanitizeNodeName(u.name)),R(n,u),u.extensions&&A(i,n,u),void 0!==u.matrix){var a=new e.Matrix4;a.fromArray(u.matrix),n.applyMatrix(a)}else void 0!==u.translation&&n.position.fromArray(u.translation),void 0!==u.rotation&&n.quaternion.fromArray(u.rotation),void 0!==u.scale&&n.scale.fromArray(u.scale);return n}))},D.prototype.loadScene=function(){function t(n,r,i,o){var a=i.nodes[n];return o.getDependency("node",n).then((function(t){return void 0===a.skin?t:o.getDependency("skin",a.skin).then((function(e){n=e;for(var t=[],r=0,i=n.joints.length;r<i;r++)t.push(o.getDependency("node",n.joints[r]));return Promise.all(t)})).then((function(r){return t.traverse((function(t){if(t.isMesh){for(var i=[],o=[],a=0,s=r.length;a<s;a++){var u=r[a];if(u){i.push(u);var c=new e.Matrix4;void 0!==n.inverseBindMatrices&&c.fromArray(n.inverseBindMatrices.array,16*a),o.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[a])}t.bind(new e.Skeleton(i,o),t.matrixWorld)}})),t}));var n})).then((function(e){r.add(e);var n=[];if(a.children)for(var s=a.children,u=0,c=s.length;u<c;u++){var l=s[u];n.push(t(l,e,i,o))}return Promise.all(n)}))}return function(n){var r=this.json,i=this.extensions,o=this.json.scenes[n],a=this,s=new e.Scene;void 0!==o.name&&(s.name=o.name),R(s,o),o.extensions&&A(i,s,o);for(var u=o.nodes||[],c=[],l=0,d=u.length;l<d;l++)c.push(t(u[l],s,r,a));return Promise.all(c).then((function(){return s}))}}(),t}()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(189)),o=r(n(225)),a=r(n(226)),s=r(n(228)),u=r(n(191)),c=r(n(23)),l=r(n(24)),d=r(n(13));function h(e){var t=f();return function(){var n,r=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")},m={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=["label"];n.forEach((function(t){void 0===e[t]&&(e[t]="")}));var r=t;for(var i in e){var o=new RegExp("{"+i+"}");r=r.replace(o,e[i])}return r}function v(e,t){return void 0===e||null===e||("string"===typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length))}var g={integer:function(e){return g.number(e)&&parseInt(e,10)===e},string:function(e){return"string"===typeof e},number:function(e){return!isNaN(e)&&"number"===typeof e},boolean:function(e){return"boolean"===typeof e},float:function(e){return g.number(e)&&!g.integer(e)},array:function(e){return Array.isArray(e)},object:function(e){return"object"===(0,d.default)(e)&&!g.array(e)},date:function(e){return e instanceof Date},timestamp:function(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:function(e){return"string"===typeof e.url},email:function(e){return"string"===typeof e&&!!e.match(p.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(p.url)},pattern:function(e,t){try{return new RegExp(e).test(t)}catch(n){return!1}},method:function(e){return"function"===typeof e},idcard:function(e){return"string"===typeof e&&!!e.match(p.idcard)},"url-https":function(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":function(e){return e.startsWith("://")},"url-web":function(e){return!1}},_=function(){function e(t){(0,c.default)(this,e),this._message=t}return(0,l.default)(e,[{key:"validateRule",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n,r,o,a){var s,u,c,l,d,h,f,p,m;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=null,u=n.rules,c=u.findIndex((function(e){return e.required})),!(c<0)){e.next=8;break}if(null!==r&&void 0!==r){e.next=6;break}return e.abrupt("return",s);case 6:if("string"!==typeof r||r.length){e.next=8;break}return e.abrupt("return",s);case 8:if(l=this._message,void 0!==u){e.next=11;break}return e.abrupt("return",l["default"]);case 11:d=0;case 12:if(!(d<u.length)){e.next=35;break}if(h=u[d],f=this._getValidateType(h),Object.assign(h,{label:n.label||'["'.concat(t,'"]')}),!b[f]){e.next=20;break}if(s=b[f](h,r,l),null==s){e.next=20;break}return e.abrupt("break",35);case 20:if(!h.validateExpr){e.next=26;break}if(p=Date.now(),m=h.validateExpr(r,a,p),!1!==m){e.next=26;break}return s=this._getMessage(h,h.errorMessage||this._message["default"]),e.abrupt("break",35);case 26:if(!h.validateFunction){e.next=32;break}return e.next=29,this.validateFunction(h,r,o,a,f);case 29:if(s=e.sent,null===s){e.next=32;break}return e.abrupt("break",35);case 32:d++,e.next=12;break;case 35:return null!==s&&(s=l.TAG+s),e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"validateFunction",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n,r,o,a){var s,u,c;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=null,e.prev=1,u=null,e.next=5,t.validateFunction(t,n,o||r,(function(e){u=e}));case 5:c=e.sent,(u||"string"===typeof c&&c||!1===c)&&(s=this._getMessage(t,u||c,a)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),s=this._getMessage(t,e.t0.message,a);case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"_getMessage",value:function(e,t,n){return y(e,t||e.errorMessage||this._message[n]||t["default"])}},{key:"_getValidateType",value:function(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}]),e}(),b={required:function(e,t,n){return e.required&&v(t,e.format||(0,d.default)(t))?y(e,e.errorMessage||n.required):null},range:function(e,t,n){for(var r=e.range,i=e.errorMessage,o=new Array(r.length),a=0;a<r.length;a++){var s=r[a];g.object(s)&&void 0!==s.value?o[a]=s.value:o[a]=s}var u=!1;return Array.isArray(t)?u=new Set(t.concat(o)).size===o.length:o.indexOf(t)>-1&&(u=!0),u?null:y(e,i||n["enum"])},rangeNumber:function(e,t,n){if(!g.number(t))return y(e,e.errorMessage||n.pattern.mismatch);var r=e.minimum,i=e.maximum,o=e.exclusiveMinimum,a=e.exclusiveMaximum,s=o?t<=r:t<r,u=a?t>=i:t>i;return void 0!==r&&s?y(e,e.errorMessage||n["number"][o?"exclusiveMinimum":"minimum"]):void 0!==i&&u?y(e,e.errorMessage||n["number"][a?"exclusiveMaximum":"maximum"]):void 0!==r&&void 0!==i&&(s||u)?y(e,e.errorMessage||n["number"].range):null},rangeLength:function(e,t,n){if(!g.string(t)&&!g.array(t))return y(e,e.errorMessage||n.pattern.mismatch);var r=e.minLength,i=e.maxLength,o=t.length;return void 0!==r&&o<r?y(e,e.errorMessage||n["length"].minLength):void 0!==i&&o>i?y(e,e.errorMessage||n["length"].maxLength):void 0!==r&&void 0!==i&&(o<r||o>i)?y(e,e.errorMessage||n["length"].range):null},pattern:function(e,t,n){return g["pattern"](e.pattern,t)?null:y(e,e.errorMessage||n.pattern.mismatch)},format:function(e,t,n){var r=Object.keys(g),i=m[e.format]?m[e.format]:e.format||e.arrayType;return r.indexOf(i)>-1&&!g[i](t)?y(e,e.errorMessage||n.typeError):null},arrayTypeFormat:function(e,t,n){if(!Array.isArray(t))return y(e,e.errorMessage||n.typeError);for(var r=0;r<t.length;r++){var i=t[r],o=this.format(e,i,n);if(null!==o)return o}return null}},x=function(e){(0,o.default)(n,e);var t=h(n);function n(e,r){var i;return(0,c.default)(this,n),i=t.call(this,n.message),i._schema=e,i._options=r||null,i}return(0,l.default)(n,[{key:"updateSchema",value:function(e){this._schema=e}},{key:"validate",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._checkFieldInSchema(t),r){e.next=5;break}return e.next=4,this.invokeValidate(t,!1,n);case 4:r=e.sent;case 5:return e.abrupt("return",r.length?r[0]:null);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"validateAll",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._checkFieldInSchema(t),r){e.next=5;break}return e.next=4,this.invokeValidate(t,!0,n);case 4:r=e.sent;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"validateUpdate",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._checkFieldInSchema(t),r){e.next=5;break}return e.next=4,this.invokeValidateUpdate(t,!1,n);case 4:r=e.sent;case 5:return e.abrupt("return",r.length?r[0]:null);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"invokeValidate",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n,r){var o,a,s,u,c;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=[],a=this._schema,e.t0=i.default.keys(a);case 3:if((e.t1=e.t0()).done){e.next=15;break}return s=e.t1.value,u=a[s],e.next=8,this.validateRule(s,u,t[s],t,r);case 8:if(c=e.sent,null==c){e.next=13;break}if(o.push({key:s,errorMessage:c}),n){e.next=13;break}return e.abrupt("break",15);case 13:e.next=3;break;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"invokeValidateUpdate",value:function(){var e=(0,u.default)(i.default.mark((function e(t,n,r){var o,a,s;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=[],e.t0=i.default.keys(t);case 2:if((e.t1=e.t0()).done){e.next=13;break}return a=e.t1.value,e.next=6,this.validateRule(a,this._schema[a],t[a],t,r);case 6:if(s=e.sent,null==s){e.next=11;break}if(o.push({key:a,errorMessage:s}),n){e.next=11;break}return e.abrupt("break",13);case 11:e.next=2;break;case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"_checkFieldInSchema",value:function(e){var t=Object.keys(e),r=Object.keys(this._schema);if(new Set(t.concat(r)).size===r.length)return"";var i=t.filter((function(e){return r.indexOf(e)<0})),o=y({field:JSON.stringify(i)},n.message.TAG+n.message["defaultInvalid"]);return[{key:"invalid",errorMessage:o}]}}]),n}(_);function M(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}}x.message=new M;var C=x;t.default=C},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.typeFilter=t.type=t.setDataValue=t.realName=t.rawData=t.objSet=t.objGet=t.name2arr=t.isRequiredField=t.isRealName=t.isNumber=t.isEqual=t.isBoolean=t.getValue=t.getDataValueType=t.getDataValue=t.deepCopy=void 0;var i=r(n(13)),o=function(e){return JSON.parse(JSON.stringify(e))};t.deepCopy=o;var a=function(e){return"int"===e||"double"===e||"number"===e||"timestamp"===e};t.typeFilter=a;var s=function(e,t,n){var r=n.find((function(e){return e.format&&a(e.format)})),i=n.find((function(e){return e.format&&"boolean"===e.format||"bool"===e.format}));return r&&(t=t||0===t?g(Number(t))?Number(t):t:null),i&&(t=!!_(t)&&t),t};t.getValue=s;var u=function(e,t,n){return t[e]=n,n||""};t.setDataValue=u;var c=function(e,t){return v(t,e)};t.getDataValue=c;var l=function(e,t){var n=c(e,t);return{type:x(n),value:n}};t.getDataValueType=l;var d=function(e){var t=y(e);if("object"===(0,i.default)(t)&&Array.isArray(t)&&t.length>1){var n=t.reduce((function(e,t){return e+"#".concat(t)}),"_formdata_");return n}return t[0]||e};t.realName=d;var h=function(e){var t=/^_formdata_#*/;return t.test(e)};t.isRealName=h;var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e)),n={};for(var r in t){var i=p(r);m(n,i,t[r])}return n};t.rawData=f;var p=function(e){var t=e.replace("_formdata_#","");return t=t.split("#").map((function(e){return g(e)?Number(e):e})),t};t.name2arr=p;var m=function(e,t,n){return"object"!==(0,i.default)(e)||y(t).reduce((function(e,t,r,i){return r===i.length-1?(e[t]=n,null):(t in e||(e[t]=/^[0-9]{1,}$/.test(i[r+1])?[]:{}),e[t])}),e),e};function y(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}t.objSet=m;var v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"undefined",r=y(t),i=r.reduce((function(e,t){return(e||{})[t]}),e);return i&&void 0===i?n:i};t.objGet=v;var g=function(e){return!isNaN(Number(e))};t.isNumber=g;var _=function(e){return"boolean"===typeof e};t.isBoolean=_;var b=function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n];if(r.required){t=!0;break}}return t};t.isRequiredField=b;var x=function(e){var t={};return"Boolean Number String Function Array Date RegExp Object Error".split(" ").map((function(e,n){t["[object "+e+"]"]=e.toLowerCase()})),null==e?e+"":"object"===(0,i.default)(e)||"function"===typeof e?t[Object.prototype.toString.call(e)]||"object":(0,i.default)(e)};t.type=x;var M=function(e,t){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;var n=toString.call(e),r=toString.call(t);if(n!==r)return!1;switch(n){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("[object Object]"==n){var i=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(i.length!=o.length)return!1;for(var a=0;a<i.length;a++){var s=i[a];if(e[s]!==t[s])return!1}return!0}return"[object Array]"==n?e.toString()==t.toString():void 0};t.isEqual=M},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]};t.default=r},,,,,,,,function(e,t,n){"use strict";(function(e,r,i){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(189)),s=o(n(227)),u=o(n(5)),c=o(n(13)),l=o(n(18)),d=o(n(191)),h=o(n(11)),f=o(n(225)),p=o(n(226)),m=o(n(228)),y=o(n(535)),v=o(n(23)),g=o(n(24)),_=n(22),b=o(n(763));function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=M(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M(e,t){if(e){if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=N();return function(){var n,r=(0,m.default)(e);if(t){var i=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function E(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;var R=A((function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=i(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,c=e.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var d=r.splice(0,u);n.sigBytes-=c}return new a.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=r.algo={};return r}(Math),n)})),P=R,L=(A((function(e,t){var n;e.exports=(n=P,function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],u=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],y=e[t+5],v=e[t+6],g=e[t+7],_=e[t+8],b=e[t+9],x=e[t+10],M=e[t+11],C=e[t+12],w=e[t+13],S=e[t+14],T=e[t+15],N=o[0],E=o[1],A=o[2],R=o[3];N=c(N,E,A,R,a,7,s[0]),R=c(R,N,E,A,u,12,s[1]),A=c(A,R,N,E,f,17,s[2]),E=c(E,A,R,N,p,22,s[3]),N=c(N,E,A,R,m,7,s[4]),R=c(R,N,E,A,y,12,s[5]),A=c(A,R,N,E,v,17,s[6]),E=c(E,A,R,N,g,22,s[7]),N=c(N,E,A,R,_,7,s[8]),R=c(R,N,E,A,b,12,s[9]),A=c(A,R,N,E,x,17,s[10]),E=c(E,A,R,N,M,22,s[11]),N=c(N,E,A,R,C,7,s[12]),R=c(R,N,E,A,w,12,s[13]),A=c(A,R,N,E,S,17,s[14]),N=l(N,E=c(E,A,R,N,T,22,s[15]),A,R,u,5,s[16]),R=l(R,N,E,A,v,9,s[17]),A=l(A,R,N,E,M,14,s[18]),E=l(E,A,R,N,a,20,s[19]),N=l(N,E,A,R,y,5,s[20]),R=l(R,N,E,A,x,9,s[21]),A=l(A,R,N,E,T,14,s[22]),E=l(E,A,R,N,m,20,s[23]),N=l(N,E,A,R,b,5,s[24]),R=l(R,N,E,A,S,9,s[25]),A=l(A,R,N,E,p,14,s[26]),E=l(E,A,R,N,_,20,s[27]),N=l(N,E,A,R,w,5,s[28]),R=l(R,N,E,A,f,9,s[29]),A=l(A,R,N,E,g,14,s[30]),N=d(N,E=l(E,A,R,N,C,20,s[31]),A,R,y,4,s[32]),R=d(R,N,E,A,_,11,s[33]),A=d(A,R,N,E,M,16,s[34]),E=d(E,A,R,N,S,23,s[35]),N=d(N,E,A,R,u,4,s[36]),R=d(R,N,E,A,m,11,s[37]),A=d(A,R,N,E,g,16,s[38]),E=d(E,A,R,N,x,23,s[39]),N=d(N,E,A,R,w,4,s[40]),R=d(R,N,E,A,a,11,s[41]),A=d(A,R,N,E,p,16,s[42]),E=d(E,A,R,N,v,23,s[43]),N=d(N,E,A,R,b,4,s[44]),R=d(R,N,E,A,C,11,s[45]),A=d(A,R,N,E,T,16,s[46]),N=h(N,E=d(E,A,R,N,f,23,s[47]),A,R,a,6,s[48]),R=h(R,N,E,A,g,10,s[49]),A=h(A,R,N,E,S,15,s[50]),E=h(E,A,R,N,y,21,s[51]),N=h(N,E,A,R,C,6,s[52]),R=h(R,N,E,A,p,10,s[53]),A=h(A,R,N,E,x,15,s[54]),E=h(E,A,R,N,u,21,s[55]),N=h(N,E,A,R,_,6,s[56]),R=h(R,N,E,A,T,10,s[57]),A=h(A,R,N,E,v,15,s[58]),E=h(E,A,R,N,w,21,s[59]),N=h(N,E,A,R,m,6,s[60]),R=h(R,N,E,A,M,10,s[61]),A=h(A,R,N,E,f,15,s[62]),E=h(E,A,R,N,b,21,s[63]),o[0]=o[0]+N|0,o[1]=o[1]+E|0,o[2]=o[2]+A|0,o[3]=o[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function h(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(u),t.HmacMD5=o._createHmacHelper(u)}(Math),n.MD5)})),A((function(e,t){var n;e.exports=(n=P,void function(){var e=n,t=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())})),A((function(e,t){e.exports=P.HmacMD5}))),O=A((function(e,t){e.exports=P.enc.Utf8})),k=A((function(e,t){var n;e.exports=(n=P,function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,u=r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=(s|u)<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),I="FUNCTION",D="OBJECT",U="CLIENT_DB",B="pending",F="fullfilled",G="rejected";function j(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function z(e){return"object"===j(e)}function V(e){return"function"==typeof e}function H(e){return function(){try{return e.apply(e,arguments)}catch(e){console.error(e)}}}var W="REJECTED",q="NOT_PENDING",X=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.createPromise,r=t.retryRule,i=void 0===r?W:r;(0,v.default)(this,e),this.createPromise=n,this.status=null,this.promise=null,this.retryRule=i}return(0,g.default)(e,[{key:"needRetry",get:function(){if(!this.status)return!0;switch(this.retryRule){case W:return this.status===G;case q:return this.status!==B}}},{key:"exec",value:function(){var e=this;return this.needRetry?(this.status=B,this.promise=this.createPromise().then((function(t){return e.status=F,Promise.resolve(t)}),(function(t){return e.status=G,Promise.reject(t)})),this.promise):this.promise}}]),e}();function Y(e){return e&&"string"==typeof e?JSON.parse(e):e}var J=!0,K="mp-weixin",$=!1,Z=Y([]),Q="h5"===K?"web":"app-plus"===K?"app":K,ee=Y(void 0),te=Y([])||[],ne=!0;try{(n(764).default||n(764)).appid}catch(pi){}var re={};function ie(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=re,n=e,Object.prototype.hasOwnProperty.call(t,n)||(re[e]=r),re[e]}"app"===Q&&(re=r._globalUniCloudObj?r._globalUniCloudObj:r._globalUniCloudObj={});var oe=["invoke","success","fail","complete"],ae=ie("_globalUniCloudInterceptor");function se(e,t){ae[e]||(ae[e]={}),z(t)&&Object.keys(t).forEach((function(n){oe.indexOf(n)>-1&&function(e,t,n){var r=ae[e][t];r||(r=ae[e][t]=[]),-1===r.indexOf(n)&&V(n)&&r.push(n)}(e,n,t[n])}))}function ue(e,t){ae[e]||(ae[e]={}),z(t)?Object.keys(t).forEach((function(n){oe.indexOf(n)>-1&&function(e,t,n){var r=ae[e][t];if(r){var i=r.indexOf(n);i>-1&&r.splice(i,1)}}(e,n,t[n])})):delete ae[e]}function ce(e,t){return e&&0!==e.length?e.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.resolve()}function le(e,t){return ae[e]&&ae[e][t]||[]}function de(e){se("callObject",e)}var he=ie("_globalUniCloudListener"),fe="response",pe="needLogin",me="refreshToken",ye="clientdb",ve="cloudfunction",ge="cloudobject";function _e(e){return he[e]||(he[e]=[]),he[e]}function be(e,t){var n=_e(e);n.includes(t)||n.push(t)}function xe(e,t){var n=_e(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}function Me(e,t){for(var n=_e(e),r=0;r<n.length;r++)(0,n[r])(t)}var Ce,we=!1;function Se(){return Ce||(Ce=new Promise((function(e){we&&e(),function t(){if("function"==typeof getCurrentPages){var n=getCurrentPages();n&&n[0]&&(we=!0,e())}we||setTimeout((function(){t()}),30)}()})),Ce)}function Te(e){var t={};for(var n in e){var r=e[n];V(r)&&(t[n]=H(r))}return t}var Ne,Ee,Ae=function(e){(0,f.default)(n,e);var t=T(n);function n(e){var r;return(0,v.default)(this,n),r=t.call(this,e.message),r.errMsg=e.message||e.errMsg||"unknown system error",r.code=r.errCode=e.code||e.errCode||"SYSTEM_ERROR",r.errSubject=r.subject=e.subject||e.errSubject,r.cause=e.cause,r.requestId=e.requestId,r}return(0,g.default)(n,[{key:"toJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}]),n}((0,y.default)(Error)),Re={request:function(e){return r.request(e)},uploadFile:function(e){return r.uploadFile(e)},setStorageSync:function(e,t){return r.setStorageSync(e,t)},getStorageSync:function(e){return r.getStorageSync(e)},removeStorageSync:function(e){return r.removeStorageSync(e)},clearStorageSync:function(){return r.clearStorageSync()}};function Pe(){return{token:Re.getStorageSync("uni_id_token")||Re.getStorageSync("uniIdToken"),tokenExpired:Re.getStorageSync("uni_id_token_expired")}}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.token,n=e.tokenExpired;t&&Re.setStorageSync("uni_id_token",t),n&&Re.setStorageSync("uni_id_token_expired",n)}function Oe(){return Ne||(Ne=r.getSystemInfoSync()),Ne}function ke(){var e,t;try{if(r.getLaunchOptionsSync){if(r.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;var n=r.getLaunchOptionsSync(),i=n.scene,o=n.channel;e=o,t=i}}catch(e){}return{channel:e,scene:t}}function Ie(){var e=r.getLocale&&r.getLocale()||"en";if(Ee)return S(S({},Ee),{},{locale:e,LOCALE:e});for(var t=Oe(),n=t.deviceId,i=t.osName,o=t.uniPlatform,a=t.appId,s=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"],u=0;u<s.length;u++)delete t[s[u]];return Ee=S(S({PLATFORM:o,OS:i,APPID:a,DEVICEID:n},ke()),t),S(S({},Ee),{},{locale:e,LOCALE:e})}var De,Ue={sign:function(e,t){var n="";return Object.keys(e).sort().forEach((function(t){e[t]&&(n=n+"&"+t+"="+e[t])})),n=n.slice(1),L(n,t).toString()},wrappedRequest:function(e,t){return new Promise((function(n,r){t(Object.assign(e,{complete:function(e){e||(e={}),J&&"web"===Q&&e.errMsg&&0===e.errMsg.indexOf("request:fail")&&console.warn("发布H5，需要在uniCloud后台操作，绑定安全域名，否则会因为跨域问题而无法访问。教程参考：https://uniapp.dcloud.io/uniCloud/quickstart?id=useinh5");var t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400)return r(new Ae({code:"SYS_ERR",message:e.errMsg||"request:fail",requestId:t}));var i=e.data;if(i.error)return r(new Ae({code:i.error.code,message:i.error.message,requestId:t}));i.result=i.data,i.requestId=t,delete i.data,n(i)}}))}))},toBase64:function(e){return k.stringify(O.parse(e))}},Be={"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},Fe=(0,_.initVueI18n)({"zh-Hans":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},"zh-Hant":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},en:Be,fr:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},es:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},ja:Be},"zh-Hans"),Ge=Fe.t,je=function(){function e(t){var n=this;(0,v.default)(this,e),["spaceId","clientSecret"].forEach((function(e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(Ge("uniCloud.init.paramRequired",{param:e}))})),this.config=Object.assign({},{endpoint:0===t.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},t),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=Re,this._getAccessTokenPromiseHub=new X({createPromise:function(){return n.requestAuth(n.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((function(e){if(!e.result||!e.result.accessToken)throw new Ae({code:"AUTH_FAILED",message:"获取accessToken失败"});n.setAccessToken(e.result.accessToken)}))},retryRule:q})}return(0,g.default)(e,[{key:"hasAccessToken",get:function(){return!!this.accessToken}},{key:"setAccessToken",value:function(e){this.accessToken=e}},{key:"requestWrapped",value:function(e){return Ue.wrappedRequest(e,this.adapter.request)}},{key:"requestAuth",value:function(e){return this.requestWrapped(e)}},{key:"request",value:function(e,t){var n=this;return Promise.resolve().then((function(){return n.hasAccessToken?t?n.requestWrapped(e):n.requestWrapped(e).catch((function(t){return new Promise((function(e,n){!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?n(t):e()})).then((function(){return n.getAccessToken()})).then((function(){var t=n.rebuildRequest(e);return n.request(t,!0)}))})):n.getAccessToken().then((function(){var t=n.rebuildRequest(e);return n.request(t,!0)}))}))}},{key:"rebuildRequest",value:function(e){var t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=Ue.sign(t.data,this.config.clientSecret),t}},{key:"setupRequest",value:function(e,t){var n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),r={"Content-Type":"application/json"};return"auth"!==t&&(n.token=this.accessToken,r["x-basement-token"]=this.accessToken),r["x-serverless-sign"]=Ue.sign(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:r}}},{key:"getAccessToken",value:function(){return this._getAccessTokenPromiseHub.exec()}},{key:"authorize",value:function(){var e=(0,d.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAccessToken();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"callFunction",value:function(e){var t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(this.setupRequest(t))}},{key:"getOSSUploadOptionsFromPath",value:function(e){var t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}},{key:"uploadFileToOSS",value:function(e){var t=this,n=e.url,r=e.formData,i=e.name,o=e.filePath,a=e.fileType,s=e.onUploadProgress;return new Promise((function(e,u){var c=t.adapter.uploadFile({url:n,formData:r,name:i,filePath:o,fileType:a,header:{"X-OSS-server-side-encrpytion":"AES256"},success:function(t){t&&t.statusCode<400?e(t):u(new Ae({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail:function(e){u(new Ae({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&c&&"function"==typeof c.onProgressUpdate&&c.onProgressUpdate((function(e){s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}},{key:"reportOSSUpload",value:function(e){var t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}},{key:"uploadFile",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l,d,h,f,p,m,y,v,g,_,b,x,M,C,w;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.filePath,r=t.cloudPath,i=t.fileType,o=void 0===i?"image":i,s=t.cloudPathAsRealPath,u=void 0!==s&&s,c=t.onUploadProgress,l=t.config,"string"===j(r)){e.next=3;break}throw new Ae({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});case 3:if(r=r.trim()){e.next=5;break}throw new Ae({code:"INVALID_PARAM",message:"cloudPath不可为空"});case 5:if(!/:\/\//.test(r)){e.next=7;break}throw new Ae({code:"INVALID_PARAM",message:"cloudPath不合法"});case 7:if(d=l&&l.envType||this.config.envType,!(u&&("/"!==r[0]&&(r="/"+r),r.indexOf("\\")>-1))){e.next=10;break}throw new Ae({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});case 10:return e.next=12,this.getOSSUploadOptionsFromPath({env:d,filename:u?r.split("/").pop():r,fileId:u?r:void 0});case 12:return h=e.sent.result,f="https://"+h.cdnDomain+"/"+h.ossPath,p=h.securityToken,m=h.accessKeyId,y=h.signature,v=h.host,g=h.ossPath,_=h.id,b=h.policy,x=h.ossCallbackUrl,M={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:m,Signature:y,host:v,id:_,key:g,policy:b,success_action_status:200},p&&(M["x-oss-security-token"]=p),x&&(C=JSON.stringify({callbackUrl:x,callbackBody:JSON.stringify({fileId:_,spaceId:this.config.spaceId}),callbackBodyType:"application/json"}),M.callback=Ue.toBase64(C)),w={url:"https://"+h.host,formData:M,fileName:"file",name:"file",filePath:n,fileType:o},e.next=27,this.uploadFileToOSS(Object.assign({},w,{onUploadProgress:c}));case 27:if(!x){e.next=29;break}return e.abrupt("return",{success:!0,filePath:n,fileID:f});case 29:return e.next=31,this.reportOSSUpload({id:_});case 31:if(!e.sent.success){e.next=33;break}return e.abrupt("return",{success:!0,filePath:n,fileID:f});case 33:throw new Ae({code:"UPLOAD_FAILED",message:"文件上传失败"});case 34:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTempFileURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fileList;return new Promise((function(e,n){Array.isArray(t)&&0!==t.length||n(new Ae({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),e({fileList:t.map((function(e){return{fileID:e,tempFileURL:e}}))})}))}},{key:"getFileInfo",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.fileList,Array.isArray(n)&&0!==n.length){e.next=3;break}throw new Ae({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});case 3:return r={method:"serverless.file.resource.info",params:JSON.stringify({id:n.map((function(e){return e.split("?")[0]})).join(",")})},e.next=6,this.request(this.setupRequest(r));case 6:return e.t0=e.sent.result,e.abrupt("return",{fileList:e.t0});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),ze={init:function(e){var t=new je(e),n={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}},Ve="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";!function(e){e.local="local",e.none="none",e.session="session"}(De||(De={}));var He,We=function(){},qe=function(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new Ae({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var n=new Promise((function(t,n){e=function(e,r){return e?n(e):t(r)}}));return e.promise=n,e};function Xe(e){return void 0===e}function Ye(e){return"[object Null]"===Object.prototype.toString.call(e)}function Je(e){var t,n,r=(t=e,"[object Array]"===Object.prototype.toString.call(t)?e:[e]),i=x(r);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.isMatch,s=o.genAdapter,u=o.runtime;if(a())return{adapter:s(),runtime:u}}}catch(c){i.e(c)}finally{i.f()}}!function(e){e.WEB="web",e.WX_MP="wx_mp"}(He||(He={}));var Ke={adapter:null,runtime:void 0},$e=["anonymousUuidKey"],Ze=function(e){(0,f.default)(n,e);var t=T(n);function n(){var e;return(0,v.default)(this,n),e=t.call(this),Ke.adapter.root.tcbObject||(Ke.adapter.root.tcbObject={}),e}return(0,g.default)(n,[{key:"setItem",value:function(e,t){Ke.adapter.root.tcbObject[e]=t}},{key:"getItem",value:function(e){return Ke.adapter.root.tcbObject[e]}},{key:"removeItem",value:function(e){delete Ke.adapter.root.tcbObject[e]}},{key:"clear",value:function(){delete Ke.adapter.root.tcbObject}}]),n}(We);function Qe(e,t){switch(e){case"local":return t.localStorage||new Ze;case"none":return new Ze;default:return t.sessionStorage||new Ze}}var et=function(){function e(t){if((0,v.default)(this,e),!this._storage){this._persistence=Ke.adapter.primaryStorage||t.persistence,this._storage=Qe(this._persistence,Ke.adapter);var n="access_token_".concat(t.env),r="access_token_expire_".concat(t.env),i="refresh_token_".concat(t.env),o="anonymous_uuid_".concat(t.env),a="login_type_".concat(t.env),s="user_info_".concat(t.env);this.keys={accessTokenKey:n,accessTokenExpireKey:r,refreshTokenKey:i,anonymousUuidKey:o,loginTypeKey:a,userInfoKey:s}}}return(0,g.default)(e,[{key:"updatePersistence",value:function(e){if(e!==this._persistence){var t="local"===this._persistence;this._persistence=e;var n=Qe(e,Ke.adapter);for(var r in this.keys){var i=this.keys[r];if(!t||!$e.includes(r)){var o=this._storage.getItem(i);Xe(o)||Ye(o)||(n.setItem(i,o),this._storage.removeItem(i))}}this._storage=n}}},{key:"setStore",value:function(e,t,n){if(this._storage){var r={version:n||"localCachev1",content:t},i=JSON.stringify(r);try{this._storage.setItem(e,i)}catch(e){throw e}}}},{key:"getStore",value:function(e,t){try{if(!this._storage)return}catch(e){return""}t=t||"localCachev1";var n=this._storage.getItem(e);return n&&n.indexOf(t)>=0?JSON.parse(n).content:""}},{key:"removeStore",value:function(e){this._storage.removeItem(e)}}]),e}(),tt={},nt={};function rt(e){return tt[e]}var it=(0,g.default)((function e(t,n){(0,v.default)(this,e),this.data=n||null,this.name=t})),ot=function(e){(0,f.default)(n,e);var t=T(n);function n(e,r){var i;return(0,v.default)(this,n),i=t.call(this,"error",{error:e,data:r}),i.error=e,i}return(0,g.default)(n)}(it),at=new(function(){function e(){(0,v.default)(this,e),this._listeners={}}return(0,g.default)(e,[{key:"on",value:function(e,t){return function(e,t,n){n[e]=n[e]||[],n[e].push(t)}(e,t,this._listeners),this}},{key:"off",value:function(e,t){return function(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}(e,t,this._listeners),this}},{key:"fire",value:function(e,t){if(e instanceof ot)return console.error(e.error),this;var n="string"==typeof e?new it(e,t||{}):e,r=n.name;if(this._listens(r)){n.target=this;var i,o=this._listeners[r]?(0,l.default)(this._listeners[r]):[],a=x(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.call(this,n)}}catch(u){a.e(u)}finally{a.f()}}return this}},{key:"_listens",value:function(e){return this._listeners[e]&&this._listeners[e].length>0}}]),e}());function st(e,t){at.on(e,t)}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};at.fire(e,t)}function ct(e,t){at.off(e,t)}var lt,dt="loginStateChanged",ht="loginStateExpire",ft="loginTypeChanged",pt="anonymousConverted",mt="refreshAccessToken";!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(lt||(lt={}));var yt=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],vt={"X-SDK-Version":"1.3.5"};function gt(e,t,n){var r=e[t];e[t]=function(t){var i={},o={};n.forEach((function(n){var r=n.call(e,t),a=r.data,s=r.headers;Object.assign(i,a),Object.assign(o,s)}));var a=t.data;return a&&function(){var e;if(e=a,"[object FormData]"!==Object.prototype.toString.call(e))t.data=S(S({},a),i);else for(var n in i)a.append(n,i[n])}(),t.headers=S(S({},t.headers||{}),o),r.call(e,t)}}function _t(){var e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:S(S({},vt),{},{"x-seqid":e})}}var bt=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,v.default)(this,e),this.config=n,this._reqClass=new Ke.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:"请求在".concat(this.config.timeout/1e3,"s内未完成，已中断"),restrictedMethods:["post"]}),this._cache=rt(this.config.env),this._localCache=(t=this.config.env,nt[t]),gt(this._reqClass,"post",[_t]),gt(this._reqClass,"upload",[_t]),gt(this._reqClass,"download",[_t])}return(0,g.default)(e,[{key:"post",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._reqClass.post(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"upload",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._reqClass.upload(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"download",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._reqClass.download(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refreshAccessToken",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken()),e.prev=1,e.next=4,this._refreshAccessTokenPromise;case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),n=e.t0;case 10:if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,!n){e.next=12;break}throw n;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_refreshAccessToken",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i,o,s,u,c,l,d,h,f,p;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey,o=t.loginTypeKey,s=t.anonymousUuidKey,this._cache.removeStore(n),this._cache.removeStore(r),u=this._cache.getStore(i),u){e.next=5;break}throw new Ae({message:"未登录CloudBase"});case 5:return c={refresh_token:u},e.next=8,this.request("auth.fetchAccessTokenWithRefreshToken",c);case 8:if(l=e.sent,!l.data.code){e.next=21;break}if(d=l.data.code,"SIGN_PARAM_INVALID"!==d&&"REFRESH_TOKEN_EXPIRED"!==d&&"INVALID_REFRESH_TOKEN"!==d){e.next=20;break}if(this._cache.getStore(o)!==lt.ANONYMOUS||"INVALID_REFRESH_TOKEN"!==d){e.next=19;break}return h=this._cache.getStore(s),f=this._cache.getStore(i),e.next=17,this.send("auth.signInAnonymously",{anonymous_uuid:h,refresh_token:f});case 17:return p=e.sent,e.abrupt("return",(this.setRefreshToken(p.refresh_token),this._refreshAccessToken()));case 19:ut(ht),this._cache.removeStore(i);case 20:throw new Ae({code:l.data.code,message:"刷新access token失败：".concat(l.data.code)});case 21:if(!l.data.access_token){e.next=23;break}return e.abrupt("return",(ut(mt),this._cache.setStore(n,l.data.access_token),this._cache.setStore(r,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire}));case 23:l.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,l.data.refresh_token),this._refreshAccessToken());case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAccessToken",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey,this._cache.getStore(i)){e.next=3;break}throw new Ae({message:"refresh token不存在，登录状态异常"});case 3:if(o=this._cache.getStore(n),s=this._cache.getStore(r),u=!0,e.t0=this._shouldRefreshAccessTokenHook,!e.t0){e.next=9;break}return e.next=8,this._shouldRefreshAccessTokenHook(o,s);case 8:e.t0=!e.sent;case 9:if(e.t1=e.t0,!e.t1){e.next=12;break}u=!1;case 12:return e.abrupt("return",(!o||!s||s<Date.now())&&u?this.refreshAccessToken():{accessToken:o,accessTokenExpire:s});case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n,r){var i,o,s,u,c,l,d,h,f,p,m,y,v,g,_,b;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="x-tcb-trace_".concat(this.config.env),o="application/x-www-form-urlencoded",s=S({action:t,env:this.config.env,dataVersion:"2019-08-16"},n),-1!==yt.indexOf(t)){e.next=10;break}if(u=this._cache.keys.refreshTokenKey,e.t0=this._cache.getStore(u),!e.t0){e.next=10;break}return e.next=9,this.getAccessToken();case 9:s.access_token=e.sent.accessToken;case 10:if("storage.uploadFile"===t){for(l in c=new FormData,c)c.hasOwnProperty(l)&&void 0!==c[l]&&c.append(l,s[l]);o="multipart/form-data"}else for(d in o="application/json",c={},s)void 0!==s[d]&&(c[d]=s[d]);return h={headers:{"content-type":o}},r&&r.onUploadProgress&&(h.onUploadProgress=r.onUploadProgress),f=this._localCache.getStore(i),f&&(h.headers["X-TCB-Trace"]=f),p=n.parse,m=n.inQuery,y=n.search,v={env:this.config.env},p&&(v.parse=!0),m&&(v=S(S({},m),v)),g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=/\?/.test(t),i="";for(var o in n)""===i?!r&&(t+="?"):i+="&",i+="".concat(o,"=").concat(encodeURIComponent(n[o]));return/^http(s)?\:\/\//.test(t+=i)?t:"".concat(e).concat(t)}(Ve,"//tcb-api.tencentcloudapi.com/web",v),y&&(g+=y),e.next=22,this.post(S({url:g,data:c},h));case 22:if(_=e.sent,b=_.header&&_.header["x-tcb-trace"],b&&this._localCache.setStore(i,b),(200===Number(_.status)||200===Number(_.statusCode))&&_.data){e.next=26;break}throw new Ae({code:"NETWORK_ERROR",message:"network request error"});case 26:return e.abrupt("return",_);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.request(t,n,{onUploadProgress:n.onUploadProgress});case 3:if(r=e.sent,"ACCESS_TOKEN_EXPIRED"!==r.data.code||-1!==yt.indexOf(t)){e.next=13;break}return e.next=7,this.refreshAccessToken();case 7:return e.next=9,this.request(t,n,{onUploadProgress:n.onUploadProgress});case 9:if(i=e.sent,!i.data.code){e.next=12;break}throw new Ae({code:i.data.code,message:i.data.message});case 12:return e.abrupt("return",i.data);case 13:if(!r.data.code){e.next=15;break}throw new Ae({code:r.data.code,message:r.data.message});case 15:return e.abrupt("return",r.data);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRefreshToken",value:function(e){var t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey;this._cache.removeStore(n),this._cache.removeStore(r),this._cache.setStore(i,e)}}]),e}(),xt={};function Mt(e){return xt[e]}var Ct=function(){function e(t){(0,v.default)(this,e),this.config=t,this._cache=rt(t.env),this._request=Mt(t.env)}return(0,g.default)(e,[{key:"setRefreshToken",value:function(e){var t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey;this._cache.removeStore(n),this._cache.removeStore(r),this._cache.setStore(i,e)}},{key:"setAccessToken",value:function(e,t){var n=this._cache.keys,r=n.accessTokenKey,i=n.accessTokenExpireKey;this._cache.setStore(r,e),this._cache.setStore(i,t)}},{key:"refreshUserInfo",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.send("auth.getUserInfo",{});case 2:return t=e.sent,n=t.data,e.abrupt("return",(this.setLocalUserInfo(n),n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setLocalUserInfo",value:function(e){var t=this._cache.keys.userInfoKey;this._cache.setStore(t,e)}}]),e}(),wt=function(){function e(t){if((0,v.default)(this,e),!t)throw new Ae({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=t,this._cache=rt(this._envId),this._request=Mt(this._envId),this.setUserInfo()}return(0,g.default)(e,[{key:"linkWithTicket",value:function(e){if("string"!=typeof e)throw new Ae({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}},{key:"linkWithRedirect",value:function(e){e.signInWithRedirect()}},{key:"updatePassword",value:function(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}},{key:"updateEmail",value:function(e){return this._request.send("auth.updateEmail",{newEmail:e})}},{key:"updateUsername",value:function(e){if("string"!=typeof e)throw new Ae({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}},{key:"getLinkedUidList",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.send("auth.getLinkedUidList",{});case 2:return t=e.sent,n=t.data,r=!1,i=n.users,e.abrupt("return",(i.forEach((function(e){e.wxOpenId&&e.wxPublicId&&(r=!0)})),{users:i,hasPrimaryUid:r}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setPrimaryUid",value:function(e){return this._request.send("auth.setPrimaryUid",{uid:e})}},{key:"unlink",value:function(e){return this._request.send("auth.unlink",{platform:e})}},{key:"update",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.nickName,r=t.gender,i=t.avatarUrl,o=t.province,s=t.country,u=t.city,e.next=8,this._request.send("auth.updateUserInfo",{nickName:n,gender:r,avatarUrl:i,province:o,country:s,city:u});case 8:c=e.sent,l=c.data,this.setLocalUserInfo(l);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refresh",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.send("auth.getUserInfo",{});case 2:return t=e.sent,n=t.data,e.abrupt("return",(this.setLocalUserInfo(n),n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUserInfo",value:function(){var e=this,t=this._cache.keys.userInfoKey,n=this._cache.getStore(t);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((function(t){e[t]=n[t]})),this.location={country:n.country,province:n.province,city:n.city}}},{key:"setLocalUserInfo",value:function(e){var t=this._cache.keys.userInfoKey;this._cache.setStore(t,e),this.setUserInfo()}}]),e}(),St=function(){function e(t){if((0,v.default)(this,e),!t)throw new Ae({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=rt(t);var n=this._cache.keys,r=n.refreshTokenKey,i=n.accessTokenKey,o=n.accessTokenExpireKey,a=this._cache.getStore(r),s=this._cache.getStore(i),u=this._cache.getStore(o);this.credential={refreshToken:a,accessToken:s,accessTokenExpire:u},this.user=new wt(t)}return(0,g.default)(e,[{key:"isAnonymousAuth",get:function(){return this.loginType===lt.ANONYMOUS}},{key:"isCustomAuth",get:function(){return this.loginType===lt.CUSTOM}},{key:"isWeixinAuth",get:function(){return this.loginType===lt.WECHAT||this.loginType===lt.WECHAT_OPEN||this.loginType===lt.WECHAT_PUBLIC}},{key:"loginType",get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}]),e}(),Tt=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,v.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._cache.updatePersistence("local"),t=this._cache.keys,n=t.anonymousUuidKey,r=t.refreshTokenKey,i=this._cache.getStore(n)||void 0,o=this._cache.getStore(r)||void 0,e.next=8,this._request.send("auth.signInAnonymously",{anonymous_uuid:i,refresh_token:o});case 8:if(s=e.sent,!s.uuid||!s.refresh_token){e.next=20;break}return this._setAnonymousUUID(s.uuid),this.setRefreshToken(s.refresh_token),e.next=14,this._request.refreshAccessToken();case 14:return ut(dt),ut(ft,{env:this.config.env,loginType:lt.ANONYMOUS,persistence:"local"}),u=new St(this.config.env),e.next=19,u.user.refresh();case 19:return e.abrupt("return",u);case 20:throw new Ae({message:"匿名登录失败"});case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"linkAndRetrieveDataWithTicket",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._cache.keys,r=n.anonymousUuidKey,i=n.refreshTokenKey,o=this._cache.getStore(r),s=this._cache.getStore(i),e.next=7,this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:o,refresh_token:s,ticket:t});case 7:if(u=e.sent,!u.refresh_token){e.next=16;break}return this._clearAnonymousUUID(),this.setRefreshToken(u.refresh_token),e.next=13,this._request.refreshAccessToken();case 13:return ut(pt,{env:this.config.env}),ut(ft,{loginType:lt.CUSTOM,persistence:"local"}),e.abrupt("return",{credential:{refreshToken:u.refresh_token}});case 16:throw new Ae({message:"匿名转化失败"});case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_setAnonymousUUID",value:function(e){var t=this._cache.keys,n=t.anonymousUuidKey,r=t.loginTypeKey;this._cache.removeStore(n),this._cache.setStore(n,e),this._cache.setStore(r,lt.ANONYMOUS)}},{key:"_clearAnonymousUUID",value:function(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}]),n}(Ct),Nt=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,v.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new Ae({code:"PARAM_ERROR",message:"ticket must be a string"});case 2:return n=this._cache.keys.refreshTokenKey,e.next=5,this._request.send("auth.signInWithTicket",{ticket:t,refresh_token:this._cache.getStore(n)||""});case 5:if(r=e.sent,!r.refresh_token){e.next=15;break}return this.setRefreshToken(r.refresh_token),e.next=10,this._request.refreshAccessToken();case 10:return ut(dt),ut(ft,{env:this.config.env,loginType:lt.CUSTOM,persistence:this.config.persistence}),e.next=14,this.refreshUserInfo();case 14:return e.abrupt("return",new St(this.config.env));case 15:throw new Ae({message:"自定义登录失败"});case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Ct),Et=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,v.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n){var r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new Ae({code:"PARAM_ERROR",message:"email must be a string"});case 2:return r=this._cache.keys.refreshTokenKey,e.next=5,this._request.send("auth.signIn",{loginType:"EMAIL",email:t,password:n,refresh_token:this._cache.getStore(r)||""});case 5:if(i=e.sent,o=i.refresh_token,s=i.access_token,u=i.access_token_expire,!o){e.next=22;break}if(this.setRefreshToken(o),!s||!u){e.next=15;break}this.setAccessToken(s,u),e.next=17;break;case 15:return e.next=17,this._request.refreshAccessToken();case 17:return e.next=19,this.refreshUserInfo();case 19:return ut(dt),ut(ft,{env:this.config.env,loginType:lt.EMAIL,persistence:this.config.persistence}),e.abrupt("return",new St(this.config.env));case 22:throw i.code?new Ae({code:i.code,message:"邮箱登录失败: ".concat(i.message)}):new Ae({message:"邮箱登录失败"});case 23:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"activate",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.activateEndUserMail",{token:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetPasswordWithToken",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.resetPasswordWithToken",{token:t,newPassword:n}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(Ct),At=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,v.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n){var r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new Ae({code:"PARAM_ERROR",message:"username must be a string"});case 2:return"string"!=typeof n&&(n="",console.warn("password is empty")),r=this._cache.keys.refreshTokenKey,e.next=6,this._request.send("auth.signIn",{loginType:lt.USERNAME,username:t,password:n,refresh_token:this._cache.getStore(r)||""});case 6:if(i=e.sent,o=i.refresh_token,s=i.access_token_expire,u=i.access_token,!o){e.next=23;break}if(this.setRefreshToken(o),!u||!s){e.next=16;break}this.setAccessToken(u,s),e.next=18;break;case 16:return e.next=18,this._request.refreshAccessToken();case 18:return e.next=20,this.refreshUserInfo();case 20:return ut(dt),ut(ft,{env:this.config.env,loginType:lt.USERNAME,persistence:this.config.persistence}),e.abrupt("return",new St(this.config.env));case 23:throw i.code?new Ae({code:i.code,message:"用户名密码登录失败: ".concat(i.message)}):new Ae({message:"用户名密码登录失败"});case 24:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(Ct),Rt=function(){function e(t){(0,v.default)(this,e),this.config=t,this._cache=rt(t.env),this._request=Mt(t.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),st(ft,this._onLoginTypeChanged)}return(0,g.default)(e,[{key:"currentUser",get:function(){var e=this.hasLoginState();return e&&e.user||null}},{key:"loginType",get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},{key:"anonymousAuthProvider",value:function(){return new Tt(this.config)}},{key:"customAuthProvider",value:function(){return new Nt(this.config)}},{key:"emailAuthProvider",value:function(){return new Et(this.config)}},{key:"usernameAuthProvider",value:function(){return new At(this.config)}},{key:"signInAnonymously",value:function(){var e=(0,d.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Tt(this.config).signIn());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"signInWithEmailAndPassword",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Et(this.config).signIn(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"signInWithUsernameAndPassword",value:function(e,t){return new At(this.config).signIn(e,t)}},{key:"linkAndRetrieveDataWithTicket",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Tt(this.config)),st(pt,this._onAnonymousConverted),e.next=3,this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signOut",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loginType!==lt.ANONYMOUS){e.next=2;break}throw new Ae({message:"匿名用户不支持登出操作"});case 2:if(t=this._cache.keys,n=t.refreshTokenKey,r=t.accessTokenKey,i=t.accessTokenExpireKey,o=this._cache.getStore(n),o){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this._request.send("auth.logout",{refresh_token:o});case 7:return s=e.sent,e.abrupt("return",(this._cache.removeStore(n),this._cache.removeStore(r),this._cache.removeStore(i),ut(dt),ut(ft,{env:this.config.env,loginType:lt.NULL,persistence:this.config.persistence}),s));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"signUpWithEmailAndPassword",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.signUpWithEmailAndPassword",{email:t,password:n}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sendPasswordResetEmail",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.sendPasswordResetEmail",{email:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onLoginStateChanged",value:function(e){var t=this;st(dt,(function(){var n=t.hasLoginState();e.call(t,n)}));var n=this.hasLoginState();e.call(this,n)}},{key:"onLoginStateExpired",value:function(e){st(ht,e.bind(this))}},{key:"onAccessTokenRefreshed",value:function(e){st(mt,e.bind(this))}},{key:"onAnonymousConverted",value:function(e){st(pt,e.bind(this))}},{key:"onLoginTypeChanged",value:function(e){var t=this;st(ft,(function(){var n=t.hasLoginState();e.call(t,n)}))}},{key:"getAccessToken",value:function(){var e=(0,d.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.getAccessToken();case 2:return e.t0=e.sent.accessToken,e.t1=this.config.env,e.abrupt("return",{accessToken:e.t0,env:e.t1});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasLoginState",value:function(){var e=this._cache.keys.refreshTokenKey;return this._cache.getStore(e)?new St(this.config.env):null}},{key:"isUsernameRegistered",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new Ae({code:"PARAM_ERROR",message:"username must be a string"});case 2:return e.next=4,this._request.send("auth.isUsernameRegistered",{username:t});case 4:return n=e.sent,r=n.data,e.abrupt("return",r&&r.isRegistered);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getLoginState",value:function(){return Promise.resolve(this.hasLoginState())}},{key:"signInWithTicket",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Nt(this.config).signIn(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"shouldRefreshAccessToken",value:function(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}},{key:"getUserInfo",value:function(){return this._request.send("auth.getUserInfo",{}).then((function(e){return e.code?e:S(S({},e.data),{},{requestId:e.seqId})}))}},{key:"getAuthHeader",value:function(){var e=this._cache.keys,t=e.refreshTokenKey,n=e.accessTokenKey,r=this._cache.getStore(t);return{"x-cloudbase-credentials":this._cache.getStore(n)+"/@@/"+r}}},{key:"_onAnonymousConverted",value:function(e){var t=e.data.env;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}},{key:"_onLoginTypeChanged",value:function(e){var t=e.data,n=t.loginType,r=t.persistence,i=t.env;i===this.config.env&&(this._cache.updatePersistence(r),this._cache.setStore(this._cache.keys.loginTypeKey,n))}}]),e}(),Pt=function(e,t){t=t||qe();var n=Mt(this.config.env),r=e.cloudPath,i=e.filePath,o=e.onUploadProgress,a=e.fileType,s=void 0===a?"image":a;return n.send("storage.getUploadMetadata",{path:r}).then((function(e){var a=e.data,u=a.url,c=a.authorization,l=a.token,d=a.fileId,h=a.cosFileId,f=e.requestId,p={key:r,signature:c,"x-cos-meta-fileid":h,success_action_status:"201","x-cos-security-token":l};n.upload({url:u,data:p,file:i,name:r,fileType:s,onUploadProgress:o}).then((function(e){201===e.statusCode?t(null,{fileID:d,requestId:f}):t(new Ae({code:"STORAGE_REQUEST_FAIL",message:"STORAGE_REQUEST_FAIL: ".concat(e.data)}))})).catch((function(e){t(e)}))})).catch((function(e){t(e)})),t.promise},Lt=function(e,t){t=t||qe();var n=Mt(this.config.env),r=e.cloudPath;return n.send("storage.getUploadMetadata",{path:r}).then((function(e){t(null,e)})).catch((function(e){t(e)})),t.promise},Ot=function(e,t){var n=e.fileList;if(t=t||qe(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!o||"string"!=typeof o)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"}}}catch(s){i.e(s)}finally{i.f()}var a={fileid_list:n};return Mt(this.config.env).send("storage.batchDeleteFile",a).then((function(e){e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((function(e){t(e)})),t.promise},kt=function(e,t){var n=e.fileList;t=t||qe(),n&&Array.isArray(n)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});var r,i=[],o=x(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;"object"==(0,c.default)(a)?(a.hasOwnProperty("fileID")&&a.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),i.push({fileid:a.fileID,max_age:a.maxAge})):"string"==typeof a?i.push({fileid:a}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"})}}catch(u){o.e(u)}finally{o.f()}var s={file_list:i};return Mt(this.config.env).send("storage.batchGetDownloadUrl",s).then((function(e){e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((function(e){t(e)})),t.promise},It=function(){var e=(0,d.default)(a.default.mark((function e(t,n){var r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.fileID,e.next=3,kt.call(this,{fileList:[{fileID:r,maxAge:600}]});case 3:if(i=e.sent.fileList[0],"SUCCESS"===i.code){e.next=6;break}return e.abrupt("return",n?n(i):new Promise((function(e){e(i)})));case 6:if(o=Mt(this.config.env),s=i.download_url,s=encodeURI(s),n){e.next=10;break}return e.abrupt("return",o.download({url:s}));case 10:return e.t0=n,e.next=13,o.download({url:s});case 13:e.t1=e.sent,(0,e.t0)(e.t1);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),Dt=function(e,t){var n,r=e.name,i=e.data,o=e.query,a=e.parse,s=e.search,u=t||qe();try{n=i?JSON.stringify(i):""}catch(r){return Promise.reject(r)}if(!r)return Promise.reject(new Ae({code:"PARAM_ERROR",message:"函数名不能为空"}));var c={inQuery:o,parse:a,search:s,function_name:r,request_data:n};return Mt(this.config.env).send("functions.invokeFunction",c).then((function(e){if(e.code)u(null,e);else{var t=e.data.response_data;if(a)u(null,{result:t,requestId:e.requestId});else try{t=JSON.parse(e.data.response_data),u(null,{result:t,requestId:e.requestId})}catch(e){u(new Ae({message:"response data must be json"}))}}return u.promise})).catch((function(e){u(e)})),u.promise},Ut={timeout:15e3,persistence:"session"},Bt={},Ft=function(){function e(t){(0,v.default)(this,e),this.config=t||this.config,this.authObj=void 0}return(0,g.default)(e,[{key:"init",value:function(t){switch(Ke.adapter||(this.requestClient=new Ke.adapter.reqClass({timeout:t.timeout||5e3,timeoutMsg:"请求在".concat((t.timeout||5e3)/1e3,"s内未完成，已中断")})),this.config=S(S({},Ut),t),!0){case this.config.timeout>6e5:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new e(this.config)}},{key:"auth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.persistence;if(this.authObj)return this.authObj;var n,r=t||Ke.adapter.primaryStorage||Ut.persistence;return r!==this.config.persistence&&(this.config.persistence=r),function(e){var t=e.env;tt[t]=new et(e),nt[t]=new et(S(S({},e),{},{persistence:"local"}))}(this.config),n=this.config,xt[n.env]=new bt(n),this.authObj=new Rt(this.config),this.authObj}},{key:"on",value:function(e,t){return st.apply(this,[e,t])}},{key:"off",value:function(e,t){return ct.apply(this,[e,t])}},{key:"callFunction",value:function(e,t){return Dt.apply(this,[e,t])}},{key:"deleteFile",value:function(e,t){return Ot.apply(this,[e,t])}},{key:"getTempFileURL",value:function(e,t){return kt.apply(this,[e,t])}},{key:"downloadFile",value:function(e,t){return It.apply(this,[e,t])}},{key:"uploadFile",value:function(e,t){return Pt.apply(this,[e,t])}},{key:"getUploadMetadata",value:function(e,t){return Lt.apply(this,[e,t])}},{key:"registerExtension",value:function(e){Bt[e.name]=e}},{key:"invokeExtension",value:function(){var e=(0,d.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Bt[t],r){e.next=3;break}throw new Ae({message:"扩展".concat(t," 必须先注册")});case 3:return e.next=5,r.invoke(n,this);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"useAdapters",value:function(e){var t=Je(e)||{},n=t.adapter,r=t.runtime;n&&(Ke.adapter=n),r&&(Ke.runtime=r)}}]),e}(),Gt=new Ft;function jt(e,t,n){void 0===n&&(n={});var r=/\?/.test(t),i="";for(var o in n)""===i?!r&&(t+="?"):i+="&",i+=o+"="+encodeURIComponent(n[o]);return/^http(s)?:\/\//.test(t+=i)?t:""+e+t}var zt=function(){function e(){(0,v.default)(this,e)}return(0,g.default)(e,[{key:"post",value:function(e){var t=e.url,n=e.data,r=e.headers;return new Promise((function(e,i){Re.request({url:jt("https:",t),data:n,method:"POST",header:r,success:function(t){e(t)},fail:function(e){i(e)}})}))}},{key:"upload",value:function(e){return new Promise((function(t,n){var r=e.url,i=e.file,o=e.data,a=e.headers,s=e.fileType,u=Re.uploadFile({url:jt("https:",r),name:"file",formData:Object.assign({},o),filePath:i,fileType:s,header:a,success:function(e){var n={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&o.success_action_status&&(n.statusCode=parseInt(o.success_action_status,10)),t(n)},fail:function(e){n(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&u&&"function"==typeof u.onProgressUpdate&&u.onProgressUpdate((function(t){e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}]),e}(),Vt={setItem:function(e,t){Re.setStorageSync(e,t)},getItem:function(e){return Re.getStorageSync(e)},removeItem:function(e){Re.removeStorageSync(e)},clear:function(){Re.clearStorageSync()}},Ht={genAdapter:function(){return{root:{},reqClass:zt,localStorage:Vt,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Gt.useAdapters(Ht);var Wt=Gt,qt=Wt.init;Wt.init=function(e){e.env=e.spaceId;var t=qt.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;var n=t.auth;return t.auth=function(e){var t=n.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((function(e){var n;t[e]=(n=t[e],function(e){e=e||{};var t=Te(e),r=t.success,i=t.fail,o=t.complete;if(!(r||i||o))return n.call(this,e);n.call(this,e).then((function(e){r&&r(e),o&&o(e)}),(function(e){i&&i(e),o&&o(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var Xt=Wt,Yt=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,v.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"getAccessToken",value:function(){var e=this;return new Promise((function(t,n){var r="Anonymous_Access_token";e.setAccessToken(r),t(r)}))}},{key:"setupRequest",value:function(e,t){var n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),r={"Content-Type":"application/json"};"auth"!==t&&(n.token=this.accessToken,r["x-basement-token"]=this.accessToken),r["x-serverless-sign"]=Ue.sign(n,this.config.clientSecret);var i=Ie();r["x-client-info"]=encodeURIComponent(JSON.stringify(i));var o=Pe(),a=o.token;return r["x-client-token"]=a,{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:JSON.parse(JSON.stringify(r))}}},{key:"uploadFileToOSS",value:function(e){var t=this,n=e.url,r=e.formData,i=e.name,o=e.filePath,a=e.fileType,s=e.onUploadProgress;return new Promise((function(e,u){var c=t.adapter.uploadFile({url:n,formData:r,name:i,filePath:o,fileType:a,success:function(t){t&&t.statusCode<400?e(t):u(new Ae({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail:function(e){u(new Ae({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&c&&"function"==typeof c.onProgressUpdate&&c.onProgressUpdate((function(e){s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}},{key:"uploadFile",value:function(e){var t,n=this,r=e.filePath,i=e.cloudPath,o=e.fileType,a=void 0===o?"image":o,s=e.onUploadProgress;if(!i)throw new Ae({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});return this.getOSSUploadOptionsFromPath({cloudPath:i}).then((function(e){var i=e.result,o=i.url,u=i.formData,c=i.name;t=e.result.fileUrl;var l={url:o,formData:u,name:c,filePath:r,fileType:a};return n.uploadFileToOSS(Object.assign({},l,{onUploadProgress:s}))})).then((function(){return n.reportOSSUpload({cloudPath:i})})).then((function(e){return new Promise((function(n,i){e.success?n({success:!0,filePath:r,fileID:t}):i(new Ae({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))}))}},{key:"deleteFile",value:function(e){var t=e.fileList,n={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:t})};return this.request(this.setupRequest(n)).then((function(e){if(e.success)return e.result;throw new Ae({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}},{key:"getTempFileURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fileList;if(!Array.isArray(t)||0===t.length)throw new Ae({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});var n={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:t})};return this.request(this.setupRequest(n)).then((function(e){if(e.success)return{fileList:e.result.fileList.map((function(e){return{fileID:e.fileID,tempFileURL:e.tempFileURL}}))};throw new Ae({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}}]),n}(je),Jt={init:function(e){var t=new Yt(e),n={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}};function Kt(e){var t,n=e.data;t=Ie();var r=JSON.parse(JSON.stringify(n||{}));if(Object.assign(r,{clientInfo:t}),!r.uniIdToken){var i=Pe(),o=i.token;o&&(r.uniIdToken=o)}return r}function $t(){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,d.default)(a.default.mark((function e(){var t,n,r,i,o,s,u,c,l,d,h=this,f=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=t.name,r=t.data,e.next=3,this.__dev__.initLocalNetwork();case 3:return i=this.__dev__,o=i.localAddress,s=i.localPort,u={aliyun:"aliyun",tencent:"tcb"}[this.config.provider],c=this.config.spaceId,l="http://".concat(o,":").concat(s,"/system/check-function"),d="http://".concat(o,":").concat(s,"/cloudfunctions/").concat(n),e.abrupt("return",new Promise((function(e,t){Re.request({method:"POST",url:l,data:{name:n,platform:Q,provider:u,spaceId:c},timeout:3e3,success:function(t){e(t)},fail:function(){e({data:{code:"NETWORK_ERROR",message:"连接本地调试服务失败，请检查客户端是否和主机在同一局域网下，自动切换为已部署的云函数。"}})}})})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=t||{},r=n.code,i=n.message;return{code:0===r?0:r||"SYS_ERR",message:i||"SYS_ERR"}})).then((function(e){var t=e.code,i=e.message;if(0!==t){switch(t){case"MODULE_ENCRYPTED":console.error("此云函数（".concat(n,"）依赖加密公共模块不可本地调试，自动切换为云端已部署的云函数"));break;case"FUNCTION_ENCRYPTED":console.error("此云函数（".concat(n,"）已加密不可本地调试，自动切换为云端已部署的云函数"));break;case"ACTION_ENCRYPTED":console.error(i||"需要访问加密的uni-clientDB-action，自动切换为云端环境");break;case"NETWORK_ERROR":var o="连接本地调试服务失败，请检查客户端是否和主机在同一局域网下";throw console.error(o),new Error(o);case"SWITCH_TO_CLOUD":break;default:var a="检测本地调试服务出现错误：".concat(i,"，请检查网络环境或重启客户端再试");throw console.error(a),new Error(a)}return h._callCloudFunction({name:n,data:r})}return new Promise((function(e,t){var n=Kt.call(h,{data:r});Re.request({method:"POST",url:d,data:{provider:u,platform:Q,param:n},success:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.statusCode,i=n.data;return!r||r>=400?t(new Ae({code:i.code||"SYS_ERR",message:i.message||"request:fail"})):e({result:i})},fail:function(e){t(new Ae({code:e.code||e.errCode||"SYS_ERR",message:e.message||e.errMsg||"request:fail"}))}})}))})));case 5:case"end":return e.stop()}}),e,this)}))),Zt.apply(this,arguments)}var Qt=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}],en=/[\\^$.*+?()[\]{}|]/g,tn=RegExp(en.source);function nn(e,t,n){return e.replace(new RegExp((r=t)&&tn.test(r)?r.replace(en,"\\$&"):r,"g"),n);var r}var rn="none",on="request",an="response",sn="both",un=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.secretType,r=t.uniCloudIns;(0,v.default)(this,e),this.clientType="",this.secretType=n||rn,this.uniCloudIns=r;var i,o=this.uniCloudIns.config,a=o.provider,s=o.spaceId;this.provider=a,this.spaceId=s,this.scopedGlobalCache=(i=this.uniCloudIns,ie("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",i.config.spaceId)))}return(0,g.default)(e,[{key:"getSystemInfo",value:function(){return this._systemInfo||(this._systemInfo=Oe()),this._systemInfo}},{key:"appId",get:function(){return this.getSystemInfo().appId}},{key:"deviceId",get:function(){return this.getSystemInfo().deviceId}},{key:"encryptData",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.secretType===rn?t:this.platformEncryptData(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"decryptResult",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.secretType!==rn){e.next=2;break}return e.abrupt("return",t);case 2:return n=t||{},r=n.errCode,i=n.content,e.abrupt("return",r||!i?t:this.secretType===on?i:this.platformDecryptResult(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"wrapVerifyClientCallFunction",value:function(e){var t=this;return(0,d.default)(a.default.mark((function n(){var r,i,o,s,u,c=arguments;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},i=r.name,o=r.data,s=void 0===o?{}:o,n.next=3,t.prepare();case 3:return n.next=5,t.platformGetSignOption();case 5:return(s=JSON.parse(JSON.stringify(s)))._uniCloudOptions=n.sent,n.next=8,e({name:i,data:s});case 8:if(u=n.sent,n.t0=t.isClientKeyNotFound(u),!n.t0){n.next=19;break}return n.next=13,t.prepare({forceUpdate:!0});case 13:return n.next=15,t.platformGetSignOption();case 15:return s._uniCloudOptions=n.sent,n.next=18,e({name:i,data:s});case 18:u=n.sent;case 19:return n.abrupt("return",u);case 20:case"end":return n.stop()}}),n)})))}},{key:"wrapEncryptDataCallFunction",value:function(e){var t=this;return(0,d.default)(a.default.mark((function n(){var r,i,o,s,u,c,l,d=arguments;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:{},i=r.name,o=r.data,s=void 0===o?{}:o,n.next=3,t.prepare();case 3:return n.next=5,t.encryptData(s);case 5:return u=n.sent,n.next=8,e({name:i,data:u});case 8:if(c=n.sent,!t.isClientKeyNotFound(c)){n.next=21;break}return n.next=12,t.prepare({forceUpdate:!0});case 12:return n.next=14,t.encryptData(s);case 14:return l=n.sent,n.next=17,t.platformGetSignOption();case 17:return s._uniCloudOptions=n.sent,n.next=20,e({name:i,data:l});case 20:c=n.sent;case 21:return n.next=23,t.decryptResult(c.result);case 23:return c.result=n.sent,n.abrupt("return",c);case 25:case"end":return n.stop()}}),n)})))}}]),e}();
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */
function cn(e){return parseInt(e)===e}function ln(e){if(!cn(e.length))return!1;for(var t=0;t<e.length;t++)if(!cn(e[t])||e[t]<0||e[t]>255)return!1;return!0}function dn(e,t){if(e.buffer&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!ln(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(cn(e.length)&&ln(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function hn(e){return new Uint8Array(e)}function fn(e,t,n,r,i){null==r&&null==i||(e=e.slice?e.slice(r,i):Array.prototype.slice.call(e,r,i)),t.set(e,n)}var pn,mn={toBytes:function(e){var t=[],n=0;for(e=encodeURI(e);n<e.length;){var r=e.charCodeAt(n++);37===r?(t.push(parseInt(e.substr(n,2),16)),n+=2):t.push(r)}return dn(t)},fromBytes:function(e){for(var t=[],n=0;n<e.length;){var r=e[n];r<128?(t.push(String.fromCharCode(r)),n++):r>191&&r<224?(t.push(String.fromCharCode((31&r)<<6|63&e[n+1])),n+=2):(t.push(String.fromCharCode((15&r)<<12|(63&e[n+1])<<6|63&e[n+2])),n+=3)}return t.join("")}},yn=(pn="0123456789abcdef",{toBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},fromBytes:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(pn[(240&r)>>4]+pn[15&r])}return t.join("")}}),vn={16:10,24:12,32:14},gn=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],_n=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],bn=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],xn=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Mn=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Cn=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],wn=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Sn=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Tn=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Nn=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],En=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],An=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Rn=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Pn=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Ln=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function On(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}var kn=function(){function e(t){if((0,v.default)(this,e),!(this instanceof e))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:dn(t,!0)}),this._prepare()}return(0,g.default)(e,[{key:"_prepare",value:function(){var e=vn[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(e+1),i=this.key.length/4,o=On(this.key);for(t=0;t<i;t++)n=t>>2,this._Ke[n][t%4]=o[t],this._Kd[e-n][t%4]=o[t];for(var a,s=0,u=i;u<r;){if(a=o[i-1],o[0]^=_n[a>>16&255]<<24^_n[a>>8&255]<<16^_n[255&a]<<8^_n[a>>24&255]^gn[s]<<24,s+=1,8!=i)for(t=1;t<i;t++)o[t]^=o[t-1];else{for(t=1;t<i/2;t++)o[t]^=o[t-1];for(a=o[i/2-1],o[i/2]^=_n[255&a]^_n[a>>8&255]<<8^_n[a>>16&255]<<16^_n[a>>24&255]<<24,t=i/2+1;t<i;t++)o[t]^=o[t-1]}for(t=0;t<i&&u<r;)c=u>>2,l=u%4,this._Ke[c][l]=o[t],this._Kd[e-c][l]=o[t++],u++}for(var c=1;c<e;c++)for(var l=0;l<4;l++)a=this._Kd[c][l],this._Kd[c][l]=An[a>>24&255]^Rn[a>>16&255]^Pn[a>>8&255]^Ln[255&a]}},{key:"encrypt",value:function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,n=[0,0,0,0],r=On(e),i=0;i<4;i++)r[i]^=this._Ke[0][i];for(var o=1;o<t;o++){for(i=0;i<4;i++)n[i]=xn[r[i]>>24&255]^Mn[r[(i+1)%4]>>16&255]^Cn[r[(i+2)%4]>>8&255]^wn[255&r[(i+3)%4]]^this._Ke[o][i];r=n.slice()}var a,s=hn(16);for(i=0;i<4;i++)a=this._Ke[t][i],s[4*i]=255&(_n[r[i]>>24&255]^a>>24),s[4*i+1]=255&(_n[r[(i+1)%4]>>16&255]^a>>16),s[4*i+2]=255&(_n[r[(i+2)%4]>>8&255]^a>>8),s[4*i+3]=255&(_n[255&r[(i+3)%4]]^a);return s}},{key:"decrypt",value:function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,n=[0,0,0,0],r=On(e),i=0;i<4;i++)r[i]^=this._Kd[0][i];for(var o=1;o<t;o++){for(i=0;i<4;i++)n[i]=Sn[r[i]>>24&255]^Tn[r[(i+3)%4]>>16&255]^Nn[r[(i+2)%4]>>8&255]^En[255&r[(i+1)%4]]^this._Kd[o][i];r=n.slice()}var a,s=hn(16);for(i=0;i<4;i++)a=this._Kd[t][i],s[4*i]=255&(bn[r[i]>>24&255]^a>>24),s[4*i+1]=255&(bn[r[(i+3)%4]>>16&255]^a>>16),s[4*i+2]=255&(bn[r[(i+2)%4]>>8&255]^a>>8),s[4*i+3]=255&(bn[255&r[(i+1)%4]]^a);return s}}]),e}(),In=function(){function e(t){if((0,v.default)(this,e),!(this instanceof e))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new kn(t)}return(0,g.default)(e,[{key:"encrypt",value:function(e){if((e=dn(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=hn(e.length),n=hn(16),r=0;r<e.length;r+=16)fn(e,n,0,r,r+16),fn(n=this._aes.encrypt(n),t,r);return t}},{key:"decrypt",value:function(e){if((e=dn(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=hn(e.length),n=hn(16),r=0;r<e.length;r+=16)fn(e,n,0,r,r+16),fn(n=this._aes.decrypt(n),t,r);return t}}]),e}(),Dn=function(){function e(t,n){if((0,v.default)(this,e),!(this instanceof e))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else n=hn(16);this._lastCipherblock=dn(n,!0),this._aes=new kn(t)}return(0,g.default)(e,[{key:"encrypt",value:function(e){if((e=dn(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=hn(e.length),n=hn(16),r=0;r<e.length;r+=16){fn(e,n,0,r,r+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),fn(this._lastCipherblock,t,r)}return t}},{key:"decrypt",value:function(e){if((e=dn(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=hn(e.length),n=hn(16),r=0;r<e.length;r+=16){fn(e,n,0,r,r+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)t[r+i]=n[i]^this._lastCipherblock[i];fn(e,this._lastCipherblock,0,r,r+16)}return t}}]),e}(),Un=function(){function e(t,n,r){if((0,v.default)(this,e),!(this instanceof e))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 size)")}else n=hn(16);r||(r=1),this.segmentSize=r,this._shiftRegister=dn(n,!0),this._aes=new kn(t)}return(0,g.default)(e,[{key:"encrypt",value:function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,n=dn(e,!0),r=0;r<n.length;r+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=t[i];fn(this._shiftRegister,this._shiftRegister,0,this.segmentSize),fn(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n}},{key:"decrypt",value:function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,n=dn(e,!0),r=0;r<n.length;r+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=t[i];fn(this._shiftRegister,this._shiftRegister,0,this.segmentSize),fn(e,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n}}]),e}(),Bn=function(){function e(t,n){if((0,v.default)(this,e),!(this instanceof e))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else n=hn(16);this._lastPrecipher=dn(n,!0),this._lastPrecipherIndex=16,this._aes=new kn(t)}return(0,g.default)(e,[{key:"encrypt",value:function(e){for(var t=dn(e,!0),n=0;n<t.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return t}},{key:"decrypt",value:function(e){return this.encrypt(e)}}]),e}(),Fn=function(){function e(t){if((0,v.default)(this,e),!(this instanceof e))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=hn(16),this.setValue(t)):this.setBytes(t)}return(0,g.default)(e,[{key:"setValue",value:function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;t>=0;--t)this._counter[t]=e%256,e=parseInt(e/256)}},{key:"setBytes",value:function(e){if(16!=(e=dn(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e}},{key:"increment",value:function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}}}]),e}(),Gn=function(){function e(t,n){if((0,v.default)(this,e),!(this instanceof e))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",n instanceof Fn||(n=new Fn(n)),this._counter=n,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new kn(t)}return(0,g.default)(e,[{key:"encrypt",value:function(e){for(var t=dn(e,!0),n=0;n<t.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[n]^=this._remainingCounter[this._remainingCounterIndex++];return t}},{key:"decrypt",value:function(e){return this.encrypt(e)}}]),e}(),jn={AES:kn,Counter:Fn,ModeOfOperation:{ecb:In,cbc:Dn,cfb:Un,ofb:Bn,ctr:Gn},utils:{hex:yn,utf8:mn},padding:{pkcs7:{pad:function(e){var t=16-(e=dn(e,!0)).length%16,n=hn(e.length+t);fn(e,n);for(var r=e.length;r<n.length;r++)n[r]=t;return n},strip:function(e){if((e=dn(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var n=e.length-t,r=0;r<t;r++)if(e[n+r]!==t)throw new Error("PKCS#7 invalid padding byte");var i=hn(n);return fn(e,i,0,0,n),i}}},_arrayTest:{coerceArray:dn,createArray:hn,copyArray:fn}};function zn(e,t,n){var i=new Uint8Array(r.base64ToArrayBuffer(t)),o=jn.utils.utf8.toBytes(n),a=jn.utils.utf8.toBytes(e),s=new jn.ModeOfOperation.cbc(i,o),u=jn.padding.pkcs7.pad(a),c=s.encrypt(u);return r.arrayBufferToBase64(c)}var Vn={code:2e4,message:"System error"},Hn={code:20101,message:"Invalid client"},Wn={code:20102,message:"Get encrypt key failed"},qn={10001:"Secure network is not supported on current playground or unimpsdk",10003:"Config missing in current app. If the problem pesist, please contact DCloud.",10009:"Encrypt payload failed",10010:"Decrypt response failed"};function Xn(e){var t=e||{},n=t.errSubject,r=t.subject,i=t.errCode,o=t.errMsg,a=t.code,s=t.message,u=t.cause;return new Ae({subject:n||r||"uni-secure-network",code:i||a||Vn.code,message:o||s,cause:u})}var Yn,Jn,Kn=null,$n=function(e){(0,f.default)(n,e);var t=T(n);function n(e){var r;return(0,v.default)(this,n),r=t.call(this,e),r.clientType="mp-weixin",r.userEncryptKey=null,r}return(0,g.default)(n,[{key:"isLogin",value:function(){return!!this.scopedGlobalCache.mpWeixinCode||!!this.scopedGlobalCache.mpWeixinOpenid}},{key:"prepare",value:function(){var e=(0,d.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLogin()){e.next=7;break}if(this.scopedGlobalCache.initPromise){e.next=3;break}throw new Error("`uniCloud.initSecureNetworkByWeixin` has not yet been called");case 3:return e.next=5,this.scopedGlobalCache.initPromise;case 5:if(this.isLogin()){e.next=7;break}throw new Error("uniCloud.initSecureNetworkByWeixin` has not yet been called or successfully excuted");case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserEncryptKey",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n=this;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.userEncryptKey){e.next=2;break}return e.abrupt("return",this.userEncryptKey);case 2:if(!Kn||!Kn.expireTime){e.next=6;break}if(t=Date.now(),!(Kn.expireTime-t>0)){e.next=6;break}return e.abrupt("return",(this.userEncryptKey=Kn,this.userEncryptKey));case 6:return e.abrupt("return",new Promise((function(e,t){r.getUserCryptoManager().getLatestUserKey({success:function(t){Kn=t,n.userEncryptKey=t,e(n.userEncryptKey)},fail:function(e){t(Xn(S(S({},Wn),{},{cause:e})))}})})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWxAppId",value:function(){return i.getAccountInfoSync().miniProgram.appId}},{key:"platformGetSignOption",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUserEncryptKey();case 2:return t=e.sent,n=t.encryptKey,r=t.iv,i=t.version,e.abrupt("return",{verifyClientSign:zn(JSON.stringify({data:JSON.stringify({}),appId:this.appId,deviceId:this.deviceId,wxAppId:this.getWxAppId(),simulator:"devtools"===Oe().platform,timestamp:Date.now()}),n,r),encryptKeyId:i,mpWeixinCode:this.scopedGlobalCache.mpWeixinCode,mpWeixinOpenid:this.scopedGlobalCache.mpWeixinOpenid});case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"platformEncryptData",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUserEncryptKey();case 2:return n=e.sent,r=n.encryptKey,i=n.iv,o=n.version,s={secretType:this.secretType,encryptKeyId:o,mpWeixinCode:this.scopedGlobalCache.mpWeixinCode,mpWeixinOpenid:this.scopedGlobalCache.mpWeixinOpenid},e.abrupt("return",this.secretType===an?{content:t,_uniCloudOptions:s}:{content:zn(JSON.stringify({data:JSON.stringify(t),appId:this.appId,deviceId:this.deviceId,wxAppId:this.getWxAppId(),simulator:"devtools"===Oe().platform,timestamp:Date.now()}),r,i),_uniCloudOptions:s});case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"platformDecryptResult",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.content,e.next=3,this.getUserEncryptKey();case 3:return i=e.sent,o=i.encryptKey,s=i.iv,e.abrupt("return",JSON.parse(function(e,t,n){var i=new Uint8Array(r.base64ToArrayBuffer(e)),o=new Uint8Array(r.base64ToArrayBuffer(t)),a=jn.utils.utf8.toBytes(n),s=new jn.ModeOfOperation.cbc(o,a),u=jn.padding.pkcs7.strip(s.decrypt(i));return jn.utils.utf8.fromBytes(u)}(n,o,s)));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isClientKeyNotFound",value:function(){return!1}}]),n}(un);function Zn(e){for(var t=["hasClientKey","encryptGetClientKeyPayload","setClientKey","encrypt","decrypt"],n={},r=function(r){var i=t[r];n[i]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t,r){"function"==typeof e[i]?e[i].apply(e,n.concat([function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,i=e.data,o=e.errCode,a=e.errMsg,s=e.errSubject,u=e.message;"success"===n?t(i):r(Xn({errCode:o,errMsg:qn[o]||a||u,errSubject:s}))}])):r(Xn({message:"请检查manifest.json内是否开启安全网络模块，另外注意标准基座不支持安全网络模块"}))}))}},i=0;i<t.length;i++)r(i);return n}var Qn=function(e){(0,f.default)(n,e);var t=T(n);function n(e){var i;return(0,v.default)(this,n),i=t.call(this,e),i.clientType="app",i.appUtils=S({},Zn(r.requireNativePlugin("plus"))),i.systemInfo=Yn||(Yn=Oe()),i}return(0,g.default)(n,[{key:"hasClientKey",value:function(){var e=(0,d.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.appUtils.hasClientKey({provider:this.provider,spaceId:this.spaceId});case 2:return this._hasClientKey=e.sent,e.abrupt("return",this._hasClientKey);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAppClientKey",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.appUtils.encryptGetClientKeyPayload({data:JSON.stringify({})});case 2:return t=e.sent,n=t.data,r=t.key,e.next=7,this.uniCloudIns.callFunction({name:"DCloud-clientDB",data:{redirectTo:"encryption",action:"getAppClientKey",data:n,key:r}});case 7:if(e.t0=e.sent.result,e.t0){e.next=10;break}e.t0={};case 10:if(i=e.t0,0===i.errCode){e.next=13;break}throw function(e){return new Ae({subject:e.errSubject||"uni-secure-network",code:e.errCode||e.code||Vn.code,message:e.errMsg||e.message})}(i);case 13:return o=i.clientKey,s=i.key,e.next=16,this.appUtils.setClientKey({provider:this.provider,spaceId:this.spaceId,clientKey:o,key:s});case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensureClientKey",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i=this,o=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.forceUpdate,r=void 0!==n&&n,e.t1=!0,e.next=4,this.hasClientKey();case 4:if(e.t2=e.sent,e.t0=e.t1!==e.t2,e.t0){e.next=8;break}e.t0=r;case 8:if(!e.t0){e.next=10;break}return e.abrupt("return",(r&&this.scopedGlobalCache.initPromise&&this.scopedGlobalCache.initStatus===B||!r&&this.scopedGlobalCache.initPromise&&this.scopedGlobalCache.initStatus!==G||(this.scopedGlobalCache.initPromise=this.getAppClientKey(),this.scopedGlobalCache.initPromise.then((function(e){i.scopedGlobalCache.initStatus=F})).catch((function(e){throw i.scopedGlobalCache.initStatus=G,e})),this.scopedGlobalCache.initStatus=B),this.scopedGlobalCache.initPromise));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"prepare",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r,i=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.forceUpdate,r=void 0!==n&&n,e.next=3,this.ensureClientKey({forceUpdate:r});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"platformGetSignOption",value:function(){var e=(0,d.default)(a.default.mark((function e(){var t,n,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.appUtils.encrypt({provider:this.provider,spaceId:this.spaceId,data:JSON.stringify({})});case 2:return t=e.sent,n=t.data,r=t.key,e.abrupt("return",{verifyClientSign:n,encryptKeyId:r});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"platformEncryptData",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.appUtils.encrypt({provider:this.provider,spaceId:this.spaceId,data:JSON.stringify(t)});case 2:return n=e.sent,r=n.data,i=n.key,o={secretType:this.secretType,encryptKeyId:i},e.abrupt("return",this.secretType===an?{content:t,_uniCloudOptions:o}:{content:r,_uniCloudOptions:o});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"platformDecryptResult",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.content,r=t._uniCloudOptions,i=void 0===r?{}:r,o=i.encryptKeyId,e.next=6,this.appUtils.decrypt({provider:this.provider,spaceId:this.spaceId,data:n,key:o});case 6:return s=e.sent,e.abrupt("return",JSON.parse(s.data));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isClientKeyNotFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result||{};return 70009===t.errCode&&"uni-secure-network"===t.errSubject}}]),n}(un);function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.secretType;return t===on||t===an||t===sn}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.data,r=void 0===n?{}:n;return"app"===Q&&"DCloud-clientDB"===t&&"encryption"===r.redirectTo&&"getAppClientKey"===r.action}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.provider,n=e.spaceId,r=e.functionName,i=Oe(),o=i.appId,a=i.uniPlatform,s=i.osName,u=a;"app"===a&&(u=s);var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.provider,n=e.spaceId,r=Z;if(!r)return{};t=function(e){return"tencent"===e?"tcb":e}(t);var i=r.find((function(e){return e.provider===t&&e.spaceId===n}));return i&&i.config}({provider:t,spaceId:n});if(!c||!c.accessControl||!c.accessControl.enable)return!1;var l=c.accessControl.function||{},d=Object.keys(l);if(0===d.length)return!0;var h=function(e,t){for(var n,r,i,o=0;o<e.length;o++){var a=e[o];a!==t?"*"!==a?a.split(",").map((function(e){return e.trim()})).indexOf(t)>-1&&(r=a):i=a:n=a}return n||r||i}(d,r);if(!h)return!1;if((l[h]||[]).find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.appId===o&&(e.platform||"").toLowerCase()===u.toLowerCase()})))return!0;throw console.error("此应用[appId: ".concat(o,", platform: ").concat(u,"]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client")),Xn(Hn)}function rr(e){var t=e.functionName,n=e.result,r=e.logPvd;if(J&&this.__dev__.debugLog&&n&&n.requestId){var i=JSON.stringify({spaceId:this.config.spaceId,functionName:t,requestId:n.requestId});console.log("[".concat(r,"-request]").concat(i,"[/").concat(r,"-request]"))}}function ir(e){var t=e.callFunction,n=function(n){var r=this,i=n.name;n.data=Kt.call(e,{data:n.data});var o={aliyun:"aliyun",tencent:"tcb",tcb:"tcb"}[this.config.provider],a=er(n),s=tr(n),u=a||s;return t.call(this,n).then((function(e){return e.errCode=0,!u&&rr.call(r,{functionName:i,result:e,logPvd:o}),Promise.resolve(e)}),(function(e){return!u&&rr.call(r,{functionName:i,result:e,logPvd:o}),e&&e.message&&(e.message=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,r=e.extraInfo,i=void 0===r?{}:r,o=e.formatter,a=void 0===o?[]:o,s=0;s<a.length;s++){var u=a[s],c=u.rule,l=u.content,d=u.mode,h=n.match(c);if(h){for(var f=l,p=1;p<h.length;p++)f=nn(f,"{$".concat(p,"}"),h[p]);for(var m in i)f=nn(f,"{".concat(m,"}"),i[m]);return"replace"===d?f:n+f}}return n}({message:"[".concat(n.name,"]: ").concat(e.message),formatter:Qt,extraInfo:{functionName:i}})),Promise.reject(e)}))};e.callFunction=function(t){var r,i,o=e.config,a=o.provider,s=o.spaceId,u=t.name;return t.data=t.data||{},J&&e.__dev__.debugInfo&&!e.__dev__.debugInfo.forceRemote&&te?(e._callCloudFunction||(e._callCloudFunction=n,e._callLocalFunction=$t),r=$t):r=n,r=r.bind(e),i=tr(t)?n.call(e,t):function(e){var t=e.name,n=e.data,r=void 0===n?{}:n;return"mp-weixin"===Q&&"uni-id-co"===t&&"secureNetworkHandshakeByWeixin"===r.method}(t)?r.call(e,t):er(t)?new Jn({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(n.bind(e))(t):nr({provider:a,spaceId:s,functionName:u})?new Jn({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(n.bind(e))(t):r(t),Object.defineProperty(i,"result",{get:function(){return console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{}}}),i}}Jn="mp-weixin"!==Q&&"app"!==Q?function(){function e(){throw(0,v.default)(this,e),Xn({message:"Platform ".concat(Q," is not supported by secure network")})}return(0,g.default)(e)}():$?"mp-weixin"===Q?$n:Qn:function(){function e(){throw(0,v.default)(this,e),Xn({message:"Platform ".concat(Q," is not enabled, please check whether secure network module is enabled in your manifest.json")})}return(0,g.default)(e)}();var or=Symbol("CLIENT_DB_INTERNAL");function ar(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=or,e.inspect=null,e.__ob__=void 0,new Proxy(e,{get:function(e,n,r){if("_uniClient"===n)return null;if("symbol"==(0,c.default)(n))return e[n];if(n in e||"string"!=typeof n){var i=e[n];return"function"==typeof i?i.bind(e):i}return t.get(e,n,r)}})}function sr(e){return{on:function(t,n){e[t]=e[t]||[],e[t].indexOf(n)>-1||e[t].push(n)},off:function(t,n){e[t]=e[t]||[];var r=e[t].indexOf(n);-1!==r&&e[t].splice(r,1)}}}var ur=["db.Geo","db.command","command.aggregate"];function cr(e,t){return ur.indexOf("".concat(e,".").concat(t))>-1}function lr(e){switch(j(e)){case"array":return e.map((function(e){return lr(e)}));case"object":return e._internalType===or||Object.keys(e).forEach((function(t){e[t]=lr(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function dr(e){return e&&e.content&&e.content.$method}var hr=function(){function e(t,n,r){(0,v.default)(this,e),this.content=t,this.prevStage=n||null,this.udb=null,this._database=r}return(0,g.default)(e,[{key:"toJSON",value:function(){for(var e=this,t=[e.content];e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((function(e){return{$method:e.$method,$param:lr(e.$param)}}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAction",value:function(){var e=this.toJSON().$db.find((function(e){return"action"===e.$method}));return e&&e.$param&&e.$param[0]}},{key:"getCommand",value:function(){return{$db:this.toJSON().$db.filter((function(e){return"action"!==e.$method}))}}},{key:"isAggregate",get:function(){for(var e=this;e;){var t=dr(e),n=dr(e.prevStage);if("aggregate"===t&&"collection"===n||"pipeline"===t)return!0;e=e.prevStage}return!1}},{key:"isCommand",get:function(){for(var e=this;e;){if("command"===dr(e))return!0;e=e.prevStage}return!1}},{key:"isAggregateCommand",get:function(){for(var e=this;e;){var t=dr(e),n=dr(e.prevStage);if("aggregate"===t&&"command"===n)return!0;e=e.prevStage}return!1}},{key:"getNextStageFn",value:function(e){var t=this;return function(){return fr({$method:e,$param:lr(Array.from(arguments))},t,t._database)}}},{key:"count",get:function(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}},{key:"remove",get:function(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}},{key:"get",value:function(){return this._send("get",Array.from(arguments))}},{key:"add",get:function(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}},{key:"update",value:function(){return this._send("update",Array.from(arguments))}},{key:"end",value:function(){return this._send("end",Array.from(arguments))}},{key:"set",get:function(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}},{key:"_send",value:function(e,t){var n=this.getAction(),r=this.getCommand();if(r.$db.push({$method:e,$param:lr(t)}),J){var i=r.$db.find((function(e){return"collection"===e.$method})),o=i&&i.$param;o&&1===o.length&&"string"==typeof i.$param[0]&&i.$param[0].indexOf(",")>-1&&console.warn("检测到使用JQL语法联表查询时，未使用getTemp先过滤主表数据，在主表数据量大的情况下可能会查询缓慢。\n- 如何优化请参考此文档：https://uniapp.dcloud.net.cn/uniCloud/jql?id=lookup-with-temp \n- 如果主表数据量很小请忽略此信息，项目发行时不会出现此提示。")}return this._database._callCloudFunction({action:n,command:r})}}]),e}();function fr(e,t,n){return ar(new hr(e,t,n),{get:function(e,t){var r="db";return e&&e.content&&(r=e.content.$method),cr(r,t)?fr({$method:t},e,n):function(){return fr({$method:t,$param:lr(Array.from(arguments))},e,n)}}})}function pr(e){var t=e.path,n=e.method;return function(){function e(){(0,v.default)(this,e),this.param=Array.from(arguments)}return(0,g.default)(e,[{key:"toJSON",value:function(){return{$newDb:[].concat((0,l.default)(t.map((function(e){return{$method:e}}))),[{$method:n,$param:this.param}])}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}()}function mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ar(new e(t),{get:function(e,t){return cr("db",t)?fr({$method:t},null,e):function(){return fr({$method:t,$param:lr(Array.from(arguments))},null,e)}}})}var yr=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,v.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"_parseResult",value:function(e){return this._isJQL?e.result:e}},{key:"_callCloudFunction",value:function(e){var t=this,n=e.action,r=e.command,i=e.multiCommand,o=e.queryList;function a(e,t){if(i&&o)for(var n=0;n<o.length;n++){var r=o[n];r.udb&&"function"==typeof r.udb.setResult&&(t?r.udb.setResult(t):r.udb.setResult(e.result.dataList[n]))}}var s=this,u=this._isJQL?"databaseForJQL":"database";function c(e){return s._callback("error",[e]),ce(le(u,"fail"),e).then((function(){return ce(le(u,"complete"),e)})).then((function(){return a(null,e),Me(fe,{type:ye,content:e}),Promise.reject(e)}))}var l=ce(le(u,"invoke")),d=this._uniClient;return l.then((function(){return d.callFunction({name:"DCloud-clientDB",type:U,data:{action:n,command:r,multiCommand:i}})})).then((function(e){var n=e.result,r=n.code,i=n.message,o=n.token,l=n.tokenExpired,d=n.systemInfo,h=void 0===d?[]:d;if(h)for(var f=0;f<h.length;f++){var p=h[f],m=p.level,y=p.message,v=p.detail,g=console["app"===Q&&"warn"===m?"error":m]||console.log,_="[System Info]"+y;v&&(_="".concat(_,"\n详细信息：").concat(v)),g(_)}if(r)return c(new Ae({code:r,message:i,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,o&&l&&(Le({token:o,tokenExpired:l}),t._callbackAuth("refreshToken",[{token:o,tokenExpired:l}]),t._callback("refreshToken",[{token:o,tokenExpired:l}]),Me(me,{token:o,tokenExpired:l}));for(var b=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}],x=function(t){var n=b[t],r=n.prop,i=n.tips;if(r in e.result){var o=e.result[r];Object.defineProperty(e.result,r,{get:function(){return console.warn(i),o}})}},M=0;M<b.length;M++)x(M);return function(e){return ce(le(u,"success"),e).then((function(){return ce(le(u,"complete"),e)})).then((function(){a(e,null);var t=s._parseResult(e);return Me(fe,{type:ye,content:t}),Promise.resolve(t)}))}(e)}),(function(e){return/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),c(new Ae({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId}))}))}}]),n}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.uniClient,r=void 0===n?{}:n,i=t.isJQL,o=void 0!==i&&i;(0,v.default)(this,e),this._uniClient=r,this._authCallBacks={},this._dbCallBacks={},r._isDefault&&(this._dbCallBacks=ie("_globalUniCloudDatabaseCallback")),o||(this.auth=sr(this._authCallBacks)),this._isJQL=o,Object.assign(this,sr(this._dbCallBacks)),this.env=ar({},{get:function(e,t){return{$env:t}}}),this.Geo=ar({},{get:function(e,t){return pr({path:["Geo"],method:t})}}),this.serverDate=pr({path:[],method:"serverDate"}),this.RegExp=pr({path:[],method:"RegExp"})}return(0,g.default)(e,[{key:"getCloudEnv",value:function(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}},{key:"_callback",value:function(e,t){var n=this._dbCallBacks;n[e]&&n[e].forEach((function(e){e.apply(void 0,(0,l.default)(t))}))}},{key:"_callbackAuth",value:function(e,t){var n=this._authCallBacks;n[e]&&n[e].forEach((function(e){e.apply(void 0,(0,l.default)(t))}))}},{key:"multiSend",value:function(){var e=Array.from(arguments),t=e.map((function(e){var t=e.getAction(),n=e.getCommand();if("getTemp"!==n.$db[n.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:n}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}]),e}()),vr="token无效，跳转登录页面",gr="token过期，跳转登录页面",_r={TOKEN_INVALID_TOKEN_EXPIRED:gr,TOKEN_INVALID_INVALID_CLIENTID:vr,TOKEN_INVALID:vr,TOKEN_INVALID_WRONG_TOKEN:vr,TOKEN_INVALID_ANONYMOUS_USER:vr},br={"uni-id-token-expired":gr,"uni-id-check-token-failed":vr,"uni-id-token-not-exist":vr,"uni-id-check-device-feature-failed":vr};function xr(e,t){var n="";return n=e?"".concat(e,"/").concat(t):t,n.replace(/^\//,"")}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],r=[];return e.forEach((function(e){!0===e.needLogin?n.push(xr(t,e.path)):!1===e.needLogin&&r.push(xr(t,e.path))})),{needLoginPage:n,notNeedLoginPage:r}}function Cr(e){return e.split("?")[0].replace(/^\//,"")}function wr(){return function(e){var t=e&&e.$page&&e.$page.fullPath||"";return t?("/"!==t.charAt(0)&&(t="/"+t),t):t}(function(){var e=getCurrentPages();return e[e.length-1]}())}function Sr(){return Cr(wr())}function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;var n=t.list,r=Cr(e);return n.some((function(e){return e.pagePath===r}))}var Nr,Er=!!b.default.uniIdRouter,Ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.default,t=e.pages,n=void 0===t?[]:t,r=e.subPackages,i=void 0===r?[]:r,o=e.uniIdRouter,a=void 0===o?{}:o,s=e.tabBar,u=void 0===s?{}:s,c=a.loginPage,d=a.needLogin,h=void 0===d?[]:d,f=a.resToLogin,p=void 0===f||f,m=Mr(n),y=m.needLoginPage,v=m.notNeedLoginPage,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[];return e.forEach((function(e){var r=e.root,i=e.pages,o=void 0===i?[]:i,a=Mr(o,r),s=a.needLoginPage,u=a.notNeedLoginPage;t.push.apply(t,(0,l.default)(s)),n.push.apply(n,(0,l.default)(u))})),{needLoginPage:t,notNeedLoginPage:n}}(i),_=g.needLoginPage,x=g.notNeedLoginPage;return{loginPage:c,routerNeedLogin:h,resToLogin:p,needLoginPage:[].concat((0,l.default)(y),(0,l.default)(_)),notNeedLoginPage:[].concat((0,l.default)(v),(0,l.default)(x)),loginPageInTabBar:Tr(c,u)}}(),Rr=Ar.loginPage,Pr=Ar.routerNeedLogin,Lr=Ar.resToLogin,Or=Ar.needLoginPage,kr=Ar.notNeedLoginPage,Ir=Ar.loginPageInTabBar;if(Or.indexOf(Rr)>-1)throw new Error("Login page [".concat(Rr,'] should not be "needLogin", please check your pages.json'));function Dr(e){var t=Sr();if("/"===e.charAt(0))return e;var n=e.split("?"),r=(0,u.default)(n,2),i=r[0],o=r[1],a=i.replace(/^\//,"").split("/"),s=t.split("/");s.pop();for(var c=0;c<a.length;c++){var l=a[c];".."===l?s.pop():"."!==l&&s.push(l)}return""===s[0]&&s.shift(),"/"+s.join("/")+(o?"?"+o:"")}function Ur(e){var t=Cr(Dr(e));return!(kr.indexOf(t)>-1)&&(Or.indexOf(t)>-1||Pr.some((function(t){return function(e,t){return new RegExp(t).test(e)}(e,t)})))}function Br(e){var t=e.redirect,n=Cr(t),r=Cr(Rr);return Sr()!==r&&n!==r}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.api,n=e.redirect;if(n&&Br({redirect:n})){var i=function(e,t){return"/"!==e.charAt(0)&&(e="/"+e),t?e.indexOf("?")>-1?e+"&uniIdRedirectUrl=".concat(encodeURIComponent(t)):e+"?uniIdRedirectUrl=".concat(encodeURIComponent(t)):e}(Rr,n);Ir?"navigateTo"!==t&&"redirectTo"!==t||(t="switchTab"):"switchTab"===t&&(t="navigateTo");var o={navigateTo:r.navigateTo,redirectTo:r.redirectTo,switchTab:r.switchTab,reLaunch:r.reLaunch};setTimeout((function(){o[t]({url:i})}))}}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n={abortLoginPageJump:!1,autoToLoginPage:!1},r=function(){var e,t=Pe(),n=t.token,r=t.tokenExpired;if(n){if(r<Date.now()){var i="uni-id-token-expired";e={errCode:i,errMsg:br[i]}}}else{var o="uni-id-check-token-failed";e={errCode:o,errMsg:br[o]}}return e}();if(Ur(t)&&r){if(r.uniIdRedirectUrl=t,_e(pe).length>0)return setTimeout((function(){Me(pe,r)}),0),n.abortLoginPageJump=!0,n;n.autoToLoginPage=!0}return n}function jr(){!function(){var e=wr(),t=Gr({url:e}),n=t.abortLoginPageJump,r=t.autoToLoginPage;n||r&&Fr({api:"redirectTo",redirect:e})}();for(var e=["navigateTo","redirectTo","reLaunch","switchTab"],t=function(t){var n=e[t];r.addInterceptor(n,{invoke:function(e){var t=Gr({url:e.url}),r=t.abortLoginPageJump,i=t.autoToLoginPage;return r?e:i?(Fr({api:n,redirect:Dr(e.url)}),!1):e}})},n=0;n<e.length;n++)t(n)}function zr(){this.onResponse((function(e){var t=e.type,n=e.content,r=!1;switch(t){case"cloudobject":r=function(e){if("object"!=(0,c.default)(e))return!1;var t=e||{},n=t.errCode;return n in br}(n);break;case"clientdb":r=function(e){if("object"!=(0,c.default)(e))return!1;var t=e||{},n=t.errCode;return n in _r}(n)}r&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_e(pe);Se().then((function(){var n=wr();if(n&&Br({redirect:n}))return t.length>0?Me(pe,Object.assign({uniIdRedirectUrl:n},e)):void(Rr&&Fr({api:"navigateTo",redirect:n}))}))}(n)}))}function Vr(e){!function(e){e.onResponse=function(e){be(fe,e)},e.offResponse=function(e){xe(fe,e)}}(e),function(e){e.onNeedLogin=function(e){be(pe,e)},e.offNeedLogin=function(e){xe(pe,e)},Er&&(ie("_globalUniCloudStatus").needLoginInit||(ie("_globalUniCloudStatus").needLoginInit=!0,Se().then((function(){jr.call(e)})),Lr&&zr.call(e)))}(e),function(e){e.onRefreshToken=function(e){be(me,e)},e.offRefreshToken=function(e){xe(me,e)}}(e)}var Hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Wr=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function qr(){var e,t,n=Pe().token||"",r=n.split(".");if(!n||3!==r.length)return{uid:null,role:[],permission:[],tokenExpired:0};try{e=JSON.parse((t=r[1],decodeURIComponent(Nr(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(n){throw new Error("获取当前用户信息出错，详细错误信息为："+n.message)}return e.tokenExpired=1e3*e.exp,delete e.exp,delete e.iat,e}Nr="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!Wr.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,i="",o=0;o<e.length;)t=Hr.indexOf(e.charAt(o++))<<18|Hr.indexOf(e.charAt(o++))<<12|(n=Hr.indexOf(e.charAt(o++)))<<6|(r=Hr.indexOf(e.charAt(o++))),i+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i}:atob;var Xr=A((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="chooseAndUploadFile:ok",o="chooseAndUploadFile:fail";function a(e,t){return e.tempFiles.forEach((function(e,n){e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+n+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((function(e){return e.path}))),e}function s(e,t,r){var i=r.onChooseFile,o=r.onUploadProgress;return t.then((function(e){if(i){var t=i(e);if(void 0!==t)return Promise.resolve(t).then((function(t){return void 0===t?e:t}))}return e})).then((function(t){return!1===t?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3?arguments[3]:void 0;(t=Object.assign({},t)).errMsg=n;var o=t.tempFiles,a=o.length,s=0;return new Promise((function(n){for(;s<r;)u();function u(){var r=s++;if(r>=a)!o.find((function(e){return!e.url&&!e.errMsg}))&&n(t);else{var c=o[r];e.uploadFile({filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,onUploadProgress:function(e){e.index=r,e.tempFile=c,e.tempFilePath=c.path,i&&i(e)}}).then((function(e){c.url=e.fileID,r<a&&u()})).catch((function(e){c.errMsg=e.errMsg||e.message,r<a&&u()}))}}}))}(e,t,5,o)}))}t.initChooseAndUploadFile=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"};return"image"===t.type?s(e,function(e){var t=e.count,n=e.sizeType,i=e.sourceType,s=void 0===i?["album","camera"]:i,u=e.extension;return new Promise((function(e,i){r.chooseImage({count:t,sizeType:n,sourceType:s,extension:u,success:function(t){e(a(t,"image"))},fail:function(e){i({errMsg:e.errMsg.replace("chooseImage:fail",o)})}})}))}(t),t):"video"===t.type?s(e,function(e){var t=e.camera,n=e.compressed,i=e.maxDuration,s=e.sourceType,u=void 0===s?["album","camera"]:s,c=e.extension;return new Promise((function(e,s){r.chooseVideo({camera:t,compressed:n,maxDuration:i,sourceType:u,extension:c,success:function(t){var n=t.tempFilePath,r=t.duration,i=t.size,o=t.height,s=t.width;e(a({errMsg:"chooseVideo:ok",tempFilePaths:[n],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:n,size:i,type:t.tempFile&&t.tempFile.type||"",width:s,height:o,duration:r,fileType:"video",cloudPath:""}]},"video"))},fail:function(e){s({errMsg:e.errMsg.replace("chooseVideo:fail",o)})}})}))}(t),t):s(e,function(e){var t=e.count,n=e.extension;return new Promise((function(e,s){var u=r.chooseFile;if("undefined"!=typeof i&&"function"==typeof i.chooseMessageFile&&(u=i.chooseMessageFile),"function"!=typeof u)return s({errMsg:o+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});u({type:"all",count:t,extension:n,success:function(t){e(a(t))},fail:function(e){s({errMsg:e.errMsg.replace("chooseFile:fail",o)})}})}))}(t),t)}}})),Yr=E(Xr),Jr="manual";function Kr(e){return{props:{localdata:{type:Array,default:function(){return[]}},options:{type:[Object,Array],default:function(){return{}}},spaceInfo:{type:Object,default:function(){return{}}},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:function(){return{mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{}}},created:function(){var e=this;this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((function(){var t=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((function(n){t.push(e[n])})),t}),(function(t,n){if(e.loadtime!==Jr){for(var r=!1,i=[],o=2;o<t.length;o++)t[o]!==n[o]&&(i.push(t[o]),r=!0);t[0]!==n[0]&&(e.mixinDatacomPage.current=e.pageCurrent),e.mixinDatacomPage.size=e.pageSize,e.onMixinDatacomPropsChange(r,i)}}))},methods:{onMixinDatacomPropsChange:function(e,t){},mixinDatacomEasyGet:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getone,r=void 0!==n&&n,i=t.success,o=t.fail;this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomGet().then((function(t){e.mixinDatacomLoading=!1;var n=t.result,o=n.data,a=n.count;e.getcount&&(e.mixinDatacomPage.count=a),e.mixinDatacomHasMore=o.length<e.pageSize;var s=r?o.length?o[0]:void 0:o;e.mixinDatacomResData=s,i&&i(s)})).catch((function(t){e.mixinDatacomLoading=!1,e.mixinDatacomErrorMessage=t,o&&o(t)})))},mixinDatacomGet:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.database(this.spaceInfo),i=n.action||this.action;i&&(r=r.action(i));var o=n.collection||this.collection;r=Array.isArray(o)?(t=r).collection.apply(t,(0,l.default)(o)):r.collection(o);var a=n.where||this.where;a&&Object.keys(a).length&&(r=r.where(a));var s=n.field||this.field;s&&(r=r.field(s));var u=n.foreignKey||this.foreignKey;u&&(r=r.foreignKey(u));var c=n.groupby||this.groupby;c&&(r=r.groupBy(c));var d=n.groupField||this.groupField;d&&(r=r.groupField(d)),!0===(void 0!==n.distinct?n.distinct:this.distinct)&&(r=r.distinct());var h=n.orderby||this.orderby;h&&(r=r.orderBy(h));var f=void 0!==n.pageCurrent?n.pageCurrent:this.mixinDatacomPage.current,p=void 0!==n.pageSize?n.pageSize:this.mixinDatacomPage.size,m=void 0!==n.getcount?n.getcount:this.getcount,y=void 0!==n.gettree?n.gettree:this.gettree,v=void 0!==n.gettreepath?n.gettreepath:this.gettreepath,g={getCount:m},_={limitLevel:void 0!==n.limitlevel?n.limitlevel:this.limitlevel,startWith:void 0!==n.startwith?n.startwith:this.startwith};return y&&(g.getTree=_),v&&(g.getTreePath=_),r=r.skip(p*(f-1)).limit(p).get(g),r}}}}function $r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==(0,c.default)(t.secretMethods)&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);var i=n,o=i.customUI,s=i.loadingOptions,u=i.errorOptions,l=i.parseSystemError,h=!o;return new Proxy({},{get:function(i,o){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fn,n=e.interceptorName,r=e.getCallbackArgs;return(0,d.default)(a.default.mark((function e(){var i,o,s,u,c,l,d=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=d.length,o=new Array(i),s=0;s<i;s++)o[s]=d[s];return u=r?r({params:o}):{},e.prev=2,e.next=5,ce(le(n,"invoke"),S({},u));case 5:return e.next=7,t.apply(void 0,o);case 7:return c=e.sent,e.next=10,ce(le(n,"success"),S(S({},u),{},{result:c}));case 10:return e.abrupt("return",c);case 13:return e.prev=13,e.t0=e["catch"](2),l=e.t0,e.next=18,ce(le(n,"fail"),S(S({},u),{},{error:l}));case 18:throw l;case 19:return e.prev=19,e.next=22,ce(le(n,"complete"),S(S({},u),{},l?{error:l}:{result:c}));case 22:return e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[2,13,19,23]])})))}({fn:function(){var i=(0,d.default)(a.default.mark((function i(){var p,m,y,v,g,_,b,x,M,C,w,T,N,E,A,R=arguments;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(h&&r.showLoading({title:s.title,mask:s.mask}),m=R.length,y=new Array(m),v=0;v<m;v++)y[v]=R[v];return g={name:t,type:D,data:{method:o,params:y}},"object"==(0,c.default)(n.secretMethods)&&function(e,t){var n=t.data.method,r=e.secretMethods||{},i=r[n]||r["*"];i&&(t.secretType=i)}(n,g),_=!1,i.prev=5,i.next=8,e.callFunction(g);case 8:p=i.sent,i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](5),_=!0,p={result:new Ae(i.t0)};case 14:if(b=p.result||{},x=b.errSubject,M=b.errCode,C=b.errMsg,w=b.newToken,h&&r.hideLoading(),w&&w.token&&w.tokenExpired&&(Le(w),Me(me,S({},w))),!M){i.next=39;break}if(T=C,!_||!l){i.next=24;break}return i.next=20,l({objectName:t,methodName:o,params:y,errSubject:x,errCode:M,errMsg:C});case 20:if(i.t1=i.sent.errMsg,i.t1){i.next=23;break}i.t1=C;case 23:T=i.t1;case 24:if(!h){i.next=37;break}if("toast"!==u.type){i.next=29;break}r.showToast({title:T,icon:"none"}),i.next=37;break;case 29:if("modal"===u.type){i.next=31;break}throw new Error("Invalid errorOptions.type: ".concat(u.type));case 31:return i.next=33,(0,d.default)(a.default.mark((function e(){var t,n,i,o,s,u,c=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.title,i=t.content,o=t.showCancel,s=t.cancelText,u=t.confirmText,e.abrupt("return",new Promise((function(e,t){r.showModal({title:n,content:i,showCancel:o,cancelText:s,confirmText:u,success:function(t){e(t)},fail:function(){e({confirm:!1,cancel:!0})}})})));case 2:case"end":return e.stop()}}),e)})))({title:"提示",content:T,showCancel:u.retry,cancelText:"取消",confirmText:u.retry?"重试":"确定"});case 33:if(N=i.sent,E=N.confirm,!u.retry||!E){i.next=37;break}return i.abrupt("return",f.apply(void 0,y));case 37:throw A=new Ae({subject:x,code:M,message:C,requestId:p.requestId}),A.detail=p.result,Me(fe,{type:ge,content:A}),A;case 39:return i.abrupt("return",(Me(fe,{type:ge,content:p.result}),p.result));case 40:case"end":return i.stop()}}),i,null,[[5,11]])})));function f(){return i.apply(this,arguments)}return f}(),interceptorName:"callObject",getCallbackArgs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.params;return{objectName:t,methodName:o,params:n}}})}})}}function Zr(e){return ie("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}function Qr(){return ei.apply(this,arguments)}function ei(){return ei=(0,d.default)(a.default.mark((function e(){var t,n,i,o,s,u,c,l=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.openid,i=t.callLoginByWeixin,o=void 0!==i&&i,s=Zr(this),"mp-weixin"===Q){e.next=4;break}throw new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `".concat(Q,"`"));case 4:if(!n||!o){e.next=6;break}throw new Error("[SecureNetwork] openid and callLoginByWeixin cannot be passed at the same time");case 6:if(!n){e.next=8;break}return e.abrupt("return",(s.mpWeixinOpenid=n,{}));case 8:return e.next=10,new Promise((function(e,t){r.login({success:function(t){e(t.code)},fail:function(e){t(new Error(e.errMsg))}})}));case 10:return u=e.sent,c=this.importObject("uni-id-co",{customUI:!0}),e.next=14,c.secureNetworkHandshakeByWeixin({code:u,callLoginByWeixin:o});case 14:return s.mpWeixinCode=u,e.abrupt("return",{code:u});case 16:case"end":return e.stop()}}),e,this)}))),ei.apply(this,arguments)}function ti(e){return ni.apply(this,arguments)}function ni(){return ni=(0,d.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Zr(this),e.abrupt("return",(n.initPromise||(n.initPromise=Qr.call(this,t)),n.initPromise));case 2:case"end":return e.stop()}}),e,this)}))),ni.apply(this,arguments)}function ri(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.openid,r=t.callLoginByWeixin,i=void 0!==r&&r;return ti.call(e,{openid:n,callLoginByWeixin:i})}}function ii(e){var t={getSystemInfo:r.getSystemInfo,getPushClientId:r.getPushClientId};return function(n){return new Promise((function(r,i){t[e](S(S({},n),{},{success:function(e){r(e)},fail:function(e){i(e)}}))}))}}var oi=function(e){(0,f.default)(n,e);var t=T(n);function n(){var e;return(0,v.default)(this,n),e=t.call(this),e._uniPushMessageCallback=e._receivePushMessage.bind((0,s.default)(e)),e._currentMessageId=-1,e._payloadQueue=[],e}return(0,g.default)(n,[{key:"init",value:function(){var e=this;return Promise.all([ii("getSystemInfo")(),ii("getPushClientId")()]).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,u.default)(t,2),r=n[0];r=void 0===r?{}:r;var i=r.appId,o=n[1];o=void 0===o?{}:o;var a=o.cid;if(!i)throw new Error("Invalid appId, please check the manifest.json file");if(!a)throw new Error("Invalid push client id");e._appId=i,e._pushClientId=a,e._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),e.emit("open"),e._initMessageListener()}),(function(t){throw e.emit("error",t),e.close(),t}))}},{key:"open",value:function(){var e=(0,d.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.init());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_isUniCloudSSE",value:function(e){if("receive"!==e.type)return!1;var t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}},{key:"_receivePushMessage",value:function(e){if(this._isUniCloudSSE(e)){var t=e&&e.data&&e.data.payload,n=t.action,r=t.messageId,i=t.message;this._payloadQueue.push({action:n,messageId:r,message:i}),this._consumMessage()}}},{key:"_consumMessage",value:function(){for(var e=this;;){var t=this._payloadQueue.find((function(t){return t.messageId===e._currentMessageId+1}));if(!t)break;this._currentMessageId++,this._parseMessagePayload(t)}}},{key:"_parseMessagePayload",value:function(e){var t=e.action,n=e.messageId,r=e.message;"end"===t?this._end({messageId:n,message:r}):"message"===t&&this._appendMessage({messageId:n,message:r})}},{key:"_appendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.messageId,e.message);this.emit("message",t)}},{key:"_end",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.messageId,e.message);this.emit("end",t),this.close()}},{key:"_initMessageListener",value:function(){r.onPushMessage(this._uniPushMessageCallback)}},{key:"_destroy",value:function(){r.offPushMessage(this._uniPushMessageCallback)}},{key:"toJSON",value:function(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}},{key:"close",value:function(){this._destroy(),this.emit("close")}}]),n}(function(){function e(){(0,v.default)(this,e),this._callback={}}return(0,g.default)(e,[{key:"addListener",value:function(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"removeListener",value:function(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');var n=this._callback[e];if(n){var r=function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return n;return-1}(n,t);n.splice(r,1)}}},{key:"off",value:function(e,t){return this.removeListener(e,t)}},{key:"removeAllListener",value:function(e){delete this._callback[e]}},{key:"emit",value:function(e){for(var t=this._callback[e],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t)for(var o=0;o<t.length;o++)t[o].apply(t,r)}}]),e}());function ai(e,t){return si.apply(this,arguments)}function si(){return si=(0,d.default)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="http://".concat(t,":").concat(n,"/system/ping"),e.prev=1,e.next=4,o={url:r,timeout:500},new Promise((function(e,t){Re.request(S(S({},o),{},{success:function(t){e(t)},fail:function(e){t(e)}}))}));case 4:return i=e.sent,e.abrupt("return",!(!i.data||0!==i.data.code));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),si.apply(this,arguments)}function ui(e){return ci.apply(this,arguments)}function ci(){return ci=(0,d.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l,h,f,p;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(J){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if("app"===Q&&(n=Oe(),r=n.osName,i=n.osVersion,"ios"===r&&function(e){if(!e||"string"!=typeof e)return 0;var t=e.match(/^(\d+)./);return t&&t[1]?parseInt(t[1]):0}(i)>=14&&console.warn("iOS 14及以上版本连接uniCloud本地调试服务需要允许客户端查找并连接到本地网络上的设备（仅开发模式生效，发行模式会连接uniCloud云端服务）")),o=t.__dev__,o.debugInfo){e.next=6;break}return e.abrupt("return");case 6:return s=o.debugInfo,u=s.address,c=s.servePort,e.next=11,function(){var e=(0,d.default)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.length)){e.next=11;break}return o=t[i],e.next=5,ai(o,n);case 5:if(!e.sent){e.next=8;break}return r=o,e.abrupt("break",11);case 8:i++,e.next=1;break;case 11:return e.abrupt("return",{address:r,port:n});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(u,c);case 11:if(l=e.sent,h=l.address,!h){e.next=15;break}return e.abrupt("return",(o.localAddress=h,void(o.localPort=c)));case 15:if(f=console["app"===Q?"error":"warn"],p="","remote"===o.debugInfo.initialLaunchType?(o.debugInfo.forceRemote=!0,p="当前客户端和HBuilderX不在同一局域网下（或其他网络原因无法连接HBuilderX），uniCloud本地调试服务不对当前客户端生效。\n- 如果不使用uniCloud本地调试服务，请直接忽略此信息。\n- 如需使用uniCloud本地调试服务，请将客户端与主机连接到同一局域网下并重新运行到客户端。"):p="无法连接uniCloud本地调试服务，请检查当前客户端是否与主机在同一局域网下。\n- 如需使用uniCloud本地调试服务，请将客户端与主机连接到同一局域网下并重新运行到客户端。",p+="\n- 如果在HBuilderX开启的状态下切换过网络环境，请重启HBuilderX后再试\n- 检查系统防火墙是否拦截了HBuilderX自带的nodejs\n- 检查是否错误的使用拦截器修改uni.request方法的参数","web"===Q&&(p+="\n- 部分浏览器开启节流模式之后访问本地地址受限，请检查是否启用了节流模式"),0===Q.indexOf("mp-")&&(p+="\n- 小程序中如何使用uniCloud，请参考：https://uniapp.dcloud.net.cn/uniCloud/publish.html#useinmp"),o.debugInfo.forceRemote){e.next=19;break}throw new Error(p);case 19:f(p);case 20:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e){e._initPromiseHub||(e._initPromiseHub=new X({createPromise:function(){var t,n=Promise.resolve();t=1,n=new Promise((function(e){setTimeout((function(){e()}),t)}));var r=e.auth();return n.then((function(){return r.getLoginState()})).then((function(e){return e?Promise.resolve():r.signInAnonymously()}))}}))}var di={tcb:Xt,tencent:Xt,aliyun:ze,private:Jt},hi=new(function(){function e(){(0,v.default)(this,e)}return(0,g.default)(e,[{key:"init",value:function(e){var t={},n=di[e.provider];if(!n)throw new Error("未提供正确的provider参数");return t=n.init(e),J&&function(e){if(J){var t={};e.__dev__=t,t.debugLog=J&&("web"===Q&&navigator.userAgent.indexOf("HBuilderX")>0||"app"===Q);var n=ee;n&&!n.code&&(t.debugInfo=n);var r=new X({createPromise:function(){return ui(e)}});t.initLocalNetwork=function(){return r.exec()}}}(t),li(t),ir(t),function(e){var t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),function(e){e.database=function(t){if(t&&Object.keys(t).length>0)return e.init(t).database();if(this._database)return this._database;var n=mr(yr,{uniClient:e});return this._database=n,n},e.databaseForJQL=function(t){if(t&&Object.keys(t).length>0)return e.init(t).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;var n=mr(yr,{uniClient:e,isJQL:!0});return this._databaseForJQL=n,n}}(t),function(e){e.getCurrentUserInfo=qr,e.chooseAndUploadFile=Yr.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return Kr(e)}}),e.SSEChannel=oi,e.initSecureNetworkByWeixin=ri(e),e.importObject=$r(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((function(e){if(t[e]){var n=t[e];t[e]=function(){return n.apply(t,Array.from(arguments))},t[e]=function(e,t){return function(n){var r=this,i=!1;if("callFunction"===t){var o=n&&n.type||I;i=o!==I}var a="callFunction"===t&&!i,s=this._initPromiseHub.exec();n=n||{};var u=Te(n),c=u.success,l=u.fail,d=u.complete,h=s.then((function(){return i?Promise.resolve():ce(le(t,"invoke"),n)})).then((function(){return e.call(r,n)})).then((function(e){return i?Promise.resolve(e):ce(le(t,"success"),e).then((function(){return ce(le(t,"complete"),e)})).then((function(){return a&&Me(fe,{type:ve,content:e}),Promise.resolve(e)}))}),(function(e){return i?Promise.reject(e):ce(le(t,"fail"),e).then((function(){return ce(le(t,"complete"),e)})).then((function(){return Me(fe,{type:ve,content:e}),Promise.reject(e)}))}));if(!(c||l||d))return h;h.then((function(e){c&&c(e),d&&d(e),a&&Me(fe,{type:ve,content:e})}),(function(e){l&&l(e),d&&d(e),a&&Me(fe,{type:ve,content:e})}))}}(t[e],e).bind(t)}})),t.init=this.init,t}}]),e}());(function(){var e=te,t={};if(e&&1===e.length)t=e[0],hi=hi.init(t),hi._isDefault=!0;else{var n,r=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"];n=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":ne?"应用未关联服务空间，请在uniCloud目录右键关联服务空间":"uni-app cli项目内使用uniCloud需要使用HBuilderX的运行菜单运行项目，且需要在uniCloud目录关联服务空间",r.forEach((function(e){hi[e]=function(){return console.error(n),Promise.reject(new Ae({code:"SYS_ERR",message:n}))}}))}Object.assign(hi,{get mixinDatacom(){return Kr(hi)}}),Vr(hi),hi.addInterceptor=se,hi.removeInterceptor=ue,hi.interceptObject=de,J&&"web"===Q&&(window.uniCloud=hi)})();var fi=hi;t.default=fi}).call(this,n(3),n(2)["default"],n(1)["default"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={pages:[{path:"pages/home/index",style:{navigationBarTitleText:"首页"}},{path:"pages/workFlow/index",style:{navigationBarTitleText:"工作流"}},{path:"pages/mine/index",style:{navigationBarTitleText:"个人中心"}},{path:"pages/login/index",style:{navigationBarTitleText:"登录"}},{path:"common/flowInfo/info",style:{navigationBarTitleText:"详细信息"}},{path:"common/fileInfo/file",style:{navigationBarTitleText:"档案信息"}},{path:"pages/curstomer/index",style:{navigationBarTitleText:"客户管理"}},{path:"pages/qrCode/qrCode",style:{navigationBarTitleText:"二维码信息"}},{path:"pages/lookInformation/index",style:{navigationBarTitleText:"出入库基本信息"}},{path:"pages/lookInformation/processOut/processOut",style:{navigationBarTitleText:"出库基本明细"}},{path:"pages/lookInformation/processIn/processIn",style:{navigationBarTitleText:"入库基本明细"}},{path:"pages/lookInformation/processOut/processOutList",style:{navigationBarTitleText:"出库信息列表"}},{path:"pages/curstomer/addCurstomer/addAndEdit",style:{navigationBarTitleText:"客户管理"}},{path:"pages/curstomer/addCurstomer/addAndList",style:{navigationBarTitleText:"客户查看"}},{path:"pages/curstomer/addCurstomer/curstomerInfoAll",style:{navigationBarTitleText:"客户详细信息"}},{path:"pages/journal/index",style:{navigationBarTitleText:"日志管理"}},{path:"common/journalInfo/journal",style:{navigationBarTitleText:"日志填写"}},{path:"common/journalInfo/journalone",style:{navigationBarTitleText:"日志填写"}},{path:"common/journalInfo/journalList",style:{navigationBarTitleText:"日志列表"}},{path:"common/journalInfo/journalDepart",style:{navigationBarTitleText:"部门查询"}},{path:"common/journalInfo/journalPeople",style:{navigationBarTitleText:"人员查询"}},{path:"pages/ocr/index",style:{navigationBarTitleText:"名片识别"}},{path:"pages/setup/index",style:{navigationBarTitleText:"我的设置"}},{path:"pages/valueMap/index",style:{navigationBarTitleText:"估值地图"}},{path:"pages/valuation/index",style:{navigationBarTitleText:"估值计算"}},{path:"common/journalInfo/journalForWorkDetail",style:{navigationBarTitleText:"日志查询"}},{path:"pages/show3D/index",style:{navigationBarTitleText:"3D展示"}}],globalStyle:{navigationBarTextStyle:"black",navigationBarTitleText:"uni-app",navigationBarBackgroundColor:"#F8F8F8",backgroundColor:"#F8F8F8","app-plus":{background:"#efeff4"},usingComponents:{ocrsdk:"/wxcomponents/ocrsdk/pages/index/index"}},tabBar:{color:"#000000",selectedColor:"#000000",borderStyle:"black",backgroundColor:"#ffffff",list:[{pagePath:"pages/home/index",iconPath:"static/icon/home.png",selectedIconPath:"static/icon/home.png",text:"首页"},{pagePath:"pages/workFlow/index",iconPath:"static/icon/workFlow.png",selectedIconPath:"static/icon/workFlow.png",text:"工作流"},{pagePath:"pages/mine/index",iconPath:"static/icon/mine.png",selectedIconPath:"static/icon/mine.png",text:"我的"}]},permission:{"scope.userLocation":{desc:"点击确认"}}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={appid:"__UNI__8551D91"};t.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(794)),o=r(n(795)),a=r(n(796)),s={en:i.default,"zh-Hans":o.default,"zh-Hant":a.default};t.default=s},function(e){e.exports=JSON.parse('{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select date and time","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"}')},function(e){e.exports=JSON.parse('{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"}')},function(e){e.exports=JSON.parse('{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"}')},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.Calendar=void 0,t.addZero=d,t.checkDate=p,t.dateCompare=f,t.fixIosDateFormat=y,t.getDate=c,t.getDateTime=u,t.getDefaultSecond=h,t.getTime=l;var i=r(n(18)),o=r(n(23)),a=r(n(24)),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.selected,r=t.startDate,i=t.endDate,a=t.range;(0,o.default)(this,e),this.date=this.getDateObj(new Date),this.selected=n||[],this.startDate=r,this.endDate=i,this.range=a,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}return(0,a.default)(e,[{key:"setDate",value:function(e){var t=this.getDateObj(e);this.getWeeks(t.fullDate)}},{key:"cleanMultipleStatus",value:function(){this.multipleStatus={before:"",after:"",data:[]}}},{key:"setStartDate",value:function(e){this.startDate=e}},{key:"setEndDate",value:function(e){this.endDate=e}},{key:"getPreMonthObj",value:function(e){e=y(e),e=new Date(e);var t=e.getMonth();e.setMonth(t-1);var n=e.getMonth();return 0!==t&&n-t===0&&e.setMonth(n-1),this.getDateObj(e)}},{key:"getNextMonthObj",value:function(e){e=y(e),e=new Date(e);var t=e.getMonth();e.setMonth(t+1);var n=e.getMonth();return n-t>1&&e.setMonth(n-1),this.getDateObj(e)}},{key:"getDateObj",value:function(e){return e=y(e),e=new Date(e),{fullDate:c(e),year:e.getFullYear(),month:d(e.getMonth()+1),date:d(e.getDate()),day:e.getDay()}}},{key:"getPreMonthDays",value:function(e,t){for(var n=this,r=[],i=function(e){var i=t.month>1?t.month-1:12,o=12===i?t.year-1:t.year,a=new Date(o,i,-e).getDate(),s="".concat(o,"-").concat(d(i),"-").concat(d(a)),u=n.multipleStatus.data,c=-1;n.range&&u&&(c=u.findIndex((function(e){return n.dateEqual(e,s)})));var l=-1!==c,h=n.selected&&n.selected.find((function(e){if(n.dateEqual(s,e.date))return e}));r.push({fullDate:s,year:o,month:i,date:a,multiple:!!n.range&&l,beforeMultiple:n.isLogicBefore(s,n.multipleStatus.before,n.multipleStatus.after),afterMultiple:n.isLogicAfter(s,n.multipleStatus.before,n.multipleStatus.after),disable:n.startDate&&!f(n.startDate,s)||n.endDate&&!f(s,n.endDate),isToday:s===n.date.fullDate,userChecked:!1,extraInfo:h})},o=e-1;o>=0;o--)i(o);return r}},{key:"getCurrentMonthDays",value:function(e,t){for(var n=this,r=[],i=this.date.fullDate,o=function(e){var o="".concat(t.year,"-").concat(t.month,"-").concat(d(e)),a=i===o,s=n.selected&&n.selected.find((function(e){if(n.dateEqual(o,e.date))return e}));n.startDate&&f(n.startDate,o),n.endDate&&f(o,n.endDate);var u=n.multipleStatus.data,c=-1;n.range&&u&&(c=u.findIndex((function(e){return n.dateEqual(e,o)})));var l=-1!==c;r.push({fullDate:o,year:t.year,month:t.month,date:e,multiple:!!n.range&&l,beforeMultiple:n.isLogicBefore(o,n.multipleStatus.before,n.multipleStatus.after),afterMultiple:n.isLogicAfter(o,n.multipleStatus.before,n.multipleStatus.after),disable:n.startDate&&!f(n.startDate,o)||n.endDate&&!f(o,n.endDate),isToday:a,userChecked:!1,extraInfo:s})},a=1;a<=e;a++)o(a);return r}},{key:"_getNextMonthDays",value:function(e,t){for(var n=this,r=[],i=(t.month,function(e){var i=12===t.month?1:1*t.month+1,o=1===i?t.year+1:t.year,a="".concat(o,"-").concat(d(i),"-").concat(d(e)),s=n.multipleStatus.data,u=-1;n.range&&s&&(u=s.findIndex((function(e){return n.dateEqual(e,a)})));var c=-1!==u,l=n.selected&&n.selected.find((function(e){if(n.dateEqual(a,e.date))return e}));r.push({fullDate:a,year:o,date:e,month:i,multiple:!!n.range&&c,beforeMultiple:n.isLogicBefore(a,n.multipleStatus.before,n.multipleStatus.after),afterMultiple:n.isLogicAfter(a,n.multipleStatus.before,n.multipleStatus.after),disable:n.startDate&&!f(n.startDate,a)||n.endDate&&!f(a,n.endDate),isToday:a===n.date.fullDate,userChecked:!1,extraInfo:l})}),o=1;o<=e;o++)i(o);return r}},{key:"getInfo",value:function(e){var t=this;return e||(e=new Date),this.calendar.find((function(n){return n.fullDate===t.getDateObj(e).fullDate}))}},{key:"dateEqual",value:function(e,t){return e=new Date(y(e)),t=new Date(y(t)),e.valueOf()===t.valueOf()}},{key:"isLogicBefore",value:function(e,t,n){var r=t;return t&&n&&(r=f(t,n)?t:n),this.dateEqual(r,e)}},{key:"isLogicAfter",value:function(e,t,n){var r=n;return t&&n&&(r=f(t,n)?n:t),this.dateEqual(r,e)}},{key:"geDateAll",value:function(e,t){var n=[],r=e.split("-"),i=t.split("-"),o=new Date;o.setFullYear(r[0],r[1]-1,r[2]);var a=new Date;a.setFullYear(i[0],i[1]-1,i[2]);for(var s=o.getTime()-864e5,u=a.getTime()-864e5,c=s;c<=u;)c+=864e5,n.push(this.getDateObj(new Date(parseInt(c))).fullDate);return n}},{key:"setMultiple",value:function(e){if(this.range){var t=this.multipleStatus,n=t.before,r=t.after;if(n&&r){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else n?(this.multipleStatus.after=e,f(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.lastHover=!1);this.getWeeks(e)}}},{key:"setHoverMultiple",value:function(e){if(this.range&&!this.lastHover){var t=this.multipleStatus.before;t?(this.multipleStatus.after=e,f(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this.getWeeks(e)}}},{key:"setDefaultMultiple",value:function(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(f(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)):(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)))}},{key:"getWeeks",value:function(e){for(var t=this.getDateObj(e),n=t.year,r=t.month,o=new Date(n,r-1,1).getDay(),a=this.getPreMonthDays(o,this.getDateObj(e)),s=new Date(n,r,0).getDate(),u=this.getCurrentMonthDays(s,this.getDateObj(e)),c=42-o-s,l=this._getNextMonthDays(c,this.getDateObj(e)),d=[].concat((0,i.default)(a),(0,i.default)(u),(0,i.default)(l)),h=new Array(6),f=0;f<d.length;f++){var p=Math.floor(f/7);h[p]||(h[p]=new Array(7)),h[p][f%7]=d[f]}this.calendar=d,this.weeks=h}}]),e}();function u(e,t){return"".concat(c(e)," ").concat(l(e,t))}function c(e){e=y(e),e=new Date(e);var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return"".concat(t,"-").concat(d(n),"-").concat(d(r))}function l(e,t){e=y(e),e=new Date(e);var n=e.getHours(),r=e.getMinutes(),i=e.getSeconds();return t?"".concat(d(n),":").concat(d(r)):"".concat(d(n),":").concat(d(r),":").concat(d(i))}function d(e){return e<10&&(e="0".concat(e)),e}function h(e){return e?"00:00":"00:00:00"}function f(e,t){return e=new Date(y(e)),t=new Date(y(t)),e<=t}function p(e){var t=/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g;return e.match(t)}t.Calendar=s;var m=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9]:[0-5]?[0-9])?$/;function y(e){return"string"===typeof e&&m.test(e)&&(e=e.replace(/-/g,"/")),e}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={},i=null;r={data:function(){return{is_show:"none"}},watch:{show:function(e){this.is_show=this.show}},created:function(){this.swipeaction=this.getSwipeAction(),this.swipeaction&&Array.isArray(this.swipeaction.children)&&this.swipeaction.children.push(this)},mounted:function(){this.is_show=this.show},methods:{closeSwipe:function(e){this.autoClose&&this.swipeaction&&this.swipeaction.closeOther(this)},change:function(e){this.$emit("change",e.open),this.is_show!==e.open&&(this.is_show=e.open)},appTouchStart:function(e){if(!i){var t=e.changedTouches[0].clientX;this.clientX=t,this.timestamp=(new Date).getTime()}},appTouchEnd:function(e,t,n,r){if(!i){var o=e.changedTouches[0].clientX,a=Math.abs(this.clientX-o),s=(new Date).getTime()-this.timestamp;a<40&&s<300&&this.$emit("click",{content:n,index:t,position:r})}},onClickForPC:function(e,t,n){}}};var o=r;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={},i=r;t.default=i},,,,,,,,,,function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=u,t.friendlyDate=c;var i=r(n(13));function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e+="";while(e.length<t)e="0"+e;return e.slice(-t)}var a={yyyy:function(e){return o(e.year,4)},yy:function(e){return o(e.year)},MM:function(e){return o(e.month)},M:function(e){return e.month},dd:function(e){return o(e.day)},d:function(e){return e.day},hh:function(e){return o(e.hour)},h:function(e){return e.hour},mm:function(e){return o(e.minute)},m:function(e){return e.minute},ss:function(e){return o(e.second)},s:function(e){return e.second},SSS:function(e){return o(e.millisecond,3)},S:function(e){return e.millisecond}};function s(e){if(e instanceof Date)return e;switch((0,i.default)(e)){case"string":return e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/"));default:return new Date(e)}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!e&&0!==e)return"";e=s(e);var n={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},r=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,i=!0,o=t;while(i)i=!1,o=o.replace(r,(function(e){return i=!0,a[e](n)}));return o}function c(e,t){var n=t.locale,r=void 0===n?"zh":n,i=t.threshold,o=void 0===i?[6e4,36e5]:i,a=t.format,c=void 0===a?"yyyy/MM/dd hh:mm:ss":a;if("-"===e)return e;if(!e&&0!==e)return"";var l,d,h={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},f=h[r]||h.zh,p=s(e),m=p.getTime()-Date.now(),y=Math.abs(m);if(y<o[0])return m<0?f.justNow:f.soon;if(y>=o[1])return u(p,c);var v=f.later;m<0&&(v=f.ago,m=-m);var g=Math.floor(m/1e3),_=Math.floor(g/60),b=Math.floor(_/60),x=Math.floor(b/24),M=Math.floor(x/30),C=Math.floor(M/12);switch(!0){case C>0:l=C,d=f.year;break;case M>0:l=M,d=f.month;break;case x>0:l=x,d=f.day;break;case b>0:l=b,d=f.hour;break;case _>0:l=_,d=f.minute;break;default:l=g,d=f.second;break}return"en"===r&&(1===l?l="a":d+="s"),f.template.replace(/{\s*num\s*}/g,l+"").replace(/{\s*unit\s*}/g,d).replace(/{\s*suffix\s*}/g,v)}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=[{provinceCode:"110000",provinceName:"北京市",city:[{cityCode:"110000-1",cityName:"北京市",county:[{countyCode:"110115",countyName:"大兴区"},{countyCode:"110116",countyName:"怀柔区"},{countyCode:"110105",countyName:"朝阳区"},{countyCode:"110229",countyName:"延庆区"},{countyCode:"110114",countyName:"昌平区"},{countyCode:"110108",countyName:"海淀区"},{countyCode:"110107",countyName:"石景山区"},{countyCode:"110112",countyName:"通州区"},{countyCode:"110228",countyName:"密云区"},{countyCode:"110117",countyName:"平谷区"},{countyCode:"110109",countyName:"门头沟区"},{countyCode:"110113",countyName:"顺义区"},{countyCode:"110106",countyName:"丰台区"},{countyCode:"110111",countyName:"房山区"},{countyCode:"110101",countyName:"东城区"},{countyCode:"110102",countyName:"西城区"}]}]},{provinceCode:"120000",provinceName:"天津市",city:[{cityCode:"120000-1",cityName:"天津市",county:[{countyCode:"120103",countyName:"河西区"},{countyCode:"120106",countyName:"红桥区"},{countyCode:"120223",countyName:"静海区"},{countyCode:"120114",countyName:"武清区"},{countyCode:"120110",countyName:"东丽区"},{countyCode:"120111",countyName:"西青区"},{countyCode:"120225",countyName:"蓟州区"},{countyCode:"120116",countyName:"滨海新区"},{countyCode:"120113",countyName:"北辰区"},{countyCode:"120115",countyName:"宝坻区"},{countyCode:"120101",countyName:"和平区"},{countyCode:"120112",countyName:"津南区"},{countyCode:"120221",countyName:"宁河区"},{countyCode:"120104",countyName:"南开区"},{countyCode:"120105",countyName:"河北区"},{countyCode:"120102",countyName:"河东区"}]}]},{provinceCode:"130000",provinceName:"河北省",city:[{cityCode:"130400",cityName:"邯郸市",county:[{countyCode:"130404",countyName:"复兴区"},{countyCode:"130424",countyName:"成安县"},{countyCode:"130403",countyName:"丛台区"},{countyCode:"130402",countyName:"邯山区"},{countyCode:"130434",countyName:"魏县"},{countyCode:"130429",countyName:"永年区"},{countyCode:"130427",countyName:"磁县"},{countyCode:"130433",countyName:"馆陶县"},{countyCode:"130421",countyName:"邯郸县"},{countyCode:"130435",countyName:"曲周县"},{countyCode:"130425",countyName:"大名县"},{countyCode:"130426",countyName:"涉县"},{countyCode:"130423",countyName:"临漳县"},{countyCode:"130431",countyName:"鸡泽县"},{countyCode:"130406",countyName:"峰峰矿区"},{countyCode:"130430",countyName:"邱县"},{countyCode:"130428",countyName:"肥乡区"},{countyCode:"130432",countyName:"广平县"},{countyCode:"130481",countyName:"武安市"}]},{cityCode:"131100",cityName:"衡水市",county:[{countyCode:"131127",countyName:"景县"},{countyCode:"131102",countyName:"桃城区"},{countyCode:"131128",countyName:"阜城县"},{countyCode:"131125",countyName:"安平县"},{countyCode:"131121",countyName:"枣强县"},{countyCode:"131123",countyName:"武强县"},{countyCode:"131122",countyName:"武邑县"},{countyCode:"131181",countyName:"冀州区"},{countyCode:"131126",countyName:"故城县"},{countyCode:"131124",countyName:"饶阳县"},{countyCode:"131182",countyName:"深州市"}]},{cityCode:"130900",cityName:"沧州市",county:[{countyCode:"130930",countyName:"孟村回族自治县"},{countyCode:"130923",countyName:"东光县"},{countyCode:"130981",countyName:"泊头市"},{countyCode:"130924",countyName:"海兴县"},{countyCode:"130927",countyName:"南皮县"},{countyCode:"130922",countyName:"青县"},{countyCode:"130902",countyName:"新华区"},{countyCode:"130925",countyName:"盐山县"},{countyCode:"130903",countyName:"运河区"},{countyCode:"130921",countyName:"沧县"},{countyCode:"130984",countyName:"河间市"},{countyCode:"130926",countyName:"肃宁县"},{countyCode:"130982",countyName:"任丘市"},{countyCode:"130983",countyName:"黄骅市"},{countyCode:"130928",countyName:"吴桥县"},{countyCode:"130929",countyName:"献县"}]},{cityCode:"130200",cityName:"唐山市",county:[{countyCode:"130207",countyName:"丰南区"},{countyCode:"130204",countyName:"古冶区"},{countyCode:"130224",countyName:"滦南县"},{countyCode:"130209",countyName:"曹妃甸区"},{countyCode:"130202",countyName:"路南区"},{countyCode:"130208",countyName:"丰润区"},{countyCode:"130203",countyName:"路北区"},{countyCode:"130281",countyName:"遵化市"},{countyCode:"130205",countyName:"开平区"},{countyCode:"130283",countyName:"迁安市"},{countyCode:"130227",countyName:"迁西县"},{countyCode:"130229",countyName:"玉田县"},{countyCode:"130225",countyName:"乐亭县"},{countyCode:"130223",countyName:"滦州市"}]},{cityCode:"130700",cityName:"张家口市",county:[{countyCode:"130728",countyName:"怀安县"},{countyCode:"130723",countyName:"康保县"},{countyCode:"130702",countyName:"桥东区"},{countyCode:"130732",countyName:"赤城县"},{countyCode:"130733",countyName:"崇礼区"},{countyCode:"130727",countyName:"阳原县"},{countyCode:"130731",countyName:"涿鹿县"},{countyCode:"130705",countyName:"宣化区"},{countyCode:"130722",countyName:"张北县"},{countyCode:"130729",countyName:"万全区"},{countyCode:"130724",countyName:"沽源县"},{countyCode:"130703",countyName:"桥西区"},{countyCode:"130706",countyName:"下花园区"},{countyCode:"130730",countyName:"怀来县"},{countyCode:"130725",countyName:"尚义县"},{countyCode:"130726",countyName:"蔚县"},{countyCode:"130721",countyName:"宣化县"}]},{cityCode:"131000",cityName:"廊坊市",county:[{countyCode:"131002",countyName:"安次区"},{countyCode:"131082",countyName:"三河市"},{countyCode:"131025",countyName:"大城县"},{countyCode:"131023",countyName:"永清县"},{countyCode:"131028",countyName:"大厂回族自治县"},{countyCode:"131022",countyName:"固安县"},{countyCode:"131003",countyName:"广阳区"},{countyCode:"131081",countyName:"霸州市"},{countyCode:"131026",countyName:"文安县"},{countyCode:"131024",countyName:"香河县"}]},{cityCode:"130300",cityName:"秦皇岛市",county:[{countyCode:"130323",countyName:"抚宁区"},{countyCode:"130321",countyName:"青龙满族自治县"},{countyCode:"130303",countyName:"山海关区"},{countyCode:"130304",countyName:"北戴河区"},{countyCode:"130302",countyName:"海港区"},{countyCode:"130322",countyName:"昌黎县"},{countyCode:"130324",countyName:"卢龙县"}]},{cityCode:"130500",cityName:"邢台市",county:[{countyCode:"130533",countyName:"威县"},{countyCode:"130532",countyName:"平乡县"},{countyCode:"130527",countyName:"南和县"},{countyCode:"130521",countyName:"邢台县"},{countyCode:"130524",countyName:"柏乡县"},{countyCode:"130522",countyName:"临城县"},{countyCode:"130530",countyName:"新河县"},{countyCode:"130534",countyName:"清河县"},{countyCode:"130582",countyName:"沙河市"},{countyCode:"130531",countyName:"广宗县"},{countyCode:"130525",countyName:"隆尧县"},{countyCode:"130529",countyName:"巨鹿县"},{countyCode:"130523",countyName:"内丘县"},{countyCode:"130528",countyName:"宁晋县"},{countyCode:"130526",countyName:"任县"},{countyCode:"130581",countyName:"南宫市"},{countyCode:"130535",countyName:"临西县"},{countyCode:"130502",countyName:"桥东区"},{countyCode:"130503",countyName:"桥西区"}]},{cityCode:"130100",cityName:"石家庄市",county:[{countyCode:"130125",countyName:"行唐县"},{countyCode:"130185",countyName:"鹿泉区"},{countyCode:"130123",countyName:"正定县"},{countyCode:"130107",countyName:"井陉矿区"},{countyCode:"130102",countyName:"长安区"},{countyCode:"130184",countyName:"新乐市"},{countyCode:"130183",countyName:"晋州市"},{countyCode:"130128",countyName:"深泽县"},{countyCode:"130181",countyName:"辛集市"},{countyCode:"130124",countyName:"栾城区"},{countyCode:"130126",countyName:"灵寿县"},{countyCode:"130104",countyName:"桥西区"},{countyCode:"130130",countyName:"无极县"},{countyCode:"130108",countyName:"裕华区"},{countyCode:"130129",countyName:"赞皇县"},{countyCode:"130133",countyName:"赵县"},{countyCode:"130182",countyName:"藁城区"},{countyCode:"130127",countyName:"高邑县"},{countyCode:"130132",countyName:"元氏县"},{countyCode:"130131",countyName:"平山县"},{countyCode:"130121",countyName:"井陉县"},{countyCode:"130105",countyName:"新华区"}]},{cityCode:"130800",cityName:"承德市",county:[{countyCode:"130803",countyName:"双滦区"},{countyCode:"130827",countyName:"宽城满族自治县"},{countyCode:"130802",countyName:"双桥区"},{countyCode:"130826",countyName:"丰宁满族自治县"},{countyCode:"130821",countyName:"承德县"},{countyCode:"130828",countyName:"围场满族蒙古族自治县"},{countyCode:"130822",countyName:"兴隆县"},{countyCode:"130825",countyName:"隆化县"},{countyCode:"130823",countyName:"平泉市"},{countyCode:"130804",countyName:"鹰手营子矿区"},{countyCode:"130824",countyName:"滦平县"}]},{cityCode:"130600",cityName:"保定市",county:[{countyCode:"130638",countyName:"雄县"},{countyCode:"130625",countyName:"徐水区"},{countyCode:"130682",countyName:"定州市"},{countyCode:"130631",countyName:"望都县"},{countyCode:"130630",countyName:"涞源县"},{countyCode:"130621",countyName:"满城区"},{countyCode:"130626",countyName:"定兴县"},{countyCode:"130624",countyName:"阜平县"},{countyCode:"130636",countyName:"顺平县"},{countyCode:"130627",countyName:"唐县"},{countyCode:"130623",countyName:"涞水县"},{countyCode:"130629",countyName:"容城县"},{countyCode:"130634",countyName:"曲阳县"},{countyCode:"130637",countyName:"博野县"},{countyCode:"130622",countyName:"清苑区"},{countyCode:"130632",countyName:"安新县"},{countyCode:"130684",countyName:"高碑店市"},{countyCode:"130633",countyName:"易县"},{countyCode:"130628",countyName:"高阳县"},{countyCode:"130683",countyName:"安国市"},{countyCode:"130604",countyName:"南市区"},{countyCode:"130603",countyName:"北市区"},{countyCode:"130681",countyName:"涿州市"},{countyCode:"130635",countyName:"蠡县"},{countyCode:"130602",countyName:"竞秀区"},{countyCode:"130606",countyName:"莲池区"}]}]},{provinceCode:"140000",provinceName:"山西省",city:[{cityCode:"141000",cityName:"临汾市",county:[{countyCode:"141033",countyName:"蒲县"},{countyCode:"141025",countyName:"古县"},{countyCode:"141034",countyName:"汾西县"},{countyCode:"141027",countyName:"浮山县"},{countyCode:"141021",countyName:"曲沃县"},{countyCode:"141032",countyName:"永和县"},{countyCode:"141082",countyName:"霍州市"},{countyCode:"141028",countyName:"吉县"},{countyCode:"141022",countyName:"翼城县"},{countyCode:"141030",countyName:"大宁县"},{countyCode:"141081",countyName:"侯马市"},{countyCode:"141002",countyName:"尧都区"},{countyCode:"141026",countyName:"安泽县"},{countyCode:"141024",countyName:"洪洞县"},{countyCode:"141023",countyName:"襄汾县"},{countyCode:"141029",countyName:"乡宁县"},{countyCode:"141031",countyName:"隰县"}]},{cityCode:"140200",cityName:"大同市",county:[{countyCode:"140223",countyName:"广灵县"},{countyCode:"140203",countyName:"矿区"},{countyCode:"140212",countyName:"新荣区"},{countyCode:"140224",countyName:"灵丘县"},{countyCode:"140222",countyName:"天镇县"},{countyCode:"140213",countyName:"平城区"},{countyCode:"140227",countyName:"云州区"},{countyCode:"140202",countyName:"城区"},{countyCode:"140225",countyName:"浑源县"},{countyCode:"140221",countyName:"阳高县"},{countyCode:"140211",countyName:"南郊区"},{countyCode:"140214",countyName:"云冈区"},{countyCode:"140226",countyName:"左云县"}]},{cityCode:"140700",cityName:"晋中市",county:[{countyCode:"140722",countyName:"左权县"},{countyCode:"140721",countyName:"榆社县"},{countyCode:"140728",countyName:"平遥县"},{countyCode:"140723",countyName:"和顺县"},{countyCode:"140726",countyName:"太谷县"},{countyCode:"140781",countyName:"介休市"},{countyCode:"140725",countyName:"寿阳县"},{countyCode:"140727",countyName:"祁县"},{countyCode:"140724",countyName:"昔阳县"},{countyCode:"140702",countyName:"榆次区"},{countyCode:"140729",countyName:"灵石县"}]},{cityCode:"140500",cityName:"晋城市",county:[{countyCode:"140521",countyName:"沁水县"},{countyCode:"140581",countyName:"高平市"},{countyCode:"140524",countyName:"陵川县"},{countyCode:"140522",countyName:"阳城县"},{countyCode:"140525",countyName:"泽州县"},{countyCode:"140502",countyName:"城区"}]},{cityCode:"140600",cityName:"朔州市",county:[{countyCode:"140621",countyName:"山阴县"},{countyCode:"140623",countyName:"右玉县"},{countyCode:"140603",countyName:"平鲁区"},{countyCode:"140602",countyName:"朔城区"},{countyCode:"140622",countyName:"应县"},{countyCode:"140624",countyName:"怀仁市"}]},{cityCode:"141100",cityName:"吕梁市",county:[{countyCode:"141125",countyName:"柳林县"},{countyCode:"141127",countyName:"岚县"},{countyCode:"141122",countyName:"交城县"},{countyCode:"141128",countyName:"方山县"},{countyCode:"141129",countyName:"中阳县"},{countyCode:"141102",countyName:"离石区"},{countyCode:"141126",countyName:"石楼县"},{countyCode:"141182",countyName:"汾阳市"},{countyCode:"141130",countyName:"交口县"},{countyCode:"141124",countyName:"临县"},{countyCode:"141181",countyName:"孝义市"},{countyCode:"141123",countyName:"兴县"},{countyCode:"141121",countyName:"文水县"}]},{cityCode:"140900",cityName:"忻州市",county:[{countyCode:"140902",countyName:"忻府区"},{countyCode:"140922",countyName:"五台县"},{countyCode:"140981",countyName:"原平市"},{countyCode:"140932",countyName:"偏关县"},{countyCode:"140927",countyName:"神池县"},{countyCode:"140925",countyName:"宁武县"},{countyCode:"140924",countyName:"繁峙县"},{countyCode:"140931",countyName:"保德县"},{countyCode:"140926",countyName:"静乐县"},{countyCode:"140930",countyName:"河曲县"},{countyCode:"140921",countyName:"定襄县"},{countyCode:"140923",countyName:"代县"},{countyCode:"140928",countyName:"五寨县"},{countyCode:"140929",countyName:"岢岚县"}]},{cityCode:"140100",cityName:"太原市",county:[{countyCode:"140107",countyName:"杏花岭区"},{countyCode:"140109",countyName:"万柏林区"},{countyCode:"140105",countyName:"小店区"},{countyCode:"140181",countyName:"古交市"},{countyCode:"140110",countyName:"晋源区"},{countyCode:"140122",countyName:"阳曲县"},{countyCode:"140108",countyName:"尖草坪区"},{countyCode:"140121",countyName:"清徐县"},{countyCode:"140123",countyName:"娄烦县"},{countyCode:"140106",countyName:"迎泽区"}]},{cityCode:"140300",cityName:"阳泉市",county:[{countyCode:"140302",countyName:"城区"},{countyCode:"140321",countyName:"平定县"},{countyCode:"140311",countyName:"郊区"},{countyCode:"140303",countyName:"矿区"},{countyCode:"140322",countyName:"盂县"}]},{cityCode:"140800",cityName:"运城市",county:[{countyCode:"140802",countyName:"盐湖区"},{countyCode:"140829",countyName:"平陆县"},{countyCode:"140828",countyName:"夏县"},{countyCode:"140825",countyName:"新绛县"},{countyCode:"140830",countyName:"芮城县"},{countyCode:"140823",countyName:"闻喜县"},{countyCode:"140826",countyName:"绛县"},{countyCode:"140822",countyName:"万荣县"},{countyCode:"140821",countyName:"临猗县"},{countyCode:"140827",countyName:"垣曲县"},{countyCode:"140824",countyName:"稷山县"},{countyCode:"140881",countyName:"永济市"},{countyCode:"140882",countyName:"河津市"}]},{cityCode:"140400",cityName:"长治市",county:[{countyCode:"140428",countyName:"长子县"},{countyCode:"140430",countyName:"沁县"},{countyCode:"140426",countyName:"黎城县"},{countyCode:"140481",countyName:"潞城市"},{countyCode:"140403",countyName:"潞州区"},{countyCode:"140402",countyName:"城区"},{countyCode:"140427",countyName:"壶关县"},{countyCode:"140429",countyName:"武乡县"},{countyCode:"140425",countyName:"平顺县"},{countyCode:"140421",countyName:"长治县"},{countyCode:"140424",countyName:"屯留县"},{countyCode:"140431",countyName:"沁源县"},{countyCode:"140411",countyName:"郊区"},{countyCode:"140423",countyName:"襄垣县"}]}]},{provinceCode:"150000",provinceName:"内蒙古自治区",city:[{cityCode:"150100",cityName:"呼和浩特市",county:[{countyCode:"150125",countyName:"武川县"},{countyCode:"150124",countyName:"清水河县"},{countyCode:"150105",countyName:"赛罕区"},{countyCode:"150122",countyName:"托克托县"},{countyCode:"150121",countyName:"土默特左旗"},{countyCode:"150102",countyName:"新城区"},{countyCode:"150104",countyName:"玉泉区"},{countyCode:"150123",countyName:"和林格尔县"},{countyCode:"150103",countyName:"回民区"}]},{cityCode:"150300",cityName:"乌海市",county:[{countyCode:"150303",countyName:"海南区"},{countyCode:"150302",countyName:"海勃湾区"},{countyCode:"150304",countyName:"乌达区"}]},{cityCode:"150500",cityName:"通辽市",county:[{countyCode:"150502",countyName:"科尔沁区"},{countyCode:"150526",countyName:"扎鲁特旗"},{countyCode:"150522",countyName:"科尔沁左翼后旗"},{countyCode:"150523",countyName:"开鲁县"},{countyCode:"150524",countyName:"库伦旗"},{countyCode:"150525",countyName:"奈曼旗"},{countyCode:"150521",countyName:"科尔沁左翼中旗"},{countyCode:"150581",countyName:"霍林郭勒市"}]},{cityCode:"150400",cityName:"赤峰市",county:[{countyCode:"150422",countyName:"巴林左旗"},{countyCode:"150429",countyName:"宁城县"},{countyCode:"150421",countyName:"阿鲁科尔沁旗"},{countyCode:"150423",countyName:"巴林右旗"},{countyCode:"150425",countyName:"克什克腾旗"},{countyCode:"150426",countyName:"翁牛特旗"},{countyCode:"150402",countyName:"红山区"},{countyCode:"150430",countyName:"敖汉旗"},{countyCode:"150428",countyName:"喀喇沁旗"},{countyCode:"150404",countyName:"松山区"},{countyCode:"150424",countyName:"林西县"},{countyCode:"150403",countyName:"元宝山区"}]},{cityCode:"150200",cityName:"包头市",county:[{countyCode:"150203",countyName:"昆都仑区"},{countyCode:"150204",countyName:"青山区"},{countyCode:"150205",countyName:"石拐区"},{countyCode:"150221",countyName:"土默特右旗"},{countyCode:"150222",countyName:"固阳县"},{countyCode:"150223",countyName:"达尔罕茂明安联合旗"},{countyCode:"150206",countyName:"白云鄂博矿区"},{countyCode:"150202",countyName:"东河区"},{countyCode:"150207",countyName:"九原区"}]},{cityCode:"150700",cityName:"呼伦贝尔市",county:[{countyCode:"150721",countyName:"阿荣旗"},{countyCode:"150723",countyName:"鄂伦春自治旗"},{countyCode:"150785",countyName:"根河市"},{countyCode:"150782",countyName:"牙克石市"},{countyCode:"150783",countyName:"扎兰屯市"},{countyCode:"150724",countyName:"鄂温克族自治旗"},{countyCode:"150784",countyName:"额尔古纳市"},{countyCode:"150727",countyName:"新巴尔虎右旗"},{countyCode:"150726",countyName:"新巴尔虎左旗"},{countyCode:"150702",countyName:"海拉尔区"},{countyCode:"150703",countyName:"扎赉诺尔区"},{countyCode:"150781",countyName:"满洲里市"},{countyCode:"150725",countyName:"陈巴尔虎旗"},{countyCode:"150722",countyName:"莫力达瓦达斡尔族自治旗"}]},{cityCode:"152500",cityName:"锡林郭勒盟",county:[{countyCode:"152529",countyName:"正镶白旗"},{countyCode:"152501",countyName:"二连浩特市"},{countyCode:"152525",countyName:"东乌珠穆沁旗"},{countyCode:"152524",countyName:"苏尼特右旗"},{countyCode:"152523",countyName:"苏尼特左旗"},{countyCode:"152526",countyName:"西乌珠穆沁旗"},{countyCode:"152531",countyName:"多伦县"},{countyCode:"152528",countyName:"镶黄旗"},{countyCode:"152530",countyName:"正蓝旗"},{countyCode:"152522",countyName:"阿巴嘎旗"},{countyCode:"152502",countyName:"锡林浩特市"},{countyCode:"152527",countyName:"太仆寺旗"}]},{cityCode:"152200",cityName:"兴安盟",county:[{countyCode:"152221",countyName:"科尔沁右翼前旗"},{countyCode:"152223",countyName:"扎赉特旗"},{countyCode:"152201",countyName:"乌兰浩特市"},{countyCode:"152224",countyName:"突泉县"},{countyCode:"152222",countyName:"科尔沁右翼中旗"},{countyCode:"152202",countyName:"阿尔山市"}]},{cityCode:"150900",cityName:"乌兰察布市",county:[{countyCode:"150902",countyName:"集宁区"},{countyCode:"150921",countyName:"卓资县"},{countyCode:"150922",countyName:"化德县"},{countyCode:"150923",countyName:"商都县"},{countyCode:"150928",countyName:"察哈尔右翼后旗"},{countyCode:"150926",countyName:"察哈尔右翼前旗"},{countyCode:"150927",countyName:"察哈尔右翼中旗"},{countyCode:"150929",countyName:"四子王旗"},{countyCode:"150981",countyName:"丰镇市"},{countyCode:"150925",countyName:"凉城县"},{countyCode:"150924",countyName:"兴和县"}]},{cityCode:"150600",cityName:"鄂尔多斯市",county:[{countyCode:"150624",countyName:"鄂托克旗"},{countyCode:"150621",countyName:"达拉特旗"},{countyCode:"150626",countyName:"乌审旗"},{countyCode:"150602",countyName:"东胜区"},{countyCode:"150603",countyName:"康巴什区"},{countyCode:"150623",countyName:"鄂托克前旗"},{countyCode:"150622",countyName:"准格尔旗"},{countyCode:"150625",countyName:"杭锦旗"},{countyCode:"150627",countyName:"伊金霍洛旗"}]},{cityCode:"152900",cityName:"阿拉善盟",county:[{countyCode:"152923",countyName:"额济纳旗"},{countyCode:"152921",countyName:"阿拉善左旗"},{countyCode:"152922",countyName:"阿拉善右旗"}]},{cityCode:"150800",cityName:"巴彦淖尔市",county:[{countyCode:"150802",countyName:"临河区"},{countyCode:"150823",countyName:"乌拉特前旗"},{countyCode:"150821",countyName:"五原县"},{countyCode:"150826",countyName:"杭锦后旗"},{countyCode:"150825",countyName:"乌拉特后旗"},{countyCode:"150824",countyName:"乌拉特中旗"},{countyCode:"150822",countyName:"磴口县"}]}]},{provinceCode:"210000",provinceName:"辽宁省",city:[{cityCode:"211200",cityName:"铁岭市",county:[{countyCode:"211281",countyName:"调兵山市"},{countyCode:"211221",countyName:"铁岭县"},{countyCode:"211224",countyName:"昌图县"},{countyCode:"211223",countyName:"西丰县"},{countyCode:"211282",countyName:"开原市"},{countyCode:"211202",countyName:"银州区"},{countyCode:"211204",countyName:"清河区"}]},{cityCode:"210500",cityName:"本溪市",county:[{countyCode:"210522",countyName:"桓仁满族自治县"},{countyCode:"210502",countyName:"平山区"},{countyCode:"210503",countyName:"溪湖区"},{countyCode:"210505",countyName:"南芬区"},{countyCode:"210504",countyName:"明山区"},{countyCode:"210521",countyName:"本溪满族自治县"}]},{cityCode:"211400",cityName:"葫芦岛市",county:[{countyCode:"211421",countyName:"绥中县"},{countyCode:"211481",countyName:"兴城市"},{countyCode:"211403",countyName:"龙港区"},{countyCode:"211404",countyName:"南票区"},{countyCode:"211422",countyName:"建昌县"},{countyCode:"211402",countyName:"连山区"}]},{cityCode:"210100",cityName:"沈阳市",county:[{countyCode:"210122",countyName:"辽中区"},{countyCode:"210104",countyName:"大东区"},{countyCode:"210105",countyName:"皇姑区"},{countyCode:"210123",countyName:"康平县"},{countyCode:"210124",countyName:"法库县"},{countyCode:"210181",countyName:"新民市"},{countyCode:"210103",countyName:"沈河区"},{countyCode:"210111",countyName:"苏家屯区"},{countyCode:"210106",countyName:"铁西区"},{countyCode:"210102",countyName:"和平区"},{countyCode:"210113",countyName:"沈北新区"},{countyCode:"210114",countyName:"于洪区"},{countyCode:"210112",countyName:"浑南区"}]},{cityCode:"210900",cityName:"阜新市",county:[{countyCode:"210905",countyName:"清河门区"},{countyCode:"210911",countyName:"细河区"},{countyCode:"210921",countyName:"阜新蒙古族自治县"},{countyCode:"210902",countyName:"海州区"},{countyCode:"210903",countyName:"新邱区"},{countyCode:"210922",countyName:"彰武县"},{countyCode:"210904",countyName:"太平区"}]},{cityCode:"210800",cityName:"营口市",county:[{countyCode:"210802",countyName:"站前区"},{countyCode:"210804",countyName:"鲅鱼圈区"},{countyCode:"210811",countyName:"老边区"},{countyCode:"210882",countyName:"大石桥市"},{countyCode:"210881",countyName:"盖州市"},{countyCode:"210803",countyName:"西市区"}]},{cityCode:"210300",cityName:"鞍山市",county:[{countyCode:"210304",countyName:"立山区"},{countyCode:"210381",countyName:"海城市"},{countyCode:"210321",countyName:"台安县"},{countyCode:"210311",countyName:"千山区"},{countyCode:"210302",countyName:"铁东区"},{countyCode:"210303",countyName:"铁西区"},{countyCode:"210323",countyName:"岫岩满族自治县"}]},{cityCode:"210700",cityName:"锦州市",county:[{countyCode:"210727",countyName:"义县"},{countyCode:"210781",countyName:"凌海市"},{countyCode:"210711",countyName:"太和区"},{countyCode:"210726",countyName:"黑山县"},{countyCode:"210782",countyName:"北镇市"},{countyCode:"210702",countyName:"古塔区"},{countyCode:"210703",countyName:"凌河区"}]},{cityCode:"210400",cityName:"抚顺市",county:[{countyCode:"210403",countyName:"东洲区"},{countyCode:"210411",countyName:"顺城区"},{countyCode:"210404",countyName:"望花区"},{countyCode:"210402",countyName:"新抚区"},{countyCode:"210421",countyName:"抚顺县"},{countyCode:"210423",countyName:"清原满族自治县"},{countyCode:"210422",countyName:"新宾满族自治县"}]},{cityCode:"210200",cityName:"大连市",county:[{countyCode:"210213",countyName:"金州区"},{countyCode:"210202",countyName:"中山区"},{countyCode:"210282",countyName:"普兰店区"},{countyCode:"210204",countyName:"沙河口区"},{countyCode:"210203",countyName:"西岗区"},{countyCode:"210281",countyName:"瓦房店市"},{countyCode:"210211",countyName:"甘井子区"},{countyCode:"210212",countyName:"旅顺口区"},{countyCode:"210224",countyName:"长海县"},{countyCode:"210283",countyName:"庄河市"}]},{cityCode:"211000",cityName:"辽阳市",county:[{countyCode:"211003",countyName:"文圣区"},{countyCode:"211081",countyName:"灯塔市"},{countyCode:"211011",countyName:"太子河区"},{countyCode:"211005",countyName:"弓长岭区"},{countyCode:"211004",countyName:"宏伟区"},{countyCode:"211021",countyName:"辽阳县"},{countyCode:"211002",countyName:"白塔区"}]},{cityCode:"210600",cityName:"丹东市",county:[{countyCode:"210603",countyName:"振兴区"},{countyCode:"210681",countyName:"东港市"},{countyCode:"210624",countyName:"宽甸满族自治县"},{countyCode:"210682",countyName:"凤城市"},{countyCode:"210604",countyName:"振安区"},{countyCode:"210602",countyName:"元宝区"}]},{cityCode:"211300",cityName:"朝阳市",county:[{countyCode:"211382",countyName:"凌源市"},{countyCode:"211322",countyName:"建平县"},{countyCode:"211381",countyName:"北票市"},{countyCode:"211303",countyName:"龙城区"},{countyCode:"211302",countyName:"双塔区"},{countyCode:"211324",countyName:"喀喇沁左翼蒙古族自治县"},{countyCode:"211321",countyName:"朝阳县"}]},{cityCode:"211100",cityName:"盘锦市",county:[{countyCode:"211122",countyName:"盘山县"},{countyCode:"211103",countyName:"兴隆台区"},{countyCode:"211102",countyName:"双台子区"},{countyCode:"211121",countyName:"大洼区"}]}]},{provinceCode:"220000",provinceName:"吉林省",city:[{cityCode:"220600",cityName:"白山市",county:[{countyCode:"220621",countyName:"抚松县"},{countyCode:"220602",countyName:"浑江区"},{countyCode:"220622",countyName:"靖宇县"},{countyCode:"220605",countyName:"江源区"},{countyCode:"220681",countyName:"临江市"},{countyCode:"220623",countyName:"长白朝鲜族自治县"}]},{cityCode:"220500",cityName:"通化市",county:[{countyCode:"220523",countyName:"辉南县"},{countyCode:"220521",countyName:"通化县"},{countyCode:"220581",countyName:"梅河口市"},{countyCode:"220502",countyName:"东昌区"},{countyCode:"220524",countyName:"柳河县"},{countyCode:"220503",countyName:"二道江区"},{countyCode:"220582",countyName:"集安市"}]},{cityCode:"220700",cityName:"松原市",county:[{countyCode:"220722",countyName:"长岭县"},{countyCode:"220702",countyName:"宁江区"},{countyCode:"220724",countyName:"扶余市"},{countyCode:"220721",countyName:"前郭尔罗斯蒙古族自治县"},{countyCode:"220723",countyName:"乾安县"}]},{cityCode:"220800",cityName:"白城市",county:[{countyCode:"220802",countyName:"洮北区"},{countyCode:"220821",countyName:"镇赉县"},{countyCode:"220822",countyName:"通榆县"},{countyCode:"220881",countyName:"洮南市"},{countyCode:"220882",countyName:"大安市"}]},{cityCode:"220100",cityName:"长春市",county:[{countyCode:"220105",countyName:"二道区"},{countyCode:"220182",countyName:"榆树市"},{countyCode:"220106",countyName:"绿园区"},{countyCode:"220181",countyName:"九台区"},{countyCode:"220122",countyName:"农安县"},{countyCode:"220103",countyName:"宽城区"},{countyCode:"220102",countyName:"南关区"},{countyCode:"220104",countyName:"朝阳区"},{countyCode:"220183",countyName:"德惠市"},{countyCode:"220112",countyName:"双阳区"}]},{cityCode:"222400",cityName:"延边朝鲜族自治州",county:[{countyCode:"222424",countyName:"汪清县"},{countyCode:"222401",countyName:"延吉市"},{countyCode:"222404",countyName:"珲春市"},{countyCode:"222405",countyName:"龙井市"},{countyCode:"222402",countyName:"图们市"},{countyCode:"222426",countyName:"安图县"},{countyCode:"222406",countyName:"和龙市"},{countyCode:"222403",countyName:"敦化市"}]},{cityCode:"220400",cityName:"辽源市",county:[{countyCode:"220422",countyName:"东辽县"},{countyCode:"220402",countyName:"龙山区"},{countyCode:"220421",countyName:"东丰县"},{countyCode:"220403",countyName:"西安区"}]},{cityCode:"220300",cityName:"四平市",county:[{countyCode:"220381",countyName:"公主岭市"},{countyCode:"220323",countyName:"伊通满族自治县"},{countyCode:"220322",countyName:"梨树县"},{countyCode:"220382",countyName:"双辽市"},{countyCode:"220302",countyName:"铁西区"},{countyCode:"220303",countyName:"铁东区"}]},{cityCode:"220200",cityName:"吉林市",county:[{countyCode:"220204",countyName:"船营区"},{countyCode:"220283",countyName:"舒兰市"},{countyCode:"220282",countyName:"桦甸市"},{countyCode:"220202",countyName:"昌邑区"},{countyCode:"220281",countyName:"蛟河市"},{countyCode:"220284",countyName:"磐石市"},{countyCode:"220211",countyName:"丰满区"},{countyCode:"220203",countyName:"龙潭区"},{countyCode:"220221",countyName:"永吉县"}]}]},{provinceCode:"230000",provinceName:"黑龙江省",city:[{cityCode:"230400",cityName:"鹤岗市",county:[{countyCode:"230406",countyName:"东山区"},{countyCode:"230407",countyName:"兴山区"},{countyCode:"230422",countyName:"绥滨县"},{countyCode:"230403",countyName:"工农区"},{countyCode:"230404",countyName:"南山区"},{countyCode:"230421",countyName:"萝北县"},{countyCode:"230402",countyName:"向阳区"},{countyCode:"230405",countyName:"兴安区"}]},{cityCode:"230700",cityName:"伊春市",county:[{countyCode:"230708",countyName:"美溪区"},{countyCode:"230705",countyName:"西林区"},{countyCode:"230722",countyName:"嘉荫县"},{countyCode:"230709",countyName:"金山屯区"},{countyCode:"230711",countyName:"乌马河区"},{countyCode:"230707",countyName:"新青区"},{countyCode:"230702",countyName:"伊春区"},{countyCode:"230704",countyName:"友好区"},{countyCode:"230703",countyName:"南岔区"},{countyCode:"230710",countyName:"五营区"},{countyCode:"230716",countyName:"上甘岭区"},{countyCode:"230712",countyName:"汤旺河区"},{countyCode:"230781",countyName:"铁力市"},{countyCode:"230714",countyName:"乌伊岭区"},{countyCode:"230715",countyName:"红星区"},{countyCode:"230706",countyName:"翠峦区"},{countyCode:"230713",countyName:"带岭区"}]},{cityCode:"230800",cityName:"佳木斯市",county:[{countyCode:"230881",countyName:"同江市"},{countyCode:"230805",countyName:"东风区"},{countyCode:"230811",countyName:"郊区"},{countyCode:"230882",countyName:"富锦市"},{countyCode:"230828",countyName:"汤原县"},{countyCode:"230833",countyName:"抚远市"},{countyCode:"230804",countyName:"前进区"},{countyCode:"230803",countyName:"向阳区"},{countyCode:"230826",countyName:"桦川县"},{countyCode:"230822",countyName:"桦南县"}]},{cityCode:"230200",cityName:"齐齐哈尔市",county:[{countyCode:"230207",countyName:"碾子山区"},{countyCode:"230203",countyName:"建华区"},{countyCode:"230204",countyName:"铁锋区"},{countyCode:"230208",countyName:"梅里斯达斡尔族区"},{countyCode:"230230",countyName:"克东县"},{countyCode:"230227",countyName:"富裕县"},{countyCode:"230205",countyName:"昂昂溪区"},{countyCode:"230221",countyName:"龙江县"},{countyCode:"230206",countyName:"富拉尔基区"},{countyCode:"230223",countyName:"依安县"},{countyCode:"230225",countyName:"甘南县"},{countyCode:"230229",countyName:"克山县"},{countyCode:"230281",countyName:"讷河市"},{countyCode:"230202",countyName:"龙沙区"},{countyCode:"230231",countyName:"拜泉县"},{countyCode:"230224",countyName:"泰来县"}]},{cityCode:"230500",cityName:"双鸭山市",county:[{countyCode:"230524",countyName:"饶河县"},{countyCode:"230506",countyName:"宝山区"},{countyCode:"230503",countyName:"岭东区"},{countyCode:"230505",countyName:"四方台区"},{countyCode:"230523",countyName:"宝清县"},{countyCode:"230521",countyName:"集贤县"},{countyCode:"230522",countyName:"友谊县"},{countyCode:"230502",countyName:"尖山区"}]},{cityCode:"230100",cityName:"哈尔滨市",county:[{countyCode:"230109",countyName:"松北区"},{countyCode:"230127",countyName:"木兰县"},{countyCode:"230124",countyName:"方正县"},{countyCode:"230103",countyName:"南岗区"},{countyCode:"230183",countyName:"尚志市"},{countyCode:"230129",countyName:"延寿县"},{countyCode:"230126",countyName:"巴彦县"},{countyCode:"230125",countyName:"宾县"},{countyCode:"230102",countyName:"道里区"},{countyCode:"230111",countyName:"呼兰区"},{countyCode:"230112",countyName:"阿城区"},{countyCode:"230110",countyName:"香坊区"},{countyCode:"230108",countyName:"平房区"},{countyCode:"230182",countyName:"双城区"},{countyCode:"230123",countyName:"依兰县"},{countyCode:"230184",countyName:"五常市"},{countyCode:"230104",countyName:"道外区"},{countyCode:"230128",countyName:"通河县"}]},{cityCode:"231000",cityName:"牡丹江市",county:[{countyCode:"231003",countyName:"阳明区"},{countyCode:"231005",countyName:"西安区"},{countyCode:"231025",countyName:"林口县"},{countyCode:"231024",countyName:"东宁市"},{countyCode:"231004",countyName:"爱民区"},{countyCode:"231084",countyName:"宁安市"},{countyCode:"231083",countyName:"海林市"},{countyCode:"231002",countyName:"东安区"},{countyCode:"231085",countyName:"穆棱市"},{countyCode:"231081",countyName:"绥芬河市"}]},{cityCode:"230900",cityName:"七台河市",county:[{countyCode:"230904",countyName:"茄子河区"},{countyCode:"230921",countyName:"勃利县"},{countyCode:"230902",countyName:"新兴区"},{countyCode:"230903",countyName:"桃山区"}]},{cityCode:"231100",cityName:"黑河市",county:[{countyCode:"231102",countyName:"爱辉区"},{countyCode:"231182",countyName:"五大连池市"},{countyCode:"231181",countyName:"北安市"},{countyCode:"231124",countyName:"孙吴县"},{countyCode:"231123",countyName:"逊克县"},{countyCode:"231121",countyName:"嫩江县"}]},{cityCode:"230600",cityName:"大庆市",county:[{countyCode:"230605",countyName:"红岗区"},{countyCode:"230606",countyName:"大同区"},{countyCode:"230623",countyName:"林甸县"},{countyCode:"230622",countyName:"肇源县"},{countyCode:"230621",countyName:"肇州县"},{countyCode:"230624",countyName:"杜尔伯特蒙古族自治县"},{countyCode:"230603",countyName:"龙凤区"},{countyCode:"230602",countyName:"萨尔图区"},{countyCode:"230604",countyName:"让胡路区"}]},{cityCode:"232700",cityName:"大兴安岭地区",county:[{countyCode:"232703",countyName:"新林区"},{countyCode:"232702",countyName:"松岭区"},{countyCode:"232701",countyName:"加格达奇区"},{countyCode:"232722",countyName:"塔河县"},{countyCode:"232721",countyName:"呼玛县"},{countyCode:"232704",countyName:"呼中区"},{countyCode:"232723",countyName:"漠河市"}]},{cityCode:"231200",cityName:"绥化市",county:[{countyCode:"231281",countyName:"安达市"},{countyCode:"231224",countyName:"庆安县"},{countyCode:"231282",countyName:"肇东市"},{countyCode:"231283",countyName:"海伦市"},{countyCode:"231225",countyName:"明水县"},{countyCode:"231222",countyName:"兰西县"},{countyCode:"231223",countyName:"青冈县"},{countyCode:"231226",countyName:"绥棱县"},{countyCode:"231221",countyName:"望奎县"},{countyCode:"231202",countyName:"北林区"}]},{cityCode:"230300",cityName:"鸡西市",county:[{countyCode:"230303",countyName:"恒山区"},{countyCode:"230302",countyName:"鸡冠区"},{countyCode:"230305",countyName:"梨树区"},{countyCode:"230321",countyName:"鸡东县"},{countyCode:"230304",countyName:"滴道区"},{countyCode:"230381",countyName:"虎林市"},{countyCode:"230307",countyName:"麻山区"},{countyCode:"230306",countyName:"城子河区"},{countyCode:"230382",countyName:"密山市"}]}]},{provinceCode:"310000",provinceName:"上海市",city:[{cityCode:"310000-1",cityName:"上海市",county:[{countyCode:"310115",countyName:"浦东新区"},{countyCode:"310110",countyName:"杨浦区"},{countyCode:"310230",countyName:"崇明区"},{countyCode:"310113",countyName:"宝山区"},{countyCode:"310114",countyName:"嘉定区"},{countyCode:"310109",countyName:"虹口区"},{countyCode:"310101",countyName:"黄浦区"},{countyCode:"310120",countyName:"奉贤区"},{countyCode:"310118",countyName:"青浦区"},{countyCode:"310112",countyName:"闵行区"},{countyCode:"310105",countyName:"长宁区"},{countyCode:"310104",countyName:"徐汇区"},{countyCode:"310117",countyName:"松江区"},{countyCode:"310106",countyName:"静安区"},{countyCode:"310107",countyName:"普陀区"},{countyCode:"310116",countyName:"金山区"}]}]},{provinceCode:"320000",provinceName:"江苏省",city:[{cityCode:"320100",cityName:"南京市",county:[{countyCode:"320106",countyName:"鼓楼区"},{countyCode:"320115",countyName:"江宁区"},{countyCode:"320111",countyName:"浦口区"},{countyCode:"320116",countyName:"六合区"},{countyCode:"320104",countyName:"秦淮区"},{countyCode:"320124",countyName:"溧水区"},{countyCode:"320125",countyName:"高淳区"},{countyCode:"320113",countyName:"栖霞区"},{countyCode:"320107",countyName:"下关区"},{countyCode:"320102",countyName:"玄武区"},{countyCode:"320105",countyName:"建邺区"},{countyCode:"320114",countyName:"雨花台区"},{countyCode:"320103",countyName:"白下区"}]},{cityCode:"320200",cityName:"无锡市",county:[{countyCode:"320282",countyName:"宜兴市"},{countyCode:"320205",countyName:"锡山区"},{countyCode:"320211",countyName:"滨湖区"},{countyCode:"320281",countyName:"江阴市"},{countyCode:"320206",countyName:"惠山区"},{countyCode:"320207",countyName:"梁溪区"},{countyCode:"320214",countyName:"新吴区"}]},{cityCode:"320300",cityName:"徐州市",county:[{countyCode:"320381",countyName:"新沂市"},{countyCode:"320324",countyName:"睢宁县"},{countyCode:"320311",countyName:"泉山区"},{countyCode:"320302",countyName:"鼓楼区"},{countyCode:"320305",countyName:"贾汪区"},{countyCode:"320303",countyName:"云龙区"},{countyCode:"320312",countyName:"铜山区"},{countyCode:"320321",countyName:"丰县"},{countyCode:"320322",countyName:"沛县"},{countyCode:"320382",countyName:"邳州市"}]},{cityCode:"320400",cityName:"常州市",county:[{countyCode:"320412",countyName:"武进区"},{countyCode:"320405",countyName:"戚墅堰区"},{countyCode:"320481",countyName:"溧阳市"},{countyCode:"320402",countyName:"天宁区"},{countyCode:"320411",countyName:"新北区"},{countyCode:"320404",countyName:"钟楼区"},{countyCode:"320482",countyName:"金坛区"}]},{cityCode:"320500",cityName:"苏州市",county:[{countyCode:"320509",countyName:"吴江区"},{countyCode:"320506",countyName:"吴中区"},{countyCode:"320582",countyName:"张家港市"},{countyCode:"320508",countyName:"姑苏区"},{countyCode:"320571",countyName:"苏州工业园区"},{countyCode:"320583",countyName:"昆山市"},{countyCode:"320581",countyName:"常熟市"},{countyCode:"320505",countyName:"虎丘区"},{countyCode:"320507",countyName:"相城区"},{countyCode:"320585",countyName:"太仓市"}]},{cityCode:"320600",cityName:"南通市",county:[{countyCode:"320602",countyName:"崇川区"},{countyCode:"320684",countyName:"海门市"},{countyCode:"320681",countyName:"启东市"},{countyCode:"320612",countyName:"通州区"},{countyCode:"320621",countyName:"海安市"},{countyCode:"320623",countyName:"如东县"},{countyCode:"320611",countyName:"港闸区"},{countyCode:"320682",countyName:"如皋市"}]},{cityCode:"320700",cityName:"连云港市",county:[{countyCode:"320723",countyName:"灌云县"},{countyCode:"320721",countyName:"赣榆区"},{countyCode:"320705",countyName:"新浦区"},{countyCode:"320722",countyName:"东海县"},{countyCode:"320706",countyName:"海州区"},{countyCode:"320703",countyName:"连云区"},{countyCode:"320724",countyName:"灌南县"}]},{cityCode:"320800",cityName:"淮安市",county:[{countyCode:"320811",countyName:"清浦区"},{countyCode:"320829",countyName:"洪泽区"},{countyCode:"320802",countyName:"清江浦区"},{countyCode:"320803",countyName:"淮安区"},{countyCode:"320831",countyName:"金湖县"},{countyCode:"320804",countyName:"淮阴区"},{countyCode:"320830",countyName:"盱眙县"},{countyCode:"320826",countyName:"涟水县"}]},{cityCode:"320900",cityName:"盐城市",county:[{countyCode:"320922",countyName:"滨海县"},{countyCode:"320981",countyName:"东台市"},{countyCode:"320925",countyName:"建湖县"},{countyCode:"320903",countyName:"盐都区"},{countyCode:"320921",countyName:"响水县"},{countyCode:"320924",countyName:"射阳县"},{countyCode:"320902",countyName:"亭湖区"},{countyCode:"320923",countyName:"阜宁县"},{countyCode:"320982",countyName:"大丰区"}]},{cityCode:"321000",cityName:"扬州市",county:[{countyCode:"321084",countyName:"高邮市"},{countyCode:"321023",countyName:"宝应县"},{countyCode:"321012",countyName:"江都区"},{countyCode:"321003",countyName:"邗江区"},{countyCode:"321081",countyName:"仪征市"},{countyCode:"321002",countyName:"广陵区"}]},{cityCode:"321100",cityName:"镇江市",county:[{countyCode:"321112",countyName:"丹徒区"},{countyCode:"321102",countyName:"京口区"},{countyCode:"321182",countyName:"扬中市"},{countyCode:"321181",countyName:"丹阳市"},{countyCode:"321183",countyName:"句容市"},{countyCode:"321111",countyName:"润州区"}]},{cityCode:"321200",cityName:"泰州市",county:[{countyCode:"321203",countyName:"高港区"},{countyCode:"321202",countyName:"海陵区"},{countyCode:"321283",countyName:"泰兴市"},{countyCode:"321284",countyName:"姜堰区"},{countyCode:"321282",countyName:"靖江市"},{countyCode:"321281",countyName:"兴化市"}]},{cityCode:"321300",cityName:"宿迁市",county:[{countyCode:"321323",countyName:"泗阳县"},{countyCode:"321302",countyName:"宿城区"},{countyCode:"321311",countyName:"宿豫区"},{countyCode:"321324",countyName:"泗洪县"},{countyCode:"321322",countyName:"沭阳县"}]}]},{provinceCode:"330000",provinceName:"浙江省",city:[{cityCode:"330900",cityName:"舟山市",county:[{countyCode:"330922",countyName:"嵊泗县"},{countyCode:"330903",countyName:"普陀区"},{countyCode:"330902",countyName:"定海区"},{countyCode:"330921",countyName:"岱山县"}]},{cityCode:"330800",cityName:"衢州市",county:[{countyCode:"330824",countyName:"开化县"},{countyCode:"330803",countyName:"衢江区"},{countyCode:"330881",countyName:"江山市"},{countyCode:"330802",countyName:"柯城区"},{countyCode:"330822",countyName:"常山县"},{countyCode:"330825",countyName:"龙游县"}]},{cityCode:"330700",cityName:"金华市",county:[{countyCode:"330782",countyName:"义乌市"},{countyCode:"330784",countyName:"永康市"},{countyCode:"330727",countyName:"磐安县"},{countyCode:"330702",countyName:"婺城区"},{countyCode:"330726",countyName:"浦江县"},{countyCode:"330783",countyName:"东阳市"},{countyCode:"330781",countyName:"兰溪市"},{countyCode:"330723",countyName:"武义县"},{countyCode:"330703",countyName:"金东区"}]},{cityCode:"330300",cityName:"温州市",county:[{countyCode:"330302",countyName:"鹿城区"},{countyCode:"330322",countyName:"洞头区"},{countyCode:"330381",countyName:"瑞安市"},{countyCode:"330329",countyName:"泰顺县"},{countyCode:"330324",countyName:"永嘉县"},{countyCode:"330304",countyName:"瓯海区"},{countyCode:"330327",countyName:"苍南县"},{countyCode:"330328",countyName:"文成县"},{countyCode:"330326",countyName:"平阳县"},{countyCode:"330382",countyName:"乐清市"},{countyCode:"330303",countyName:"龙湾区"}]},{cityCode:"330200",cityName:"宁波市",county:[{countyCode:"330204",countyName:"江东区"},{countyCode:"330225",countyName:"象山县"},{countyCode:"330212",countyName:"鄞州区"},{countyCode:"330226",countyName:"宁海县"},{countyCode:"330283",countyName:"奉化区"},{countyCode:"330282",countyName:"慈溪市"},{countyCode:"330281",countyName:"余姚市"},{countyCode:"330211",countyName:"镇海区"},{countyCode:"330205",countyName:"江北区"},{countyCode:"330206",countyName:"北仑区"},{countyCode:"330203",countyName:"海曙区"}]},{cityCode:"330100",cityName:"杭州市",county:[{countyCode:"330110",countyName:"余杭区"},{countyCode:"330106",countyName:"西湖区"},{countyCode:"330109",countyName:"萧山区"},{countyCode:"330185",countyName:"临安区"},{countyCode:"330122",countyName:"桐庐县"},{countyCode:"330103",countyName:"下城区"},{countyCode:"330182",countyName:"建德市"},{countyCode:"330102",countyName:"上城区"},{countyCode:"330127",countyName:"淳安县"},{countyCode:"330105",countyName:"拱墅区"},{countyCode:"330104",countyName:"江干区"},{countyCode:"330108",countyName:"滨江区"},{countyCode:"330183",countyName:"富阳区"}]},{cityCode:"330400",cityName:"嘉兴市",county:[{countyCode:"330482",countyName:"平湖市"},{countyCode:"330402",countyName:"南湖区"},{countyCode:"330481",countyName:"海宁市"},{countyCode:"330421",countyName:"嘉善县"},{countyCode:"330424",countyName:"海盐县"},{countyCode:"330411",countyName:"秀洲区"},{countyCode:"330483",countyName:"桐乡市"}]},{cityCode:"330600",cityName:"绍兴市",county:[{countyCode:"330681",countyName:"诸暨市"},{countyCode:"330602",countyName:"越城区"},{countyCode:"330682",countyName:"上虞区"},{countyCode:"330683",countyName:"嵊州市"},{countyCode:"330624",countyName:"新昌县"},{countyCode:"330621",countyName:"柯桥区"}]},{cityCode:"331100",cityName:"丽水市",county:[{countyCode:"331125",countyName:"云和县"},{countyCode:"331121",countyName:"青田县"},{countyCode:"331126",countyName:"庆元县"},{countyCode:"331124",countyName:"松阳县"},{countyCode:"331123",countyName:"遂昌县"},{countyCode:"331122",countyName:"缙云县"},{countyCode:"331127",countyName:"景宁畲族自治县"},{countyCode:"331102",countyName:"莲都区"},{countyCode:"331181",countyName:"龙泉市"}]},{cityCode:"330500",cityName:"湖州市",county:[{countyCode:"330522",countyName:"长兴县"},{countyCode:"330503",countyName:"南浔区"},{countyCode:"330523",countyName:"安吉县"},{countyCode:"330502",countyName:"吴兴区"},{countyCode:"330521",countyName:"德清县"}]},{cityCode:"331000",cityName:"台州市",county:[{countyCode:"331024",countyName:"仙居县"},{countyCode:"331021",countyName:"玉环市"},{countyCode:"331082",countyName:"临海市"},{countyCode:"331023",countyName:"天台县"},{countyCode:"331003",countyName:"黄岩区"},{countyCode:"331004",countyName:"路桥区"},{countyCode:"331022",countyName:"三门县"},{countyCode:"331002",countyName:"椒江区"},{countyCode:"331081",countyName:"温岭市"}]}]},{provinceCode:"340000",provinceName:"安徽省",city:[{cityCode:"341000",cityName:"黄山市",county:[{countyCode:"341022",countyName:"休宁县"},{countyCode:"341024",countyName:"祁门县"},{countyCode:"341021",countyName:"歙县"},{countyCode:"341003",countyName:"黄山区"},{countyCode:"341023",countyName:"黟县"},{countyCode:"341004",countyName:"徽州区"},{countyCode:"341002",countyName:"屯溪区"}]},{cityCode:"340200",cityName:"芜湖市",county:[{countyCode:"340208",countyName:"三山区"},{countyCode:"340222",countyName:"繁昌县"},{countyCode:"340207",countyName:"鸠江区"},{countyCode:"340221",countyName:"芜湖县"},{countyCode:"340202",countyName:"镜湖区"},{countyCode:"340203",countyName:"弋江区"},{countyCode:"340225",countyName:"无为县"},{countyCode:"340223",countyName:"南陵县"}]},{cityCode:"340800",cityName:"安庆市",county:[{countyCode:"340826",countyName:"宿松县"},{countyCode:"340824",countyName:"潜山市"},{countyCode:"340881",countyName:"桐城市"},{countyCode:"340828",countyName:"岳西县"},{countyCode:"340825",countyName:"太湖县"},{countyCode:"340811",countyName:"宜秀区"},{countyCode:"340803",countyName:"大观区"},{countyCode:"340827",countyName:"望江县"},{countyCode:"340802",countyName:"迎江区"},{countyCode:"340822",countyName:"怀宁县"}]},{cityCode:"341100",cityName:"滁州市",county:[{countyCode:"341103",countyName:"南谯区"},{countyCode:"341102",countyName:"琅琊区"},{countyCode:"341181",countyName:"天长市"},{countyCode:"341125",countyName:"定远县"},{countyCode:"341124",countyName:"全椒县"},{countyCode:"341122",countyName:"来安县"},{countyCode:"341182",countyName:"明光市"},{countyCode:"341126",countyName:"凤阳县"}]},{cityCode:"340600",cityName:"淮北市",county:[{countyCode:"340621",countyName:"濉溪县"},{countyCode:"340603",countyName:"相山区"},{countyCode:"340602",countyName:"杜集区"},{countyCode:"340604",countyName:"烈山区"}]},{cityCode:"340700",cityName:"铜陵市",county:[{countyCode:"340711",countyName:"郊区"},{countyCode:"340702",countyName:"铜官山区"},{countyCode:"340823",countyName:"枞阳县"},{countyCode:"340703",countyName:"铜官区"},{countyCode:"340721",countyName:"义安区"}]},{cityCode:"340300",cityName:"蚌埠市",county:[{countyCode:"340303",countyName:"蚌山区"},{countyCode:"340323",countyName:"固镇县"},{countyCode:"340322",countyName:"五河县"},{countyCode:"340304",countyName:"禹会区"},{countyCode:"340311",countyName:"淮上区"},{countyCode:"340302",countyName:"龙子湖区"},{countyCode:"340321",countyName:"怀远县"}]},{cityCode:"340400",cityName:"淮南市",county:[{countyCode:"340421",countyName:"凤台县"},{countyCode:"341521",countyName:"寿县"},{countyCode:"340403",countyName:"田家庵区"},{countyCode:"340404",countyName:"谢家集区"},{countyCode:"340406",countyName:"潘集区"},{countyCode:"340405",countyName:"八公山区"},{countyCode:"340402",countyName:"大通区"}]},{cityCode:"341300",cityName:"宿州市",county:[{countyCode:"341321",countyName:"砀山县"},{countyCode:"341322",countyName:"萧县"},{countyCode:"341324",countyName:"泗县"},{countyCode:"341323",countyName:"灵璧县"},{countyCode:"341302",countyName:"埇桥区"}]},{cityCode:"341700",cityName:"池州市",county:[{countyCode:"341723",countyName:"青阳县"},{countyCode:"341722",countyName:"石台县"},{countyCode:"341721",countyName:"东至县"},{countyCode:"341702",countyName:"贵池区"}]},{cityCode:"340500",cityName:"马鞍山市",county:[{countyCode:"340522",countyName:"含山县"},{countyCode:"340503",countyName:"花山区"},{countyCode:"340506",countyName:"博望区"},{countyCode:"340523",countyName:"和县"},{countyCode:"340521",countyName:"当涂县"},{countyCode:"340504",countyName:"雨山区"}]},{cityCode:"341200",cityName:"阜阳市",county:[{countyCode:"341222",countyName:"太和县"},{countyCode:"341226",countyName:"颍上县"},{countyCode:"341221",countyName:"临泉县"},{countyCode:"341204",countyName:"颍泉区"},{countyCode:"341225",countyName:"阜南县"},{countyCode:"341282",countyName:"界首市"},{countyCode:"341203",countyName:"颍东区"},{countyCode:"341202",countyName:"颍州区"}]},{cityCode:"341600",cityName:"亳州市",county:[{countyCode:"341621",countyName:"涡阳县"},{countyCode:"341623",countyName:"利辛县"},{countyCode:"341602",countyName:"谯城区"},{countyCode:"341622",countyName:"蒙城县"}]},{cityCode:"341800",cityName:"宣城市",county:[{countyCode:"341881",countyName:"宁国市"},{countyCode:"341822",countyName:"广德县"},{countyCode:"341821",countyName:"郎溪县"},{countyCode:"341823",countyName:"泾县"},{countyCode:"341825",countyName:"旌德县"},{countyCode:"341802",countyName:"宣州区"},{countyCode:"341824",countyName:"绩溪县"}]},{cityCode:"340100",cityName:"合肥市",county:[{countyCode:"340181",countyName:"巢湖市"},{countyCode:"340104",countyName:"蜀山区"},{countyCode:"340122",countyName:"肥东县"},{countyCode:"340111",countyName:"包河区"},{countyCode:"340102",countyName:"瑶海区"},{countyCode:"340123",countyName:"肥西县"},{countyCode:"340124",countyName:"庐江县"},{countyCode:"340121",countyName:"长丰县"},{countyCode:"340103",countyName:"庐阳区"}]},{cityCode:"341500",cityName:"六安市",county:[{countyCode:"341525",countyName:"霍山县"},{countyCode:"341502",countyName:"金安区"},{countyCode:"341503",countyName:"裕安区"},{countyCode:"341522",countyName:"霍邱县"},{countyCode:"341504",countyName:"叶集区"},{countyCode:"341523",countyName:"舒城县"},{countyCode:"341524",countyName:"金寨县"}]}]},{provinceCode:"350000",provinceName:"福建省",city:[{cityCode:"350200",cityName:"厦门市",county:[{countyCode:"350206",countyName:"湖里区"},{countyCode:"350212",countyName:"同安区"},{countyCode:"350203",countyName:"思明区"},{countyCode:"350213",countyName:"翔安区"},{countyCode:"350205",countyName:"海沧区"},{countyCode:"350211",countyName:"集美区"}]},{cityCode:"350800",cityName:"龙岩市",county:[{countyCode:"350881",countyName:"漳平市"},{countyCode:"350825",countyName:"连城县"},{countyCode:"350821",countyName:"长汀县"},{countyCode:"350802",countyName:"新罗区"},{countyCode:"350823",countyName:"上杭县"},{countyCode:"350822",countyName:"永定区"},{countyCode:"350824",countyName:"武平县"}]},{cityCode:"350100",cityName:"福州市",county:[{countyCode:"350124",countyName:"闽清县"},{countyCode:"350103",countyName:"台江区"},{countyCode:"350121",countyName:"闽侯县"},{countyCode:"350182",countyName:"长乐区"},{countyCode:"350125",countyName:"永泰县"},{countyCode:"350111",countyName:"晋安区"},{countyCode:"350123",countyName:"罗源县"},{countyCode:"350102",countyName:"鼓楼区"},{countyCode:"350105",countyName:"马尾区"},{countyCode:"350104",countyName:"仓山区"},{countyCode:"350128",countyName:"平潭县"},{countyCode:"350181",countyName:"福清市"},{countyCode:"350122",countyName:"连江县"}]},{cityCode:"350700",cityName:"南平市",county:[{countyCode:"350724",countyName:"松溪县"},{countyCode:"350783",countyName:"建瓯市"},{countyCode:"350725",countyName:"政和县"},{countyCode:"350723",countyName:"光泽县"},{countyCode:"350721",countyName:"顺昌县"},{countyCode:"350781",countyName:"邵武市"},{countyCode:"350782",countyName:"武夷山市"},{countyCode:"350722",countyName:"浦城县"},{countyCode:"350784",countyName:"建阳区"},{countyCode:"350702",countyName:"延平区"}]},{cityCode:"350900",cityName:"宁德市",county:[{countyCode:"350922",countyName:"古田县"},{countyCode:"350924",countyName:"寿宁县"},{countyCode:"350902",countyName:"蕉城区"},{countyCode:"350926",countyName:"柘荣县"},{countyCode:"350925",countyName:"周宁县"},{countyCode:"350982",countyName:"福鼎市"},{countyCode:"350923",countyName:"屏南县"},{countyCode:"350981",countyName:"福安市"},{countyCode:"350921",countyName:"霞浦县"}]},{cityCode:"350500",cityName:"泉州市",county:[{countyCode:"350526",countyName:"德化县"},{countyCode:"350582",countyName:"晋江市"},{countyCode:"350583",countyName:"南安市"},{countyCode:"350503",countyName:"丰泽区"},{countyCode:"350581",countyName:"石狮市"},{countyCode:"350525",countyName:"永春县"},{countyCode:"350521",countyName:"惠安县"},{countyCode:"350524",countyName:"安溪县"},{countyCode:"350502",countyName:"鲤城区"},{countyCode:"350505",countyName:"泉港区"},{countyCode:"350527",countyName:"金门县"},{countyCode:"350504",countyName:"洛江区"}]},{cityCode:"350400",cityName:"三明市",county:[{countyCode:"350421",countyName:"明溪县"},{countyCode:"350403",countyName:"三元区"},{countyCode:"350423",countyName:"清流县"},{countyCode:"350426",countyName:"尤溪县"},{countyCode:"350481",countyName:"永安市"},{countyCode:"350424",countyName:"宁化县"},{countyCode:"350425",countyName:"大田县"},{countyCode:"350427",countyName:"沙县"},{countyCode:"350430",countyName:"建宁县"},{countyCode:"350428",countyName:"将乐县"},{countyCode:"350402",countyName:"梅列区"},{countyCode:"350429",countyName:"泰宁县"}]},{cityCode:"350300",cityName:"莆田市",county:[{countyCode:"350322",countyName:"仙游县"},{countyCode:"350303",countyName:"涵江区"},{countyCode:"350304",countyName:"荔城区"},{countyCode:"350302",countyName:"城厢区"},{countyCode:"350305",countyName:"秀屿区"}]},{cityCode:"350600",cityName:"漳州市",county:[{countyCode:"350629",countyName:"华安县"},{countyCode:"350623",countyName:"漳浦县"},{countyCode:"350602",countyName:"芗城区"},{countyCode:"350625",countyName:"长泰县"},{countyCode:"350603",countyName:"龙文区"},{countyCode:"350622",countyName:"云霄县"},{countyCode:"350628",countyName:"平和县"},{countyCode:"350627",countyName:"南靖县"},{countyCode:"350681",countyName:"龙海市"},{countyCode:"350624",countyName:"诏安县"},{countyCode:"350626",countyName:"东山县"}]}]},{provinceCode:"360000",provinceName:"江西省",city:[{cityCode:"361000",cityName:"抚州市",county:[{countyCode:"361002",countyName:"临川区"},{countyCode:"361023",countyName:"南丰县"},{countyCode:"361026",countyName:"宜黄县"},{countyCode:"361028",countyName:"资溪县"},{countyCode:"361029",countyName:"东乡区"},{countyCode:"361027",countyName:"金溪县"},{countyCode:"361022",countyName:"黎川县"},{countyCode:"361021",countyName:"南城县"},{countyCode:"361025",countyName:"乐安县"},{countyCode:"361024",countyName:"崇仁县"},{countyCode:"361030",countyName:"广昌县"}]},{cityCode:"360900",cityName:"宜春市",county:[{countyCode:"360981",countyName:"丰城市"},{countyCode:"360902",countyName:"袁州区"},{countyCode:"360921",countyName:"奉新县"},{countyCode:"360983",countyName:"高安市"},{countyCode:"360922",countyName:"万载县"},{countyCode:"360926",countyName:"铜鼓县"},{countyCode:"360923",countyName:"上高县"},{countyCode:"360924",countyName:"宜丰县"},{countyCode:"360925",countyName:"靖安县"},{countyCode:"360982",countyName:"樟树市"}]},{cityCode:"360100",cityName:"南昌市",county:[{countyCode:"360104",countyName:"青云谱区"},{countyCode:"360105",countyName:"湾里区"},{countyCode:"360124",countyName:"进贤县"},{countyCode:"360102",countyName:"东湖区"},{countyCode:"360123",countyName:"安义县"},{countyCode:"360122",countyName:"新建区"},{countyCode:"360121",countyName:"南昌县"},{countyCode:"360111",countyName:"青山湖区"},{countyCode:"360103",countyName:"西湖区"}]},{cityCode:"360700",cityName:"赣州市",county:[{countyCode:"360725",countyName:"崇义县"},{countyCode:"360727",countyName:"龙南县"},{countyCode:"360728",countyName:"定南县"},{countyCode:"360723",countyName:"大余县"},{countyCode:"360734",countyName:"寻乌县"},{countyCode:"360702",countyName:"章贡区"},{countyCode:"360726",countyName:"安远县"},{countyCode:"360729",countyName:"全南县"},{countyCode:"360735",countyName:"石城县"},{countyCode:"360782",countyName:"南康区"},{countyCode:"360721",countyName:"赣县区"},{countyCode:"360732",countyName:"兴国县"},{countyCode:"360781",countyName:"瑞金市"},{countyCode:"360724",countyName:"上犹县"},{countyCode:"360730",countyName:"宁都县"},{countyCode:"360733",countyName:"会昌县"},{countyCode:"360722",countyName:"信丰县"},{countyCode:"360731",countyName:"于都县"}]},{cityCode:"360200",cityName:"景德镇市",county:[{countyCode:"360222",countyName:"浮梁县"},{countyCode:"360281",countyName:"乐平市"},{countyCode:"360202",countyName:"昌江区"},{countyCode:"360203",countyName:"珠山区"}]},{cityCode:"360800",cityName:"吉安市",county:[{countyCode:"360829",countyName:"安福县"},{countyCode:"360821",countyName:"吉安县"},{countyCode:"360827",countyName:"遂川县"},{countyCode:"360803",countyName:"青原区"},{countyCode:"360828",countyName:"万安县"},{countyCode:"360826",countyName:"泰和县"},{countyCode:"360823",countyName:"峡江县"},{countyCode:"360822",countyName:"吉水县"},{countyCode:"360802",countyName:"吉州区"},{countyCode:"360824",countyName:"新干县"},{countyCode:"360830",countyName:"永新县"},{countyCode:"360881",countyName:"井冈山市"},{countyCode:"360825",countyName:"永丰县"}]},{cityCode:"360400",cityName:"九江市",county:[{countyCode:"360423",countyName:"武宁县"},{countyCode:"360421",countyName:"柴桑区"},{countyCode:"360429",countyName:"湖口县"},{countyCode:"360427",countyName:"庐山市"},{countyCode:"360426",countyName:"德安县"},{countyCode:"360428",countyName:"都昌县"},{countyCode:"360430",countyName:"彭泽县"},{countyCode:"360403",countyName:"浔阳区"},{countyCode:"360402",countyName:"濂溪区"},{countyCode:"360424",countyName:"修水县"},{countyCode:"360481",countyName:"瑞昌市"},{countyCode:"360425",countyName:"永修县"},{countyCode:"360482",countyName:"共青城市"}]},{cityCode:"360600",cityName:"鹰潭市",county:[{countyCode:"360602",countyName:"月湖区"},{countyCode:"360622",countyName:"余江区"},{countyCode:"360681",countyName:"贵溪市"}]},{cityCode:"360500",cityName:"新余市",county:[{countyCode:"360521",countyName:"分宜县"},{countyCode:"360502",countyName:"渝水区"}]},{cityCode:"361100",cityName:"上饶市",county:[{countyCode:"361181",countyName:"德兴市"},{countyCode:"361102",countyName:"信州区"},{countyCode:"361130",countyName:"婺源县"},{countyCode:"361128",countyName:"鄱阳县"},{countyCode:"361129",countyName:"万年县"},{countyCode:"361123",countyName:"玉山县"},{countyCode:"361122",countyName:"广丰区"},{countyCode:"361124",countyName:"铅山县"},{countyCode:"361121",countyName:"上饶县"},{countyCode:"361127",countyName:"余干县"},{countyCode:"361126",countyName:"弋阳县"},{countyCode:"361125",countyName:"横峰县"}]},{cityCode:"360300",cityName:"萍乡市",county:[{countyCode:"360322",countyName:"上栗县"},{countyCode:"360313",countyName:"湘东区"},{countyCode:"360302",countyName:"安源区"},{countyCode:"360323",countyName:"芦溪县"},{countyCode:"360321",countyName:"莲花县"}]}]},{provinceCode:"370000",provinceName:"山东省",city:[{cityCode:"370400",cityName:"枣庄市",county:[{countyCode:"370402",countyName:"市中区"},{countyCode:"370481",countyName:"滕州市"},{countyCode:"370406",countyName:"山亭区"},{countyCode:"370405",countyName:"台儿庄区"},{countyCode:"370403",countyName:"薛城区"},{countyCode:"370404",countyName:"峄城区"}]},{cityCode:"371100",cityName:"日照市",county:[{countyCode:"371121",countyName:"五莲县"},{countyCode:"371102",countyName:"东港区"},{countyCode:"371122",countyName:"莒县"},{countyCode:"371103",countyName:"岚山区"}]},{cityCode:"371700",cityName:"菏泽市",county:[{countyCode:"371722",countyName:"单县"},{countyCode:"371724",countyName:"巨野县"},{countyCode:"371721",countyName:"曹县"},{countyCode:"371702",countyName:"牡丹区"},{countyCode:"371727",countyName:"定陶区"},{countyCode:"371728",countyName:"东明县"},{countyCode:"371723",countyName:"成武县"},{countyCode:"371725",countyName:"郓城县"},{countyCode:"371726",countyName:"鄄城县"}]},{cityCode:"371500",cityName:"聊城市",county:[{countyCode:"371524",countyName:"东阿县"},{countyCode:"371521",countyName:"阳谷县"},{countyCode:"371526",countyName:"高唐县"},{countyCode:"371502",countyName:"东昌府区"},{countyCode:"371581",countyName:"临清市"},{countyCode:"371522",countyName:"莘县"},{countyCode:"371525",countyName:"冠县"},{countyCode:"371523",countyName:"茌平县"}]},{cityCode:"371000",cityName:"威海市",county:[{countyCode:"371002",countyName:"环翠区"},{countyCode:"371083",countyName:"乳山市"},{countyCode:"371082",countyName:"荣成市"},{countyCode:"371081",countyName:"文登区"}]},{cityCode:"370300",cityName:"淄博市",county:[{countyCode:"370322",countyName:"高青县"},{countyCode:"370321",countyName:"桓台县"},{countyCode:"370305",countyName:"临淄区"},{countyCode:"370306",countyName:"周村区"},{countyCode:"370323",countyName:"沂源县"},{countyCode:"370304",countyName:"博山区"},{countyCode:"370302",countyName:"淄川区"},{countyCode:"370303",countyName:"张店区"}]},{cityCode:"370800",cityName:"济宁市",county:[{countyCode:"370811",countyName:"任城区"},{countyCode:"370802",countyName:"市中区"},{countyCode:"370882",countyName:"兖州区"},{countyCode:"370830",countyName:"汶上县"},{countyCode:"370883",countyName:"邹城市"},{countyCode:"370828",countyName:"金乡县"},{countyCode:"370829",countyName:"嘉祥县"},{countyCode:"370826",countyName:"微山县"},{countyCode:"370881",countyName:"曲阜市"},{countyCode:"370827",countyName:"鱼台县"},{countyCode:"370831",countyName:"泗水县"},{countyCode:"370832",countyName:"梁山县"}]},{cityCode:"371200",cityName:"莱芜市",county:[{countyCode:"371202",countyName:"莱城区"},{countyCode:"371203",countyName:"钢城区"}]},{cityCode:"370500",cityName:"东营市",county:[{countyCode:"370523",countyName:"广饶县"},{countyCode:"370521",countyName:"垦利区"},{countyCode:"370502",countyName:"东营区"},{countyCode:"370522",countyName:"利津县"},{countyCode:"370503",countyName:"河口区"}]},{cityCode:"371600",cityName:"滨州市",county:[{countyCode:"371625",countyName:"博兴县"},{countyCode:"371622",countyName:"阳信县"},{countyCode:"371621",countyName:"惠民县"},{countyCode:"371626",countyName:"邹平市"},{countyCode:"371602",countyName:"滨城区"},{countyCode:"371623",countyName:"无棣县"},{countyCode:"371624",countyName:"沾化区"}]},{cityCode:"371300",cityName:"临沂市",county:[{countyCode:"371328",countyName:"蒙阴县"},{countyCode:"371302",countyName:"兰山区"},{countyCode:"371329",countyName:"临沭县"},{countyCode:"371321",countyName:"沂南县"},{countyCode:"371311",countyName:"罗庄区"},{countyCode:"371325",countyName:"费县"},{countyCode:"371326",countyName:"平邑县"},{countyCode:"371327",countyName:"莒南县"},{countyCode:"371312",countyName:"河东区"},{countyCode:"371324",countyName:"兰陵县"},{countyCode:"371323",countyName:"沂水县"},{countyCode:"371322",countyName:"郯城县"}]},{cityCode:"370200",cityName:"青岛市",county:[{countyCode:"370211",countyName:"黄岛区"},{countyCode:"370203",countyName:"市北区"},{countyCode:"370281",countyName:"胶州市"},{countyCode:"370212",countyName:"崂山区"},{countyCode:"370202",countyName:"市南区"},{countyCode:"370282",countyName:"即墨区"},{countyCode:"370205",countyName:"四方区"},{countyCode:"370214",countyName:"城阳区"},{countyCode:"370283",countyName:"平度市"},{countyCode:"370213",countyName:"李沧区"},{countyCode:"370285",countyName:"莱西市"}]},{cityCode:"370100",cityName:"济南市",county:[{countyCode:"370124",countyName:"平阴县"},{countyCode:"370103",countyName:"市中区"},{countyCode:"370181",countyName:"章丘区"},{countyCode:"370126",countyName:"商河县"},{countyCode:"370125",countyName:"济阳区"},{countyCode:"370113",countyName:"长清区"},{countyCode:"370102",countyName:"历下区"},{countyCode:"370112",countyName:"历城区"},{countyCode:"370105",countyName:"天桥区"},{countyCode:"370104",countyName:"槐荫区"}]},{cityCode:"371400",cityName:"德州市",county:[{countyCode:"371481",countyName:"乐陵市"},{countyCode:"371423",countyName:"庆云县"},{countyCode:"371421",countyName:"陵城区"},{countyCode:"371482",countyName:"禹城市"},{countyCode:"371424",countyName:"临邑县"},{countyCode:"371426",countyName:"平原县"},{countyCode:"371425",countyName:"齐河县"},{countyCode:"371427",countyName:"夏津县"},{countyCode:"371422",countyName:"宁津县"},{countyCode:"371428",countyName:"武城县"},{countyCode:"371402",countyName:"德城区"}]},{cityCode:"370900",cityName:"泰安市",county:[{countyCode:"370911",countyName:"岱岳区"},{countyCode:"370923",countyName:"东平县"},{countyCode:"370983",countyName:"肥城市"},{countyCode:"370921",countyName:"宁阳县"},{countyCode:"370982",countyName:"新泰市"},{countyCode:"370902",countyName:"泰山区"}]},{cityCode:"370600",cityName:"烟台市",county:[{countyCode:"370686",countyName:"栖霞市"},{countyCode:"370634",countyName:"长岛县"},{countyCode:"370613",countyName:"莱山区"},{countyCode:"370612",countyName:"牟平区"},{countyCode:"370681",countyName:"龙口市"},{countyCode:"370683",countyName:"莱州市"},{countyCode:"370602",countyName:"芝罘区"},{countyCode:"370682",countyName:"莱阳市"},{countyCode:"370685",countyName:"招远市"},{countyCode:"370611",countyName:"福山区"},{countyCode:"370684",countyName:"蓬莱市"},{countyCode:"370687",countyName:"海阳市"}]},{cityCode:"370700",cityName:"潍坊市",county:[{countyCode:"370781",countyName:"青州市"},{countyCode:"370782",countyName:"诸城市"},{countyCode:"370703",countyName:"寒亭区"},{countyCode:"370785",countyName:"高密市"},{countyCode:"370702",countyName:"潍城区"},{countyCode:"370725",countyName:"昌乐县"},{countyCode:"370704",countyName:"坊子区"},{countyCode:"370784",countyName:"安丘市"},{countyCode:"370705",countyName:"奎文区"},{countyCode:"370724",countyName:"临朐县"},{countyCode:"370786",countyName:"昌邑市"},{countyCode:"370783",countyName:"寿光市"}]}]},{provinceCode:"410000",provinceName:"河南省",city:[{cityCode:"411500",cityName:"信阳市",county:[{countyCode:"411523",countyName:"新县"},{countyCode:"411525",countyName:"固始县"},{countyCode:"411524",countyName:"商城县"},{countyCode:"411528",countyName:"息县"},{countyCode:"411502",countyName:"浉河区"},{countyCode:"411521",countyName:"罗山县"},{countyCode:"411522",countyName:"光山县"},{countyCode:"411503",countyName:"平桥区"},{countyCode:"411526",countyName:"潢川县"},{countyCode:"411527",countyName:"淮滨县"}]},{cityCode:"410300",cityName:"洛阳市",county:[{countyCode:"410323",countyName:"新安县"},{countyCode:"410306",countyName:"吉利区"},{countyCode:"410328",countyName:"洛宁县"},{countyCode:"410325",countyName:"嵩县"},{countyCode:"410302",countyName:"老城区"},{countyCode:"410322",countyName:"孟津县"},{countyCode:"410311",countyName:"洛龙区"},{countyCode:"410304",countyName:"瀍河回族区"},{countyCode:"410327",countyName:"宜阳县"},{countyCode:"410381",countyName:"偃师市"},{countyCode:"410326",countyName:"汝阳县"},{countyCode:"410329",countyName:"伊川县"},{countyCode:"410305",countyName:"涧西区"},{countyCode:"410324",countyName:"栾川县"},{countyCode:"410303",countyName:"西工区"}]},{cityCode:"411200",cityName:"三门峡市",county:[{countyCode:"411222",countyName:"陕州区"},{countyCode:"411281",countyName:"义马市"},{countyCode:"411282",countyName:"灵宝市"},{countyCode:"411221",countyName:"渑池县"},{countyCode:"411202",countyName:"湖滨区"},{countyCode:"411224",countyName:"卢氏县"}]},{cityCode:"411700",cityName:"驻马店市",county:[{countyCode:"411729",countyName:"新蔡县"},{countyCode:"411728",countyName:"遂平县"},{countyCode:"411727",countyName:"汝南县"},{countyCode:"411724",countyName:"正阳县"},{countyCode:"411723",countyName:"平舆县"},{countyCode:"411725",countyName:"确山县"},{countyCode:"411722",countyName:"上蔡县"},{countyCode:"411702",countyName:"驿城区"},{countyCode:"411721",countyName:"西平县"},{countyCode:"411726",countyName:"泌阳县"}]},{cityCode:"410500",cityName:"安阳市",county:[{countyCode:"410505",countyName:"殷都区"},{countyCode:"410527",countyName:"内黄县"},{countyCode:"410522",countyName:"安阳县"},{countyCode:"410526",countyName:"滑县"},{countyCode:"410502",countyName:"文峰区"},{countyCode:"410503",countyName:"北关区"},{countyCode:"410506",countyName:"龙安区"},{countyCode:"410523",countyName:"汤阴县"},{countyCode:"410581",countyName:"林州市"}]},{cityCode:"411300",cityName:"南阳市",county:[{countyCode:"411325",countyName:"内乡县"},{countyCode:"411328",countyName:"唐河县"},{countyCode:"411381",countyName:"邓州市"},{countyCode:"411322",countyName:"方城县"},{countyCode:"411330",countyName:"桐柏县"},{countyCode:"411321",countyName:"南召县"},{countyCode:"411323",countyName:"西峡县"},{countyCode:"411327",countyName:"社旗县"},{countyCode:"411302",countyName:"宛城区"},{countyCode:"411303",countyName:"卧龙区"},{countyCode:"411326",countyName:"淅川县"},{countyCode:"411329",countyName:"新野县"},{countyCode:"411324",countyName:"镇平县"}]},{cityCode:"410700",cityName:"新乡市",county:[{countyCode:"410711",countyName:"牧野区"},{countyCode:"410721",countyName:"新乡县"},{countyCode:"410704",countyName:"凤泉区"},{countyCode:"410781",countyName:"卫辉市"},{countyCode:"410727",countyName:"封丘县"},{countyCode:"410702",countyName:"红旗区"},{countyCode:"410726",countyName:"延津县"},{countyCode:"410703",countyName:"卫滨区"},{countyCode:"410782",countyName:"辉县市"},{countyCode:"410728",countyName:"长垣县"},{countyCode:"410724",countyName:"获嘉县"},{countyCode:"410725",countyName:"原阳县"}]},{cityCode:"410200",cityName:"开封市",county:[{countyCode:"410205",countyName:"禹王台区"},{countyCode:"410222",countyName:"通许县"},{countyCode:"410225",countyName:"兰考县"},{countyCode:"410223",countyName:"尉氏县"},{countyCode:"410203",countyName:"顺河回族区"},{countyCode:"410204",countyName:"鼓楼区"},{countyCode:"410224",countyName:"祥符区"},{countyCode:"410221",countyName:"杞县"},{countyCode:"410211",countyName:"金明区"},{countyCode:"410202",countyName:"龙亭区"}]},{cityCode:"411400",cityName:"商丘市",county:[{countyCode:"411402",countyName:"梁园区"},{countyCode:"411422",countyName:"睢县"},{countyCode:"411423",countyName:"宁陵县"},{countyCode:"411421",countyName:"民权县"},{countyCode:"411424",countyName:"柘城县"},{countyCode:"411425",countyName:"虞城县"},{countyCode:"411426",countyName:"夏邑县"},{countyCode:"411481",countyName:"永城市"},{countyCode:"411403",countyName:"睢阳区"}]},{cityCode:"411000",cityName:"许昌市",county:[{countyCode:"411024",countyName:"鄢陵县"},{countyCode:"411082",countyName:"长葛市"},{countyCode:"411002",countyName:"魏都区"},{countyCode:"411081",countyName:"禹州市"},{countyCode:"411025",countyName:"襄城县"},{countyCode:"411023",countyName:"建安区"}]},{cityCode:"410100",cityName:"郑州市",county:[{countyCode:"410185",countyName:"登封市"},{countyCode:"410182",countyName:"荥阳市"},{countyCode:"410104",countyName:"管城回族区"},{countyCode:"410108",countyName:"惠济区"},{countyCode:"410122",countyName:"中牟县"},{countyCode:"410105",countyName:"金水区"},{countyCode:"410183",countyName:"新密市"},{countyCode:"410184",countyName:"新郑市"},{countyCode:"410181",countyName:"巩义市"},{countyCode:"410106",countyName:"上街区"},{countyCode:"410103",countyName:"二七区"},{countyCode:"410102",countyName:"中原区"}]},{cityCode:"419001",cityName:"济源市",county:[{countyCode:"419001-1",countyName:"济源市"}]},{cityCode:"410400",cityName:"平顶山市",county:[{countyCode:"410481",countyName:"舞钢市"},{countyCode:"410421",countyName:"宝丰县"},{countyCode:"410482",countyName:"汝州市"},{countyCode:"410404",countyName:"石龙区"},{countyCode:"410403",countyName:"卫东区"},{countyCode:"410411",countyName:"湛河区"},{countyCode:"410402",countyName:"新华区"},{countyCode:"410423",countyName:"鲁山县"},{countyCode:"410422",countyName:"叶县"},{countyCode:"410425",countyName:"郏县"}]},{cityCode:"410900",cityName:"濮阳市",county:[{countyCode:"410902",countyName:"华龙区"},{countyCode:"410922",countyName:"清丰县"},{countyCode:"410926",countyName:"范县"},{countyCode:"410927",countyName:"台前县"},{countyCode:"410923",countyName:"南乐县"},{countyCode:"410928",countyName:"濮阳县"}]},{cityCode:"410600",cityName:"鹤壁市",county:[{countyCode:"410603",countyName:"山城区"},{countyCode:"410611",countyName:"淇滨区"},{countyCode:"410602",countyName:"鹤山区"},{countyCode:"410621",countyName:"浚县"},{countyCode:"410622",countyName:"淇县"}]},{cityCode:"411100",cityName:"漯河市",county:[{countyCode:"411102",countyName:"源汇区"},{countyCode:"411122",countyName:"临颍县"},{countyCode:"411103",countyName:"郾城区"},{countyCode:"411104",countyName:"召陵区"},{countyCode:"411121",countyName:"舞阳县"}]},{cityCode:"411600",cityName:"周口市",county:[{countyCode:"411626",countyName:"淮阳县"},{countyCode:"411681",countyName:"项城市"},{countyCode:"411624",countyName:"沈丘县"},{countyCode:"411622",countyName:"西华县"},{countyCode:"411627",countyName:"太康县"},{countyCode:"411623",countyName:"商水县"},{countyCode:"411628",countyName:"鹿邑县"},{countyCode:"411602",countyName:"川汇区"},{countyCode:"411621",countyName:"扶沟县"},{countyCode:"411625",countyName:"郸城县"}]},{cityCode:"410800",cityName:"焦作市",county:[{countyCode:"410883",countyName:"孟州市"},{countyCode:"410823",countyName:"武陟县"},{countyCode:"410882",countyName:"沁阳市"},{countyCode:"410822",countyName:"博爱县"},{countyCode:"410821",countyName:"修武县"},{countyCode:"410825",countyName:"温县"},{countyCode:"410804",countyName:"马村区"},{countyCode:"410802",countyName:"解放区"},{countyCode:"410811",countyName:"山阳区"},{countyCode:"410803",countyName:"中站区"}]}]},{provinceCode:"420000",provinceName:"湖北省",city:[{cityCode:"429004",cityName:"仙桃市",county:[{countyCode:"429004-1",countyName:"仙桃市"}]},{cityCode:"421200",cityName:"咸宁市",county:[{countyCode:"421223",countyName:"崇阳县"},{countyCode:"421224",countyName:"通山县"},{countyCode:"421202",countyName:"咸安区"},{countyCode:"421222",countyName:"通城县"},{countyCode:"421221",countyName:"嘉鱼县"},{countyCode:"421281",countyName:"赤壁市"}]},{cityCode:"421300",cityName:"随州市",county:[{countyCode:"421381",countyName:"广水市"},{countyCode:"421303",countyName:"曾都区"},{countyCode:"421321",countyName:"随县"}]},{cityCode:"422800",cityName:"恩施土家族苗族自治州",county:[{countyCode:"422828",countyName:"鹤峰县"},{countyCode:"422825",countyName:"宣恩县"},{countyCode:"422801",countyName:"恩施市"},{countyCode:"422822",countyName:"建始县"},{countyCode:"422823",countyName:"巴东县"},{countyCode:"422826",countyName:"咸丰县"},{countyCode:"422827",countyName:"来凤县"},{countyCode:"422802",countyName:"利川市"}]},{cityCode:"420900",cityName:"孝感市",county:[{countyCode:"420902",countyName:"孝南区"},{countyCode:"420981",countyName:"应城市"},{countyCode:"420923",countyName:"云梦县"},{countyCode:"420982",countyName:"安陆市"},{countyCode:"420922",countyName:"大悟县"},{countyCode:"420921",countyName:"孝昌县"},{countyCode:"420984",countyName:"汉川市"}]},{cityCode:"420100",cityName:"武汉市",county:[{countyCode:"420104",countyName:"硚口区"},{countyCode:"420107",countyName:"青山区"},{countyCode:"420116",countyName:"黄陂区"},{countyCode:"420102",countyName:"江岸区"},{countyCode:"420115",countyName:"江夏区"},{countyCode:"420114",countyName:"蔡甸区"},{countyCode:"420106",countyName:"武昌区"},{countyCode:"420112",countyName:"东西湖区"},{countyCode:"420105",countyName:"汉阳区"},{countyCode:"420113",countyName:"汉南区"},{countyCode:"420111",countyName:"洪山区"},{countyCode:"420103",countyName:"江汉区"},{countyCode:"420117",countyName:"新洲区"}]},{cityCode:"420500",cityName:"宜昌市",county:[{countyCode:"420502",countyName:"西陵区"},{countyCode:"420505",countyName:"猇亭区"},{countyCode:"420503",countyName:"伍家岗区"},{countyCode:"420581",countyName:"宜都市"},{countyCode:"420504",countyName:"点军区"},{countyCode:"420526",countyName:"兴山县"},{countyCode:"420525",countyName:"远安县"},{countyCode:"420527",countyName:"秭归县"},{countyCode:"420583",countyName:"枝江市"},{countyCode:"420529",countyName:"五峰土家族自治县"},{countyCode:"420582",countyName:"当阳市"},{countyCode:"420506",countyName:"夷陵区"},{countyCode:"420528",countyName:"长阳土家族自治县"}]},{cityCode:"420800",cityName:"荆门市",county:[{countyCode:"420804",countyName:"掇刀区"},{countyCode:"420822",countyName:"沙洋县"},{countyCode:"420802",countyName:"东宝区"},{countyCode:"420881",countyName:"钟祥市"},{countyCode:"420821",countyName:"京山市"}]},{cityCode:"429006",cityName:"天门市",county:[{countyCode:"429006-1",countyName:"天门市"}]},{cityCode:"421000",cityName:"荆州市",county:[{countyCode:"421003",countyName:"荆州区"},{countyCode:"421023",countyName:"监利县"},{countyCode:"421087",countyName:"松滋市"},{countyCode:"421022",countyName:"公安县"},{countyCode:"421002",countyName:"沙市区"},{countyCode:"421024",countyName:"江陵县"},{countyCode:"421081",countyName:"石首市"},{countyCode:"421083",countyName:"洪湖市"}]},{cityCode:"420600",cityName:"襄阳市",county:[{countyCode:"420625",countyName:"谷城县"},{countyCode:"420607",countyName:"襄州区"},{countyCode:"420606",countyName:"樊城区"},{countyCode:"420602",countyName:"襄城区"},{countyCode:"420626",countyName:"保康县"},{countyCode:"420624",countyName:"南漳县"},{countyCode:"420683",countyName:"枣阳市"},{countyCode:"420682",countyName:"老河口市"},{countyCode:"420684",countyName:"宜城市"}]},{cityCode:"420700",cityName:"鄂州市",county:[{countyCode:"420702",countyName:"梁子湖区"},{countyCode:"420703",countyName:"华容区"},{countyCode:"420704",countyName:"鄂城区"}]},{cityCode:"429021",cityName:"神农架林区",county:[{countyCode:"429021-1",countyName:"神农架林区"}]},{cityCode:"420200",cityName:"黄石市",county:[{countyCode:"420202",countyName:"黄石港区"},{countyCode:"420281",countyName:"大冶市"},{countyCode:"420205",countyName:"铁山区"},{countyCode:"420222",countyName:"阳新县"},{countyCode:"420203",countyName:"西塞山区"},{countyCode:"420204",countyName:"下陆区"}]},{cityCode:"421100",cityName:"黄冈市",county:[{countyCode:"421181",countyName:"麻城市"},{countyCode:"421125",countyName:"浠水县"},{countyCode:"421121",countyName:"团风县"},{countyCode:"421182",countyName:"武穴市"},{countyCode:"421124",countyName:"英山县"},{countyCode:"421122",countyName:"红安县"},{countyCode:"421102",countyName:"黄州区"},{countyCode:"421123",countyName:"罗田县"},{countyCode:"421126",countyName:"蕲春县"},{countyCode:"421127",countyName:"黄梅县"}]},{cityCode:"420300",cityName:"十堰市",county:[{countyCode:"420322",countyName:"郧西县"},{countyCode:"420321",countyName:"郧阳区"},{countyCode:"420323",countyName:"竹山县"},{countyCode:"420324",countyName:"竹溪县"},{countyCode:"420325",countyName:"房县"},{countyCode:"420302",countyName:"茅箭区"},{countyCode:"420303",countyName:"张湾区"},{countyCode:"420381",countyName:"丹江口市"}]},{cityCode:"429005",cityName:"潜江市",county:[{countyCode:"429005-1",countyName:"潜江市"}]}]},{provinceCode:"430000",provinceName:"湖南省",city:[{cityCode:"430300",cityName:"湘潭市",county:[{countyCode:"430381",countyName:"湘乡市"},{countyCode:"430302",countyName:"雨湖区"},{countyCode:"430382",countyName:"韶山市"},{countyCode:"430321",countyName:"湘潭县"},{countyCode:"430304",countyName:"岳塘区"}]},{cityCode:"430600",cityName:"岳阳市",county:[{countyCode:"430623",countyName:"华容县"},{countyCode:"430682",countyName:"临湘市"},{countyCode:"430603",countyName:"云溪区"},{countyCode:"430681",countyName:"汨罗市"},{countyCode:"430624",countyName:"湘阴县"},{countyCode:"430602",countyName:"岳阳楼区"},{countyCode:"430626",countyName:"平江县"},{countyCode:"430611",countyName:"君山区"},{countyCode:"430621",countyName:"岳阳县"}]},{cityCode:"430100",cityName:"长沙市",county:[{countyCode:"430111",countyName:"雨花区"},{countyCode:"430103",countyName:"天心区"},{countyCode:"430104",countyName:"岳麓区"},{countyCode:"430181",countyName:"浏阳市"},{countyCode:"430124",countyName:"宁乡市"},{countyCode:"430112",countyName:"望城区"},{countyCode:"430121",countyName:"长沙县"},{countyCode:"430105",countyName:"开福区"},{countyCode:"430102",countyName:"芙蓉区"}]},{cityCode:"430200",cityName:"株洲市",county:[{countyCode:"430202",countyName:"荷塘区"},{countyCode:"430225",countyName:"炎陵县"},{countyCode:"430281",countyName:"醴陵市"},{countyCode:"430203",countyName:"芦淞区"},{countyCode:"430224",countyName:"茶陵县"},{countyCode:"430211",countyName:"天元区"},{countyCode:"430221",countyName:"株洲县"},{countyCode:"430223",countyName:"攸县"},{countyCode:"430204",countyName:"石峰区"}]},{cityCode:"431000",cityName:"郴州市",county:[{countyCode:"431028",countyName:"安仁县"},{countyCode:"431021",countyName:"桂阳县"},{countyCode:"431002",countyName:"北湖区"},{countyCode:"431027",countyName:"桂东县"},{countyCode:"431024",countyName:"嘉禾县"},{countyCode:"431026",countyName:"汝城县"},{countyCode:"431023",countyName:"永兴县"},{countyCode:"431025",countyName:"临武县"},{countyCode:"431022",countyName:"宜章县"},{countyCode:"431003",countyName:"苏仙区"},{countyCode:"431081",countyName:"资兴市"}]},{cityCode:"431200",cityName:"怀化市",county:[{countyCode:"431223",countyName:"辰溪县"},{countyCode:"431202",countyName:"鹤城区"},{countyCode:"431224",countyName:"溆浦县"},{countyCode:"431226",countyName:"麻阳苗族自治县"},{countyCode:"431229",countyName:"靖州苗族侗族自治县"},{countyCode:"431230",countyName:"通道侗族自治县"},{countyCode:"431281",countyName:"洪江市"},{countyCode:"431228",countyName:"芷江侗族自治县"},{countyCode:"431221",countyName:"中方县"},{countyCode:"431225",countyName:"会同县"},{countyCode:"431227",countyName:"新晃侗族自治县"},{countyCode:"431222",countyName:"沅陵县"}]},{cityCode:"431100",cityName:"永州市",county:[{countyCode:"431123",countyName:"双牌县"},{countyCode:"431125",countyName:"江永县"},{countyCode:"431102",countyName:"零陵区"},{countyCode:"431129",countyName:"江华瑶族自治县"},{countyCode:"431124",countyName:"道县"},{countyCode:"431127",countyName:"蓝山县"},{countyCode:"431103",countyName:"冷水滩区"},{countyCode:"431122",countyName:"东安县"},{countyCode:"431128",countyName:"新田县"},{countyCode:"431121",countyName:"祁阳县"},{countyCode:"431126",countyName:"宁远县"}]},{cityCode:"430700",cityName:"常德市",county:[{countyCode:"430703",countyName:"鼎城区"},{countyCode:"430725",countyName:"桃源县"},{countyCode:"430724",countyName:"临澧县"},{countyCode:"430781",countyName:"津市市"},{countyCode:"430702",countyName:"武陵区"},{countyCode:"430721",countyName:"安乡县"},{countyCode:"430726",countyName:"石门县"},{countyCode:"430722",countyName:"汉寿县"},{countyCode:"430723",countyName:"澧县"}]},{cityCode:"431300",cityName:"娄底市",county:[{countyCode:"431322",countyName:"新化县"},{countyCode:"431302",countyName:"娄星区"},{countyCode:"431321",countyName:"双峰县"},{countyCode:"431381",countyName:"冷水江市"},{countyCode:"431382",countyName:"涟源市"}]},{cityCode:"430800",cityName:"张家界市",county:[{countyCode:"430821",countyName:"慈利县"},{countyCode:"430822",countyName:"桑植县"},{countyCode:"430802",countyName:"永定区"},{countyCode:"430811",countyName:"武陵源区"}]},{cityCode:"430400",cityName:"衡阳市",county:[{countyCode:"430423",countyName:"衡山县"},{countyCode:"430408",countyName:"蒸湘区"},{countyCode:"430405",countyName:"珠晖区"},{countyCode:"430481",countyName:"耒阳市"},{countyCode:"430422",countyName:"衡南县"},{countyCode:"430426",countyName:"祁东县"},{countyCode:"430407",countyName:"石鼓区"},{countyCode:"430482",countyName:"常宁市"},{countyCode:"430424",countyName:"衡东县"},{countyCode:"430406",countyName:"雁峰区"},{countyCode:"430421",countyName:"衡阳县"},{countyCode:"430412",countyName:"南岳区"}]},{cityCode:"430500",cityName:"邵阳市",county:[{countyCode:"430524",countyName:"隆回县"},{countyCode:"430503",countyName:"大祥区"},{countyCode:"430528",countyName:"新宁县"},{countyCode:"430529",countyName:"城步苗族自治县"},{countyCode:"430581",countyName:"武冈市"},{countyCode:"430502",countyName:"双清区"},{countyCode:"430523",countyName:"邵阳县"},{countyCode:"430522",countyName:"新邵县"},{countyCode:"430521",countyName:"邵东县"},{countyCode:"430525",countyName:"洞口县"},{countyCode:"430511",countyName:"北塔区"},{countyCode:"430527",countyName:"绥宁县"}]},{cityCode:"433100",cityName:"湘西土家族苗族自治州",county:[{countyCode:"433123",countyName:"凤凰县"},{countyCode:"433126",countyName:"古丈县"},{countyCode:"433125",countyName:"保靖县"},{countyCode:"433124",countyName:"花垣县"},{countyCode:"433127",countyName:"永顺县"},{countyCode:"433122",countyName:"泸溪县"},{countyCode:"433101",countyName:"吉首市"},{countyCode:"433130",countyName:"龙山县"}]},{cityCode:"430900",cityName:"益阳市",county:[{countyCode:"430923",countyName:"安化县"},{countyCode:"430921",countyName:"南县"},{countyCode:"430902",countyName:"资阳区"},{countyCode:"430981",countyName:"沅江市"},{countyCode:"430903",countyName:"赫山区"},{countyCode:"430922",countyName:"桃江县"}]}]},{provinceCode:"450000",provinceName:"广西壮族自治区",city:[{cityCode:"450400",cityName:"梧州市",county:[{countyCode:"450481",countyName:"岑溪市"},{countyCode:"450423",countyName:"蒙山县"},{countyCode:"450421",countyName:"苍梧县"},{countyCode:"450422",countyName:"藤县"},{countyCode:"450403",countyName:"万秀区"},{countyCode:"450405",countyName:"长洲区"},{countyCode:"450424",countyName:"龙圩区"},{countyCode:"450404",countyName:"蝶山区"}]},{cityCode:"450500",cityName:"北海市",county:[{countyCode:"450521",countyName:"合浦县"},{countyCode:"450512",countyName:"铁山港区"},{countyCode:"450502",countyName:"海城区"},{countyCode:"450503",countyName:"银海区"}]},{cityCode:"450300",cityName:"桂林市",county:[{countyCode:"450327",countyName:"灌阳县"},{countyCode:"450305",countyName:"七星区"},{countyCode:"450326",countyName:"永福县"},{countyCode:"450325",countyName:"兴安县"},{countyCode:"450321",countyName:"阳朔县"},{countyCode:"450332",countyName:"恭城瑶族自治县"},{countyCode:"450302",countyName:"秀峰区"},{countyCode:"450304",countyName:"象山区"},{countyCode:"450330",countyName:"平乐县"},{countyCode:"450331",countyName:"荔浦县"},{countyCode:"450329",countyName:"资源县"},{countyCode:"450323",countyName:"灵川县"},{countyCode:"450324",countyName:"全州县"},{countyCode:"450322",countyName:"临桂区"},{countyCode:"450303",countyName:"叠彩区"},{countyCode:"450311",countyName:"雁山区"},{countyCode:"450328",countyName:"龙胜各族自治县"}]},{cityCode:"451100",cityName:"贺州市",county:[{countyCode:"451121",countyName:"昭平县"},{countyCode:"451122",countyName:"钟山县"},{countyCode:"451102",countyName:"八步区"},{countyCode:"451123",countyName:"富川瑶族自治县"},{countyCode:"451103",countyName:"平桂区"}]},{cityCode:"450800",cityName:"贵港市",county:[{countyCode:"450804",countyName:"覃塘区"},{countyCode:"450881",countyName:"桂平市"},{countyCode:"450821",countyName:"平南县"},{countyCode:"450803",countyName:"港南区"},{countyCode:"450802",countyName:"港北区"}]},{cityCode:"450900",cityName:"玉林市",county:[{countyCode:"450921",countyName:"容县"},{countyCode:"450924",countyName:"兴业县"},{countyCode:"450902",countyName:"玉州区"},{countyCode:"450903",countyName:"福绵区"},{countyCode:"450981",countyName:"北流市"},{countyCode:"450923",countyName:"博白县"},{countyCode:"450922",countyName:"陆川县"}]},{cityCode:"450200",cityName:"柳州市",county:[{countyCode:"450225",countyName:"融水苗族自治县"},{countyCode:"450202",countyName:"城中区"},{countyCode:"450223",countyName:"鹿寨县"},{countyCode:"450226",countyName:"三江侗族自治县"},{countyCode:"450204",countyName:"柳南区"},{countyCode:"450203",countyName:"鱼峰区"},{countyCode:"450222",countyName:"柳城县"},{countyCode:"450224",countyName:"融安县"},{countyCode:"450205",countyName:"柳北区"},{countyCode:"450221",countyName:"柳江区"}]},{cityCode:"451000",cityName:"百色市",county:[{countyCode:"451002",countyName:"右江区"},{countyCode:"451031",countyName:"隆林各族自治县"},{countyCode:"451027",countyName:"凌云县"},{countyCode:"451023",countyName:"平果县"},{countyCode:"451026",countyName:"那坡县"},{countyCode:"451030",countyName:"西林县"},{countyCode:"451024",countyName:"德保县"},{countyCode:"451022",countyName:"田东县"},{countyCode:"451021",countyName:"田阳县"},{countyCode:"451028",countyName:"乐业县"},{countyCode:"451029",countyName:"田林县"},{countyCode:"451025",countyName:"靖西市"}]},{cityCode:"451300",cityName:"来宾市",county:[{countyCode:"451381",countyName:"合山市"},{countyCode:"451322",countyName:"象州县"},{countyCode:"451324",countyName:"金秀瑶族自治县"},{countyCode:"451321",countyName:"忻城县"},{countyCode:"451302",countyName:"兴宾区"},{countyCode:"451323",countyName:"武宣县"}]},{cityCode:"450100",cityName:"南宁市",county:[{countyCode:"450105",countyName:"江南区"},{countyCode:"450107",countyName:"西乡塘区"},{countyCode:"450109",countyName:"邕宁区"},{countyCode:"450126",countyName:"宾阳县"},{countyCode:"450108",countyName:"良庆区"},{countyCode:"450125",countyName:"上林县"},{countyCode:"450123",countyName:"隆安县"},{countyCode:"450124",countyName:"马山县"},{countyCode:"450122",countyName:"武鸣区"},{countyCode:"450102",countyName:"兴宁区"},{countyCode:"450127",countyName:"横县"},{countyCode:"450103",countyName:"青秀区"}]},{cityCode:"450700",cityName:"钦州市",county:[{countyCode:"450702",countyName:"钦南区"},{countyCode:"450722",countyName:"浦北县"},{countyCode:"450721",countyName:"灵山县"},{countyCode:"450703",countyName:"钦北区"}]},{cityCode:"450600",cityName:"防城港市",county:[{countyCode:"450603",countyName:"防城区"},{countyCode:"450621",countyName:"上思县"},{countyCode:"450602",countyName:"港口区"},{countyCode:"450681",countyName:"东兴市"}]},{cityCode:"451200",cityName:"河池市",county:[{countyCode:"451202",countyName:"金城江区"},{countyCode:"451281",countyName:"宜州区"},{countyCode:"451221",countyName:"南丹县"},{countyCode:"451224",countyName:"东兰县"},{countyCode:"451228",countyName:"都安瑶族自治县"},{countyCode:"451229",countyName:"大化瑶族自治县"},{countyCode:"451222",countyName:"天峨县"},{countyCode:"451225",countyName:"罗城仫佬族自治县"},{countyCode:"451227",countyName:"巴马瑶族自治县"},{countyCode:"451226",countyName:"环江毛南族自治县"},{countyCode:"451223",countyName:"凤山县"}]},{cityCode:"451400",cityName:"崇左市",county:[{countyCode:"451423",countyName:"龙州县"},{countyCode:"451425",countyName:"天等县"},{countyCode:"451481",countyName:"凭祥市"},{countyCode:"451422",countyName:"宁明县"},{countyCode:"451402",countyName:"江州区"},{countyCode:"451421",countyName:"扶绥县"},{countyCode:"451424",countyName:"大新县"}]}]},{provinceCode:"460000",provinceName:"海南省",city:[{cityCode:"469005",cityName:"文昌市",county:[{countyCode:"469005-1",countyName:"文昌市"}]},{cityCode:"460300",cityName:"三沙市",county:[{countyCode:"460321",countyName:"西沙群岛"},{countyCode:"460322",countyName:"南沙群岛"},{countyCode:"469031",countyName:"西沙群岛"},{countyCode:"469032",countyName:"南沙群岛"},{countyCode:"460323",countyName:"中沙群岛的岛礁及其海域"}]},{cityCode:"469027",cityName:"乐东黎族自治县",county:[{countyCode:"469027-1",countyName:"乐东黎族自治县"}]},{cityCode:"460200",cityName:"三亚市",county:[{countyCode:"460203",countyName:"吉阳区"},{countyCode:"460202",countyName:"海棠区"},{countyCode:"460205",countyName:"崖州区"},{countyCode:"460204",countyName:"天涯区"}]},{cityCode:"469002",cityName:"琼海市",county:[{countyCode:"469002-1",countyName:"琼海市"}]},{cityCode:"469021",cityName:"定安县",county:[{countyCode:"469021-1",countyName:"定安县"}]},{cityCode:"460100",cityName:"海口市",county:[{countyCode:"460107",countyName:"琼山区"},{countyCode:"460108",countyName:"美兰区"},{countyCode:"460105",countyName:"秀英区"},{countyCode:"460106",countyName:"龙华区"}]},{cityCode:"469006",cityName:"万宁市",county:[{countyCode:"469006-1",countyName:"万宁市"}]},{cityCode:"469029",cityName:"保亭黎族苗族自治县",county:[{countyCode:"469029-1",countyName:"保亭黎族苗族自治县"}]},{cityCode:"469003",cityName:"儋州市",county:[{countyCode:"469003-1",countyName:"儋州市"}]},{cityCode:"469023",cityName:"澄迈县",county:[{countyCode:"469023-1",countyName:"澄迈县"}]},{cityCode:"469022",cityName:"屯昌县",county:[{countyCode:"469022-1",countyName:"屯昌县"}]},{cityCode:"469028",cityName:"陵水黎族自治县",county:[{countyCode:"469028-1",countyName:"陵水黎族自治县"}]},{cityCode:"469007",cityName:"东方市",county:[{countyCode:"469007-1",countyName:"东方市"}]},{cityCode:"469001",cityName:"五指山市",county:[{countyCode:"469001-1",countyName:"五指山市"}]},{cityCode:"469025",cityName:"白沙黎族自治县",county:[{countyCode:"469025-1",countyName:"白沙黎族自治县"}]},{cityCode:"469026",cityName:"昌江黎族自治县",county:[{countyCode:"469026-1",countyName:"昌江黎族自治县"}]},{cityCode:"469024",cityName:"临高县",county:[{countyCode:"469024-1",countyName:"临高县"}]},{cityCode:"469030",cityName:"琼中黎族苗族自治县",county:[{countyCode:"469030-1",countyName:"琼中黎族苗族自治县"}]}]},{provinceCode:"500000",provinceName:"重庆市",city:[{cityCode:"500000-1",cityName:"重庆市",county:[{countyCode:"500108",countyName:"南岸区"},{countyCode:"500101",countyName:"万州区"},{countyCode:"500103",countyName:"渝中区"},{countyCode:"500106",countyName:"沙坪坝区"},{countyCode:"500102",countyName:"涪陵区"},{countyCode:"500226",countyName:"荣昌区"},{countyCode:"500223",countyName:"潼南区"},{countyCode:"500242",countyName:"酉阳土家族苗族自治县"},{countyCode:"500232",countyName:"武隆区"},{countyCode:"500113",countyName:"巴南区"},{countyCode:"500109",countyName:"北碚区"},{countyCode:"500104",countyName:"大渡口区"},{countyCode:"500117",countyName:"合川区"},{countyCode:"500112",countyName:"渝北区"},{countyCode:"500116",countyName:"江津区"},{countyCode:"500228",countyName:"梁平区"},{countyCode:"500119",countyName:"南川区"},{countyCode:"500110",countyName:"綦江区"},{countyCode:"500227",countyName:"璧山区"},{countyCode:"500115",countyName:"长寿区"},{countyCode:"500231",countyName:"垫江县"},{countyCode:"500230",countyName:"丰都县"},{countyCode:"500224",countyName:"铜梁区"},{countyCode:"500243",countyName:"彭水苗族土家族自治县"},{countyCode:"500105",countyName:"江北区"},{countyCode:"500107",countyName:"九龙坡区"},{countyCode:"500236",countyName:"奉节县"},{countyCode:"500111",countyName:"大足区"},{countyCode:"500234",countyName:"开州区"},{countyCode:"500241",countyName:"秀山土家族苗族自治县"},{countyCode:"500229",countyName:"城口县"},{countyCode:"500238",countyName:"巫溪县"},{countyCode:"500118",countyName:"永川区"},{countyCode:"500233",countyName:"忠县"},{countyCode:"500240",countyName:"石柱土家族自治县"},{countyCode:"500114",countyName:"黔江区"},{countyCode:"500237",countyName:"巫山县"},{countyCode:"500235",countyName:"云阳县"}]}]},{provinceCode:"510000",provinceName:"四川省",city:[{cityCode:"511300",cityName:"南充市",county:[{countyCode:"511304",countyName:"嘉陵区"},{countyCode:"511323",countyName:"蓬安县"},{countyCode:"511322",countyName:"营山县"},{countyCode:"511381",countyName:"阆中市"},{countyCode:"511303",countyName:"高坪区"},{countyCode:"511324",countyName:"仪陇县"},{countyCode:"511302",countyName:"顺庆区"},{countyCode:"511321",countyName:"南部县"},{countyCode:"511325",countyName:"西充县"}]},{cityCode:"511800",cityName:"雅安市",county:[{countyCode:"511826",countyName:"芦山县"},{countyCode:"511824",countyName:"石棉县"},{countyCode:"511803",countyName:"名山区"},{countyCode:"511827",countyName:"宝兴县"},{countyCode:"511802",countyName:"雨城区"},{countyCode:"511823",countyName:"汉源县"},{countyCode:"511825",countyName:"天全县"},{countyCode:"511822",countyName:"荥经县"}]},{cityCode:"513400",cityName:"凉山彝族自治州",county:[{countyCode:"513427",countyName:"宁南县"},{countyCode:"513432",countyName:"喜德县"},{countyCode:"513431",countyName:"昭觉县"},{countyCode:"513401",countyName:"西昌市"},{countyCode:"513437",countyName:"雷波县"},{countyCode:"513433",countyName:"冕宁县"},{countyCode:"513434",countyName:"越西县"},{countyCode:"513435",countyName:"甘洛县"},{countyCode:"513429",countyName:"布拖县"},{countyCode:"513430",countyName:"金阳县"},{countyCode:"513436",countyName:"美姑县"},{countyCode:"513428",countyName:"普格县"},{countyCode:"513424",countyName:"德昌县"},{countyCode:"513425",countyName:"会理县"},{countyCode:"513423",countyName:"盐源县"},{countyCode:"513426",countyName:"会东县"},{countyCode:"513422",countyName:"木里藏族自治县"}]},{cityCode:"511400",cityName:"眉山市",county:[{countyCode:"511422",countyName:"彭山区"},{countyCode:"511424",countyName:"丹棱县"},{countyCode:"511425",countyName:"青神县"},{countyCode:"511402",countyName:"东坡区"},{countyCode:"511423",countyName:"洪雅县"},{countyCode:"511421",countyName:"仁寿县"}]},{cityCode:"510300",cityName:"自贡市",county:[{countyCode:"510304",countyName:"大安区"},{countyCode:"510302",countyName:"自流井区"},{countyCode:"510321",countyName:"荣县"},{countyCode:"510303",countyName:"贡井区"},{countyCode:"510322",countyName:"富顺县"},{countyCode:"510311",countyName:"沿滩区"}]},{cityCode:"511900",cityName:"巴中市",county:[{countyCode:"511903",countyName:"恩阳区"},{countyCode:"511921",countyName:"通江县"},{countyCode:"511922",countyName:"南江县"},{countyCode:"511902",countyName:"巴州区"},{countyCode:"511923",countyName:"平昌县"}]},{cityCode:"513300",cityName:"甘孜藏族自治州",county:[{countyCode:"513328",countyName:"甘孜县"},{countyCode:"513324",countyName:"九龙县"},{countyCode:"513332",countyName:"石渠县"},{countyCode:"513337",countyName:"稻城县"},{countyCode:"513326",countyName:"道孚县"},{countyCode:"513330",countyName:"德格县"},{countyCode:"513336",countyName:"乡城县"},{countyCode:"513325",countyName:"雅江县"},{countyCode:"513334",countyName:"理塘县"},{countyCode:"513329",countyName:"新龙县"},{countyCode:"513338",countyName:"得荣县"},{countyCode:"513331",countyName:"白玉县"},{countyCode:"513323",countyName:"丹巴县"},{countyCode:"513327",countyName:"炉霍县"},{countyCode:"513335",countyName:"巴塘县"},{countyCode:"513321",countyName:"康定市"},{countyCode:"513333",countyName:"色达县"},{countyCode:"513322",countyName:"泸定县"}]},{cityCode:"511700",cityName:"达州市",county:[{countyCode:"511722",countyName:"宣汉县"},{countyCode:"511781",countyName:"万源市"},{countyCode:"511724",countyName:"大竹县"},{countyCode:"511723",countyName:"开江县"},{countyCode:"511721",countyName:"达川区"},{countyCode:"511702",countyName:"通川区"},{countyCode:"511725",countyName:"渠县"}]},{cityCode:"510500",cityName:"泸州市",county:[{countyCode:"510524",countyName:"叙永县"},{countyCode:"510521",countyName:"泸县"},{countyCode:"510502",countyName:"江阳区"},{countyCode:"510504",countyName:"龙马潭区"},{countyCode:"510525",countyName:"古蔺县"},{countyCode:"510522",countyName:"合江县"},{countyCode:"510503",countyName:"纳溪区"}]},{cityCode:"510800",cityName:"广元市",county:[{countyCode:"510802",countyName:"利州区"},{countyCode:"510811",countyName:"昭化区"},{countyCode:"510824",countyName:"苍溪县"},{countyCode:"510812",countyName:"朝天区"},{countyCode:"510823",countyName:"剑阁县"},{countyCode:"510821",countyName:"旺苍县"},{countyCode:"510822",countyName:"青川县"}]},{cityCode:"512000",cityName:"资阳市",county:[{countyCode:"512022",countyName:"乐至县"},{countyCode:"512021",countyName:"安岳县"},{countyCode:"512002",countyName:"雁江区"}]},{cityCode:"510400",cityName:"攀枝花市",county:[{countyCode:"510411",countyName:"仁和区"},{countyCode:"510422",countyName:"盐边县"},{countyCode:"510403",countyName:"西区"},{countyCode:"510421",countyName:"米易县"},{countyCode:"510402",countyName:"东区"}]},{cityCode:"510100",cityName:"成都市",county:[{countyCode:"510115",countyName:"温江区"},{countyCode:"510105",countyName:"青羊区"},{countyCode:"510124",countyName:"郫都区"},{countyCode:"510122",countyName:"双流区"},{countyCode:"510129",countyName:"大邑县"},{countyCode:"510106",countyName:"金牛区"},{countyCode:"510112",countyName:"龙泉驿区"},{countyCode:"512081",countyName:"简阳市"},{countyCode:"510181",countyName:"都江堰市"},{countyCode:"510108",countyName:"成华区"},{countyCode:"510132",countyName:"新津县"},{countyCode:"510113",countyName:"青白江区"},{countyCode:"510182",countyName:"彭州市"},{countyCode:"510114",countyName:"新都区"},{countyCode:"510184",countyName:"崇州市"},{countyCode:"510121",countyName:"金堂县"},{countyCode:"510107",countyName:"武侯区"},{countyCode:"510104",countyName:"锦江区"},{countyCode:"510131",countyName:"蒲江县"},{countyCode:"510183",countyName:"邛崃市"}]},{cityCode:"511100",cityName:"乐山市",county:[{countyCode:"511132",countyName:"峨边彝族自治县"},{countyCode:"511113",countyName:"金口河区"},{countyCode:"511111",countyName:"沙湾区"},{countyCode:"511181",countyName:"峨眉山市"},{countyCode:"511126",countyName:"夹江县"},{countyCode:"511102",countyName:"市中区"},{countyCode:"511112",countyName:"五通桥区"},{countyCode:"511124",countyName:"井研县"},{countyCode:"511129",countyName:"沐川县"},{countyCode:"511123",countyName:"犍为县"},{countyCode:"511133",countyName:"马边彝族自治县"}]},{cityCode:"510700",cityName:"绵阳市",county:[{countyCode:"510724",countyName:"安州区"},{countyCode:"510725",countyName:"梓潼县"},{countyCode:"510781",countyName:"江油市"},{countyCode:"510704",countyName:"游仙区"},{countyCode:"510727",countyName:"平武县"},{countyCode:"510723",countyName:"盐亭县"},{countyCode:"510703",countyName:"涪城区"},{countyCode:"510722",countyName:"三台县"},{countyCode:"510726",countyName:"北川羌族自治县"}]},{cityCode:"511600",cityName:"广安市",county:[{countyCode:"511623",countyName:"邻水县"},{countyCode:"511622",countyName:"武胜县"},{countyCode:"511603000000",countyName:"前锋区"},{countyCode:"511602",countyName:"广安区"},{countyCode:"511621",countyName:"岳池县"},{countyCode:"511681",countyName:"华蓥市"}]},{cityCode:"511500",cityName:"宜宾市",county:[{countyCode:"511523",countyName:"江安县"},{countyCode:"511521",countyName:"叙州区"},{countyCode:"511525",countyName:"高县"},{countyCode:"511529",countyName:"屏山县"},{countyCode:"511528",countyName:"兴文县"},{countyCode:"511502",countyName:"翠屏区"},{countyCode:"511527",countyName:"筠连县"},{countyCode:"511524",countyName:"长宁县"},{countyCode:"511526",countyName:"珙县"},{countyCode:"511503",countyName:"南溪区"}]},{cityCode:"511000",cityName:"内江市",county:[{countyCode:"511024",countyName:"威远县"},{countyCode:"511002",countyName:"市中区"},{countyCode:"511011",countyName:"东兴区"},{countyCode:"511028",countyName:"隆昌市"},{countyCode:"511025",countyName:"资中县"}]},{cityCode:"513200",cityName:"阿坝藏族羌族自治州",county:[{countyCode:"513230",countyName:"壤塘县"},{countyCode:"513225",countyName:"九寨沟县"},{countyCode:"513223",countyName:"茂县"},{countyCode:"513226",countyName:"金川县"},{countyCode:"513227",countyName:"小金县"},{countyCode:"513233",countyName:"红原县"},{countyCode:"513222",countyName:"理县"},{countyCode:"513232",countyName:"若尔盖县"},{countyCode:"513221",countyName:"汶川县"},{countyCode:"513228",countyName:"黑水县"},{countyCode:"513229",countyName:"马尔康市"},{countyCode:"513231",countyName:"阿坝县"},{countyCode:"513224",countyName:"松潘县"}]},{cityCode:"510900",cityName:"遂宁市",county:[{countyCode:"510904",countyName:"安居区"},{countyCode:"510923",countyName:"大英县"},{countyCode:"510922",countyName:"射洪县"},{countyCode:"510903",countyName:"船山区"},{countyCode:"510921",countyName:"蓬溪县"}]},{cityCode:"510600",cityName:"德阳市",county:[{countyCode:"510682",countyName:"什邡市"},{countyCode:"510683",countyName:"绵竹市"},{countyCode:"510623",countyName:"中江县"},{countyCode:"510681",countyName:"广汉市"},{countyCode:"510626",countyName:"罗江区"},{countyCode:"510603",countyName:"旌阳区"}]}]},{provinceCode:"520000",provinceName:"贵州省",city:[{cityCode:"520100",cityName:"贵阳市",county:[{countyCode:"520103",countyName:"云岩区"},{countyCode:"520123",countyName:"修文县"},{countyCode:"520121",countyName:"开阳县"},{countyCode:"520114",countyName:"小河区"},{countyCode:"520122",countyName:"息烽县"},{countyCode:"520113",countyName:"白云区"},{countyCode:"520115",countyName:"观山湖区"},{countyCode:"520102",countyName:"南明区"},{countyCode:"520181",countyName:"清镇市"},{countyCode:"520112",countyName:"乌当区"},{countyCode:"520111",countyName:"花溪区"}]},{cityCode:"520300",cityName:"遵义市",county:[{countyCode:"520381",countyName:"赤水市"},{countyCode:"520329",countyName:"余庆县"},{countyCode:"520325",countyName:"道真仡佬族苗族自治县"},{countyCode:"520326",countyName:"务川仡佬族苗族自治县"},{countyCode:"520328",countyName:"湄潭县"},{countyCode:"520327",countyName:"凤冈县"},{countyCode:"520302",countyName:"红花岗区"},{countyCode:"520382",countyName:"仁怀市"},{countyCode:"520321",countyName:"播州区"},{countyCode:"520330",countyName:"习水县"},{countyCode:"520324",countyName:"正安县"},{countyCode:"520303",countyName:"汇川区"},{countyCode:"520323",countyName:"绥阳县"},{countyCode:"520322",countyName:"桐梓县"}]},{cityCode:"522700",cityName:"黔南布依族苗族自治州",county:[{countyCode:"522722",countyName:"荔波县"},{countyCode:"522725",countyName:"瓮安县"},{countyCode:"522702",countyName:"福泉市"},{countyCode:"522728",countyName:"罗甸县"},{countyCode:"522723",countyName:"贵定县"},{countyCode:"522701",countyName:"都匀市"},{countyCode:"522726",countyName:"独山县"},{countyCode:"522731",countyName:"惠水县"},{countyCode:"522732",countyName:"三都水族自治县"},{countyCode:"522727",countyName:"平塘县"},{countyCode:"522729",countyName:"长顺县"},{countyCode:"522730",countyName:"龙里县"}]},{cityCode:"520200",cityName:"六盘水市",county:[{countyCode:"520222",countyName:"盘州市"},{countyCode:"520203",countyName:"六枝特区"},{countyCode:"520201",countyName:"钟山区"},{countyCode:"520221",countyName:"水城县"}]},{cityCode:"520400",cityName:"安顺市",county:[{countyCode:"520424",countyName:"关岭布依族苗族自治县"},{countyCode:"520423",countyName:"镇宁布依族苗族自治县"},{countyCode:"520422",countyName:"普定县"},{countyCode:"520421",countyName:"平坝区"},{countyCode:"520425",countyName:"紫云苗族布依族自治县"},{countyCode:"520402",countyName:"西秀区"}]},{cityCode:"520500",cityName:"毕节市",county:[{countyCode:"520523",countyName:"金沙县"},{countyCode:"520524",countyName:"织金县"},{countyCode:"520525",countyName:"纳雍县"},{countyCode:"520522",countyName:"黔西县"},{countyCode:"520526",countyName:"威宁彝族回族苗族自治县"},{countyCode:"520527",countyName:"赫章县"},{countyCode:"520521",countyName:"大方县"},{countyCode:"520502",countyName:"七星关区"}]},{cityCode:"522600",cityName:"黔东南苗族侗族自治州",county:[{countyCode:"522626",countyName:"岑巩县"},{countyCode:"522630",countyName:"台江县"},{countyCode:"522624",countyName:"三穗县"},{countyCode:"522625",countyName:"镇远县"},{countyCode:"522636",countyName:"丹寨县"},{countyCode:"522633",countyName:"从江县"},{countyCode:"522634",countyName:"雷山县"},{countyCode:"522623",countyName:"施秉县"},{countyCode:"522629",countyName:"剑河县"},{countyCode:"522628",countyName:"锦屏县"},{countyCode:"522632",countyName:"榕江县"},{countyCode:"522631",countyName:"黎平县"},{countyCode:"522627",countyName:"天柱县"},{countyCode:"522622",countyName:"黄平县"},{countyCode:"522635",countyName:"麻江县"},{countyCode:"522601",countyName:"凯里市"}]},{cityCode:"522300",cityName:"黔西南布依族苗族自治州",county:[{countyCode:"522326",countyName:"望谟县"},{countyCode:"522327",countyName:"册亨县"},{countyCode:"522323",countyName:"普安县"},{countyCode:"522322",countyName:"兴仁县"},{countyCode:"522301",countyName:"兴义市"},{countyCode:"522328",countyName:"安龙县"},{countyCode:"522324",countyName:"晴隆县"},{countyCode:"522325",countyName:"贞丰县"}]},{cityCode:"520600",cityName:"铜仁市",county:[{countyCode:"520602",countyName:"碧江区"},{countyCode:"520622",countyName:"玉屏侗族自治县"},{countyCode:"520603",countyName:"万山区"},{countyCode:"520627",countyName:"沿河土家族自治县"},{countyCode:"520624",countyName:"思南县"},{countyCode:"520626",countyName:"德江县"},{countyCode:"520628",countyName:"松桃苗族自治县"},{countyCode:"520621",countyName:"江口县"},{countyCode:"520623",countyName:"石阡县"},{countyCode:"520625",countyName:"印江土家族苗族自治县"}]}]},{provinceCode:"530000",provinceName:"云南省",city:[{cityCode:"530400",cityName:"玉溪市",county:[{countyCode:"530425",countyName:"易门县"},{countyCode:"530423",countyName:"通海县"},{countyCode:"530421",countyName:"江川区"},{countyCode:"530424",countyName:"华宁县"},{countyCode:"530426",countyName:"峨山彝族自治县"},{countyCode:"530402",countyName:"红塔区"},{countyCode:"530422",countyName:"澄江县"},{countyCode:"530427",countyName:"新平彝族傣族自治县"},{countyCode:"530428",countyName:"元江哈尼族彝族傣族自治县"}]},{cityCode:"533100",cityName:"德宏傣族景颇族自治州",county:[{countyCode:"533124",countyName:"陇川县"},{countyCode:"533122",countyName:"梁河县"},{countyCode:"533123",countyName:"盈江县"},{countyCode:"533103",countyName:"芒市"},{countyCode:"533102",countyName:"瑞丽市"}]},{cityCode:"532900",cityName:"大理白族自治州",county:[{countyCode:"532927",countyName:"巍山彝族回族自治县"},{countyCode:"532931",countyName:"剑川县"},{countyCode:"532923",countyName:"祥云县"},{countyCode:"532932",countyName:"鹤庆县"},{countyCode:"532928",countyName:"永平县"},{countyCode:"532929",countyName:"云龙县"},{countyCode:"532930",countyName:"洱源县"},{countyCode:"532924",countyName:"宾川县"},{countyCode:"532925",countyName:"弥渡县"},{countyCode:"532926",countyName:"南涧彝族自治县"},{countyCode:"532901",countyName:"大理市"},{countyCode:"532922",countyName:"漾濞彝族自治县"}]},{cityCode:"530100",cityName:"昆明市",county:[{countyCode:"530124",countyName:"富民县"},{countyCode:"530114",countyName:"呈贡区"},{countyCode:"530126",countyName:"石林彝族自治县"},{countyCode:"530181",countyName:"安宁市"},{countyCode:"530128",countyName:"禄劝彝族苗族自治县"},{countyCode:"530125",countyName:"宜良县"},{countyCode:"530103",countyName:"盘龙区"},{countyCode:"530102",countyName:"五华区"},{countyCode:"530122",countyName:"晋宁区"},{countyCode:"530113",countyName:"东川区"},{countyCode:"530111",countyName:"官渡区"},{countyCode:"530127",countyName:"嵩明县"},{countyCode:"530112",countyName:"西山区"},{countyCode:"530129",countyName:"寻甸回族彝族自治县"}]},{cityCode:"530900",cityName:"临沧市",county:[{countyCode:"530921",countyName:"凤庆县"},{countyCode:"530926",countyName:"耿马傣族佤族自治县"},{countyCode:"530922",countyName:"云县"},{countyCode:"530924",countyName:"镇康县"},{countyCode:"530923",countyName:"永德县"},{countyCode:"530927",countyName:"沧源佤族自治县"},{countyCode:"530925",countyName:"双江拉祜族佤族布朗族傣族自治县"},{countyCode:"530902",countyName:"临翔区"}]},{cityCode:"532300",cityName:"楚雄彝族自治州",county:[{countyCode:"532329",countyName:"武定县"},{countyCode:"532324",countyName:"南华县"},{countyCode:"532327",countyName:"永仁县"},{countyCode:"532328",countyName:"元谋县"},{countyCode:"532331",countyName:"禄丰县"},{countyCode:"532326",countyName:"大姚县"},{countyCode:"532325",countyName:"姚安县"},{countyCode:"532301",countyName:"楚雄市"},{countyCode:"532323",countyName:"牟定县"},{countyCode:"532322",countyName:"双柏县"}]},{cityCode:"532800",cityName:"西双版纳傣族自治州",county:[{countyCode:"532823",countyName:"勐腊县"},{countyCode:"532801",countyName:"景洪市"},{countyCode:"532822",countyName:"勐海县"}]},{cityCode:"532600",cityName:"文山壮族苗族自治州",county:[{countyCode:"532601",countyName:"文山市"},{countyCode:"532623",countyName:"西畴县"},{countyCode:"532627",countyName:"广南县"},{countyCode:"532625",countyName:"马关县"},{countyCode:"532622",countyName:"砚山县"},{countyCode:"532628",countyName:"富宁县"},{countyCode:"532624",countyName:"麻栗坡县"},{countyCode:"532626",countyName:"丘北县"}]},{cityCode:"530300",cityName:"曲靖市",county:[{countyCode:"530302",countyName:"麒麟区"},{countyCode:"530325",countyName:"富源县"},{countyCode:"530326",countyName:"会泽县"},{countyCode:"530324",countyName:"罗平县"},{countyCode:"530328",countyName:"沾益区"},{countyCode:"530323",countyName:"师宗县"},{countyCode:"530321",countyName:"马龙区"},{countyCode:"530322",countyName:"陆良县"},{countyCode:"530381",countyName:"宣威市"}]},{cityCode:"533400",cityName:"迪庆藏族自治州",county:[{countyCode:"533421",countyName:"香格里拉市"},{countyCode:"533422",countyName:"德钦县"},{countyCode:"533423",countyName:"维西傈僳族自治县"}]},{cityCode:"530600",cityName:"昭通市",county:[{countyCode:"530629",countyName:"威信县"},{countyCode:"530624",countyName:"大关县"},{countyCode:"530630",countyName:"水富县"},{countyCode:"530626",countyName:"绥江县"},{countyCode:"530628",countyName:"彝良县"},{countyCode:"530623",countyName:"盐津县"},{countyCode:"530602",countyName:"昭阳区"},{countyCode:"530621",countyName:"鲁甸县"},{countyCode:"530627",countyName:"镇雄县"},{countyCode:"530625",countyName:"永善县"},{countyCode:"530622",countyName:"巧家县"}]},{cityCode:"533300",cityName:"怒江傈僳族自治州",county:[{countyCode:"533323",countyName:"福贡县"},{countyCode:"533324",countyName:"贡山独龙族怒族自治县"},{countyCode:"533321",countyName:"泸水市"},{countyCode:"533325",countyName:"兰坪白族普米族自治县"}]},{cityCode:"530700",cityName:"丽江市",county:[{countyCode:"530724",countyName:"宁蒗彝族自治县"},{countyCode:"530722",countyName:"永胜县"},{countyCode:"530702",countyName:"古城区"},{countyCode:"530721",countyName:"玉龙纳西族自治县"},{countyCode:"530723",countyName:"华坪县"}]},{cityCode:"530800",cityName:"普洱市",county:[{countyCode:"530822",countyName:"墨江哈尼族自治县"},{countyCode:"530823",countyName:"景东彝族自治县"},{countyCode:"530827",countyName:"孟连傣族拉祜族佤族自治县"},{countyCode:"530825",countyName:"镇沅彝族哈尼族拉祜族自治县"},{countyCode:"530828",countyName:"澜沧拉祜族自治县"},{countyCode:"530829",countyName:"西盟佤族自治县"},{countyCode:"530821",countyName:"宁洱哈尼族彝族自治县"},{countyCode:"530802",countyName:"思茅区"},{countyCode:"530826",countyName:"江城哈尼族彝族自治县"},{countyCode:"530824",countyName:"景谷傣族彝族自治县"}]},{cityCode:"532500",cityName:"红河哈尼族彝族自治州",county:[{countyCode:"532525",countyName:"石屏县"},{countyCode:"532530",countyName:"金平苗族瑶族傣族自治县"},{countyCode:"532503",countyName:"蒙自市"},{countyCode:"532528",countyName:"元阳县"},{countyCode:"532527",countyName:"泸西县"},{countyCode:"532502",countyName:"开远市"},{countyCode:"532524",countyName:"建水县"},{countyCode:"532532",countyName:"河口瑶族自治县"},{countyCode:"532529",countyName:"红河县"},{countyCode:"532531",countyName:"绿春县"},{countyCode:"532501",countyName:"个旧市"},{countyCode:"532523",countyName:"屏边苗族自治县"},{countyCode:"532526",countyName:"弥勒市"}]},{cityCode:"530500",cityName:"保山市",county:[{countyCode:"530523",countyName:"龙陵县"},{countyCode:"530522",countyName:"腾冲市"},{countyCode:"530521",countyName:"施甸县"},{countyCode:"530502",countyName:"隆阳区"},{countyCode:"530524",countyName:"昌宁县"}]}]},{provinceCode:"540000",provinceName:"西藏自治区",city:[{cityCode:"542100",cityName:"昌都市",county:[{countyCode:"542122",countyName:"江达县"},{countyCode:"542129",countyName:"芒康县"},{countyCode:"542128",countyName:"左贡县"},{countyCode:"542126",countyName:"察雅县"},{countyCode:"542132",countyName:"洛隆县"},{countyCode:"542121",countyName:"卡若区"},{countyCode:"542125",countyName:"丁青县"},{countyCode:"542133",countyName:"边坝县"},{countyCode:"542123",countyName:"贡觉县"},{countyCode:"542127",countyName:"八宿县"},{countyCode:"542124",countyName:"类乌齐县"}]},{cityCode:"542200",cityName:"山南市",county:[{countyCode:"542229",countyName:"加查县"},{countyCode:"542225",countyName:"琼结县"},{countyCode:"542232",countyName:"错那县"},{countyCode:"542221",countyName:"乃东区"},{countyCode:"542224",countyName:"桑日县"},{countyCode:"542222",countyName:"扎囊县"},{countyCode:"542227",countyName:"措美县"},{countyCode:"542223",countyName:"贡嘎县"},{countyCode:"542228",countyName:"洛扎县"},{countyCode:"542226",countyName:"曲松县"},{countyCode:"542233",countyName:"浪卡子县"},{countyCode:"542231",countyName:"隆子县"}]},{cityCode:"542400",cityName:"那曲市",county:[{countyCode:"542426",countyName:"申扎县"},{countyCode:"542423",countyName:"比如县"},{countyCode:"542430",countyName:"尼玛县"},{countyCode:"542421",countyName:"色尼区"},{countyCode:"542422",countyName:"嘉黎县"},{countyCode:"542424",countyName:"聂荣县"},{countyCode:"542427",countyName:"索县"},{countyCode:"542425",countyName:"安多县"},{countyCode:"542428",countyName:"班戈县"},{countyCode:"542429",countyName:"巴青县"}]},{cityCode:"542600",cityName:"林芝市",county:[{countyCode:"542623",countyName:"米林县"},{countyCode:"542626",countyName:"察隅县"},{countyCode:"542627",countyName:"朗县"},{countyCode:"542622",countyName:"工布江达县"},{countyCode:"542625",countyName:"波密县"},{countyCode:"542624",countyName:"墨脱县"},{countyCode:"542621",countyName:"巴宜区"}]},{cityCode:"540100",cityName:"拉萨市",county:[{countyCode:"540121",countyName:"林周县"},{countyCode:"540124",countyName:"曲水县"},{countyCode:"540126",countyName:"达孜区"},{countyCode:"540125",countyName:"堆龙德庆区"},{countyCode:"540122",countyName:"当雄县"},{countyCode:"540127",countyName:"墨竹工卡县"},{countyCode:"540123",countyName:"尼木县"},{countyCode:"540102",countyName:"城关区"}]},{cityCode:"542300",cityName:"日喀则市",county:[{countyCode:"542335",countyName:"吉隆县"},{countyCode:"542323",countyName:"江孜县"},{countyCode:"542331",countyName:"康马县"},{countyCode:"542322",countyName:"南木林县"},{countyCode:"542338",countyName:"岗巴县"},{countyCode:"542336",countyName:"聂拉木县"},{countyCode:"542328",countyName:"谢通门县"},{countyCode:"542325",countyName:"萨迦县"},{countyCode:"542329",countyName:"白朗县"},{countyCode:"542326",countyName:"拉孜县"},{countyCode:"542332",countyName:"定结县"},{countyCode:"542327",countyName:"昂仁县"},{countyCode:"542334",countyName:"亚东县"},{countyCode:"542337",countyName:"萨嘎县"},{countyCode:"542324",countyName:"定日县"},{countyCode:"542333",countyName:"仲巴县"},{countyCode:"542301",countyName:"桑珠孜区"},{countyCode:"542330",countyName:"仁布县"}]},{cityCode:"542500",cityName:"阿里地区",county:[{countyCode:"542523",countyName:"噶尔县"},{countyCode:"542525",countyName:"革吉县"},{countyCode:"542524",countyName:"日土县"},{countyCode:"542527",countyName:"措勤县"},{countyCode:"542521",countyName:"普兰县"},{countyCode:"542526",countyName:"改则县"},{countyCode:"542522",countyName:"札达县"}]}]},{provinceCode:"610000",provinceName:"陕西省",city:[{cityCode:"610800",cityName:"榆林市",county:[{countyCode:"610831",countyName:"子洲县"},{countyCode:"610825",countyName:"定边县"},{countyCode:"610827",countyName:"米脂县"},{countyCode:"610821",countyName:"神木市"},{countyCode:"610829",countyName:"吴堡县"},{countyCode:"610822",countyName:"府谷县"},{countyCode:"610830",countyName:"清涧县"},{countyCode:"610823",countyName:"横山区"},{countyCode:"610824",countyName:"靖边县"},{countyCode:"610826",countyName:"绥德县"},{countyCode:"610802",countyName:"榆阳区"},{countyCode:"610828",countyName:"佳县"}]},{cityCode:"610200",cityName:"铜川市",county:[{countyCode:"610202",countyName:"王益区"},{countyCode:"610203",countyName:"印台区"},{countyCode:"610204",countyName:"耀州区"},{countyCode:"610222",countyName:"宜君县"}]},{cityCode:"611000",cityName:"商洛市",county:[{countyCode:"611022",countyName:"丹凤县"},{countyCode:"611023",countyName:"商南县"},{countyCode:"611026",countyName:"柞水县"},{countyCode:"611025",countyName:"镇安县"},{countyCode:"611024",countyName:"山阳县"},{countyCode:"611021",countyName:"洛南县"},{countyCode:"611002",countyName:"商州区"}]},{cityCode:"610500",cityName:"渭南市",county:[{countyCode:"610582",countyName:"华阴市"},{countyCode:"610524",countyName:"合阳县"},{countyCode:"610521",countyName:"华州区"},{countyCode:"610581",countyName:"韩城市"},{countyCode:"610526",countyName:"蒲城县"},{countyCode:"610527",countyName:"白水县"},{countyCode:"610522",countyName:"潼关县"},{countyCode:"610528",countyName:"富平县"},{countyCode:"610523",countyName:"大荔县"},{countyCode:"610502",countyName:"临渭区"},{countyCode:"610525",countyName:"澄城县"}]},{cityCode:"610300",cityName:"宝鸡市",county:[{countyCode:"610328",countyName:"千阳县"},{countyCode:"610330",countyName:"凤县"},{countyCode:"610329",countyName:"麟游县"},{countyCode:"610323",countyName:"岐山县"},{countyCode:"610302",countyName:"渭滨区"},{countyCode:"610327",countyName:"陇县"},{countyCode:"610322",countyName:"凤翔县"},{countyCode:"610324",countyName:"扶风县"},{countyCode:"610304",countyName:"陈仓区"},{countyCode:"610303",countyName:"金台区"},{countyCode:"610326",countyName:"眉县"},{countyCode:"610331",countyName:"太白县"}]},{cityCode:"610900",cityName:"安康市",county:[{countyCode:"610927",countyName:"镇坪县"},{countyCode:"610923",countyName:"宁陕县"},{countyCode:"610922",countyName:"石泉县"},{countyCode:"610921",countyName:"汉阴县"},{countyCode:"610925",countyName:"岚皋县"},{countyCode:"610926",countyName:"平利县"},{countyCode:"610928",countyName:"旬阳县"},{countyCode:"610929",countyName:"白河县"},{countyCode:"610902",countyName:"汉滨区"},{countyCode:"610924",countyName:"紫阳县"}]},{cityCode:"610700",cityName:"汉中市",county:[{countyCode:"610724",countyName:"西乡县"},{countyCode:"610721",countyName:"南郑区"},{countyCode:"610722",countyName:"城固县"},{countyCode:"610727",countyName:"略阳县"},{countyCode:"610728",countyName:"镇巴县"},{countyCode:"610702",countyName:"汉台区"},{countyCode:"610729",countyName:"留坝县"},{countyCode:"610723",countyName:"洋县"},{countyCode:"610730",countyName:"佛坪县"},{countyCode:"610726",countyName:"宁强县"},{countyCode:"610725",countyName:"勉县"}]},{cityCode:"610600",cityName:"延安市",county:[{countyCode:"610628",countyName:"富县"},{countyCode:"610631",countyName:"黄龙县"},{countyCode:"610602",countyName:"宝塔区"},{countyCode:"610630",countyName:"宜川县"},{countyCode:"610624",countyName:"安塞区"},{countyCode:"610629",countyName:"洛川县"},{countyCode:"610621",countyName:"延长县"},{countyCode:"610632",countyName:"黄陵县"},{countyCode:"610626",countyName:"吴起县"},{countyCode:"610623",countyName:"子长县"},{countyCode:"610627",countyName:"甘泉县"},{countyCode:"610625",countyName:"志丹县"},{countyCode:"610622",countyName:"延川县"}]},{cityCode:"610100",cityName:"西安市",county:[{countyCode:"610116",countyName:"长安区"},{countyCode:"610112",countyName:"未央区"},{countyCode:"610102",countyName:"新城区"},{countyCode:"610114",countyName:"阎良区"},{countyCode:"610111",countyName:"灞桥区"},{countyCode:"610126",countyName:"高陵区"},{countyCode:"610122",countyName:"蓝田县"},{countyCode:"610103",countyName:"碑林区"},{countyCode:"610115",countyName:"临潼区"},{countyCode:"610113",countyName:"雁塔区"},{countyCode:"610124",countyName:"周至县"},{countyCode:"610104",countyName:"莲湖区"},{countyCode:"610125",countyName:"鄠邑区"}]},{cityCode:"610400",cityName:"咸阳市",county:[{countyCode:"610430",countyName:"淳化县"},{countyCode:"610423",countyName:"泾阳县"},{countyCode:"610481",countyName:"兴平市"},{countyCode:"610422",countyName:"三原县"},{countyCode:"610424",countyName:"乾县"},{countyCode:"610426",countyName:"永寿县"},{countyCode:"610427",countyName:"彬州市"},{countyCode:"610402",countyName:"秦都区"},{countyCode:"610404",countyName:"渭城区"},{countyCode:"610403",countyName:"杨陵区"},{countyCode:"610431",countyName:"武功县"},{countyCode:"610428",countyName:"长武县"},{countyCode:"610425",countyName:"礼泉县"},{countyCode:"610429",countyName:"旬邑县"}]}]},{provinceCode:"620000",provinceName:"甘肃省",city:[{cityCode:"620500",cityName:"天水市",county:[{countyCode:"620524",countyName:"武山县"},{countyCode:"620502",countyName:"秦州区"},{countyCode:"620521",countyName:"清水县"},{countyCode:"620523",countyName:"甘谷县"},{countyCode:"620522",countyName:"秦安县"},{countyCode:"620503",countyName:"麦积区"},{countyCode:"620525",countyName:"张家川回族自治县"}]},{cityCode:"620300",cityName:"金昌市",county:[{countyCode:"620302",countyName:"金川区"},{countyCode:"620321",countyName:"永昌县"}]},{cityCode:"620600",cityName:"武威市",county:[{countyCode:"620602",countyName:"凉州区"},{countyCode:"620623",countyName:"天祝藏族自治县"},{countyCode:"620622",countyName:"古浪县"},{countyCode:"620621",countyName:"民勤县"}]},{cityCode:"620700",cityName:"张掖市",county:[{countyCode:"620702",countyName:"甘州区"},{countyCode:"620724",countyName:"高台县"},{countyCode:"620725",countyName:"山丹县"},{countyCode:"620723",countyName:"临泽县"},{countyCode:"620722",countyName:"民乐县"},{countyCode:"620721",countyName:"肃南裕固族自治县"}]},{cityCode:"621200",cityName:"陇南市",county:[{countyCode:"621225",countyName:"西和县"},{countyCode:"621223",countyName:"宕昌县"},{countyCode:"621227",countyName:"徽县"},{countyCode:"621224",countyName:"康县"},{countyCode:"621221",countyName:"成县"},{countyCode:"621228",countyName:"两当县"},{countyCode:"621226",countyName:"礼县"},{countyCode:"621222",countyName:"文县"},{countyCode:"621202",countyName:"武都区"}]},{cityCode:"620100",cityName:"兰州市",county:[{countyCode:"620121",countyName:"永登县"},{countyCode:"620111",countyName:"红古区"},{countyCode:"620103",countyName:"七里河区"},{countyCode:"620122",countyName:"皋兰县"},{countyCode:"620104",countyName:"西固区"},{countyCode:"620102",countyName:"城关区"},{countyCode:"620105",countyName:"安宁区"},{countyCode:"620123",countyName:"榆中县"}]},{cityCode:"621000",cityName:"庆阳市",county:[{countyCode:"621025",countyName:"正宁县"},{countyCode:"621026",countyName:"宁县"},{countyCode:"621027",countyName:"镇原县"},{countyCode:"621023",countyName:"华池县"},{countyCode:"621002",countyName:"西峰区"},{countyCode:"621024",countyName:"合水县"},{countyCode:"621022",countyName:"环县"},{countyCode:"621021",countyName:"庆城县"}]},{cityCode:"620200",cityName:"嘉峪关市",county:[{countyCode:"620200-1",countyName:"嘉峪关市"}]},{cityCode:"620800",cityName:"平凉市",county:[{countyCode:"620826",countyName:"静宁县"},{countyCode:"620822",countyName:"灵台县"},{countyCode:"620823",countyName:"崇信县"},{countyCode:"620825",countyName:"庄浪县"},{countyCode:"620824",countyName:"华亭县"},{countyCode:"620821",countyName:"泾川县"},{countyCode:"620802",countyName:"崆峒区"}]},{cityCode:"623000",cityName:"甘南藏族自治州",county:[{countyCode:"623024",countyName:"迭部县"},{countyCode:"623026",countyName:"碌曲县"},{countyCode:"623022",countyName:"卓尼县"},{countyCode:"623021",countyName:"临潭县"},{countyCode:"623025",countyName:"玛曲县"},{countyCode:"623001",countyName:"合作市"},{countyCode:"623027",countyName:"夏河县"},{countyCode:"623023",countyName:"舟曲县"}]},{cityCode:"620400",cityName:"白银市",county:[{countyCode:"620422",countyName:"会宁县"},{countyCode:"620403",countyName:"平川区"},{countyCode:"620423",countyName:"景泰县"},{countyCode:"620421",countyName:"靖远县"},{countyCode:"620402",countyName:"白银区"}]},{cityCode:"620900",cityName:"酒泉市",county:[{countyCode:"620921",countyName:"金塔县"},{countyCode:"620924",countyName:"阿克塞哈萨克族自治县"},{countyCode:"620923",countyName:"肃北蒙古族自治县"},{countyCode:"620922",countyName:"瓜州县"},{countyCode:"620981",countyName:"玉门市"},{countyCode:"620902",countyName:"肃州区"},{countyCode:"620982",countyName:"敦煌市"}]},{cityCode:"621100",cityName:"定西市",county:[{countyCode:"621122",countyName:"陇西县"},{countyCode:"621123",countyName:"渭源县"},{countyCode:"621125",countyName:"漳县"},{countyCode:"621124",countyName:"临洮县"},{countyCode:"621121",countyName:"通渭县"},{countyCode:"621126",countyName:"岷县"},{countyCode:"621102",countyName:"安定区"}]},{cityCode:"622900",cityName:"临夏回族自治州",county:[{countyCode:"622921",countyName:"临夏县"},{countyCode:"622925",countyName:"和政县"},{countyCode:"622924",countyName:"广河县"},{countyCode:"622901",countyName:"临夏市"},{countyCode:"622926",countyName:"东乡族自治县"},{countyCode:"622923",countyName:"永靖县"},{countyCode:"622927",countyName:"积石山保安族东乡族撒拉族自治县"},{countyCode:"622922",countyName:"康乐县"}]}]},{provinceCode:"630000",provinceName:"青海省",city:[{cityCode:"632200",cityName:"海北藏族自治州",county:[{countyCode:"632224",countyName:"刚察县"},{countyCode:"632222",countyName:"祁连县"},{countyCode:"632223",countyName:"海晏县"},{countyCode:"632221",countyName:"门源回族自治县"}]},{cityCode:"632500",cityName:"海南藏族自治州",county:[{countyCode:"632522",countyName:"同德县"},{countyCode:"632525",countyName:"贵南县"},{countyCode:"632524",countyName:"兴海县"},{countyCode:"632523",countyName:"贵德县"},{countyCode:"632521",countyName:"共和县"}]},{cityCode:"630100",cityName:"西宁市",county:[{countyCode:"630102",countyName:"城东区"},{countyCode:"630122",countyName:"湟中县"},{countyCode:"630105",countyName:"城北区"},{countyCode:"630121",countyName:"大通回族土族自治县"},{countyCode:"630103",countyName:"城中区"},{countyCode:"630104",countyName:"城西区"},{countyCode:"630123",countyName:"湟源县"}]},{cityCode:"632700",cityName:"玉树藏族自治州",county:[{countyCode:"632726",countyName:"曲麻莱县"},{countyCode:"632721",countyName:"玉树市"},{countyCode:"632723",countyName:"称多县"},{countyCode:"632722",countyName:"杂多县"},{countyCode:"632725",countyName:"囊谦县"},{countyCode:"632724",countyName:"治多县"}]},{cityCode:"632800",cityName:"海西蒙古族藏族自治州",county:[{countyCode:"632801",countyName:"格尔木市"},{countyCode:"632823",countyName:"天峻县"},{countyCode:"632802",countyName:"德令哈市"},{countyCode:"632822",countyName:"都兰县"},{countyCode:"632821",countyName:"乌兰县"},{countyCode:"632803",countyName:"茫崖市"}]},{cityCode:"632100",cityName:"海东市",county:[{countyCode:"632128",countyName:"循化撒拉族自治县"},{countyCode:"632126",countyName:"互助土族自治县"},{countyCode:"632127",countyName:"化隆回族自治县"},{countyCode:"632122",countyName:"民和回族土族自治县"},{countyCode:"632121",countyName:"平安区"},{countyCode:"632123",countyName:"乐都区"}]},{cityCode:"632300",cityName:"黄南藏族自治州",county:[{countyCode:"632322",countyName:"尖扎县"},{countyCode:"632323",countyName:"泽库县"},{countyCode:"632324",countyName:"河南蒙古族自治县"},{countyCode:"632321",countyName:"同仁县"}]},{cityCode:"632600",cityName:"果洛藏族自治州",county:[{countyCode:"632625",countyName:"久治县"},{countyCode:"632623",countyName:"甘德县"},{countyCode:"632622",countyName:"班玛县"},{countyCode:"632626",countyName:"玛多县"},{countyCode:"632624",countyName:"达日县"},{countyCode:"632621",countyName:"玛沁县"}]}]},{provinceCode:"640000",provinceName:"宁夏回族自治区",city:[{cityCode:"640200",cityName:"石嘴山市",county:[{countyCode:"640205",countyName:"惠农区"},{countyCode:"640202",countyName:"大武口区"},{countyCode:"640221",countyName:"平罗县"}]},{cityCode:"640300",cityName:"吴忠市",county:[{countyCode:"640323",countyName:"盐池县"},{countyCode:"640381",countyName:"青铜峡市"},{countyCode:"640302",countyName:"利通区"},{countyCode:"640303",countyName:"红寺堡区"},{countyCode:"640324",countyName:"同心县"}]},{cityCode:"640500",cityName:"中卫市",county:[{countyCode:"640522",countyName:"海原县"},{countyCode:"640502",countyName:"沙坡头区"},{countyCode:"640521",countyName:"中宁县"}]},{cityCode:"640400",cityName:"固原市",county:[{countyCode:"640402",countyName:"原州区"},{countyCode:"640423",countyName:"隆德县"},{countyCode:"640424",countyName:"泾源县"},{countyCode:"640422",countyName:"西吉县"},{countyCode:"640425",countyName:"彭阳县"}]},{cityCode:"640100",cityName:"银川市",county:[{countyCode:"640106",countyName:"金凤区"},{countyCode:"640105",countyName:"西夏区"},{countyCode:"640122",countyName:"贺兰县"},{countyCode:"640104",countyName:"兴庆区"},{countyCode:"640181",countyName:"灵武市"},{countyCode:"640121",countyName:"永宁县"}]}]},{provinceCode:"650000",provinceName:"新疆维吾尔自治区",city:[{cityCode:"650200",cityName:"克拉玛依市",county:[{countyCode:"650203",countyName:"克拉玛依区"},{countyCode:"650205",countyName:"乌尔禾区"},{countyCode:"650202",countyName:"独山子区"},{countyCode:"650204",countyName:"白碱滩区"}]},{cityCode:"652800",cityName:"巴音郭楞蒙古自治州",county:[{countyCode:"652829",countyName:"博湖县"},{countyCode:"652824",countyName:"若羌县"},{countyCode:"652826",countyName:"焉耆回族自治县"},{countyCode:"652823",countyName:"尉犁县"},{countyCode:"652822",countyName:"轮台县"},{countyCode:"652825",countyName:"且末县"},{countyCode:"652801",countyName:"库尔勒市"},{countyCode:"652827",countyName:"和静县"},{countyCode:"652828",countyName:"和硕县"}]},{cityCode:"654200",cityName:"塔城地区",county:[{countyCode:"654223",countyName:"沙湾县"},{countyCode:"654201",countyName:"塔城市"},{countyCode:"654226",countyName:"和布克赛尔蒙古自治县"},{countyCode:"654202",countyName:"乌苏市"},{countyCode:"654224",countyName:"托里县"},{countyCode:"654221",countyName:"额敏县"},{countyCode:"654225",countyName:"裕民县"}]},{cityCode:"652200",cityName:"哈密市",county:[{countyCode:"652222",countyName:"巴里坤哈萨克自治县"},{countyCode:"652201",countyName:"伊州区"},{countyCode:"652223",countyName:"伊吾县"}]},{cityCode:"654000",cityName:"伊犁哈萨克自治州",county:[{countyCode:"654027",countyName:"特克斯县"},{countyCode:"654024",countyName:"巩留县"},{countyCode:"654022",countyName:"察布查尔锡伯自治县"},{countyCode:"654004",countyName:"霍尔果斯市"},{countyCode:"654023",countyName:"霍城县"},{countyCode:"654028",countyName:"尼勒克县"},{countyCode:"654003",countyName:"奎屯市"},{countyCode:"654021",countyName:"伊宁县"},{countyCode:"654025",countyName:"新源县"},{countyCode:"654002",countyName:"伊宁市"},{countyCode:"654026",countyName:"昭苏县"}]},{cityCode:"654300",cityName:"阿勒泰地区",county:[{countyCode:"654325",countyName:"青河县"},{countyCode:"654326",countyName:"吉木乃县"},{countyCode:"654321",countyName:"布尔津县"},{countyCode:"654323",countyName:"福海县"},{countyCode:"654301",countyName:"阿勒泰市"},{countyCode:"654322",countyName:"富蕴县"},{countyCode:"654324",countyName:"哈巴河县"}]},{cityCode:"652100",cityName:"吐鲁番市",county:[{countyCode:"652122",countyName:"鄯善县"},{countyCode:"652101",countyName:"高昌区"},{countyCode:"652123",countyName:"托克逊县"}]},{cityCode:"650100",cityName:"乌鲁木齐市",county:[{countyCode:"650121",countyName:"乌鲁木齐县"},{countyCode:"650109",countyName:"米东区"},{countyCode:"650103",countyName:"沙依巴克区"},{countyCode:"650105",countyName:"水磨沟区"},{countyCode:"650107",countyName:"达坂城区"},{countyCode:"650104",countyName:"新市区"},{countyCode:"650102",countyName:"天山区"},{countyCode:"650106",countyName:"头屯河区"}]},{cityCode:"659002",cityName:"阿拉尔市",county:[{countyCode:"659002-1",countyName:"阿拉尔市"}]},{cityCode:"653200",cityName:"和田地区",county:[{countyCode:"653222",countyName:"墨玉县"},{countyCode:"653226",countyName:"于田县"},{countyCode:"653223",countyName:"皮山县"},{countyCode:"653221",countyName:"和田县"},{countyCode:"653224",countyName:"洛浦县"},{countyCode:"653225",countyName:"策勒县"},{countyCode:"653227",countyName:"民丰县"},{countyCode:"653201",countyName:"和田市"}]},{cityCode:"659003",cityName:"图木舒克市",county:[{countyCode:"659003-1",countyName:"图木舒克市"}]},{cityCode:"695005",cityName:"北屯市",county:[{countyCode:"695005-1",countyName:"北屯市"}]},{cityCode:"652300",cityName:"昌吉回族自治州",county:[{countyCode:"652302",countyName:"阜康市"},{countyCode:"652324",countyName:"玛纳斯县"},{countyCode:"652325",countyName:"奇台县"},{countyCode:"652323",countyName:"呼图壁县"},{countyCode:"652301",countyName:"昌吉市"},{countyCode:"652327",countyName:"吉木萨尔县"},{countyCode:"652328",countyName:"木垒哈萨克自治县"},{countyCode:"652303",countyName:"准东开发区"}]},{cityCode:"653100",cityName:"喀什地区",county:[{countyCode:"653128",countyName:"岳普湖县"},{countyCode:"653129",countyName:"伽师县"},{countyCode:"653126",countyName:"叶城县"},{countyCode:"653122",countyName:"疏勒县"},{countyCode:"653124",countyName:"泽普县"},{countyCode:"653121",countyName:"疏附县"},{countyCode:"653131",countyName:"塔什库尔干塔吉克自治县"},{countyCode:"653130",countyName:"巴楚县"},{countyCode:"653123",countyName:"英吉沙县"},{countyCode:"653127",countyName:"麦盖提县"},{countyCode:"653125",countyName:"莎车县"},{countyCode:"653101",countyName:"喀什市"}]},{cityCode:"659001",cityName:"石河子市",county:[{countyCode:"659001-1",countyName:"石河子市"}]},{cityCode:"695006",cityName:"铁门关市",county:[{countyCode:"695006-1",countyName:"铁门关市"}]},{cityCode:"652900",cityName:"阿克苏地区",county:[{countyCode:"652901",countyName:"阿克苏市"},{countyCode:"652922",countyName:"温宿县"},{countyCode:"652928",countyName:"阿瓦提县"},{countyCode:"652929",countyName:"柯坪县"},{countyCode:"652925",countyName:"新和县"},{countyCode:"652924",countyName:"沙雅县"},{countyCode:"652927",countyName:"乌什县"},{countyCode:"652923",countyName:"库车县"},{countyCode:"652926",countyName:"拜城县"}]},{cityCode:"653000",cityName:"克孜勒苏柯尔克孜自治州",county:[{countyCode:"653023",countyName:"阿合奇县"},{countyCode:"653022",countyName:"阿克陶县"},{countyCode:"653001",countyName:"阿图什市"},{countyCode:"653024",countyName:"乌恰县"}]},{cityCode:"659004",cityName:"五家渠市",county:[{countyCode:"659004-1",countyName:"五家渠市"}]},{cityCode:"652700",cityName:"博尔塔拉蒙古自治州",county:[{countyCode:"652701",countyName:"博乐市"},{countyCode:"652723",countyName:"温泉县"},{countyCode:"652722",countyName:"精河县"}]},{cityCode:"695007",cityName:"双河市",county:[{countyCode:"695007-1",countyName:"双河市"}]}]},{provinceCode:"440000",provinceName:"广东省",city:[{cityCode:"445100",cityName:"潮州市",county:[{countyCode:"445123",countyName:"潮安县"},{countyCode:"445122",countyName:"饶平县"},{countyCode:"445121",countyName:"潮安区"},{countyCode:"445102",countyName:"湘桥区"}]},{cityCode:"441800",cityName:"清远市",county:[{countyCode:"441802",countyName:"清城区"},{countyCode:"441825",countyName:"连山壮族瑶族自治县"},{countyCode:"441821",countyName:"佛冈县"},{countyCode:"441882",countyName:"连州市"},{countyCode:"441823",countyName:"阳山县"},{countyCode:"441826",countyName:"连南瑶族自治县"},{countyCode:"441827",countyName:"清新区"},{countyCode:"441881",countyName:"英德市"}]},{cityCode:"441300",cityName:"惠州市",county:[{countyCode:"441303",countyName:"惠阳区"},{countyCode:"441322",countyName:"博罗县"},{countyCode:"441323",countyName:"惠东县"},{countyCode:"441324",countyName:"龙门县"},{countyCode:"441302",countyName:"惠城区"}]},{cityCode:"445200",cityName:"揭阳市",county:[{countyCode:"445221",countyName:"揭东区"},{countyCode:"445224",countyName:"惠来县"},{countyCode:"445222",countyName:"揭西县"},{countyCode:"445281",countyName:"普宁市"},{countyCode:"445202",countyName:"榕城区"}]},{cityCode:"440300",cityName:"深圳市",county:[{countyCode:"440303",countyName:"罗湖区"},{countyCode:"440306",countyName:"宝安区"},{countyCode:"440305",countyName:"南山区"},{countyCode:"440307",countyName:"龙岗区"},{countyCode:"440311",countyName:"光明区"},{countyCode:"440309",countyName:"龙华区"},{countyCode:"440308",countyName:"盐田区"},{countyCode:"440304",countyName:"福田区"},{countyCode:"440312",countyName:"坪山区"},{countyCode:"440313",countyName:"大鹏新区"}]},{cityCode:"441900",cityName:"东莞市",county:[{countyCode:"441900-1",countyName:"东莞市"}]},{cityCode:"441400",cityName:"梅州市",county:[{countyCode:"441422",countyName:"大埔县"},{countyCode:"441423",countyName:"丰顺县"},{countyCode:"441426",countyName:"平远县"},{countyCode:"441481",countyName:"兴宁市"},{countyCode:"441427",countyName:"蕉岭县"},{countyCode:"441421",countyName:"梅县区"},{countyCode:"441424",countyName:"五华县"},{countyCode:"441402",countyName:"梅江区"}]},{cityCode:"440500-1",cityName:"汕头市",county:[{countyCode:"440515",countyName:"澄海区"},{countyCode:"440511",countyName:"金平区"},{countyCode:"440523",countyName:"南澳县"},{countyCode:"440513",countyName:"潮阳区"},{countyCode:"440514",countyName:"潮南区"},{countyCode:"440507",countyName:"龙湖区"},{countyCode:"440512",countyName:"濠江区"}]},{cityCode:"441600",cityName:"河源市",county:[{countyCode:"441602",countyName:"源城区"},{countyCode:"441621",countyName:"紫金县"},{countyCode:"441624",countyName:"和平县"},{countyCode:"441622",countyName:"龙川县"},{countyCode:"441625",countyName:"东源县"},{countyCode:"441623",countyName:"连平县"}]},{cityCode:"445300",cityName:"云浮市",county:[{countyCode:"445322",countyName:"郁南县"},{countyCode:"445381",countyName:"罗定市"},{countyCode:"445302",countyName:"云城区"},{countyCode:"445321",countyName:"新兴县"},{countyCode:"445323",countyName:"云安区"}]},{cityCode:"440400",cityName:"珠海市",county:[{countyCode:"440404",countyName:"金湾区"},{countyCode:"440403",countyName:"斗门区"},{countyCode:"440402",countyName:"香洲区"}]},{cityCode:"440700",cityName:"江门市",county:[{countyCode:"440785",countyName:"恩平市"},{countyCode:"440704",countyName:"江海区"},{countyCode:"440705",countyName:"新会区"},{countyCode:"440784",countyName:"鹤山市"},{countyCode:"440703",countyName:"蓬江区"},{countyCode:"440783",countyName:"开平市"},{countyCode:"440781",countyName:"台山市"}]},{cityCode:"441500",cityName:"汕尾市",county:[{countyCode:"441523",countyName:"陆河县"},{countyCode:"441502",countyName:"城区"},{countyCode:"441581",countyName:"陆丰市"},{countyCode:"441521",countyName:"海丰县"}]},{cityCode:"441200",cityName:"肇庆市",county:[{countyCode:"441203",countyName:"鼎湖区"},{countyCode:"441224",countyName:"怀集县"},{countyCode:"441283",countyName:"高要区"},{countyCode:"441284",countyName:"四会市"},{countyCode:"441202",countyName:"端州区"},{countyCode:"441225",countyName:"封开县"},{countyCode:"441226",countyName:"德庆县"},{countyCode:"441223",countyName:"广宁县"}]},{cityCode:"440200",cityName:"韶关市",county:[{countyCode:"440222",countyName:"始兴县"},{countyCode:"440281",countyName:"乐昌市"},{countyCode:"440203",countyName:"武江区"},{countyCode:"440233",countyName:"新丰县"},{countyCode:"440224",countyName:"仁化县"},{countyCode:"440232",countyName:"乳源瑶族自治县"},{countyCode:"440229",countyName:"翁源县"},{countyCode:"440282",countyName:"南雄市"},{countyCode:"440205",countyName:"曲江区"},{countyCode:"440204",countyName:"浈江区"}]},{cityCode:"440600",cityName:"佛山市",county:[{countyCode:"440606",countyName:"顺德区"},{countyCode:"440604",countyName:"禅城区"},{countyCode:"440607",countyName:"三水区"},{countyCode:"440608",countyName:"高明区"},{countyCode:"440605",countyName:"南海区"}]},{cityCode:"440100",cityName:"广州市",county:[{countyCode:"440114",countyName:"花都区"},{countyCode:"440111",countyName:"白云区"},{countyCode:"440115",countyName:"南沙区"},{countyCode:"440113",countyName:"番禺区"},{countyCode:"440183",countyName:"增城区"},{countyCode:"440112",countyName:"黄埔区"},{countyCode:"440106",countyName:"天河区"},{countyCode:"440184",countyName:"从化区"},{countyCode:"440105",countyName:"海珠区"},{countyCode:"440103",countyName:"荔湾区"},{countyCode:"440104",countyName:"越秀区"}]},{cityCode:"442000",cityName:"中山市",county:[{countyCode:"442000-1",countyName:"中山市"}]},{cityCode:"440800",cityName:"湛江市",county:[{countyCode:"440881",countyName:"廉江市"},{countyCode:"440804",countyName:"坡头区"},{countyCode:"440882",countyName:"雷州市"},{countyCode:"440823",countyName:"遂溪县"},{countyCode:"440803",countyName:"霞山区"},{countyCode:"440825",countyName:"徐闻县"},{countyCode:"440802",countyName:"赤坎区"},{countyCode:"440811",countyName:"麻章区"},{countyCode:"440883",countyName:"吴川市"}]},{cityCode:"441700",cityName:"阳江市",county:[{countyCode:"441781",countyName:"阳春市"},{countyCode:"441702",countyName:"江城区"},{countyCode:"441721",countyName:"阳西县"},{countyCode:"441723",countyName:"阳东区"}]},{cityCode:"440900",cityName:"茂名市",county:[{countyCode:"440902",countyName:"茂南区"},{countyCode:"440923",countyName:"电白区"},{countyCode:"440982",countyName:"化州市"},{countyCode:"440903",countyName:"茂港区 "},{countyCode:"440981",countyName:"高州市"},{countyCode:"440983",countyName:"信宜市"}]}]},{provinceCode:"810000",provinceName:"香港特别行政区",city:[{cityCode:"810000-1",cityName:"香港",county:[{countyCode:"810400",countyName:"离岛"},{countyCode:"810100",countyName:"香港岛"},{countyCode:"810300",countyName:"新界"},{countyCode:"810200",countyName:"九龙"}]}]}];t.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=f;var i=r(n(11)),o=r(n(23)),a=r(n(24));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(){function t(n,r){(0,o.default)(this,t),this.options=n,this.animation=e.createAnimation(u({},n)),this.currentStepAnimates={},this.next=0,this.$=r}return(0,a.default)(t,[{key:"_nvuePushAnimates",value:function(e,t){var n=this.currentStepAnimates[this.next],r={};if(r=n||{styles:{},config:{}},l.includes(e)){r.styles.transform||(r.styles.transform="");var i="";"rotate"===e&&(i="deg"),r.styles.transform+="".concat(e,"(").concat(t+i,") ")}else r.styles[e]="".concat(t);this.currentStepAnimates[this.next]=r}},{key:"_animateRun",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.$.$refs["ani"].ref;if(n)return new Promise((function(r,i){nvueAnimation.transition(n,u({styles:e},t),(function(e){r()}))}))}},{key:"_nvueNextAnimate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=e[n];if(i){var o=i.styles,a=i.config;this._animateRun(o,a).then((function(){n+=1,t._nvueNextAnimate(e,n,r)}))}else this.currentStepAnimates={},"function"===typeof r&&r(),this.isEnd=!0}},{key:"step",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.animation.step(e),this}},{key:"run",value:function(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((function(){"function"===typeof e&&e()}),this.$.durationTime)}}]),t}(),l=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],d=["opacity","backgroundColor"],h=["width","height","left","right","top","bottom"];function f(e,t){if(t)return clearTimeout(t.timer),new c(e,t)}l.concat(d,h).forEach((function(e){c.prototype[e]=function(){var t;return(t=this.animation)[e].apply(t,arguments),this}}))}).call(this,n(2)["default"])},,,,,,function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(869)),o=r(n(870)),a=r(n(871)),s={en:i.default,"zh-Hans":o.default,"zh-Hant":a.default};t.default=s},function(e){e.exports=JSON.parse('{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"}')},function(e){e.exports=JSON.parse('{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"}')},function(e){e.exports=JSON.parse('{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}')}]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/common/vendor.js.map
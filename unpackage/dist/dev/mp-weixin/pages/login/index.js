(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/index"],{59:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var i=o(n(60));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},60:function(e,t,n){"use strict";n.r(t);var o=n(61),i=n(63);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n(65);var r,s=n(32),c=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);c.options.__file="pages/login/index.vue",t["default"]=c.exports},61:function(e,t,n){"use strict";n.r(t);var o=n(62);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},62:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},a=!1,r=[];i._withStripped=!0},63:function(e,t,n){"use strict";n.r(t);var o=n(64),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},64:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){n.e("components/watch-login/watch-input").then(function(){return resolve(n(684))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/watch-login/watch-button").then(function(){return resolve(n(691))}.bind(null,n)).catch(n.oe)},r={data:function(){return{logoImage:"../../static/icon/ledao",adminData:"",passData:"",isRotate:!1,isFocus:!1,openId:"",unionId:"",sessionId:"",setCookie:"",userName:""}},components:{wInput:i,wButton:a},mounted:function(){this.getOpenId()},onShow:function(){e.hideHomeButton()},methods:{getOpenId:function(){var e=this;o.getStorage({key:"getOpenids",success:function(t){e.openId=t.data}}),o.getStorage({key:"getUnionId",success:function(t){e.unionId=t.data}})},startLogin:function(e){var t=this,n=this;if(this.isRotate)return!1;""!=this.adminData.length?""!=this.passData.length?(n.isRotate=!0,setTimeout((function(){n.isRotate=!1}),2e3),this.$requestSession("/weChatLoginUp","POST",{username:n.adminData,password:n.passData,rememberMe:!0}).then((function(e){console.log("res:======",e),o.setStorageSync("loginSuccess",!0),o.showLoading({title:"登录中"}),o.removeStorageSync("setCookie");var i=e.header["Set-Cookie"];console.log("cookie:========",i);var a=i.split(/,(?=[^,]*=)/),r=a.join(";");try{o.setStorageSync("setCookie",r)}catch(s){log.error("setStorageSync cookie fail")}t.$request("/saveOpenid","POST",{openId:n.openId,unionId:n.unionId},{"content-type":"application/x-www-form-urlencoded",cookie:o.getStorageSync("setCookie")}),0===e.data.code?(n.userName=e.data.data.roles,o.setStorageSync("loginName",e.data.data.loginName),o.setStorageSync("userName",e.data.data.userName),o.setStorageSync("isDailyRemind",e.data.data.isDailyRemind),n.userName.map((function(e){"documentAdmin"==e.roleKey?o.setStorageSync("documentAdmin",!0):o.setStorageSync("documentAdmin",!1)})),o.hideLoading(),setTimeout((function(){o.switchTab({url:"../home/index",success:function(){var e=getCurrentPages().pop();e&&e.onLoad()}})}),1e3)):(n.passData="",o.showToast({icon:"error",position:"bottom",title:"账号或密码错误",duration:3e3}))}))):o.showToast({icon:"none",position:"bottom",title:"请填写密码"}):o.showToast({icon:"none",position:"bottom",title:"用户名不能为空"})}}};t.default=r}).call(this,n(1)["default"],n(2)["default"])},65:function(e,t,n){"use strict";n.r(t);var o=n(66),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},66:function(e,t,n){}},[[59,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/index.js.map
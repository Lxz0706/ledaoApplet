(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/index"],{38:function(t,e,n){"use strict";(function(t){n(5);o(n(4));var e=o(n(39));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},39:function(t,e,n){"use strict";n.r(e);var o=n(40),i=n(42);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n(44);var r,s=n(11),c=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);c.options.__file="pages/login/index.vue",e["default"]=c.exports},40:function(t,e,n){"use strict";n.r(e);var o=n(41);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},41:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return r})),n.d(e,"recyclableRender",(function(){return a})),n.d(e,"components",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},a=!1,r=[];i._withStripped=!0},42:function(t,e,n){"use strict";n.r(e);var o=n(43),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},43:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){n.e("components/watch-login/watch-input").then(function(){return resolve(n(264))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/watch-login/watch-button").then(function(){return resolve(n(271))}.bind(null,n)).catch(n.oe)},a={data:function(){return{logoImage:"../../static/icon/ledao",adminData:"",passData:"",isRotate:!1,isFocus:!1,openId:"",unionId:"",sessionId:"",setCookie:"",userName:""}},components:{wInput:o,wButton:i},mounted:function(){this.getOpenId()},onShow:function(){wx.hideHomeButton()},methods:{getOpenId:function(){var e=this;t.getStorage({key:"getOpenids",success:function(t){e.openId=t.data}}),t.getStorage({key:"getUnionId",success:function(t){e.unionId=t.data}})},startLogin:function(e){var n=this,o=this;if(this.isRotate)return!1;""!=this.adminData.length?""!=this.passData.length?(o.isRotate=!0,setTimeout((function(){o.isRotate=!1}),2e3),this.$requestSession("/weChatLoginUp","POST",{username:o.adminData,password:o.passData,rememberMe:!0}).then((function(e){t.setStorageSync("loginSuccess",!0),t.showLoading({title:"登录中"}),t.removeStorageSync("setCookie");var i=e.header["Set-Cookie"],a=i.split(/,(?=[^,]*=)/),r=a.join(";");try{t.setStorageSync("setCookie",r)}catch(s){log.error("setStorageSync cookie fail")}n.$request("/saveOpenid","POST",{openId:o.openId,unionId:o.unionId},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}),0===e.data.code?(o.userName=e.data.data.roles,t.setStorageSync("loginName",e.data.data.loginName),t.setStorageSync("userName",e.data.data.userName),t.setStorageSync("isDailyRemind",e.data.data.isDailyRemind),o.userName.map((function(e){"documentAdmin"==e.roleKey?t.setStorageSync("documentAdmin",!0):t.setStorageSync("documentAdmin",!1)})),t.hideLoading(),setTimeout((function(){t.switchTab({url:"../home/index",success:function(){var t=getCurrentPages().pop();t&&t.onLoad()}})}),1e3)):(o.passData="",t.showToast({icon:"error",position:"bottom",title:"账号或密码错误",duration:3e3}))}))):t.showToast({icon:"none",position:"bottom",title:"请填写密码"}):t.showToast({icon:"none",position:"bottom",title:"用户名不能为空"})}}};e.default=a}).call(this,n(1)["default"])},44:function(t,e,n){"use strict";n.r(e);var o=n(45),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},45:function(t,e,n){}},[[38,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/index.js.map
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/valuation/index"],{642:function(t,e,i){"use strict";(function(t,e){var n=i(4);i(26);n(i(25));var a=n(i(643));t.__webpack_require_UNI_MP_PLUGIN__=i,e(a.default)}).call(this,i(1)["default"],i(2)["createPage"])},643:function(t,e,i){"use strict";i.r(e);var n=i(644),a=i(646);for(var u in a)["default"].indexOf(u)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(u);i(648);var r,o=i(32),c=Object(o["default"])(a["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);c.options.__file="pages/valuation/index.vue",e["default"]=c.exports},644:function(t,e,i){"use strict";i.r(e);var n=i(645);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},645:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return a})),i.d(e,"staticRenderFns",(function(){return r})),i.d(e,"recyclableRender",(function(){return u})),i.d(e,"components",(function(){return n}));try{n={uniEasyinput:function(){return i.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(i.bind(null,714))},uniDataSelect:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(i.bind(null,836))}}}catch(o){if(-1===o.message.indexOf("Cannot find module")||-1===o.message.indexOf(".vue"))throw o;console.error(o.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var t=this,e=t.$createElement;t._self._c},u=!1,r=[];a._withStripped=!0},646:function(t,e,i){"use strict";i.r(e);var n=i(647),a=i.n(n);for(var u in n)["default"].indexOf(u)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(u);e["default"]=a.a},647:function(t,e,i){"use strict";(function(t){var n=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(189)),u=n(i(191)),r={data:function(){return{itemType:"",itemStatus:"",building:"",area:"",building1:"",price1:"",building2:"",price2:"",itemCurrentPrice:"",itemMarketPrice:"",unitPrice:"",areaUnitPrice:"",latLon:"",floorSpace:"",areaSpace:"",building3:"",price3:"",building4:"",price4:"",num1:"",num2:"",valuation:"",valuationId:"",itemId:"",mainId:"",showTd:!1,typeValue:0,showId:!1,selectTypeList:[{value:0,text:"请选择类型"},{value:1,text:"住宅用房"},{value:2,text:"商业用房"},{value:3,text:"工业用房"}],statusValue:0,selectStatusList:[{value:0,text:"请选择状态"},{value:1,text:"成交"},{value:2,text:"流拍"}]}},onLoad:function(t){this.itemId=t.itemId,this.latLon=t.latLon,this.getJudicial()},methods:{getJudicial:function(){var e=this;return(0,u.default)(a.default.mark((function i(){return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.$request("/system/judicial/selectJudicial","POST",{itemId:e.itemId}).then((function(i){if("login"==i||500==i.code&&i.msg.includes("Authentication"))t.setStorageSync("loginSuccess",!1),setTimeout((function(){t.showToast({title:"登录已失效！",icon:"error",duration:3e3}),setTimeout((function(){t.switchTab({url:"/pages/home/index",success:function(){var t=getCurrentPages().pop();t&&t.onLoad()}})}),3e3)}),1e3);else{var n=i;n.forEach((function(t){e.floorSpace=t.floorSpace,e.itemCurrentPrice=t.itemCurrentPrice,e.itemMarketPrice=t.itemMarketPrice,"成交"===t.itemStatus?e.itemStatus=1:"流拍"==t.itemStatus&&(e.itemStatus=2),"住宅用房"===t.itemType?e.itemType=1:"商业用房"===t.itemType?e.itemType=2:"工业用房"===t.itemType&&(e.itemType=3,e.showTd=!0)}))}}));case 1:case"end":return i.stop()}}),i)})))()},typeChange:function(t){this.showTd=3===t,this.isEmpty(this.itemStatus)},statusChange:function(t){this.isEmpty(this.itemType)},getPrice:function(){var t,e,i=this.itemType,n=this.itemStatus,a=this.num1,u=this.num2,r=this.itemCurrentPrice,o=this.building,c=this.itemMarketPrice,s=this.building1,d=this.building2,l=this.price1,m=this.price2,p=this.area;this.isEmpty(a)&&(this.num1=1),this.isEmpty(u)&&(this.num2=1),3===i&&(o=p,e=s*l+d*m),this.isEmpty(e)&&(e=0),1===n?t=this.isEmpty(c)?(r-e)/o:r>c?(r*a-e)/o:(r-e)/o:2===n&&(t=r>=c?(.8*r-e)/o:(.56*c-e)/o),3===i?(this.unitPrice=t,this.areaUnitPrice=t):this.unitPrice=t,this.addValuation()},getValuationPrice:function(){this.addMain();var t,e,i=this.itemType,n=this.floorSpace,a=this.num1,u=this.num2,r=this.areaSpace,o=this.building3,c=this.building4,s=this.price3,d=this.price4;e=3===i?this.areaUnitPrice:this.unitPrice,this.isEmpty(a)&&(a=1),this.isEmpty(u)&&(u=1),t=3===i?r*a*e+(o*s+c*d):n*a*u*e,this.valuation=t,this.updateValuationModel()},isEmpty:function(t){return"undefined"==typeof t||null==t||""==t},addValuation:function(){var e=this;return(0,u.default)(a.default.mark((function i(){return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.$request("/system/valuationModel/add","POST",{itemType:e.itemType,itemStatus:e.itemStatus,itemCurrentPrice:e.itemCurrentPrice,num1:e.num1,num2:e.num2,building:e.building,itemMarketPrice:e.itemMarketPrice,building1:e.building1,building2:e.building2,price1:e.price1,price2:e.price2,area:e.area,unitPrice:e.unitPrice,areaUnitPrice:e.areaUnitPrice},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}).then((function(t){e.valuationId=t.data}));case 1:case"end":return i.stop()}}),i)})))()},updateValuationModel:function(){var e=this;return(0,u.default)(a.default.mark((function i(){return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.$request("/system/valuationModel/edit","POST",{valuationId:e.valuationId,mainId:e.mainId,num1:e.num1,num2:e.num2,floorSpace:e.floorSpace,building3:e.building3,building4:e.building4,price3:e.price3,price4:e.price4,areaSpace:e.areaSpace,valuation:e.valuation},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}).then((function(t){e.valuationId=t.data}));case 1:case"end":return i.stop()}}),i)})))()},addMain:function(){var e=this;this.$request("/system/valuationModel/addMain","POST",{itemType:this.itemType,itemStatus:this.itemStatus},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}).then((function(t){e.mainId=t.data}))}}};e.default=r}).call(this,i(2)["default"])},648:function(t,e,i){"use strict";i.r(e);var n=i(649),a=i.n(n);for(var u in n)["default"].indexOf(u)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(u);e["default"]=a.a},649:function(t,e,i){}},[[642,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/valuation/index.js.map
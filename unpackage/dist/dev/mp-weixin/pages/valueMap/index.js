(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/valueMap/index"],{631:function(t,e,i){"use strict";(function(t,e){var n=i(4);i(26);n(i(25));var s=n(i(632));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i(1)["default"],i(2)["createPage"])},632:function(t,e,i){"use strict";i.r(e);var n=i(633),s=i(635);for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i(638),i(640);var a,r=i(32),u=Object(r["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"277815a7",null,!1,n["components"],a);u.options.__file="pages/valueMap/index.vue",e["default"]=u.exports},633:function(t,e,i){"use strict";i.r(e);var n=i(634);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},634:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return s})),i.d(e,"staticRenderFns",(function(){return a})),i.d(e,"recyclableRender",(function(){return o})),i.d(e,"components",(function(){return n}));try{n={wangdingPickerAddress:function(){return Promise.all([i.e("common/vendor"),i.e("components/wangding-pickerAddress/wangding-pickerAddress")]).then(i.bind(null,830))},uniEasyinput:function(){return i.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(i.bind(null,714))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var s=function(){var t=this,e=t.$createElement;t._self._c},o=!1,a=[];s._withStripped=!0},635:function(t,e,i){"use strict";i.r(e);var n=i(636),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},636:function(t,e,i){"use strict";(function(t,n){var s=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=s(i(189)),r=s(i(191)),u=s(i(637)),c={data:function(){return{markers:[],currLoca:{},circles:[],list:[],before_school:"",typeList:[],before_type:"",type:"",radius:"",cireclePoint:"",address:"",viewshow:!1,itemTitle:"",itemType:"",itemAddress:"",itemLink:"",itemCurrentprice:"",itemEndTime:"",tags:"",link:"",judicialList:[],judicialName:"",before_judicial:"",itemCity:"",city:"请选择地址",title:"Hello",itemId:"",latLon:""}},onLoad:function(){o=new u.default({key:"4PLBZ-Z77WI-WAXG5-5CGO7-X6JYZ-ERBD4"}),this.init()},computed:{mapheight:function(){var t="";return t=this.bottomData?this.upTop?"50px":"200px":"90vh",t},coverbottom:function(){var t="";return t=this.bottomData?"20rpx":"100rpx",t}},methods:{onchange:function(t){this.city=t.data.join(""),this.itemCity=t.data[1]},tap:function(){this.viewshow=!1},init:function(){var e=this;e.getValueMapGap(),e.getType(),e.getJudicialList(),t.getLocation({geocode:!0,type:"gcj02",success:function(t){return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},complete:function(t){return(0,r.default)(a.default.mark((function i(){return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:"getLocation:ok"==t.errMsg?(e.currLoca=t,e.cireclePoint=t.longitude+","+t.latitude,o.reverseGeocoder({location:{longitude:t.longitude,latitude:t.latitude},success:function(t){e.address=t.result.address},fail:function(t){console.log(t,"fail")}})):e.currLoca={longitude:116.39747,latitude:39.908823};case 1:case"end":return i.stop()}}),i)})))()}})},getLocal:function(t,e){o.reverseGeocoder({location:{longitude:t,latitude:e},success:function(t){return t.result.address},fail:function(t){console.log(t,"fail")}})},getValueMapGap:function(){var e=this;this.viewshow=!1,this.$request("/system/judicial/getValueMapGap","POST",{},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}).then((function(t){e.list=t}))},getType:function(){var e=this;this.viewshow=!1,this.$request("/system/judicial/getType","POST",{},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}).then((function(t){e.typeList=t}))},getJudicialList:function(){var e=this;this.viewshow=!1,this.$request("/system/judicial/getJudicialList","POST",{},{"content-type":"application/x-www-form-urlencoded",cookie:t.getStorageSync("setCookie")}).then((function(t){e.judicialList=t}))},getList:function(){var e=this;return(0,r.default)(a.default.mark((function i(){var n;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e,n.viewshow=!1,""!==n.itemCity&&null!==n.itemCity||t.showToast({title:"请选择地区",duration:2e3,icon:"none"}),t.showLoading({title:"加载中..."}),n.$request("/system/judicial/valuationmapList","POST",{itemType:n.type,radius:n.radius,circlePoint:n.cireclePoint,itemStatus:n.judicialName,itemCity:n.itemCity}).then((function(e){var i=e,s=[];i.forEach((function(t){var e="../../static/icon/dw.png";e="住宅用房"===t.itemType?"../../static/icon/zzyf.png":"商业用房"===t.itemType?"../../static/icon/syyf.png":"工业用房"===t.itemType?"../../static/icon/gyyf.png":"其他用房"===t.itemType?"../../static/icon/qtyf.png":"土地"===t.itemType?"../../static/icon/td.png":"../../static/icon/dw.png";var i={id:parseInt(t.id),latitude:t.latitude,longitude:t.longitude,width:20,height:20,zINdex:t.id+1,itemTitle:t.itemTitle,itemType:t.itemType,itemAddress:t.itemAddress,itemLink:t.itemLink,itemCurrentprice:t.itemCurrentprice,itemEndTime:t.itemEndTime,tags:t.tags,itemId:t.itemId,latLon:t.latLon,iconPath:e};s.push(i)}));var o={};o.lat=n.latitude,o.lng=n.longitude,n.markers=s,setTimeout((function(){t.hideLoading()}),4e3)}));case 5:case"end":return i.stop()}}),i)})))()},fetchShopDetail:function(e){var i=this;n.login({success:function(n){n.code&&i.$request("/system/judicial/decodeUserInfo","GET",{code:n.code}).then((function(n){0===n.code?i.showTest(e):t.showToast({title:"未关注公众号！",icon:"error",duration:5e3})}))}})},showTest:function(t){var e=this;return(0,r.default)(a.default.mark((function i(){var n;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.viewshow=!0,n=e.markers[e.markers.findIndex((function(e){return e.id===t.detail.markerId}))],e.itemTitle=n.itemTitle,e.itemType=n.itemType,e.itemAddress=n.itemAddress,e.itemLink=n.itemLink,e.itemCurrentprice=n.itemCurrentprice,e.itemEndTime=n.itemEndTime,e.tags=n.tags,e.itemId=n.itemId,e.latLon=n.latLon;case 11:case"end":return i.stop()}}),i)})))()},formSubmit:function(){this.viewshow=!1;var t=this;""==this.radius&&(this.radius=1e3),o.geocoder({address:t.itemCity+t.address,success:function(e){var i={},n=[];e=e.result;i.id=1,i.latitude=e.location.lat,i.longitude=e.location.lng,i.width=30,i.height=20,i.radius=parseInt(t.radius),i.strokeWidth=2,i.fillColor="#e6060a6a",n.push(i),t.currLoca={longitude:e.location.lng,latitude:e.location.lat},t.circles=n,t.latitude=e.location.lat,t.longitude=e.location.lng,t.cireclePoint=e.location.lng+","+e.location.lat},fail:function(t){console.error(t)},complete:function(t){}})},schoolChange:function(t){this.viewshow=!1;var e=t.target.value;if(this.before_school=this.list[e].waterWorkName,this.radius=this.list[e].url,this.formSubmit(),""!==this.type&&""!==this.judicialName)if(""==this.address){var i={},n=[];i.id=1,i.longitude=parseInt(this.longitude),i.latitude=parseInt(this.latitude),i.width=30,i.height=20,i.radius=parseInt(this.radius),i.strokeWidth=2,i.fillColor="#e6060a6a",n.push(i),this.currLoca={longitude:this.longitude,latitude:this.latitude},this.circles=n,this.cireclePoint=this.longitude+","+this.latitude,this.getList()}else this.getList()},typeChange:function(t){this.viewshow=!1;var e=t.target.value;if(this.before_type=this.typeList[e].url,this.type=this.typeList[e].url,""!==this.radius&&""!==this.judicialName)if(""==this.address){var i={},n=[];i.id=1,i.longitude=parseInt(this.longitude),i.latitude=parseInt(this.latitude),i.width=30,i.height=20,i.radius=parseInt(this.radius),i.strokeWidth=2,i.fillColor="#e6060a6a",n.push(i),this.currLoca={longitude:this.longitude,latitude:this.latitude},this.circles=n,this.cireclePoint=this.longitude+","+this.latitude,this.getList()}else this.getList()},judicialChange:function(t){this.viewshow=!1;var e=t.target.value;if(this.before_judicial=this.judicialList[e].judicialName,this.judicialName=this.judicialList[e].url,""!==this.radius&&""!==this.type)if(""==this.address){var i={},n=[];i.id=1,i.longitude=parseInt(this.longitude),i.latitude=parseInt(this.latitude),i.width=30,i.height=20,i.radius=parseInt(this.radius),i.strokeWidth=2,i.fillColor="#e6060a6a",n.push(i),this.currLoca={longitude:this.longitude,latitude:this.latitude},this.circles=n,this.cireclePoint=this.longitude+","+this.latitude,this.getList()}else this.getList()},copyLink:function(e){t.setClipboardData({data:e,success:function(e){t.showToast({title:"复制成功"})}})},toValuation:function(e,i){t.redirectTo({url:"/pages/valuation/index?itemId="+e+"&latLon="+JSON.stringify(i),fail:function(t){console.log(t)}})}}};e.default=c}).call(this,i(2)["default"],i(1)["default"])},638:function(t,e,i){"use strict";i.r(e);var n=i(639),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},639:function(t,e,i){},640:function(t,e,i){"use strict";i.r(e);var n=i(641),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},641:function(t,e,i){}},[[631,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/valueMap/index.js.map